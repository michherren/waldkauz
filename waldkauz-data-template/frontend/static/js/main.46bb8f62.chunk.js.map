{"version":3,"sources":["utils/tsxUtils.tsx","utils/queryHelper.ts","components/pages/reassign-partitions/components/BrokerList.tsx","state/supportedFeatures.ts","components/misc/ConfigList.module.scss","utils/arrayExtensions.ts","utils/featureDetection.ts","components/misc/ErrorModal.tsx","components/pages/topics/DeleteRecordsModal/DeleteRecordsModal.module.scss","components/misc/Wizard.module.scss","utils/fetchWithTimeout.ts","components/misc/tabs/Tabs.tsx","utils/formatters/ConfigValueFormatter.ts","components/misc/common.tsx","components/misc/NoClipboardPopover.tsx","components/pages/connect/ConnectorBoxCard.module.scss","components/misc/BoxCard.module.scss","components/misc/KowlJsonView.tsx","state/ui.ts","components/misc/HideStatisticsBarButton.tsx","components/pages/topics/Tab.Config.tsx","components/misc/ConfigList.tsx","components/pages/topics/Tab.Acl/AclList.tsx","utils/filterableDataSource.ts","components/misc/KowlTimePicker.tsx","components/pages/reassign-partitions/ReassignPartitions.tsx","components/pages/reassign-partitions/components/StatisticsBars.tsx","utils/numberExtensions.ts","components/pages/reassign-partitions/components/BandwidthSlider.tsx","components/misc/tabs/Tabs.module.scss","components/pages/reassign-partitions/logic/utils.ts","components/pages/connect/CreateConnector.module.scss","components/pages/topics/Tab.Messages/PreviewSettings.tsx","assets/globExample.png","state/uiState.ts","utils/utils.ts","utils/filterHelper.ts","components/pages/consumers/Modals.tsx","state/appGlobal.ts","utils/extensions.ts","utils/env.ts","state/restInterfaces.ts","utils/animationProps.tsx","utils/jsonUtils.ts","components/misc/KowlTable.module.scss","components/pages/topics/Topic.Details.tsx","components/pages/topics/QuickInfo.tsx","components/pages/topics/Tab.Consumers.tsx","components/pages/topics/Tab.Docu.tsx","components/pages/topics/Tab.Messages/index.tsx","components/misc/KowlJsonView.module.scss","assets/filter-example-1.png","assets/filter-example-2.png","components/pages/topics/DeleteRecordsModal/DeleteRecordsModal.tsx","components/pages/topics/Tab.Partitions.tsx","components/misc/SearchBar.tsx","components/pages/reassign-partitions/Step2.Brokers.tsx","components/pages/reassign-partitions/Step3.Review.tsx","components/misc/Card.tsx","components/pages/reassign-partitions/logic/reassignLogic.ts","components/pages/reassign-partitions/components/ActiveReassignments.tsx","components/pages/reassign-partitions/logic/reassignmentTracker.ts","components/misc/HiddenRadioList.module.scss","components/pages/topics/Topic.List.tsx","components/misc/ShortNum.tsx","components/pages/consumers/Group.Details.tsx","components/pages/consumers/Group.List.tsx","components/pages/brokers/Broker.List.tsx","components/pages/admin/Admin.RoleBindings.tsx","components/pages/admin/Admin.Roles.tsx","components/pages/admin/Admin.Users.tsx","components/pages/admin/AdminPage.tsx","components/pages/schemas/Schema.List.tsx","components/pages/schemas/Schema.Details.tsx","components/pages/acls/Acl.List.tsx","assets/connectors/elastic.svg","assets/connectors/mssql.png","assets/connectors/mysql.svg","assets/connectors/debezium.png","assets/connectors/confluent.png","assets/connectors/apache.svg","assets/connectors/hdfs.png","assets/connectors/jdbc.png","assets/connectors/amazon-s3.png","assets/connectors/postgres.png","assets/connectors/salesforce.png","assets/connectors/google-bigquery.svg","assets/connectors/google-pub-sub.svg","assets/connectors/snowflake.png","assets/connectors/cassandra.png","assets/connectors/db2.png","assets/connectors/twitter.svg","assets/connectors/neo4j.svg","components/pages/connect/helper.tsx","assets/connectors/servicenow.png","assets/connectors/mongodb.png","components/pages/connect/Overview.tsx","components/pages/connect/Connector.Details.tsx","components/pages/connect/Cluster.Details.tsx","components/misc/Wizard.tsx","components/misc/HiddenRadioList.tsx","components/misc/BoxCard.tsx","components/pages/connect/ConnectorBoxCard.tsx","components/pages/connect/dynamic-ui/List.tsx","components/pages/connect/dynamic-ui/PropertyComponent.tsx","components/pages/connect/dynamic-ui/PropertyGroup.tsx","components/pages/connect/dynamic-ui/components.tsx","components/misc/KowlEditor.tsx","components/pages/connect/CreateConnector.tsx","components/pages/quotas/Quotas.List.tsx","components/routes.tsx","components/misc/ErrorDisplay.tsx","assets/logo2.png","components/misc/ErrorBoundary.tsx","components/misc/UserPreferences.tsx","components/misc/UserButton.tsx","assets/login_wave.svg","utils/svg/OktaLogo.tsx","components/misc/login.tsx","components/misc/login-complete.tsx","components/App.tsx","components/pages/reassign-partitions/components/IndeterminateCheckbox.tsx","components/pages/reassign-partitions/Step1.Partitions.tsx","index.tsx","components/pages/Page.ts","utils/LazyMap.ts","state/backendApi.ts","components/misc/KowlTable.tsx","components/pages/topics/Tab.Messages/styles.module.scss"],"names":["thousandsSeperator","toLocaleString","numberToThousandsString","n","parts","split","result","i","length","last","push","Fragment","className","TimestampDisplay","observer","this","props","ts","unixEpochSecond","format","DebugTimerStore","Instance","useSeconds","Date","toUTCString","toLocaleDateString","toLocaleTimeString","toString","prettyMilliseconds","now","compact","Component","DefaultQuickTableOptions","tableClassName","undefined","keyAlign","valueAlign","gapWidth","gapHeight","keyStyle","valueStyle","tableStyle","QuickTable","data","options","entries","Array","isArray","map","ar","key","value","Object","k","v","o","assign","showVerticalGutter","classNames","joinStr","style","obj","textAlign","React","isValidElement","toSafeString","minWidth","width","padding","paddingBottom","x","String","toJson","ObjToKv","style_flexColumn","display","flexDirection","Label","p","useState","simpleUniqueId","text","id","child","children","newChild","divStyle","htmlFor","textSuffix","findPopupContainer","current","container","parentElement","includes","clientWidth","clientHeight","InfoText","overlay","maxWidth","align","tooltip","size","iconSize","gap","color","iconColor","icon","boxSizing","height","marginLeft","transform","tooltipOverText","trigger","mouseLeaveDelay","getPopupContainer","placement","alignItems","OptionGroup","radioGroup","Group","onChange","e","target","kv","Button","label","RadioOptionGroup","disabled","fontWeight","paddingLeft","verticalAlign","title","whiteSpace","subTitle","content","showContent","animProps","animProps_radioOptionGroup","marginTop","StatusIndicator","hide","timerHandle","lastUpdateTimestamp","mobxSink","lastPropsJson","lastProps","message","config","top","showWaitingText","setInterval","makeObservable","customRender","curJson","clearInterval","call","marginBottom","progressStyle","percent","fillFactor","showInfo","status","lineHeight","statusBarStyle","statusText","progressTextStyle","progressText","bytesConsumed","messagesConsumed","open","identityKey","duration","type","fontFamily","fontSize","observable","LayoutBypass","justifyContent","positionContentAbsolute","position","innerSkeleton","loading","active","paragraph","rows","DefaultSkeleton","div","margin","ellipsisSpanStyle","textOverflow","overflow","Ellipsis","Code","nowrap","parseOptions","arrayFormat","parseBooleans","parseNumbers","queryToObj","str","queryString","parse","editQuery","editFunction","urlParams","window","location","search","stringify","appGlobal","history","replace","BrokerList","api","clusterInfo","setImmediate","refreshCluster","leaderId","sortedIds","offlineIds","addedIds","removedIds","partition","leader","replicas","distinct","sort","a","b","offlineReplicas","brokerIds","brokers","brokerMap","get","tags","broker","isAdding","isRemoving","tag","additionalContent","marginRight","BrokerTooltip","tooltipSuffix","cursor","t","brokerId","tooltipContentEntries","borderBottom","address","rack","tooltipContent","Feature","isSupported","f","c","endpointCompatibility","endpoints","method","endpoint","featureErrors","ClusterConfig","ConsumerGroups","GetReassignments","PatchReassignments","PatchGroup","DeleteGroup","DeleteRecords","GetQuotas","when","features","clone","removeMatch","removeAll","names","join","console","warn","computed","module","exports","prototype","remove","index","indexOf","splice","selector","count","first","reduce","pre","cur","sum","min","Number","POSITIVE_INFINITY","max","NEGATIVE_INFINITY","minBy","bestIndex","bestVal","maxBy","any","all","groupBy","keySelector","Map","forEach","item","collection","set","groupInto","items","filterNull","filter","filterFalsy","Boolean","updateWith","newData","same","removed","added","except","isEqual","other","Set","has","add","pushDistinct","elements","s","intersection","thisSet","results","otherSet","genericJoin","getSeparator","separator","toMap","computeKey","computeValue","r","isClipboardAvailable","navigator","clipboard","ErrorModal","visible","isVisible","onOk","onClose","afterClose","cancelButtonProps","bodyStyle","paddingTop","maxHeight","centered","maskClosable","closeIcon","transitionName","animate","maskTransitionName","paddingRight","alignSelf","overflowY","errorModals","nextErrorKey","showErrorModal","wordBreak","action","next","renderErrorModals","RestTimeoutError","m","setPrototypeOf","Error","fetchWithTimeout","url","timeoutMs","requestPromise","fetch","timeoutPromise","Promise","_","reject","setTimeout","toFixed","race","renderContent","tabs","tab","find","Tabs","selectedTabKey","selectedTab","setSelectedTab","styles","navigationList","href","encodeURIComponent","onClick","preventDefault","formatConfigValue","name","formatType","suffix","num","isNaN","Math","pow","endsWith","MAX_SAFE_INTEGER","prettyBytesOrNA","ext","msFactor","ms","verbose","MAX_VALUE","useBreakpoint","Grid","renderCount","RenderTrap","currentCount","Section","dragBoxStyle","right","zIndex","placeContent","borderRadius","background","opacity","screens","bounds","handle","userSelect","screen","constantValue","flexGrow","DEFAULT_TABLE_PAGE_SIZE","makePaginationConfig","pageSize","hideOnSinglePage","showSizeChanger","pageSizeOptions","showTotal","total","sortField","field","left","localeCompare","numeric","range","start","end","updateDialogOpen","UpdatePopup","serverVersion","uiState","sha","branch","updatePromtHiddenUntil","getTime","curTimestamp","env","REACT_APP_KOWL_TIMESTAMP","serverTimestamp","isFinite","log","serverDate","serverVersionInfo","localTimestamp","localDate","localVersion","Modal","info","mask","okText","reload","onCancel","renderLogDirSummary","summary","hint","totalSizeBytes","WarningToolip","placeItems","bottom","popoverContent","NoClipboardPopover","arrowPointAtCenter","ctrlDown","document","addEventListener","ctrlKey","clickPos","y","timerId","KowlJsonView","restProps","settings","uiSettings","jsonViewer","mergedStyles","setVisible","containerRef","useRef","ref","onMouseDownCapture","Element","classList","contains","parentPos","getClientRects","clientX","clientY","clearTimeout","overlayClassName","tooltipTransformFix","points","targetOffset","offset","adjustX","adjustY","displayDataTypes","displayObjectSize","enableClipboard","collapseStringsAfterLength","maxStringLength","groupArraysAfterLength","indentWidth","iconStyle","collapsed","onSelect","writeText","success","TopicOffsetOrigin","settingsName","FilterEntry","randomId","TopicDetailsSettings","topicName","offsetOrigin","startOffset","startTimestamp","startTimestampWasSetByUser","partitionID","maxResults","filtersEnabled","filters","sideBarOpen","selectedClusterIndex","perTopicSettings","topicDetailsActiveTabKey","topicDetailsShowStatisticsBar","brokerList","hideEmptyColumns","quickSearch","valueDisplay","propsFilter","propsOrder","configTable","reassignment","activeReassignments","pageSizeSelect","pageSizeBrokers","pageSizeReview","maxReplicationTraffic","topicList","hideInternalTopics","consumerGroupList","consumerGroupDetails","showStatisticsBar","aclSearchParams","AclRequestDefault","quotasList","schemaList","schemaDetails","viewMode","kafkaConnect","clusters","connectors","tasks","clusterDetails","clusterDetailsPlugins","connectorDetails","userDefaults","paginationPosition","storedSettingsJson","localStorage","getItem","loadedSettings","JSON","assignDeep","previewColumnFields","previewTimestamps","previewTags","isPreviewTagV1","newTag","isActive","pattern","customName","searchInMessageHeaders","searchInMessageKey","searchInMessageValue","autorun","touch","json","setItem","delay","HideStatisticsBarButton","handleClick","Text","Typography","TopicConfiguration","renderedError","handleError","ConfigDisplaySettings","TopicConfigList","configEntries","topicConfig","topic","slice","v1","isExplicitlySet","error","renderKafkaError","desc","strong","description","code","onRefresh","flexWrap","rowGap","Friendly","Raw","None","Alphabetical","FavoritePopover","configEntry","favs","topicSettings","favConfigEntries","isFav","toggleFav","infoEntry","topicConfigInfo","Name","popupContent","Description","checked","ConfigList","columns","dataIndex","render","record","mouseEnterDelay","nameText","isSensitive","isReadOnly","configFlags","twoToneColor","toLowerCase","filterType","toDisplay","optionClassName","sorter","sourceHeader","source","configEntryTable","dataSource","pagination","defaultPageSize","expandable","childrenColumnName","indentSize","searchColumnIndex","isRowMatch","row","regex","test","rowKey","rowClassName","overidden","default","acl","paginationConfig","resources","store","acls","aclResources","res","rule","flat","eqKey","flatResourceList","defaultSortOrder","showIcon","isAuthorizerEnabled","FilterableDataSource","debounceMilliseconds","reactionDisposer","update","bind","_lastFilterText","resultData","transaction","filterText","KowlTimePicker","timestampUtcMs","valueUtcMs","moment","utc","isLocalTimeMode","local","showTime","allowClear","renderExtraFooter","footer","valueOf","Step","Steps","reassignmentTracker","ReassignmentTracker","ReassignPartitions","pageConfig","refreshTopicConfigsTimer","refreshTopicConfigsRequestsInProgress","autoScrollReactionDisposer","resetSelectionOnErrorsReactionDisposer","addBreadcrumb","refreshData","removeThrottleFromTopics","oriOnNextPage","onNextPage","oriOnPrevPage","onPreviousPage","startRefreshingTopicConfigs","stopRefreshingTopicConfigs","refreshTopicConfigs","currentStep","scrollTo","selectedBrokerIds","selectedTopicPartitions","values","partitionSelection","reset","resetSelectionAndPage","force","refreshTopics","refreshPartitions","refreshPartitionReassignments","stop","topics","topicPartitions","partitionReassignments","partitionCountLeaders","partitionCount","partitionCountOnlyReplicated","replicationFactor","step","steps","nextButtonCheck","nextButton","isEnabled","nextButtonEnabled","nextButtonHelp","throttledTopics","topicsWithThrottle","onRemoveThrottleFromTopics","topicsWithMoves","assignments","reassignmentRequest","reassignPartitions","backButton","requestInProgress","autoFocus","scrollTop","showSelectionWarning","notification","scrollToTop","targetBrokers","apiTopicPartitions","partitions","validOnly","hasErrors","apiData","topicAssignments","computeReassignments","topicAssignmentsToReassignmentRequest","request","startReassignment","setTrafficLimit","msg","Message","startPartitionReassignment","response","errors","reassignPartitionsResponses","partErrors","errorMessage","startedCount","errorCode","setSuccess","setReassignError","setError","maxBytesPerSecond","round","topicReplicas","leaderReplicas","followerReplicas","partitionId","brokersOld","brokersNew","sourceBroker","newBrokers","targetBroker","setReplicationThrottleRate","patchedConfigs","setLoading","setThrottledReplicas","IsDev","stack","partialTopicConfigs","topicConfigs","newThrottledTopics","topicDescriptions","inProgress","topicPartitionsInProgress","confirm","textDecoration","okButtonProps","danger","baseText","resetThrottledReplicas","apiTopics","apiPartitions","partitionSelectionToTopicPartitions","maxRf","computeMovedReplicas","PageComponent","rp","keys","maximumSelectedReplicationFactor","computeWarning","allBrokers","allRacks","selectedBrokers","selectedRacks","selectedRack","SelectionInfoBar","allSelectedPartitions","selectedPartitions","flatMap","totalPartitionsCount","involvedBrokers","replicaSize","relevantPartitions","lerp","to","clamp","BandwidthSlider","flex","marks","2","3","6","9","12","included","tipFormatter","log10","allPartitions","partitionsWithMoves","oldBrokers","changedLeader","anyChanges","brokersBefore","brokersAfter","numAddedBrokers","numRemovedBrokers","topicAssignment","globHelp","src","alt","PreviewSettings","struct","messages","getAllMessageKeys","propertyName","currentKeys","getShowDialog","allCurrentKeys","getFreeId","onDragEnd","provided","destination","arrayMove","mutate","droppableId","droppableProvided","droppableSnapshot","innerRef","draggableId","draggableProvided","draggableSnapshot","draggableProps","dragHandleProps","onRemove","placeholder","previewTagsCaseSensitive","previewMultiResultMode","previewDisplayMode","FilterOutlined","setShowDialog","closable","PreviewTagSettings","flexBasis","autoComplete","spellCheck","defaultActiveFirstOption","onSearch","filterOption","inputValue","option","toUpperCase","notFoundContent","getPreviewTags","targetObject","caseSensitive","searchPath","parseJsonPath","trim","foundProperties","collectElements2","pathElement","wildcardToRegex","RegExp","prop","fullPath","path","pathLengthDiff","pathA","pathB","ignorePunctuation","sensitivity","displayName","splitChars","pos","match","indexOfMany","segment","matches","indices","smallest","input","output","expected","hasError","joined","regexEscape","regexPattern","shallow","_pageTitle","pathName","substr","_currentTopicName","TopicSettings","currentTopicName","TimeSince","timestamp","mobxTrigger","increaseSec","increaseFrame","secondCounter","frame","instance","refreshCounter","alwaysChanging","hasOwnProperty","existing","containsIgnoreCase","Intl","Collator","usage","collectElements","isMatch","returnFirstMatch","ctx","currentPath","returnFirstResult","collectElementsRecursive","clonedPath","childResult","pop","currentExplore","nextExplore","targetList","foundProp","currentObj","allNested","currentFullPath","existingPaths","getAllKeysRecursive","payload","pathToHere","cullText","substring","prettyBytes","parseFloat","prettyBytesOriginal","prettyMillisecondsOriginal","between","isK","isM","prettyNumber","isInfinite","toK","toM","toG","random","prefix","titleCase","hideFunc","mainLayout","getElementById","behavior","targetId","anchor","rect","getBoundingClientRect","decodeBase64","base64","atob","bytes","Uint8Array","charCodeAt","TextDecoder","decode","wrapFilterFragment","filterFragment","sanitizeString","char","EditOffsetsModal","lastOffsets","lastVisible","offsetsByTopic","autorunDisposer","offsets","group","updateVisible","g","single","groupId","page","page1","page2","isLoadingTimestamps","selectedOption","showSearch","otherConsumerGroups","selectedGroup","defaultValue","otherGroupCopyMode","firstTopic","bordered","defaultActiveKey","Panel","header","showSorterTooltip","newOffset","sortOrder","ColAfter","selectedTime","op","requiredTopics","propOffsets","getTopicOffsetsByTimestamp","offsetsForTimestamp","responseOffset","consumerGroups","getOffset","topicOffsets","partitionOffsets","groupOffset","currentOffsets","alreadyExists","otherFlat","disableContinue","disableNav","isApplyingEdit","setPage","onApplyEdit","refreshConsumerGroups","createEditRequest","editConsumerGroupOffsets","editResponse","refreshConsumerGroup","val","waterMarkHigh","waterMarkLow","fontStyle","DeleteOffsetsModal","mode","singleTopic","singlePartition","onDeleteOffsets","deleteRequest","createDeleteRequest","deleteConsumerGroupOffsets","deleteResponse","cleanOffsets","_history","h","listen","pathname","removePrefix","startsWith","removeSuffix","process","isDev","REACT_APP_DEV_HINT","IsBusiness","REACT_APP_BUSINESS","AppName","basePathRaw","basePath","basePathNo","basePathS","getBuildDate","envVarDebugObj","envVarDebugAr","addProp","isApiError","statusCode","AclResourceType","AclResourcePatternTypeFilter","AclOperation","AclPermissionType","WrappedError","apiError","u","URL","TopicActions","ResourcePatternType","QuotaType","SchemaType","JsonFieldType","ConfigResourceType","AlterConfigOperation","resourceType","AclResourceAny","resourceName","resourcePatternTypeFilter","AclPatternAny","principal","host","operation","AclOperationAny","permissionType","AclPermissionAny","ConnectorState","PropertyImportance","DataType","PropertyWidth","dx100em","dist","transition","ease","initial","exit","animProps_span_searchResult","animProps_span_messagesStatus","MotionAlways","MotionDiv","positionTransition","layoutTransition","MotionSpan","span","overrideAnimProps","seen","space","clear","TopicTabIds","TopicTab","topicGetter","requiredPermission","titleText","contentFunc","disableHooks","allowedActions","replacementTitle","TopicDetails","topicTabs","setTabPage","activeKey","loc","hash","mkDocuTip","warnIcon","refreshTopicData","topicAcls","aclPageSize","userData","canListAcls","documentation","messagesFor","refreshTopicPermissions","refreshTopicConsumers","refreshPartitionsForTopic","refreshTopicConfig","refreshTopicDocumentation","refreshTopicAcls","computeTabId","selectedTabId","stopMessageSearch","topicNotFound","addBaseFavs","isDisabled","cleanupPolicy","extra","goBack","StatsSeparator","TopicQuickInfoStatistic","statsAr","logDirSummary","messageSum","newConfig","filterTopicConfig","configStats","favName","TopicConsumers","consumers","topicConsumers","isLoading","renderEmpty","onRow","consumerPageSize","allowedProtocols","sanitizeUrl","uri","baseTransformed","baseUriTransformer","cleanedUri","toLocaleLowerCase","TopicDocumentation","components","node","inline","exec","vs","customStyle","border","language","docu","topicDocumentation","errorNotConfigured","markdown","errorNotFound","errorEmpty","remarkPlugins","remarkGfm","remarkEmoji","skipHtml","transformLinkUri","renderDocuError","listStyle","body","rel","Option","Select","InputGroup","Input","TopicMessageView","messagesPageSize","messageSource","isFilterMatch","autoSearchReaction","quickSearchReaction","currentSearchRun","SearchControlsBar","searchParams","spaceStyle","canUseFilters","topicPermissions","canUseSearchFilters","isCompacted","dropdownMatchSelectWidth","End","EndMinusResults","Start","Custom","Timestamp","maxLength","StartOffsetDateTimePicker","messageSearchPhase","searchFunc","deleteButtonWrapper","DeleteRecordsButton","showDeleteRecordsModal","quickSearchWrapper","quickSearchInput","addonAfter","fetchError","messagesBytesConsumed","messagesTotalConsumed","MessageSearchFilterBar","params","phase","untracked","executeMessageSearch","cancelSearch","MessageTable","showPreviewSettings","setShowPreviewSettings","previewButton","shape","copyDropdown","Item","copyMessage","downloadMessages","tsFormat","IsColumnSettingsEnabled","hasKeyTags","MessageKeyPreview","previewFields","activePreviewTags","keySorter","MessagePreview","filterDropdownVisible","onFilterDropdownVisibleChange","showColumnSettings","filterIcon","isValueNull","pointerEvents","alignContent","filteredColumns","columnList","column","concat","showTombstones","empty","onDoubleClick","HTMLElement","toggleRecordExpand","expandRowByClick","expandIconColumnIndex","findIndex","rowExpandable","expandedRowRender","MessageMetaData","animated","TabPane","renderPayload","shouldExpand","headers","MessageHeaders","expandedRowKeys","expandedKeys","onExpand","SaveMessagesDialog","ColumnSettings","query","q","dispose","deleteRecordsModalAlive","deleteRecordsModalVisible","hideDeleteRecordsModal","onFinish","finishDeleteRecordsModal","keyJson","valueJson","displayText","ta","tb","parseUrl","newUrl","formatUrl","filterCode","functionNames","functions","filterInterpreterCode","btoa","startMessageSearch","radioStyle","isOpen","saveMessages","cleanMessages","link","createElement","file","Blob","createObjectURL","download","appendChild","click","cleanPayload","encoding","schemaId","compression","isTransactional","renderEmptyIcon","searchParametersLocalTimeMode","DateTimePickerExtraFooter","isPrimitive","valueBinHexPreview","shouldCollapse","isPrintable","ch","fromCharCode","headerKey","headerValue","ColumnOptions","defaultColumnList","handleColumnListChange","columnsSelected","defaultValues","makeHelpEntry","popTitle","overlayStyle","helpEntries","paddingInlineStart","filterExample1","filterExample2","curIndex","borderLeft","currentFilterBackup","currentIsNew","filterbar","currentFilter","hasChanges","filterName","addFilter","metaSection","bytesIcon","time","timeIcon","messagesElapsedMs","spinner","spinnerText","destroyOnClose","revertChanges","onValueChange","highlight","Prism","PrismLanguages","minHeight","outline","textareaClassName","restored","tooltipText","hasDeleteRecordsPrivilege","DIGITS_ONLY_REGEX","TrashIcon","fill","xmlns","cx","cy","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","SelectPartitionStep","selectedPartitionOption","onPartitionOptionSelected","onSpecificPartitionSelected","onPartitionSpecified","twoCol","stopPropagation","partitionSelect","SelectOffsetStep","selectValue","onOffsetOptionSelected","selectedValue","offsetOption","partitionInfo","onOffsetSpecified","onTimestampChanged","upperOption","ManualOffsetContent","sliderValue","setSliderValue","updateOffsetFromSlider","topicPartitionErrors","topicWatermarksErrors","partitionErrors","partitionError","waterMarksErrors","waterMarksError","Infinity","diff","formatMarks","getMarks","sliderContainer","slider","onBlur","acc","it","DeleteRecordsModal","useEffect","partitionOption","setPartitionOption","specifiedPartition","setSpecifiedPartition","setOffsetOption","setStep","specifiedOffset","setSpecifiedOffset","okButtonLoading","setOkButtonLoading","setTimestamp","setErrors","isAllPartitions","isSpecficPartition","isManualOffset","isHighWatermark","isTimestamp","handleFinish","responseData","errorPartitions","okType","deleteTopicRecordsFromAllPartitionsHighWatermark","then","deleteTopicRecords","pairs","deleteTopicRecordsFromMultiplePartitionOffsetPairs","partitionOffset","TopicPartitions","warning","table","partitionPageSize","renderPartitionError","p1","p2","txt","SearchBar","filteredSource","Settings","FilterSummary","searchSummary","computeFilterSummary","identity","onFilteredDataChanged","onQueryChanged","lastFilterText","StepSelectBrokers","apiClusterInfo","rowSelection","selectedRowKeys","StepReview","plannedBrokers","ReviewPartitionTable","reassignmentOptions","trafficStats","partitionStats","totalTraffic","potentialBandwidth","estimatedTimeSec","senders","receivers","isThrottled","trafficThrottle","estimatedTime","secondsDecimalDigits","unitCount","partitionsPageConfig","brokerTooltip","scroll","partitionAssignments","Card","throwIfNullOrEmpty","topicsMissingPartitionData","checkArguments","allExBrokers","ExBroker","targetExBrokers","exb","recompute","resultAssignments","computeTopicAssignments","skewActual","calcRange","actualLeader","optimizationLog","skewBefore","plannedLeader","leaderSwitchCount","balanceLeaders","skewAfter","swaps","skewPlannedInCluster","debug","actual","skew","minValue","maxValue","planned","riskyPartitions","partitionIssues","issues","criticalBrokers","criticalRacks","reportRiskyPartitions","getExBroker","targetRacks","replicaBrokers","riskyPartition","findRiskyPartitions","exBroker","untrackedCompute","brokerReplicaCount","assignedReplicas","replicaAssignments","computeReplicaAssignments","resultBrokers","sourceBrokers","sourceRacks","consumedBrokers","replicasInRack","aConsumed","bConsumed","replicasInRackA","replicasInRackB","topicReplicasOnA","topicReplicasOnB","replicasOnA","plannedReplicas","replicasOnB","aIsSource","bIsSource","aIsSameRack","bIsSameRack","diskOnA","plannedSize","diskOnB","bestTrackedBroker","bestBroker","assignedSize","assignedLeader","sortedBrokers","betterLeader","betterLeaderIndex","logDirSize","actualReplicas","actualSize","initialReplicas","initialSize","initialLeader","recomputeActual","recomputeInitial","replicasAssignedToThisBroker","logDirEntry","partitionLogDirs","selectedReplicas","selectedSize","selectedLeader","replicasOnBroker","maxVal","minVal","ActiveReassignments","columnsActiveReassignments","TopicNameCol","state","ProgressCol","progressPercent","ETACol","estimateCompletionTime","BrokersCol","minThrottle","throttleText","currentReassignments","trackingReassignments","showThrottleDialog","reassignmentDetails","observableSettings","emptyText","ReassignmentDetailsDialog","ThrottleDialog","lastKnownMinThrottle","leaderThrottle","brokerConfigs","followerThrottle","throttleSettings","newThrottleValue","throttleValue","noChange","applyBandwidthThrottle","resetReplicationThrottleRate","lastState","wasVisible","delete","shouldThrottle","addingReplicas","removingReplicas","modalContent","cancelText","onConfirm","cancelReassignment","leaderThrottleValue","leaderThrottleEntries","followerThrottleValue","followerThrottleEntries","cancelRequest","remaining","progressBar","transferred","totalTransferSize","ProgressBar","estimateSpeed","remainingMs","allBrokerIds","refreshIntervals","clusterTimer","reassignTimer","refreshReassignments","createReassignmentState","updateReassignmentState","computeId","liveReassignments","actualTimeCompleted","expiredTrackers","maxReplicaSize","currentSize","remainingPrev","logDirs","l","newSizeOnBrokers","logDir","newTransferred","newRemaining","intervalSec","deltaRemaining","remainingTimeSec","TopicList","partitionCountReal","partitionDetails","motion","KowlTable","renderName","DeleteDisabledTooltip","event","topicToDelete","ConfirmDeletionModal","iconAllowed","iconForbidden","iconClosedEye","actions","missing","textTransform","deletionPending","setDeletionPending","cleanup","finish","keyboard","confirmLoading","deleteTopic","catch","finally","deleteButton","button","cloneElement","wrap","ShortNum","decimals","originalValue","million","unit","valString","GroupDetails","refreshConsumerGroupAcls","Members","Topics","onlyShowPartitionsWithLag","editGroup","deleteGroup","onEditOffsets","edittingOffsets","deletingMode","deletingOffsets","members","totalPartitions","partitionIds","valueRender","protocolType","protocol","coordinatorId","lagSum","renderPartitions","consumerGroupAcls","groupOffsets","GroupByTopics","topicLags","allAssignments","as","member","lagGroupsByTopic","topicLag","partLag","assignedMember","highWaterMark","lag","clientId","clientHost","topicEntries","totalLagAll","partitionsAssigned","renderMergedID","defaultExpand","nullEntries","GroupByMembers","memberEntries","assignmentsFlat","partitionLag","totalLag","forceRender","stateIcons","CheckCircleTwoTone","HourglassTwoTone","WarningTwoTone","FireTwoTone","QuestionCircleOutlined","makeStateEntry","iconName","consumerGroupStateTable","GroupState","ProtocolType","EditDisabledTooltip","editButton","editButtonMessage","deleteButtonMessage","noEditPerms","noDeletePerms","isInUse","noEditSupport","noDeleteSupport","GroupList","GroupId","groups","from","stateGroups","tableSettings","filteredValue","onFilter","filterValue","setResult","controllerId","CrownOutlined","float","hasRack","kafkaVersion","BrokerDetails","filteredData","filteredBrokers","refreshBrokerConfig","BrokerConfigView","DetailsDisplaySettings","RoleBindingComponent","binding","ephemeralId","metadata","subjects","subject","providerName","Expander","SubjectComponent","subjectKindName","organization","AdminRoles","adminInfo","roles","role","RoleComponent","grantedBy","gridTemplateColumns","gridColumnGap","gridAutoFlow","gridGap","permissions","permission","joinerOr","PermissionComponent","stringsToBoxes","excludes","joiner","wrapperClass","AdminUsers","users","internalIdentifier","oauthUserId","loginProvider","user","UserOutlined","grantedRoles","AdminPage","refreshAdminInfo","hasAdminPermissions","SchemaList","refreshSchemaOverview","filterString","schemaOverview","schemaOverviewIsConfigured","compatibilityLevel","requestErrors","requestDescription","renderRequestErrors","filteredSchemaSubjects","createRef","renderSchemaType","convertJsonField","ARRAY","OBJECT","fields","properties","jsonField","SchemaDetailsView","subjectName","version","refreshSchemaDetails","compatibility","schemaType","schema","rawSchema","namespace","doc","jsonSchema","$id","property","jsonViewObject","versions","registeredVersions","defaultVersion","columnGap","AclList","equals","comparer","structural","resourcePatternType","SearchControls","availableResourceTypes","resourceTypeFilter","refreshAcls","PermissionDenied","ACLs","noAclAuthorizer","filteredResources","capitalize","unshift","charAt","fallbackConnector","logo","connectorMetadata","classNamePrefix","HdfsLogo","author","AmazonS3","JdbcLogo","SalesforceLogo","ElasticLogo","PubSubLogo","CassandraLogo","MsSqlLogo","MySqlLogo","PostgresqlLogo","DB2Logo","BigQueryLogo","SnowflakeLogo","TwitterLogo","Neo4jLogo","DebeziumLogo","ConfluentLogo","ApacheLogo","connectorMetadataMatchCache","findConnectorMetadata","cacheKeys","meta","ConnectorClass","class","friendlyName","removeNamespace","lastDot","lastIndexOf","OverviewStatisticsCard","totalClusters","connectConnectors","totalConnectors","ClusterStatisticsCard","cluster","clusterName","runningConnectors","addr","clusterAddress","ConnectorStatisticsCard","connector","connectorName","runningTasks","totalTasks","NotConfigured","ConfirmModal","bound","isPending","messageContent","successMessage","cancel","runInAction","clearTarget","err","renderError","apiErr","mixBlendMode","TasksColumn","obs","running","mr05","ConnectorsColumn","TaskState","showErr","task","iconWrapper","Running","okIcon","Failed","errIcon","Paused","pauseIcon","Unassigned","waitIcon","stateContent","errBtn","modal","taskId","trace","close","ExclamationCircleTwoTone","PauseCircleOutlined","KafkaConnectOverview","refreshConnectClusters","isConfigured","connectTabs","TabClusters","TabConnectors","allConnectors","TabTasks","allTasks","con","workerId","onBeforeEditorMount","onMountEditor","editor","monaco","KafkaConnectorDetails","autoRunDisposer","showConfigUpdated","currentConfig","isInitialUpdate","jsonConfig","isRunning","canEdit","canEditCluster","pausingConnector","restartingConnector","deletingConnector","beforeMount","onMount","readOnly","minimap","enabled","roundedSelection","showFoldingControls","glyphMargin","scrollBeyondLastLine","lineNumbersMinChars","scrollbar","alwaysConsumeMouseWheel","occurrencesHighlight","foldingHighlight","selectionHighlight","ghost","ex","newConfigObj","updatingConnector","getRestartingTask","restartingTask","setRestartingTask","pauseConnector","resumeConnector","restartConnector","updateConnector","restartTask","deleteConnector","TaskActionsColumn","isRestarting","KafkaClusterDetails","refreshClusterAdditionalInfo","additionalInfo","connectAdditionalClusterInfo","plugins","Wizard","getCurrentStep","currentStepKey","wizard","getSteps","canContinue","nextButtonLabel","isLast","HiddenRadioList","allDisabled","radioCardGroup","BoxCard","borderStyle","borderWidth","hoverable","classes","boxCard","dashed","medium","ConnectorBoxCard","connectorPlugin","ConnectorRadioCardContent","radioCardContent","radioCardLogo","radioCardInfo","pluginType","pluginMeta","CommaSeparatedStringList","hasFocus","setHasFocus","valuePending","setValuePending","autoAdjustOverflow","onFocus","onKeyDown","blur","AddButton","newEntryError","newEntry","locale","addInputPlaceholder","list","commaSeperatedList","observableAr","renderItem","List","ignoreContainerClipping","PropertyComponent","def","entry","definition","isHidden","inputComp","recValues","recommended_values","suggestedValues","default_value","Password","iconRender","EyeTwoTone","EyeInvisibleOutlined","ErrorWrapper","display_name","docuIcon","inputSizeToClass","required","requiredStar","Short","Medium","Long","showErrors","lastErrors","errorToShow","currentErrorIndex","cycleError","PropertyGroupComponent","groupName","subGroups","allGroups","gridColumn","subGroup","propertiesWithErrors","ConfigPage","propsByName","fallbackGroupName","reactionDisposers","validate","pluginClassName","validateConnectorConfig","validationResult","srcProps","createCustomProperties","configs","srcNames","removedProps","groupNames","propertyGroup","order","suggestedSrc","suggestedTar","betterStartValue","lastErrorValue","initConfig","allProps","reaction","getConfigObject","jsonText","fireImmediately","initPending","StringLikeTypes","defaultExpanded","hiddenProperties","converters","initialValue","Int","Class","KowlEditor","rest","merge","ConnectorType","connectClusters","activeCluster","onActiveClusterChange","selectedPlugin","onPluginSelectionChange","plugin","card","ConnectorWizard","useHistory","setCurrentStep","setActiveCluster","setSelectedPlugin","setProperties","invalidValidationResult","setInvalidValidationResult","validationFailure","setValidationFailure","creationFailure","setCreationFailure","genericFailure","setGenericFailure","DatabaseOutlined","postConditionMet","ApiOutlined","connectorBoxCard","SearchOutlined","Review","editorContent","transitionConditionMet","propertiesObject","error_count","conditionMet","createConnector","previous","isFirst","ValidationDisplay","getDataSource","connectorProperty","cp","CreateConnector","motionContainer","wizardView","QuotasList","canListQuotas","refreshQuotas","Quotas","formatBytes","PRODUCER_BYTE_RATE","CONSUMER_BYTE_RATE","CONNECTION_CREATION_RATE","REQUEST_PERCENTAGE","quotaResponse","isPageDefinition","isSeparator","RouteMenu","theme","selectedKeys","selectedMenuKeys","CreateRouteMenuItems","APP_ROUTES","disabledText","visibilityCheck","visibility","disabledReasons","disabledReasonText","ItemGroup","EmitRouteViews","routeJsx","childJsxElements","DisabledReasons","RouteView","AnimatePresence","exitBeforeEnter","exact","pageTitle","noPermission","notSupported","MakeRoute","showCallback","route","pageType","matchedPath","currentRoute","pageProps","routeVisibility","requiredFeatures","requiredPermissions","canManageKowl","ErrorDisplay","clearErrors","CloseCircleOutlined","formatError","Content","Layout","lineBreak","ErrorBoundary","errorInfo","decodingDone","infoItems","dataHolder","StackTrace","fromError","frames","trimStart","componentStack","padLength","padEnd","locationItems","getStringFromInfo","CloseOutlined","dismiss","CopyOutlined","copyError","direction","InfoItemDisplay","settingsTabs","component","UserPreferencesButton","UserPreferencesDialog","StatsBarTab","gridRowGap","JsonViewerTab","UserProfile","importCode","onPaste","onPasteCapture","resetConfirm","onOpenPreferences","preferencesOpen","menuOpen","arrow","onVisibleChange","minOverlayWidthMatchTrigger","avatarUrl","UserMenu","userName","logout","viewBox","focusable","iconMap","GoogleOutlined","GithubOutlined","OktaLogo","getProviders","cache","ok","Login","providersResponse","providersError","providers","loginError","PngLogo","letterSpacing","justifySelf","loginTitle","SvgLoginWave","getFullYear","LoginCompletePage","completeLogin","provider","queryObj","error_description","errorString","flexFlow","Footer","Sider","DebugUserInfoBar","VersionInfo","month","day","year","REACT_APP_BUILT_FROM_PUSH","REACT_APP_KOWL_GIT_REF","REACT_APP_KOWL_GIT_SHA","REACT_APP_KOWL_BUSINESS_GIT_REF","REACT_APP_KOWL_BUSINESS_GIT_SHA","toDateString","SideBar","logo2","borderTop","MenuFoldOutlined","MenuUnfoldOutlined","AppSide","collapsible","collapsedWidth","lastRequestCount","DataRefreshButton","spinnerSize","countStr","activeRequests","REST_CACHE_DURATION_SEC","AppPageHeader","breadcrumbs","pageBreadcrumbs","linkTo","breadcrumbName","selectedClusterName","breadcrumb","routes","itemRender","AppFooter","discordIcon","GithubFilled","TwitterOutlined","LinkedinFilled","AppContent","isUsingDebugUserLogin","App","loginHandling","preLogin","devPrint","canPatchConfigs","canReassignPartitions","seat","providerID","email","FeatureErrorCheck","allErrors","IndeterminateCheckbox","getCheckState","originalCheckbox","indeterminate","StepSelectPartitions","autorunHandle","expandableConfig","setSelection","setTopicSelection","isSelected","getSelectedPartitions","getTopicCheckState","getRowKey","filterActive","searchRegex","rackToBrokers","observableFilterOpen","searchWords","textToHighlight","filterDropdown","filterOpen","selectedBrokerFilters","brokerFilters","filterMultiple","tagName","sorters","columnTitle","renderCell","originNode","selected","selectedRows","onSelectMultiple","changeRows","tp","validPartitions","brokerIdsOfTopicPartitions","racks","brokerItems","SelectPartitionTable","columnWidth","getCheckboxProps","HistorySetter","withRouter","configure","enforceActions","safeDescriptors","refreshSupportedEndpoints","ReactDOM","basename","PageInitHelper","initPage","LazyMap","defaultCreate","create","handleMiss","REST_TIMEOUT_SEC","timeoutSec","requestInit","handle401","processVersionInfo","tryParseOrUnwrapError","CacheEntry","timeSinceLastResult","promise","lastResult","timeSinceRequestStarted","lastRequestTime","cachedApiRequest","lastPromise","resultAge","setPromise","currentWS","apiStore","searchRequest","isHttps","readyState","WebSocket","OPEN","CONNECTING","ws","onopen","ev","send","onclose","wasClean","reason","onMessageHandler","msgEvent","elapsedMs","notificationKey","keyData","hex","onmessage","addError","topicDescription","prepareSynonyms","topicNames","timestampUnixMs","waterMarkErrors","partitionHasError","validLogDirs","aclRequestToQuery","AclResourceTopic","addFrontendFieldsForConsumerGroup","consumerGroup","AclResourceGroup","roleBindings","resolvedRole","roleName","bindings","bindingIds","rb","audits","bindingId","PROTOBUF","ceil","configRequest","Broker","changeConfig","Topic","Delete","addFrontendFieldsForConnectCluster","taskID","allowAll","canViewCluster","canDeleteCluster","summedLag","Features","patchGroup","synonyms","configKeys","paginationVisible","currentDataSource","searchQuery","customColumns","searchColumn","renderFooter","currentView","filteredTotal","sourceTotal","usingFilters","defaultCurrent","onPaginationChange","paginationDefaultPageSize","paginationSizeOptions","disposers","effect","prev","customComparerIsSame","updateCustomColumns","oriCols","ensureFiltersAreUpdated","isObservable","dataLength","displayData","cols","col","updateSearchColumn","originalTitle","SearchTitle","userRender","cellValue","autoEscape","filterEnumOptions","givenValues","rec","optionClass","newKeys","setSelectedKeys","closeDropdown","kowlTable","inputRef","hideSearchBar","focusInput","onMouseDown","onMouseUp","inputWrapper","relatedTarget","focus","remainingDepth","Symbol","aKeys","bKeys","aVal","bVal"],"mappings":"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","file":"static/js/main.46bb8f62.chunk.js","sourcesContent":["import React, { useState, Component, CSSProperties, ReactNode } from \"react\";\nimport { toJson } from \"./jsonUtils\";\nimport { simpleUniqueId, DebugTimerStore, prettyMilliseconds } from \"./utils\";\nimport { Radio, message, Progress, Skeleton, Tooltip } from 'antd';\nimport { MessageType } from \"antd/lib/message\";\nimport { CopyOutlined, DownloadOutlined } from \"@ant-design/icons\";\nimport { TimestampDisplayFormat } from \"../state/ui\";\nimport { observer } from \"mobx-react\";\nimport { AnimatePresence, motion, transform } from \"framer-motion\";\nimport { animProps, animProps_radioOptionGroup, MotionDiv } from \"./animationProps\";\nimport { SizeType } from \"antd/lib/config-provider/SizeContext\";\nimport { makeObservable, observable } from \"mobx\";\nimport { TooltipPlacement } from \"antd/lib/tooltip\";\nimport { InfoIcon } from \"@primer/octicons-react\";\n\n\n\nconst thousandsSeperator = (1234).toLocaleString()[1];\nconst decimalSeperator = (0.123).toLocaleString()[1];\n\nconst nbsp = '\\xA0'; // non breaking space\n\nexport function numberToThousandsString(n: number): JSX.Element {\n    if (typeof n !== 'number') return <>{n}</>\n\n    const parts = n.toLocaleString().split(thousandsSeperator);\n    const separator = nbsp;\n\n    const result: JSX.Element[] = [];\n    for (let i = 0; i < parts.length; i++) {\n        const last = i == parts.length - 1;\n\n        // Add the number block itself; React.Fragment is used explicitly to avoid missing key warning\n        result.push(<React.Fragment key={i}>{parts[i]}</React.Fragment>);\n\n        // Add a dot\n        if (!last)\n            result.push(<span key={i + '.'} className='noSelect nbspSeparator'>{separator}</span>);\n    }\n\n    return <>{result}</>\n}\n\n@observer\nexport class TimestampDisplay extends Component<{ unixEpochSecond: number, format: TimestampDisplayFormat }>{\n    render() {\n        const { unixEpochSecond: ts, format } = this.props;\n        if (format == 'relative') DebugTimerStore.Instance.useSeconds();\n\n        switch (format) {\n            case 'unixTimestamp': return new Date(ts).toUTCString();\n            case 'onlyDate': return new Date(ts).toLocaleDateString();\n            case 'onlyTime': return new Date(ts).toLocaleTimeString();\n            case 'unixSeconds': return ts.toString();\n            case 'relative': return prettyMilliseconds(Date.now() - ts, { compact: true }) + ' ago';\n        }\n\n        // format 'default' -> locale datetime\n        return new Date(ts).toLocaleString();\n    }\n}\n\n\n\nexport const copyIcon = <svg viewBox=\"0 0 14 16\" version=\"1.1\" width=\"14\" height=\"16\" aria-hidden=\"true\">\n    <path fill-rule=\"evenodd\" d=\"M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z\"></path></svg>\n\n\nconst DefaultQuickTableOptions = {\n    tableClassName: undefined as string | undefined,\n    keyAlign: 'left' as 'left' | 'right' | 'center',\n    valueAlign: 'left' as 'left' | 'right' | 'center',\n    gapWidth: '16px' as string | number,\n    gapHeight: 0 as string | number,\n    keyStyle: undefined as React.CSSProperties | undefined,\n    valueStyle: undefined as React.CSSProperties | undefined,\n    tableStyle: undefined as React.CSSProperties | undefined,\n}\ntype QuickTableOptions = Partial<typeof DefaultQuickTableOptions>\n\n// [ { key: 'a', value: 'b' } ]\nexport function QuickTable(data: { key: any, value: any }[], options?: QuickTableOptions): JSX.Element;\n// { 'key1': 'value1', 'key2': 'value2' }\nexport function QuickTable(data: { [key: string]: any }, options?: QuickTableOptions): JSX.Element;\n// [ ['a', 'b'] ]\nexport function QuickTable(data: [any, any][], options?: QuickTableOptions): JSX.Element;\n\nexport function QuickTable(data: { key: any, value: any }[] | { [key: string]: any } | [any, any][], options?: QuickTableOptions): JSX.Element {\n    let entries: { key: any, value: any }[];\n\n    // plain object?\n    if (typeof data === 'object' && !Array.isArray(data)) {\n        // Convert to array of key value objects\n        entries = [];\n        for (const [k, v] of Object.entries(data))\n            entries.push({ key: k, value: v });\n    }\n    // array of [any, any] ?\n    else if (Array.isArray(data) && data.length > 0 && Array.isArray(data[0])) {\n        // Convert to array of key-value objects\n        entries = (data as [any, any][]).map(ar => ({ key: ar[0], value: ar[1] }));\n    }\n    // already correct? array of { key:any, value:any }\n    else {\n        // Cast to correct type directly\n        entries = data as { key: any, value: any }[];\n    }\n\n    const o = Object.assign({} as QuickTableOptions, DefaultQuickTableOptions, options);\n\n    const showVerticalGutter = (typeof o.gapHeight === 'number' && o.gapHeight > 0) || typeof o.gapHeight === 'string';\n    const classNames = [o.tableClassName, \"quickTable\"].joinStr(\" \");\n\n    return <table className={classNames} style={o.tableStyle}>\n        <tbody>\n            {entries.map((obj, i) =>\n                <React.Fragment key={i}>\n                    <tr>\n                        <td style={{ textAlign: o.keyAlign, ...o.keyStyle }} className='keyCell'>{React.isValidElement(obj.key) ? obj.key : toSafeString(obj.key)}</td>\n                        <td style={{ minWidth: '0px', width: o.gapWidth, padding: '0px' }}></td>\n                        <td style={{ textAlign: o.valueAlign, ...o.valueStyle }} className='valueCell'>{React.isValidElement(obj.value) ? obj.value : toSafeString(obj.value)}</td>\n                    </tr>\n\n                    {showVerticalGutter && (i < entries.length - 1) &&\n                        <tr>\n                            <td style={{ padding: 0, paddingBottom: o.gapHeight }}></td>\n                        </tr>\n                    }\n                </React.Fragment>\n            )}\n        </tbody>\n    </table>\n}\n\nexport function toSafeString(x: any): string {\n    if (typeof x === 'undefined' || x === null) return \"\";\n    if (typeof x === 'string') return x;\n    if (typeof x === 'boolean' || typeof x === 'number') return String(x);\n    return toJson(x);\n}\n\nexport function ObjToKv(obj: any): { key: string, value: any }[] {\n    const ar = [] as { key: string, value: any }[];\n    for (const k in obj) {\n        ar.push({ key: k, value: obj[k] })\n    }\n    return ar;\n}\n\nconst style_flexColumn: CSSProperties = { display: 'flex', flexDirection: 'column' };\nexport const Label = (p: { text: string, textSuffix?: React.ReactNode, className?: string, style?: CSSProperties, children?: React.ReactNode }) => {\n    const [id] = useState(() => simpleUniqueId(p.text));\n\n    const child: React.ReactNode = p.children ?? <React.Fragment />;\n\n    const newChild = Object.assign({}, child) as any;\n    newChild.props = {};\n    Object.assign(newChild.props, (child as any).props, { id: id });\n\n    const divStyle = p.style ? { ...p.style, ...style_flexColumn } : p.style;\n\n    return <>\n        <div className={p.className} style={divStyle}>\n            <div className='labelText'>\n                <label htmlFor={id}>{p.text} {p.textSuffix}</label>\n            </div>\n            <div>\n                {newChild}\n            </div>\n        </div>\n    </>\n}\n\nexport function findPopupContainer(current: HTMLElement): HTMLElement {\n    let container = current;\n    while (true) {\n        const p = container.parentElement;\n        if (!p) return container;\n\n        if (p.className.includes('kowlCard')) return p;\n        if (p.clientWidth >= 300 && p.clientHeight >= 300) return p;\n\n        container = p;\n    }\n\n    return current;\n}\n\nexport const InfoText = (p: {\n    tooltip: React.ReactNode,\n    children?: React.ReactNode\n    tooltipOverText?: boolean,\n\n    iconColor?: string,\n    iconSize?: string,\n    icon?: React.ReactNode,\n\n    maxWidth?: string,\n    align?: 'center' | 'left',\n    placement?: TooltipPlacement\n\n    gap?: string,\n    transform?: string\n}) => {\n\n    const overlay = (p.maxWidth || p.align) ? <div style={{ maxWidth: p.maxWidth, textAlign: p.align }}>{p.tooltip}</div> : p.tooltip;\n\n    const size = p.iconSize ?? '14px';\n    const gap = p.gap ?? '4px';\n\n    const gray = 'hsl(0deg, 0%, 50%)';\n    const blue = 'hsl(209deg, 100%, 55%)';\n    const color = p.iconColor ?? gray;\n\n    const icon = <span style={{ color: color, display: 'inline-flex', boxSizing: 'content-box', width: size, height: size, marginLeft: gap, transform: p.transform }}>{p.icon ?? <InfoIcon />}</span>\n\n    if (p.tooltipOverText === true)\n        return <Tooltip overlay={overlay} trigger=\"hover\" mouseLeaveDelay={0} getPopupContainer={findPopupContainer} placement={p.placement}>\n            <span style={{ display: 'inline-flex', alignItems: 'center' }}>\n                {p.children}\n                {icon}\n            </span>\n        </Tooltip>\n\n    return <span style={{ display: 'inline-flex', alignItems: 'center' }}>\n        {p.children}\n        <Tooltip overlay={overlay} trigger=\"hover\" mouseLeaveDelay={0} getPopupContainer={findPopupContainer} placement={p.placement}>\n            {icon}\n        </Tooltip>\n    </span>\n}\n\nexport class OptionGroup<T> extends Component<{\n    label?: string,\n    options: { [key: string]: any },\n    value: T, onChange: (value: T) => void,\n    children?: never,\n    size?: SizeType,\n}> {\n\n    render() {\n        const p = this.props;\n\n        const radioGroup = (\n            <Radio.Group value={p.value} onChange={e => p.onChange(e.target.value)} size={p.size ?? 'middle'}>\n                {ObjToKv(p.options).map(kv =>\n                    <Radio.Button key={kv.key} value={kv.value}>{kv.key}</Radio.Button>\n                )}\n            </Radio.Group>\n        );\n\n        if (!p.label) return radioGroup;\n\n        return <Label text={p.label}>\n            {radioGroup}\n        </Label>\n    }\n}\n\nexport class RadioOptionGroup<T> extends Component<{\n    options: {\n        key?: any,\n        value: T,\n        title: string,\n        subTitle: string,\n        content?: ReactNode,\n    }[],\n    value?: T, onChange: (value: T) => void,\n    showContent?: 'always' | 'onlyWhenSelected',\n    disabled?: boolean,\n    children?: never\n}> {\n\n    render() {\n        const p = this.props;\n\n        const radioGroup = (\n            <Radio.Group className='radioOptionGroup' value={p.value} onChange={e => p.onChange(e.target.value)}>\n                {p.options.map(kv =>\n                    <Radio key={kv.key ?? kv.value} value={kv.value} disabled={p.disabled}>\n                        <div style={{ fontWeight: 500, display: 'inline-block', paddingBottom: '2px', paddingLeft: '10px', verticalAlign: 'middle' }}>{kv.title}</div>\n                        <div style={{ marginLeft: '27px', color: '#999', whiteSpace: 'normal' }}>{kv.subTitle}</div>\n                        <AnimatePresence>\n\n                            {kv.content && (p.showContent == 'always' || (p.value == kv.value)) &&\n\n                                <MotionDiv animProps={animProps_radioOptionGroup} key={String(kv.value)} style={{ marginLeft: '27px', marginTop: '12px' }}>\n                                    <div >{kv.content}</div>\n                                </MotionDiv>\n\n                            }\n                        </AnimatePresence>\n                    </Radio>\n                )}\n            </Radio.Group>\n        );\n\n        return radioGroup;\n    }\n}\n\ninterface StatusIndicatorProps {\n    identityKey: string;\n    fillFactor: number;\n    statusText: string;\n    bytesConsumed?: string;\n    messagesConsumed?: string;\n    progressText: string;\n}\n\n@observer\nexport class StatusIndicator extends Component<StatusIndicatorProps> {\n\n    static readonly progressStyle: CSSProperties = { minWidth: '300px', lineHeight: 0 } as const;\n    static readonly statusBarStyle: CSSProperties = { display: 'flex', fontFamily: '\"Open Sans\", sans-serif', fontWeight: 600, fontSize: '80%' } as const;\n    static readonly progressTextStyle: CSSProperties = { marginLeft: 'auto', paddingLeft: '2em' } as const;\n\n    hide: MessageType | undefined;\n\n    timerHandle: NodeJS.Timeout;\n    lastUpdateTimestamp: number;\n    @observable showWaitingText: boolean;\n\n    // used to fetch 'showWaitingText' (so mobx triggers a re-render).\n    // we could just store the value in a local as well, but that might be opimized out.\n    mobxSink: any | undefined = undefined;\n\n    constructor(p: any) {\n        super(p);\n        message.config({ top: 20 });\n\n        // Periodically check if we got any new messages. If not, show a different text after some time\n        this.lastUpdateTimestamp = Date.now();\n        this.showWaitingText = false;\n        const waitMessageDelay = 3000;\n        this.timerHandle = setInterval(() => {\n            const age = Date.now() - this.lastUpdateTimestamp;\n            if (age > waitMessageDelay) {\n                this.showWaitingText = true;\n            }\n        }, 300);\n\n        makeObservable(this);\n    }\n\n    componentDidMount() {\n        this.lastUpdateTimestamp = Date.now();\n        this.customRender();\n    }\n\n    lastPropsJson = \"\";\n    lastProps = {};\n    componentDidUpdate() {\n\n        const curJson = toJson(this.props);\n        if (curJson == this.lastPropsJson) {\n            // changes to observables\n            this.customRender();\n            return;\n        }\n\n        this.lastPropsJson = curJson;\n\n        this.lastUpdateTimestamp = Date.now();\n        if (this.showWaitingText)\n            this.showWaitingText = false;\n\n        this.customRender();\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.timerHandle);\n        this.hide?.call(this);\n        this.hide = undefined;\n    }\n\n    customRender() {\n        const content = <div style={{ marginBottom: '0.2em' }} className={this.showWaitingText ? 'waitingForMessagesBox waitingForMessagesText' : ''}>\n            <div style={StatusIndicator.progressStyle}>\n                <Progress percent={this.props.fillFactor * 100} showInfo={false} status='active' size='small' style={{ lineHeight: 1 }} />\n            </div>\n            <div style={StatusIndicator.statusBarStyle}>\n                <div>{this.showWaitingText ? \"Kafka is waiting for new messages...\" : this.props.statusText}</div>\n                <div style={StatusIndicator.progressTextStyle}>{this.props.progressText}</div>\n            </div>\n            {(this.props.bytesConsumed && this.props.messagesConsumed) &&\n                <div style={StatusIndicator.statusBarStyle}>\n                    <div style={{ display: 'flex', alignItems: 'center' }}>\n                        <DownloadOutlined /> {this.props.bytesConsumed}\n                    </div>\n                    <div style={{ display: 'flex', alignItems: 'center', marginLeft: 'auto' }}>\n                        <CopyOutlined />{this.props.messagesConsumed} messages\n                    </div>\n                </div>\n            }\n        </div>\n\n        this.hide = message.open({ content: content, key: this.props.identityKey, icon: <span />, duration: null, type: 'loading' });\n    }\n\n    render() {\n        // workaround to propagate the update (timer -> mobx -> re-render)\n        this.mobxSink = this.showWaitingText;\n        return null;\n    }\n}\n\n// todo: layoutbypass and zerosizewrapper do the same thing, merge them.\nexport class LayoutBypass extends Component<{ width?: string, height?: string, justifyContent?: string, alignItems?: string, positionContentAbsolute?: boolean, transform?: string }> {\n\n    static readonly style: CSSProperties = {\n        display: 'inline-flex',\n        width: '0px', height: '0px',\n        transform: 'translateY(-0.5px)',\n        // zIndex: 1,\n        justifyContent: 'center',\n        alignItems: 'center',\n    };\n\n    render() {\n        const p = this.props;\n        let style = LayoutBypass.style;\n        if (p.width || p.height || p.justifyContent || p.alignItems || p.transform) {\n            style = Object.assign({}, style, p);\n        }\n\n        return <span className='verticalCenter' style={style}>\n            <span style={p.positionContentAbsolute ? { position: 'absolute' } : undefined}>\n                {this.props.children}\n            </span>\n        </span>\n    }\n}\n\nexport const ZeroSizeWrapper = (p: { width: number, height: number, children?: React.ReactNode }) => {\n    return <span style={{\n        width: p.width, height: p.height,\n        display: 'inline-flex', placeContent: 'center', placeItems: 'center',\n\n    }}>\n        {p.children}\n    </span>;\n};\n\n\nconst defaultSkeletonStyle = { margin: '2rem' };\nconst innerSkeleton = <Skeleton loading={true} active={true} paragraph={{ rows: 8 }} />\nexport const DefaultSkeleton = (\n    <motion.div {...animProps} key={'defaultSkeleton'} style={defaultSkeletonStyle}>\n        {innerSkeleton}\n    </motion.div>\n);\n\n// Single line string, no wrapping, will not overflow and display ellipsis instead\nconst ellipsisDivStyle: CSSProperties = {\n    display: 'inline-block',\n    width: 0,\n    minWidth: '100%',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    verticalAlign: 'text-bottom',\n};\nconst ellipsisSpanStyle: CSSProperties = {\n    whiteSpace: 'nowrap',\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    maxWidth: '100%',\n    verticalAlign: 'text-bottom'\n};\nexport const Ellipsis = (p: { children?: React.ReactNode, className?: string }) => {\n    return <span className={p.className} style={ellipsisSpanStyle}>{p.children}</span>\n}\n\nexport const Code = (p: { children?: React.ReactNode, nowrap?: boolean }) => {\n    const className = p.nowrap ? 'codeBox nowrap' : 'codebox';\n    return <span className={className}>{p.children}</span>\n}\n\n","\n\nimport queryString, { ParseOptions, StringifyOptions, ParsedQuery } from 'query-string';\n\nimport { appGlobal } from '../state/appGlobal';\n\nconst parseOptions: ParseOptions = {\n    arrayFormat: 'comma',\n    parseBooleans: true,\n    parseNumbers: true,\n};\nconst stringifyOptions: StringifyOptions = {\n    strict: false,\n    encode: true,\n    arrayFormat: 'comma',\n    sort: false,\n};\n\nexport const queryToObj = (str: string) => queryString.parse(str, parseOptions);\nexport const objToQuery = (obj: { [key: string]: any; }) => '?' + queryString.stringify(obj, stringifyOptions);\n\n\n// edit the current search query,\n// IFF you make any changes inside editFunction, it returns the stringified version of the search query\nexport function editQuery(editFunction: (queryObject: ParsedQuery<string>) => void) {\n    const urlParams = queryString.parse(window.location.search);\n    editFunction(urlParams);\n    const query = queryString.stringify(urlParams);\n    const search = '?' + query;\n\n    if (window.location.search != search) {\n        //console.log(`changing search: (${window.location.search}) -> (${search})`);\n        appGlobal.history.location.search = search;\n        appGlobal.history.replace(appGlobal.history.location);\n    }\n}\n\n","import React, { Component } from \"react\";\nimport { Tag, Popover, Tooltip } from \"antd\";\nimport { LazyMap } from \"../../../../utils/LazyMap\";\nimport { Broker, Partition } from \"../../../../state/restInterfaces\";\nimport { api, brokerMap } from \"../../../../state/backendApi\";\nimport { findPopupContainer, QuickTable } from \"../../../../utils/tsxUtils\";\nimport { observer } from \"mobx-react\";\nimport { ChevronRightIcon } from \"@heroicons/react/solid\";\n\ntype BrokerListProps =\n    { brokerIds: number[]; addedIds?: number[], removedIds?: number[], leaderId?: number; } |\n    { partition: Partition };\n\n@observer\nexport class BrokerList extends Component<BrokerListProps> {\n\n    constructor(p: any) {\n        super(p);\n        if (!api.clusterInfo)\n            setImmediate(() => api.refreshCluster());\n    }\n\n    render() {\n        let leaderId: number;\n        let sortedIds: number[];\n        const offlineIds: number[] = [];\n        let addedIds: number[] = [], removedIds: number[] = [];\n\n        if ('partition' in this.props) {\n            const { partition } = this.props;\n            leaderId = partition.leader;\n            sortedIds = partition.replicas.distinct().sort((a, b) => a - b);\n            if (partition.offlineReplicas) offlineIds.push(...partition.offlineReplicas);\n        } else {\n            if (!this.props.brokerIds) return null;\n\n            sortedIds = this.props.brokerIds.distinct().sort((a, b) => a - b);\n            addedIds = this.props.addedIds ?? [];\n            removedIds = this.props.removedIds ?? [];\n            leaderId = this.props.leaderId ?? -1;\n        }\n\n\n        const brokers = brokerMap.get();\n\n        const tags = sortedIds.map(id => {\n            const broker = brokers?.get(id);\n\n            let classNames = 'broker-tag';\n            if (id == leaderId) classNames += \" leader\";\n            if (offlineIds.includes(id)) classNames += ' offline';\n            if (brokers && !broker) classNames += ' missing';\n\n            const isAdding = addedIds.includes(id);\n            if (isAdding) classNames += ' added';\n\n            const isRemoving = removedIds.includes(id);\n            if (isRemoving) classNames += ' removed';\n\n            const tag = <div className={classNames}>\n                <span>{id ?? '?'}</span>\n            </div>;\n            if (!broker) return tag;\n\n            const additionalContent: JSX.Element[] = [];\n            if (id == leaderId) additionalContent.push(<div key='leader' style={{ marginTop: '5px' }}>\n                <ChevronRightIcon className='svgCenter' height='15px' style={{ marginLeft: '-4px', marginRight: '-2px' }} />\n                This broker is the leader for this partition\n            </div>);\n            if (isAdding) additionalContent.push(<div key='added' style={{ color: 'hsl(102deg, 80%, 45%)', marginTop: '5px' }}>Partitions are currently being transferred to this broker.</div>);\n            if (isRemoving) additionalContent.push(<div key='removed' style={{ color: 'hsl(38deg, 100%, 50%)', marginTop: '5px' }}>Once the assignment completes, the partitions of the reassignment will be removed from the broker.</div>);\n\n            return <BrokerTooltip broker={broker} tooltipSuffix={additionalContent}>{tag}</BrokerTooltip>\n        });\n\n        return (\n            <span style={{ cursor: 'pointer' }}>\n                <span className='brokerTagList'>\n                    {tags.map((t, i) => <React.Fragment key={i}>{t}</React.Fragment>)}\n                </span>\n            </span>\n        );\n    }\n}\n\n\nfunction BrokerTooltip(p: { broker: Broker, children?: React.ReactElement, tooltipSuffix?: React.ReactNode }) {\n    const broker = p.broker;\n    const id = broker.brokerId;\n\n    const tooltipContentEntries = [\n        <b key={1} style={{ borderBottom: '1px solid', width: '100%', display: 'block', marginBottom: '5px', }}>Broker ID {id}</b>,\n        <div key={2} >{broker.address}</div>,\n        <React.Fragment key={3} >{broker.rack && <div>{broker.rack}</div>}</React.Fragment>,\n        <React.Fragment key={4} >{p.tooltipSuffix || null}</React.Fragment>\n    ];\n\n    const tooltipContent = <div style={{ textAlign: 'left', maxWidth: '300px' }}>\n        {tooltipContentEntries.map((e, i) => <React.Fragment key={i}>{e}</React.Fragment>)}\n    </div>\n\n    return <Tooltip overlay={tooltipContent} placement='top' getPopupContainer={findPopupContainer}>\n        {p.children}\n    </Tooltip>\n}","\n//\n// We know what features the cluster supports by calling './api/kowl/endpoints'.\n// That only tells us the actual routes we can use though.\n// This file translates supported routes to specific frontend features.\n// That way we can easily check if (for example) \"partition reassignment\" should be visible/allowed.\n//\n\nimport { computed, observable, when } from \"mobx\";\nimport { clone } from \"../utils/jsonUtils\";\nimport { api } from \"./backendApi\";\n\nexport interface FeatureEntry {\n    endpoint: string;\n    method: string;\n}\n\nexport class Feature {\n    static readonly ClusterConfig: FeatureEntry = { endpoint: \"/api/cluster/config\", method: 'GET' };\n    static readonly ConsumerGroups: FeatureEntry = { endpoint: \"/api/consumer-groups\", method: 'GET' };\n    static readonly GetReassignments: FeatureEntry = { endpoint: \"/api/operations/reassign-partitions\", method: 'GET' };\n    static readonly PatchReassignments: FeatureEntry = { endpoint: \"/api/operations/reassign-partitions\", method: 'PATCH' };\n    static readonly PatchGroup: FeatureEntry = { endpoint: \"/api/consumer-groups/{groupId}\", method: 'PATCH' };\n    static readonly DeleteGroup: FeatureEntry = { endpoint: \"/api/consumer-groups/{groupId}\", method: 'DELETE' };\n    static readonly DeleteRecords: FeatureEntry = { endpoint: \"/api/topics/{topicName}/records\", method: 'DELETE' };\n    static readonly GetQuotas: FeatureEntry = { endpoint: \"/api/quotas\", method: 'GET' };\n}\n\n// As soon as the supported endpoints are available we should check if\n// the backend has returned a feature that we don't know of yet.\nsetImmediate(() => {\n    when(() => api.endpointCompatibility != null, () => {\n        if (!api.endpointCompatibility) return;\n        // Copy features, then remove the ones we know, report any leftover features.\n        const features = clone(api.endpointCompatibility.endpoints);\n        const removeMatch = (f: FeatureEntry) => features.removeAll(x => x.method == f.method && x.endpoint == f.endpoint);\n\n        removeMatch(Feature.ClusterConfig);\n        removeMatch(Feature.ConsumerGroups);\n        removeMatch(Feature.GetReassignments);\n        removeMatch(Feature.PatchReassignments);\n        removeMatch(Feature.PatchGroup);\n        removeMatch(Feature.DeleteGroup);\n        removeMatch(Feature.DeleteRecords);\n        removeMatch(Feature.GetQuotas)\n\n        if (features.length > 0) {\n            const names = features.map(f => `\"${f.method} ${f.endpoint}\"\\n`).join(\"\");\n            console.warn(\"Backend reported new/unknown endpoints for endpointCompatibility:\\n\" + names);\n        }\n    });\n});\n\nexport function isSupported(f: FeatureEntry): boolean {\n    const c = api.endpointCompatibility;\n    if (!c) return true; // not yet checked, allow it by default...\n\n    for (const e of c.endpoints)\n        if (e.method == f.method)\n            if (e.endpoint == f.endpoint)\n                return e.isSupported;\n\n    featureErrors.push(`Unable to check if feature \"${f.method} ${f.endpoint}\" is supported because the backend did not return any information about it.`);\n    return false;\n}\n\nclass SupportedFeatures {\n    @computed get clusterConfig(): boolean { return isSupported(Feature.ClusterConfig); }\n    @computed get consumerGroups(): boolean { return isSupported(Feature.ConsumerGroups); }\n    @computed get getReassignments(): boolean { return isSupported(Feature.GetReassignments); }\n    @computed get patchReassignments(): boolean { return isSupported(Feature.PatchReassignments); }\n    @computed get patchGroup(): boolean { return isSupported(Feature.PatchGroup); }\n    @computed get deleteGroup(): boolean { return isSupported(Feature.DeleteGroup); }\n    @computed get deleteRecords(): boolean { return isSupported(Feature.DeleteRecords); }\n    @computed get getQuotas(): boolean { return isSupported(Feature.GetQuotas); }\n}\n\nconst features = new SupportedFeatures();\nconst featureErrors: string[] = observable([]);\nexport { features as Features, featureErrors };","// extracted by mini-css-extract-plugin\nmodule.exports = {\"default\":\"ConfigList_default__1L7z_\",\"overidden\":\"ConfigList_overidden__kJYGn\",\"type\":\"ConfigList_type__-QOGG\",\"name\":\"ConfigList_name__33K9n\",\"nameText\":\"ConfigList_nameText__2F7u2\",\"configFlags\":\"ConfigList_configFlags__2V-CL\",\"value\":\"ConfigList_value__3Sfl4\",\"sourceHeader\":\"ConfigList_sourceHeader__CE4FU\",\"source\":\"ConfigList_source__2dlim\",\"nested\":\"ConfigList_nested__s2q4X\",\"configEntryTable\":\"ConfigList_configEntryTable__2uyy2\"};","\nexport { };\n\ndeclare global {\n    interface Array<T> {\n        remove(obj: T): boolean;\n        removeAll(selector: (x: T) => boolean): number;\n\n        first<T>(this: T[], selector?: (x: T) => boolean): T | undefined;\n        last<T>(this: T[], selector?: (x: T) => boolean): T | undefined;\n\n        count<T>(this: T[], selector: (x: T) => boolean): number;\n        sum<T>(this: T[], selector: (x: T) => number): number;\n        min<T>(this: T[], selector: (x: T) => number): number;\n        max<T>(this: T[], selector: (x: T) => number): number;\n        minBy<T>(this: T[], selector: (x: T) => number): T | undefined;\n        maxBy<T>(this: T[], selector: (x: T) => number): T | undefined;\n\n        any<T>(this: T[], selector: (x: T) => boolean): boolean;\n        all<T>(this: T[], selector: (x: T) => boolean): boolean;\n\n        /** group elements into a Map<> using the given key selector */\n        groupBy<T, K>(this: T[], selector: (x: T) => K): Map<K, T[]>;\n        /** groups elements (into an array of groups) using the given key selector */\n        groupInto<T, K>(this: T[], selector: (x: T) => K): { key: K, items: T[] }[];\n\n        /** returns a new array containing only distinct elements */\n        distinct<T>(this: T[], keySelector?: ((x: T) => any)): T[];\n        pushDistinct<T>(this: T[], ...elements: T[]): void;\n\n        /**\n         * returns an array containing all elements that are present in both this and the other array\n         */\n        intersection<T>(this: T[], other: T[]): T[];\n\n        /**\n         * returns a copy containing all elements except for those that are also in 'other'\n         */\n        except<T>(this: T[], other: T[]): T[];\n\n        genericJoin<T>(this: T[], getSeparator: (last: T, current: T, index: number) => T): T[];\n        /**\n         * Like normal .join() but skips over empty, null, and undefined\n         */\n        joinStr(this: (string | null | undefined)[], separator: string): string;\n\n        toMap<TItem, TKey, TValue>(this: TItem[], computeKey: (item: TItem) => TKey, computeValue: (item: TItem) => TValue): Map<TKey, TValue>;\n\n        filterNull<T>(this: (T | null | undefined)[]): T[];\n        filterFalsy<T>(this: (T | null | undefined)[]): T[];\n\n        /**\n         * Replace the content with the given data.\n         * Intended to be used with mobx observable arrays, where setting the whole\n         * array (even with identical contents) would notify all observers.\n         *\n         * This function instead computes the difference and adds/removes them.\n         *\n         * It is strongly reccomended to wrap calls to this in a mobx transaction() or similar.\n         */\n        updateWith<T>(this: T[], newData: T[]): { removed: number, added: number };\n\n\n        isEqual(this: string[], other: string[]): boolean;\n    }\n}\n\nArray.prototype.remove = function remove<T>(this: T[], obj: T): boolean {\n    const index = this.indexOf(obj);\n    if (index === -1) return false;\n    this.splice(index, 1);\n    return true;\n};\n\nArray.prototype.removeAll = function removeAll<T>(this: T[], selector: (x: T) => boolean): number {\n    let count = 0;\n    for (let i = 0; i < this.length; i++) {\n        if (selector(this[i])) {\n            this.splice(i, 1);\n            count++;\n            i--;\n        }\n    }\n    return count;\n};\n\n\nArray.prototype.first = function first<T>(this: T[], selector?: (x: T) => boolean): T | undefined {\n    if (!selector)\n        return this.length > 0\n            ? this[0]\n            : undefined;\n\n    for (const e of this)\n        if (selector(e))\n            return e;\n\n    return undefined;\n};\n\nArray.prototype.last = function last<T>(this: T[], selector?: (x: T) => boolean): T | undefined {\n    for (let i = this.length - 1; i >= 0; i--)\n        if (!selector || selector(this[i]))\n            return this[i];\n    return undefined;\n};\n\nArray.prototype.count = function count<T>(this: T[], selector: (x: T) => boolean) {\n    return this.reduce((pre, cur) => selector(cur) ? pre + 1 : pre, 0);\n};\n\nArray.prototype.sum = function sum<T>(this: T[], selector: (x: T) => number) {\n    return this.reduce((pre, cur) => pre + selector(cur), 0);\n};\n\nArray.prototype.min = function min<T>(this: T[], selector: (x: T) => number) {\n    let cur = Number.POSITIVE_INFINITY;\n\n    for (let i = 0; i < this.length; i++) {\n        const value = selector(this[i]);\n        if (value < cur)\n            cur = value;\n    }\n\n    return cur;\n};\n\nArray.prototype.max = function max<T>(this: T[], selector: (x: T) => number) {\n    let cur = Number.NEGATIVE_INFINITY;\n\n    for (let i = 0; i < this.length; i++) {\n        const value = selector(this[i]);\n        if (value > cur)\n            cur = value;\n    }\n\n    return cur;\n};\n\nArray.prototype.minBy = function minBy<T>(this: T[], selector: (x: T) => number) {\n    if (this.length == 0) return undefined;\n\n    let bestIndex = 0;\n    let bestVal = selector(this[0]);\n\n    for (let i = 1; i < this.length; i++) {\n        const x = selector(this[i]);\n        if (x < bestVal) {\n            bestIndex = i;\n            bestVal = x;\n        }\n    }\n\n    return this[bestIndex];\n};\n\nArray.prototype.maxBy = function maxBy<T>(this: T[], selector: (x: T) => number) {\n    if (this.length == 0) return undefined;\n\n    let bestIndex = 0;\n    let bestVal = selector(this[0]);\n\n    for (let i = 1; i < this.length; i++) {\n        const x = selector(this[i]);\n        if (x > bestVal) {\n            bestIndex = i;\n            bestVal = x;\n        }\n    }\n\n    return this[bestIndex];\n};\n\nArray.prototype.any = function any<T>(this: T[], selector: (x: T) => boolean) {\n    for (const e of this)\n        if (selector(e))\n            return true;\n    return false;\n};\n\nArray.prototype.all = function all<T>(this: T[], selector: (x: T) => boolean) {\n    for (const e of this)\n        if (!selector(e))\n            return false;\n    return true;\n};\n\nArray.prototype.groupBy = function groupBy<T, K>(this: T[], keySelector: (x: T) => K): Map<K, T[]> {\n    const map = new Map();\n    this.forEach(item => {\n        const key = keySelector(item);\n        const collection = map.get(key);\n        if (!collection) {\n            map.set(key, [item]);\n        } else {\n            collection.push(item);\n        }\n    });\n    return map;\n};\n\n\nArray.prototype.groupInto = function groupInto<T, K>(this: T[], keySelector: (x: T) => K): { key: K, items: T[] }[] {\n    const map = this.groupBy(keySelector);\n\n    const ar: { key: K, items: T[] }[] = [];\n    map.forEach((items, key) => {\n        ar.push({ key, items });\n    });\n\n    return ar;\n};\n\nArray.prototype.filterNull = function filterNull<T>(this: (T | null | undefined)[]): T[] {\n    return this.filter(x => x != null) as T[];\n};\n\nArray.prototype.filterFalsy = function filterFalsy<T>(this: (T | null | undefined)[]): T[] {\n    return this.filter(Boolean) as T[];\n};\n\nArray.prototype.updateWith = function updateWith<T>(this: T[], newData: T[]): { removed: number, added: number } {\n\n    // Early out, compare both arrays\n    if (this.length == newData.length) {\n        let same = true;\n        for (let i = 0; i < this.length; i++)\n            if (this[i] != newData[i]) {\n                same = false;\n                break;\n            }\n        if (same) return { removed: 0, added: 0 };\n    }\n\n    const added = newData.except(this);\n    const removed = this.except(newData);\n\n    this.removeAll(x => removed.includes(x));\n    for (const a of added)\n        this.push(a);\n\n    return { removed: removed.length, added: added.length };\n};\n\nArray.prototype.isEqual = function isEqual(this: string[], other: string[]): boolean {\n    if (this.length == 0 && other.length == 0)\n        return true;\n\n    if (this.length != other.length)\n        return false;\n\n    for (let i = 0; i < this.length; i++)\n        if (this[i] !== other[i])\n            return false;\n\n    return true;\n};\n\n\nArray.prototype.distinct = function distinct<T>(this: T[], keySelector?: (x: T) => any): T[] {\n    if (!keySelector)\n        return [...new Set(this)];\n\n    const set = new Set<any>();\n    const ar: T[] = [];\n\n    this.forEach(item => {\n        const key = keySelector(item);\n        if (!set.has(key)) {\n            set.add(key);\n            ar.push(item);\n        }\n    });\n\n    return ar;\n};\n\nArray.prototype.pushDistinct = function pushDistinct<T>(this: T[], ...elements: T[]): void {\n    if (this.length + elements.length > 50) {\n        const s = new Set(this);\n        for (const e of elements)\n            if (!s.has(e))\n                this.push(e);\n    }\n    else {\n        for (const e of elements)\n            if (!this.includes(e))\n                this.push(e);\n    }\n};\n\nArray.prototype.intersection = function intersection<T>(this: T[], other: T[]): T[] {\n    const thisSet = new Set<T>(this);\n    const results: T[] = [];\n    for (const e of other)\n        if (thisSet.has(e))\n            results.push(e);\n    return results;\n};\n\nArray.prototype.except = function except<T>(this: T[], other: T[]): T[] {\n    const ar = [];\n    const otherSet = new Set<T>(other);\n    for (const e of this) {\n        if (otherSet.has(e)) continue;\n        ar.push(e);\n    }\n    return ar;\n};\n\nArray.prototype.genericJoin = function genericJoin<T>(this: T[], getSeparator: (last: T, current: T, index: number) => T): T[] {\n    const ar = [];\n    for (let i = 1; i < this.length; i++) {\n        const last = this[i - 1];\n        const current = this[i];\n\n        const separator = getSeparator(last, current, i);\n\n        ar.push(last);\n        ar.push(separator);\n    }\n\n    // add final element\n    ar.push(this[this.length - 1]);\n\n    return ar;\n};\n\nArray.prototype.toMap = function toMap<TItem, TKey, TValue>(this: TItem[], computeKey: (item: TItem) => TKey, computeValue: (item: TItem) => TValue): Map<TKey, TValue> {\n    const map = new Map<TKey, TValue>();\n\n    for (const item of this) {\n        const key = computeKey(item);\n        const value = computeValue(item);\n        map.set(key, value);\n    }\n\n    return map;\n};\n\nArray.prototype.joinStr = function joinStr(this: (string | null | undefined)[], separator: string): string {\n    let r = \"\";\n    for (const str of this) {\n        if (str === null || str === undefined || str === \"\")\n            continue;\n\n        if (r.length == 0)\n            r = str;\n        else\n            r += (separator + str);\n    }\n\n    return r;\n};\n\n\n","export const isClipboardAvailable = Boolean(navigator?.clipboard)","import React from 'react';\nimport { Component } from 'react';\nimport { Modal, Radio, Select } from 'antd';\nimport { observer } from 'mobx-react';\nimport { action, makeObservable, observable, transaction } from 'mobx';\nimport { TrashIcon as TrashIconOutline, PencilIcon as PencilIconOutline } from '@heroicons/react/outline';\nimport { PencilIcon, TrashIcon, XCircleIcon } from '@heroicons/react/solid';\nimport { toJson } from '../../utils/jsonUtils';\n\n\nclass ErrorModal extends Component<ErrorModalProps> {\n    title: string;\n    subTitle: React.ReactNode;\n    content: React.ReactNode;\n\n    constructor(p: any) {\n        super(p);\n        this.title = this.props.title();\n        this.subTitle = this.props.subTitle();\n        this.content = this.props.content();\n    }\n\n    render() {\n        const p = this.props;\n\n        return <Modal\n            visible={p.isVisible}\n\n            onOk={p.onClose}\n            afterClose={p.afterClose}\n\n            cancelButtonProps={{ style: { display: 'none' } }}\n\n            bodyStyle={{ paddingTop: '1.5em' }}\n            width=\"auto\"\n            style={{\n                minWidth: 'min(95%, 550px)',\n                maxWidth: 'min(900px, 80%)',\n                width: 'auto',\n                maxHeight: '100%'\n            }}\n            centered={true}\n            maskClosable={false}\n            closeIcon={<></>}\n            transitionName={p.animate ? undefined : \"\"}\n            maskTransitionName={p.animate ? undefined : \"\"}\n        >\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '2em' }}>\n                {/* Header */}\n                <div style={{ display: 'flex', flexDirection: 'row', gap: '22px', paddingRight: '1.5em' }}>\n\n                    {/* Icon */}\n                    <div style={{\n                        height: '70px', // height determines icon size\n                        alignSelf: 'center',\n                        margin: '-6px', // compensate for built in padding\n                        marginTop: '0px',\n                    }}>\n                        <XCircleIcon color=\"#F53649\" />\n                    </div>\n\n                    {/* Title */}\n                    <div style={{ alignSelf: 'center' }}>\n                        <div style={{\n                            color: 'hsla(0deg, 0%, 0%, 85%)',\n                            fontSize: '16px', fontWeight: 500, lineHeight: 2,\n                            overflow: 'hidden',\n                        }}>{this.title}</div>\n                        <div>{this.subTitle}</div>\n                    </div>\n                </div>\n\n                {/* Content */}\n                {this.content &&\n                    <div style={{ alignSelf: 'stretch', overflowY: 'auto', maxHeight: '300px' }}>\n                        {this.content}\n                    </div>\n                }\n            </div>\n        </Modal>\n    }\n}\n\ninterface ErrorModalProps {\n    key: number;\n\n    title: () => string,\n    subTitle: () => React.ReactNode,\n    content: () => React.ReactNode,\n\n    isVisible: boolean,\n    onClose: () => void,\n    afterClose: () => void,\n\n    animate: boolean,\n}\n\nconst errorModals: ErrorModalProps[] = observable([]);\n\nlet nextErrorKey = 0;\nexport function showErrorModal(title: string, subTitle: React.ReactNode, content: React.ReactNode) {\n    const key = nextErrorKey++;\n\n    // keep formatting for strings\n    if (typeof content == 'string') {\n        content = <div style={{\n            whiteSpace: 'pre-wrap',\n            wordBreak: 'break-all',\n            lineHeight: 1.6,\n            fontFamily: 'monospace',\n            fontSize: 'small',\n\n        }}>{content}</div>\n    }\n\n    errorModals.push({\n        key,\n\n        title: () => title,\n        subTitle: () => subTitle,\n        content: () => content,\n\n        isVisible: true,\n        onClose: () => onClose(key),\n        afterClose: () => afterClose(key),\n\n        animate: true,\n    });\n}\n\nconst onClose = action((key: number) => {\n    const current = errorModals[0];\n    const next = errorModals.length > 1 ? errorModals[1] : undefined;\n\n    if (next) {\n        // Switch to next\n        // don't animate current or next modal\n\n        current.animate = false;\n        next.animate = false;\n        afterClose(key); // immediately switch to next\n    }\n    else {\n        // last modal\n        current.animate = true;\n        current.isVisible = false;\n    }\n});\n\nconst afterClose = action((key: number) => {\n    errorModals.removeAll(x => x.key == key);\n});\n\n\nexport function renderErrorModals() {\n    if (errorModals.length == 0) return null;\n    const e = errorModals[0];\n    return <ErrorModal {...e} />;\n}\n\n\n// showErrorModal(\n//     'Consumer group not found',\n//     <span>Could not find a consumer group named <span className='codeBox'>{\"a9i6f8o4btroaw87\"}</span> to compute new offsets.</span>,\n//     null\n// );","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sliderContainer\":\"DeleteRecordsModal_sliderContainer__1Tfxh\",\"sliderValue\":\"DeleteRecordsModal_sliderValue__2Gxbv\",\"slider\":\"DeleteRecordsModal_slider__1vcDC\",\"partitionSelect\":\"DeleteRecordsModal_partitionSelect__1ojvP\",\"twoCol\":\"DeleteRecordsModal_twoCol__2FuF5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"steps\":\"Wizard_steps__LxcrK\",\"step\":\"Wizard_step__3eJVa\",\"content\":\"Wizard_content__2uxTw\",\"footer\":\"Wizard_footer__RgTT2\",\"nextButton\":\"Wizard_nextButton__1l_X4\",\"prevButton\":\"Wizard_prevButton__3ScsC\"};","\n\nexport class RestTimeoutError extends Error {\n    constructor(m: string) {\n        super(m);\n        Object.setPrototypeOf(this, RestTimeoutError.prototype);\n    }\n}\n\nexport default function fetchWithTimeout(url: RequestInfo, timeoutMs: number, options?: RequestInit): Promise<Response> {\n\n    const requestPromise = fetch(url, options);\n    const timeoutPromise = new Promise<Response>((_, reject) => {\n        setTimeout(() => {\n            reject(new RestTimeoutError(\"Request timed out after \" + (timeoutMs / 1000).toFixed(1) + \" sec: \" + url));\n        }, timeoutMs);\n    });\n\n    return Promise.race([requestPromise, timeoutPromise]);\n}\n","import React, { useState } from 'react';\nimport styles from './Tabs.module.scss';\n\nexport interface Tab {\n    key: string;\n    title: React.ReactNode | (() => React.ReactNode);\n    content: React.ReactNode | (() => React.ReactNode);\n    disabled?: boolean;\n}\n\ninterface TabsProps {\n    tabs: Array<Tab>;\n    selectedTabKey?: string;\n    onChange?: (selectedTabKey: string) => void;\n}\n\nfunction renderContent(tabs: Array<Tab>, key: string) {\n    const tab = tabs.find((tab) => tab.key === key);\n    return (typeof tab?.content === 'function') ? tab.content() : tab?.content;\n}\n\nexport default function Tabs(props: TabsProps) {\n    const { tabs, selectedTabKey, onChange = () => undefined } = props;\n\n    const [selectedTab, setSelectedTab] = useState(selectedTabKey || props.tabs[0].key);\n\n    return (\n        <div>\n            <nav>\n                <ul className={styles.navigationList}>\n                    {tabs.map((tab) => (\n                        <li key={tab.key}>\n                            <a\n                                href={`#${encodeURIComponent(tab.key)}`}\n                                className={`${selectedTab === tab.key ? styles.active : ''} ${tab.disabled ? styles.disabled : ''}`}\n                                onClick={(e) => {\n                                    e.preventDefault();\n                                    if (tab.disabled) return;\n                                    setSelectedTab(tab.key);\n                                    onChange(tab.key);\n                                }}\n                            >\n                                {typeof tab.title === 'function' ? tab.title() : tab.title}\n                            </a>\n                        </li>\n                    ))}\n                </ul>\n            </nav>\n            <article>{renderContent(tabs, selectedTab)}</article>\n        </div>\n    );\n}\n","import { prettyBytesOrNA, prettyMilliseconds } from \"../utils\";\n\nexport function formatConfigValue(name: string, value: string | null | undefined, formatType: 'friendly' | 'raw' | 'both'): string {\n    let suffix: string;\n\n    if (value == null) return \"\";\n\n    switch (formatType) {\n        case 'friendly':\n            suffix = '';\n            break;\n        case 'both':\n            suffix = ' (' + value + ')';\n            break;\n\n        case 'raw':\n        default:\n            return value;\n    }\n\n    //\n    // String\n    //\n    if (value && (name == \"advertised.listeners\" || name == \"listener.security.protocol.map\" || name == \"listeners\")) {\n        const listeners = value.split(',');\n        return listeners.join('\\n');\n    }\n\n\n    //\n    // Numeric\n    //\n    const num = Number(value);\n    if (value == null || value == \"\" || value == \"0\" || Number.isNaN(num))\n        return value;\n\n    // Special cases\n    if (name == 'flush.messages' && num > Math.pow(2, 60)) return 'Never' + suffix; // messages between each fsync\n\n    if (name.endsWith('.bytes.per.second')) {\n        if (num >= Number.MAX_SAFE_INTEGER) return 'Infinite' + suffix;\n        return prettyBytesOrNA(num) + '/s' + suffix;\n    }\n\n    // Time\n    const timeExtensions: [string, number][] = [\n        // name ending -> conversion to milliseconds\n        [\".ms\", 1],\n        [\".seconds\", 1000],\n        [\".minutes\", 60 * 1000],\n        [\".hours\", 60 * 60 * 1000],\n        [\".days\", 24 * 60 * 60 * 1000],\n    ];\n    for (const [ext, msFactor] of timeExtensions) {\n        if (!name.endsWith(ext)) continue;\n        if (num > Number.MAX_SAFE_INTEGER || num == -1) return \"Infinite\" + suffix;\n\n        const ms = num * msFactor;\n        return prettyMilliseconds(ms, { verbose: true }) + suffix;\n    }\n\n    // Bytes\n    if (name.endsWith('.bytes') || name.endsWith('.buffer.size') || name.endsWith('.replication.throttled.rate') || name.endsWith('.reassignment.throttled.rate')) {\n        if (num < 0 || num >= Number.MAX_VALUE) return 'Infinite' + suffix;\n        return prettyBytesOrNA(num) + suffix;\n    }\n\n    // Ratio\n    if (name.endsWith('.ratio')) {\n        return (num * 100).toLocaleString() + '%';\n    }\n\n    return value;\n}","import React, { FC, Props, CSSProperties, Component } from \"react\";\nimport { PropsWithChildren } from \"react\";\nimport { TablePaginationConfig } from \"antd/lib/table\";\nimport { uiSettings } from \"../../state/ui\";\nimport { CompareFn } from \"antd/lib/table/interface\";\nimport Draggable from \"react-draggable\";\nimport { observer } from \"mobx-react\";\nimport { Grid, Modal, Tag } from \"antd\";\nimport { uiState } from \"../../state/uiState\";\nimport { hoursToMilliseconds, prettyBytesOrNA, prettyMilliseconds } from \"../../utils/utils\";\nimport env, { IsBusiness, IsDev } from \"../../utils/env\";\nimport { LayoutBypass, QuickTable } from \"../../utils/tsxUtils\";\nimport { clone, toJson } from \"../../utils/jsonUtils\";\nimport { TopicLogDirSummary } from \"../../state/restInterfaces\";\nimport { AlertIcon } from \"@primer/octicons-react\";\n\nconst { useBreakpoint } = Grid;\n\n\nconst renderCount = new Map<string, number>();\nexport const RenderTrap: FC<{ name: string }> = ({ name }) => {\n    let currentCount = renderCount.get(name) || 0;\n    currentCount += 1;\n    renderCount.set(name, currentCount);\n\n    // if (currentCount > 1) {\n    // \tconsole.log(`Rendered [${name}]: ${currentCount}`);\n    // }\n\n    return null;\n}\n\n//export const Section = memo<PropsWithChildren<{ title: string }>>(p =>\nexport const Section = ((p: PropsWithChildren<{ title: string }>) =>\n    <section style={{ padding: '1em 2em' }}>\n        <h2>{p.title}</h2>\n        <div>{p.children}</div>\n    </section>\n)\n\nexport const WhiteCard = (p: PropsWithChildren<{ style?: React.CSSProperties, title?: string }>) =>\n    <div style={{ margin: '1em 2em', padding: '2em 2em', borderRadius: 4, background: 'white', boxShadow: '0em 0em 1em #0002', ...p.style }}  >\n        {p.title && <h2 style={{ borderBottom: '1px solid #0002' }}>{p.title}</h2>}\n        <div>\n            {p.children}\n        </div>\n    </div>\n\n\nconst dragBoxStyle: CSSProperties = {\n    position: 'absolute', right: 0, zIndex: 9999,\n    margin: '4px', marginRight: '20px',\n    minWidth: '200px', display: 'flex', flexDirection: 'column', placeContent: 'center',\n    borderRadius: '3px', background: 'hsl(205, 20%, 20%)', color: '#eee', opacity: 0.8\n};\nexport const DebugDisplay = observer(() => {\n    const screens = useBreakpoint();\n\n    return <Draggable bounds=\"parent\" handle='.title'>\n        <div style={dragBoxStyle}>\n            <div className='title' style={{ textAlign: 'center', padding: '6px', paddingBottom: '6px', borderBottom: '1px solid #aaa6', cursor: 'default', userSelect: 'none' }}>Debug</div>\n            <div style={{ padding: '8px', }}>\n                Breakpoints:{' '}\n                {Object.entries(screens)\n                    .filter(screen => !!screen[1])\n                    .map(screen => (\n                        <Tag color=\"blue\" key={screen[0]}>\n                            {screen[0]}\n                        </Tag>\n                    ))}\n            </div>\n        </div>\n    </Draggable>\n})\n\n\nfunction constant(constantValue: JSX.Element): () => JSX.Element {\n    return () => constantValue\n}\n\nexport const Spacer = constant(<span style={{ display: 'flex', flexGrow: 1 }} />)\n\n\nexport const DEFAULT_TABLE_PAGE_SIZE = 50;\nexport function makePaginationConfig(pageSize: number = DEFAULT_TABLE_PAGE_SIZE, hideOnSinglePage?: boolean): TablePaginationConfig {\n    return {\n        position: ['none' as any, 'bottomRight'],\n        pageSize: pageSize,\n\n        showSizeChanger: true,\n        pageSizeOptions: ['10', '20', '50', '100', '200'],\n        showTotal: (total: number) => `Total ${total} items`,\n        hideOnSinglePage: hideOnSinglePage ?? false,\n    };\n}\n\n\nexport function sortField<T, F extends keyof T>(field: F): CompareFn<T> {\n    return (a: T, b: T, _) => {\n\n        if (a[field] == null && b[field] == null) return 0;\n        if (a[field] != null && b[field] == null) return -1;\n        if (a[field] == null && b[field] != null) return 1;\n\n        if (typeof a[field] === 'string') {\n            const left = String(a[field]);\n            const right = String(b[field]);\n            return left.localeCompare(right, undefined, { numeric: true });\n        }\n        if (typeof a[field] === 'number') {\n            const left = +a[field];\n            const right = +b[field];\n            return left - right;\n        }\n\n        throw Error(`Table 'sortField()' can't handle '${field}', it's type is '${typeof a[field]}'`)\n    }\n}\n\n/**\n * returns an array with the numbers from start, up to end (does not include end!)\n */\nexport function range(start: number, end: number): number[] {\n    const ar = []\n    for (let i = start; i < end; i++)\n        ar.push(i);\n    return ar;\n}\n\nlet updateDialogOpen = false;\n\n\n@observer\nexport class UpdatePopup extends Component {\n    render() {\n        if (updateDialogOpen) return null;\n\n        const serverVersion = uiState.serverVersion;\n        if (!serverVersion) return null; // server version not known yet\n        if (serverVersion.sha == 'dev' || serverVersion.branch == 'dev') return null; // don't show popup in dev\n        if (uiState.updatePromtHiddenUntil !== undefined)\n            if (new Date().getTime() < uiState.updatePromtHiddenUntil)\n                return null; // not yet\n\n        const curTimestamp = Number(env.REACT_APP_KOWL_TIMESTAMP);\n        const serverTimestamp = Number(serverVersion.ts);\n\n        if (!curTimestamp || !Number.isFinite(curTimestamp)) return null;\n        if (!serverTimestamp || !Number.isFinite(curTimestamp)) return null;\n\n        // don't downgrade\n        if (serverTimestamp < curTimestamp) return null;\n        // version already matches\n        if (serverTimestamp == curTimestamp) return null;\n\n        console.log('frontend update available', {\n            serverTimestamp: serverTimestamp,\n            serverDate: new Date(serverTimestamp * 1000),\n            serverVersionInfo: clone(serverVersion),\n            localTimestamp: curTimestamp,\n            localDate: new Date(curTimestamp * 1000),\n            localVersion: clone(env),\n        });\n\n        updateDialogOpen = true;\n        setImmediate(() => {\n            Modal.info({\n                title: 'Kowl has been updated',\n                content: <div>The page must be reloaded to apply the newest version of the frontend.</div>,\n                mask: true,\n                maskClosable: false,\n                centered: true,\n                okText: 'Reload',\n                onOk: () => {\n                    console.log('reloading frontend...');\n                    window.location.reload();\n                    updateDialogOpen = false;\n                },\n                onCancel: () => { updateDialogOpen = false; }\n            });\n        });\n\n        return null;\n\n        /*\n        const curSha = (!!env.REACT_APP_KOWL_GIT_SHA ? env.REACT_APP_KOWL_GIT_SHA : '(dev)');\n        const curRef = env.REACT_APP_KOWL_GIT_REF;\n        const curShaBusiness = env.REACT_APP_KOWL_BUSINESS_GIT_SHA;\n        const curRefBusiness = env.REACT_APP_KOWL_BUSINESS_GIT_REF;\n        const curTimestamp = env.REACT_APP_KOWL_TIMESTAMP;\n        const isFree = !serverVersion.shaBusiness;\n\n        const tableCurrent = {} as { [key: string]: any };\n        const curTimestampDisplay = formatTimestamp(curTimestamp);\n        if (curTimestampDisplay) tableCurrent['Built'] = curTimestampDisplay;\n        tableCurrent['Git SHA'] = <span className='codeBox'>{curSha}</span>;\n        if (curRef) tableCurrent['Release'] = <span className='codeBox'>{curRef}</span>;\n        if (!isFree) {\n            tableCurrent['Git SHA (Business)'] = <span className='codeBox'>{curShaBusiness}</span>;\n            tableCurrent['Release (Business)'] = <span className='codeBox'>{curRefBusiness}</span>;\n        }\n\n        const tableServer = {} as { [key: string]: any };\n        const serverTimestampDisplay = formatTimestamp(serverVersion.ts);\n        if (serverTimestampDisplay) tableServer['Built'] = serverTimestampDisplay;\n        tableServer['Git SHA'] = <span className='codeBox'>{!!serverVersion.sha ? serverVersion.sha : 'none (dev)'}</span>;\n        if (serverVersion.branch) tableServer['Release'] = <span className='codeBox'>{serverVersion.branch}</span>;\n        if (!isFree) {\n            tableServer['Git SHA (Business)'] = <span className='codeBox'>{serverVersion.shaBusiness}</span>;\n            tableServer['Release (Business)'] = <span className='codeBox'>{serverVersion.branchBusiness}</span>;\n        }\n\n        const versionTableStyle: CSSProperties = {\n            background: 'hsl(0deg, 0%, 97%)',\n            border: 'solid 1px hsla(0deg, 0%, 50%, 4%)',\n            padding: '.8em 1em',\n            borderRadius: '4px',\n            fontFamily: 'Open Sans',\n        };\n        const versionHeaderStyle: CSSProperties = {\n            fontSize: '90%',\n            fontWeight: 600,\n            color: 'hsl(0deg, 0%, 40%)',\n            marginBottom: '0.5em',\n        };\n        const keyCellStyle: CSSProperties = {\n            fontSize: '84%',\n            color: 'hsl(0deg, 0%, 40%)',\n        };\n\n        return <Modal title='New version available'\n            visible={true}\n            okText='Update' cancelText=\"Ignore for now\"\n            mask={true} closable={false} maskClosable={false} centered={true} keyboard={false}\n            onCancel={() => uiState.updatePromtHiddenUntil = new Date().getTime() + hoursToMilliseconds(4)}\n            onOk={() => window.location.reload()}\n            style={{ minWidth: '700px' }}\n        >\n            <p>\n                The Kowl backend server is running a different version than the frontend.<br />\n                It is reccommended to reload the page to update the frontend.\n            </p>\n\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '1.5em', margin: '1.5em 0' }}>\n                <div style={versionTableStyle}>\n                    <div style={versionHeaderStyle}>Current Version</div>\n                    <div>{QuickTable(tableCurrent, { keyAlign: 'right', gapWidth: '6px', keyStyle: keyCellStyle, tableStyle: { margin: '0 1.5em' } })}</div>\n                </div>\n\n                <div style={versionTableStyle}>\n                    <div style={versionHeaderStyle}>Server Version</div>\n                    <div>{QuickTable(tableServer, { keyAlign: 'right', gapWidth: '6px', keyStyle: keyCellStyle, tableStyle: { margin: '0 1.5em' } })}</div>\n                </div>\n            </div>\n\n            <div>\n                <p>Do you want to reload the page now?</p>\n            </div>\n        </Modal>\n        */\n    }\n}\n\nfunction formatTimestamp(unixTimestampSeconds: number | string | null | undefined) {\n    if (!unixTimestampSeconds) return null;\n\n    const timestampMs = Number(unixTimestampSeconds) * 1000;\n    if (isNaN(timestampMs)) return null;\n\n    console.log('timestamp: ' + Number(unixTimestampSeconds));\n\n    try {\n        const date = new Date(timestampMs);\n        return <><span className='codeBox'>{date.toUTCString()}</span> <span style={{ fontSize: '85%' }}>({prettyMilliseconds(Date.now() - date.getTime(), { compact: true })} ago)</span></>\n    }\n    catch (ex) {\n        console.error('failed to parse/format the timestamp: ' + String(unixTimestampSeconds));\n        return null;\n    }\n}\n\n\nexport function renderLogDirSummary(summary: TopicLogDirSummary): JSX.Element {\n    if (!summary.hint)\n        return <>{prettyBytesOrNA(summary.totalSizeBytes)}</>\n\n    return <>{prettyBytesOrNA(summary.totalSizeBytes)} <WarningToolip content={summary.hint} position=\"left\" /></>\n}\n\nexport function WarningToolip(p: { content: React.ReactNode, position: 'top' | 'left' }): JSX.Element {\n    const styleTop = {\n        bottom: '100%',\n        left: '50%',\n        transform: 'translateX(-50%)',\n    };\n    const styleLeft = {\n        bottom: '-2px',\n        left: 'auto',\n        right: '105%',\n        transform: 'none',\n    };\n\n    return <LayoutBypass>\n        <div className='tooltip' style={{\n            color: 'hsl(33deg, 90%, 65%)',\n            borderRadius: '25px',\n            display: 'inline-flex',\n            placeItems: 'center',\n            verticalAlign: 'middle',\n            marginLeft: '30px',\n            width: '22px', height: '22px',\n\n        }}>\n            <AlertIcon />\n            <span className='tooltiptext' style={p.position == 'left' ? styleLeft : undefined}>{p.content}</span>\n        </div>\n    </LayoutBypass>\n}","import { Popover } from 'antd';\nimport React, { FunctionComponent, ReactElement } from 'react';\nimport { isClipboardAvailable } from '../../utils/featureDetection';\n\nconst popoverContent = (\n    <>\n        <p>Due to browser restrictions, the clipboard is not accessible on unsecure connections.</p>\n        <p>Please make sure to run Kowl with SSL enabled to use this feature.</p>\n    </>\n);\n\nexport const NoClipboardPopover: FunctionComponent<{\n    children: ReactElement;\n    placement?: 'left'|'top'\n}> = ({ children, placement = 'top' }) =>\n    isClipboardAvailable ? (\n        <>{children}</>\n    ) : (\n        <Popover title=\"Clipboard unavailable\" content={popoverContent} arrowPointAtCenter={true} placement={placement}>\n            {children}\n        </Popover>\n    );\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"radioCardContent\":\"ConnectorBoxCard_radioCardContent__aNiC0\",\"radioCardLogo\":\"ConnectorBoxCard_radioCardLogo__1PV7m\",\"radioCardInfo\":\"ConnectorBoxCard_radioCardInfo__2A7Em\",\"pluginType\":\"ConnectorBoxCard_pluginType__r13s7\",\"pluginMeta\":\"ConnectorBoxCard_pluginMeta__2o0PB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"boxCard\":\"BoxCard_boxCard__1wu-G\",\"dashed\":\"BoxCard_dashed__qJmGQ\",\"hoverable\":\"BoxCard_hoverable__mYYJu\",\"active\":\"BoxCard_active__337xQ\",\"medium\":\"BoxCard_medium__1iqr1\"};","import { message, Tooltip } from 'antd';\nimport { observer } from 'mobx-react';\nimport React, { useState } from 'react';\nimport JsonView, { ReactJsonViewProps } from 'react-json-view';\nimport { uiSettings } from '../../state/ui';\nimport { findPopupContainer } from '../../utils/tsxUtils';\nimport styles from './KowlJsonView.module.scss';\nconst { setTimeout } = window;\n\nlet ctrlDown = false;\ndocument.addEventListener('keydown', e => ctrlDown = e.ctrlKey);\ndocument.addEventListener('keyup', e => ctrlDown = e.ctrlKey);\n\nconst clickPos = { x: 0, y: 0 };\n\nlet timerId = undefined as number | undefined;\nconst setOrRefreshTimeout = (duration: number, action: () => void) => {\n    if (timerId != undefined)\n        clearTimeout(timerId);\n\n    timerId = setTimeout(() => {\n        timerId = undefined;\n        action();\n    }, duration);\n}\n\nexport const KowlJsonView = observer((props: ReactJsonViewProps) => {\n    const { style, ...restProps } = props;\n\n    const settings = uiSettings.jsonViewer;\n    const mergedStyles = Object.assign({ fontSize: settings.fontSize, lineHeight: settings.lineHeight, whiteSpace: 'normal' }, style);\n\n    const [visible, setVisible] = useState(false);\n    const containerRef = React.useRef<HTMLDivElement>(null);\n\n\n    return (\n        <div className=\"copyHintContainer\" ref={containerRef}\n            onMouseDownCapture={e => {\n\n                if (e.ctrlKey) {\n                    // copy\n                    return;\n                }\n\n                // Show hint\n\n                // Find parent \"div.variable-value\"\n                // can be either the actual target (numbers), or a parent (strings, but only sometimes)\n                let target = e.target as Element;\n                if (target instanceof Element) {\n                    while (!target.classList.contains('variable-value')) {\n                        if (target.parentElement != null)\n                            target = target.parentElement; // try parent\n                        else\n                            return; // no more parents, give up\n                    }\n                }\n\n                const parentPos = containerRef.current ? containerRef.current.getClientRects()[0] : { x: 0, y: 0 };\n                clickPos.x = e.clientX - parentPos.x;\n                clickPos.y = e.clientY - parentPos.y;\n\n                setVisible(false);\n                setOrRefreshTimeout(1000, () => {\n                    setVisible(false);\n                });\n                setVisible(true);\n\n            }}>\n            <Tooltip overlay=\"CTRL+Click to copy\" visible={visible}\n                overlayClassName={styles.tooltipTransformFix}\n                getPopupContainer={x => containerRef.current ?? x}\n                align={{\n                    points: ['bc', 'tc'],\n                    targetOffset: ['50%', '0%'] as unknown as any,\n                    offset: [clickPos.x, clickPos.y - 6],\n                    overflow: { adjustX: false, adjustY: false }\n                }}\n            >\n                <JsonView\n                    style={mergedStyles}\n                    displayDataTypes={false}\n                    displayObjectSize={true}\n                    enableClipboard={false}\n                    name={null}\n                    collapseStringsAfterLength={settings.maxStringLength}\n                    groupArraysAfterLength={100}\n                    indentWidth={5}\n                    iconStyle=\"triangle\"\n                    collapsed={2}\n                    onSelect={e => {\n                        if (ctrlDown) {\n                            if (navigator?.clipboard) {\n                                navigator.clipboard.writeText(String(e.value));\n                                message.success(<span>Copied value of <span className='codeBox'>{e.name}</span></span>, 0.8);\n                            }\n                        }\n                    }}\n                    {...restProps}\n                />\n            </Tooltip>\n        </div>\n    );\n})\n","import { observable, autorun, makeObservable } from \"mobx\";\nimport { assignDeep, randomId } from \"../utils/utils\";\nimport { touch, clone } from \"../utils/jsonUtils\";\nimport { DEFAULT_TABLE_PAGE_SIZE } from \"../components/misc/common\";\nimport { TopicTabId } from \"../components/pages/topics/Topic.Details\";\nimport { AclRequest, AclRequestDefault } from \"./restInterfaces\";\nimport { TableSettings } from \"../components/misc/KowlTable\";\nimport { ConnectTabKeys } from \"../components/pages/connect/Overview\";\n\nconst settingsName = 'uiSettings-v3';\n\nexport type ValueDisplay = 'friendly' | 'both' | 'raw'\n\nexport interface PreviewTag {\n    id: string;\n\n    isActive: boolean;\n    text: string;\n    customName?: string;\n}\n\nexport interface PreviewTagV2 {\n    id: string;\n\n    isActive: boolean;\n\n    pattern: string; // pattern, upgrade from old \"text\" prop\n    customName?: string;\n\n    searchInMessageHeaders: boolean;\n    searchInMessageKey: boolean;\n    searchInMessageValue: boolean;\n}\n\nexport interface ColumnList {\n    title: string;\n    dataIndex: string;\n}\n\nexport type FilterType = 'simple' | 'code'\nexport const FilterOperators = [\n    {\n        name: '==',\n    },\n    {\n        name: '!=',\n    },\n    {\n        name: '<',\n    },\n    {\n        name: '<=',\n    },\n] as const;\nexport type FilterOperator = (typeof FilterOperators[number])['name']\n\nexport class FilterEntry {\n    constructor() {\n        makeObservable(this);\n    }\n\n    id = randomId() + randomId(); // used as react key\n    @observable filterType: FilterType = 'code';\n\n    @observable isActive = true;\n\n    // Simple\n    @observable property: string = ''; // ex: 'battle.type'\n    @observable operator: FilterOperator = '==';\n    @observable value: string = ''; // any js expression: string, number, or array\n\n    // Code\n    @observable name: string = ''; // name of the filter, shown instead of the code when set\n    @observable code: string = 'return true\\n//allow all messages'; // js code the user entered\n}\n\n\nexport type TimestampDisplayFormat = 'default' | 'unixTimestamp' | 'onlyDate' | 'onlyTime' | 'unixSeconds' | 'relative';\nexport function IsLocalTimestampFormat(timestampType: TimestampDisplayFormat) {\n    switch (timestampType) {\n        case 'default': return true; // 'localDateTime'\n        case 'onlyDate': return true;\n        case 'onlyTime': return true;\n        case 'relative': return true;\n    }\n    return false;\n}\n\nexport enum TopicOffsetOrigin { EndMinusResults = -1, Start = -2, End = -3, Timestamp = -4, Custom = 0 }\nexport type TopicMessageSearchSettings = TopicDetailsSettings['searchParams']\n// Settings for an individual topic\nexport class TopicDetailsSettings {\n    constructor() {\n        makeObservable(this);\n    }\n\n    topicName: string;\n\n    @observable searchParams = {\n        offsetOrigin: -1 as TopicOffsetOrigin, // start, end, custom\n        startOffset: -1, // used when offsetOrigin is custom\n        startTimestamp: -1, // used when offsetOrigin is timestamp\n        startTimestampWasSetByUser: false, // only used in frontend, to track whether we should update the timestamp to 'now' when the page loads\n        partitionID: -1,\n        maxResults: 50,\n\n        filtersEnabled: false,\n        filters: [] as FilterEntry[],\n    };\n\n    @observable messagesPageSize = 20;\n    @observable favConfigEntries: string[] = ['cleanup.policy', 'segment.bytes', 'segment.ms'];\n\n    @observable previewTags = [] as PreviewTagV2[];\n    @observable previewTagsCaseSensitive = false;\n\n    @observable previewMultiResultMode = 'showAll' as 'showOnlyFirst' | 'showAll'; // maybe todo: 'limitTo'|'onlyCount' ?\n    @observable previewDisplayMode = 'wrap' as 'single' | 'wrap' | 'rows'; // only one line / wrap / seperate line for each result\n\n    // @observable previewResultLimit: 3; // todo\n    @observable previewShowEmptyMessages = true; // todo: filter out messages that don't match\n    @observable showMessageMetadata = true;\n    @observable showMessageHeaders = false;\n\n    @observable searchParametersLocalTimeMode = true;\n    @observable previewTimestamps = 'default' as TimestampDisplayFormat;\n    @observable previewColumnFields = [] as ColumnList[];\n\n    @observable consumerPageSize = 20;\n    @observable partitionPageSize = 20;\n    @observable aclPageSize = 20;\n\n\n    @observable quickSearch = '';\n\n}\n\nconst uiSettings = observable({\n    sideBarOpen: true,\n    selectedClusterIndex: 0,\n    perTopicSettings: [] as TopicDetailsSettings[], // don't use directly, instead use uiState.topicDetails\n    topicDetailsActiveTabKey: undefined as TopicTabId | undefined,\n\n    topicDetailsShowStatisticsBar: true, // for now: global for all topic details\n    jsonViewer: {\n        fontSize: '12px',\n        lineHeight: '1em',\n        maxStringLength: 200,\n    },\n\n    // todo: refactor into: brokers.list, brokers.detail, topics.messages, topics.config, ...\n    brokerList: {\n        hideEmptyColumns: false,\n        pageSize: DEFAULT_TABLE_PAGE_SIZE,\n        quickSearch: '',\n\n        valueDisplay: 'friendly' as 'friendly' | 'raw',\n        propsFilter: 'onlyChanged' as 'all' | 'onlyChanged',\n        propsOrder: 'alphabetical' as 'changedFirst' | 'default' | 'alphabetical',\n\n        configTable: {\n            pageSize: 100,\n            quickSearch: '',\n        }\n    },\n\n    reassignment: { // partition reassignment\n        // Active\n        activeReassignments: {\n            quickSearch: '',\n            pageSize: 5,\n        },\n\n        // Select\n        quickSearch: '',\n        pageSizeSelect: 10,\n\n        // Brokers\n        pageSizeBrokers: 10,\n\n        // Review\n        pageSizeReview: 20,\n        maxReplicationTraffic: 0 as number | null, // bytes per second, or \"no change\"\n    },\n\n    topicList: {\n        hideInternalTopics: true,\n        quickSearch: '',\n        pageSize: DEFAULT_TABLE_PAGE_SIZE, // number of topics to show\n\n        // Topic Configuration\n        valueDisplay: 'friendly' as ValueDisplay,\n        propsOrder: 'changedFirst' as 'changedFirst' | 'default' | 'alphabetical',\n    },\n\n    consumerGroupList: {\n        pageSize: DEFAULT_TABLE_PAGE_SIZE,\n        quickSearch: '',\n    },\n\n    consumerGroupDetails: {\n        pageSize: DEFAULT_TABLE_PAGE_SIZE,\n        showStatisticsBar: true,\n    },\n\n    aclSearchParams: clone(AclRequestDefault) as AclRequest,\n\n    quotasList: {\n        pageSize: DEFAULT_TABLE_PAGE_SIZE,\n        quickSearch: '',\n    },\n\n    schemaList: {\n        pageSize: DEFAULT_TABLE_PAGE_SIZE,\n        quickSearch: ''\n    },\n\n    schemaDetails: {\n        viewMode: 'fields' as 'json' | 'fields',\n    },\n\n    kafkaConnect: {\n        selectedTab: 'clusters' as ConnectTabKeys,\n\n        clusters: {\n            pageSize: undefined as any as number,\n            quickSearch: ''\n        },\n        connectors: {\n            pageSize: undefined as any as number,\n            quickSearch: ''\n        },\n        tasks: {\n            pageSize: undefined as any as number,\n            quickSearch: ''\n        },\n\n        clusterDetails: {\n            pageSize: undefined as any as number,\n            quickSearch: ''\n        },\n        clusterDetailsPlugins: {\n            pageSize: undefined as any as number,\n            quickSearch: ''\n        },\n\n        connectorDetails: {\n            pageSize: undefined as any as number,\n            quickSearch: ''\n        }\n    },\n\n    userDefaults: {\n        paginationPosition: 'bottomRight' as ('bottomRight' | 'topRight'),\n    }\n});\nexport { uiSettings };\n\n\n\n//\n// Settings save/load\n\n// Load settings\nconst storedSettingsJson = localStorage.getItem(settingsName);\nif (storedSettingsJson) {\n    const loadedSettings = JSON.parse(storedSettingsJson);\n    assignDeep(uiSettings, loadedSettings); // overwrite defaults with loaded values\n\n    // Upgrade: new props in 'TopicDetailsSettings'\n    for (const ts of uiSettings.perTopicSettings) {\n        // when loading a previous version, we'll have \"undefined\" for all the new properties,\n        // which is ok for 'number', but not for any other type.\n        ts.previewColumnFields = ts.previewColumnFields ?? [];\n        ts.previewTimestamps = ts.previewTimestamps ?? 'default';\n    }\n\n    // Upgrade: PreviewTag to PreviewTagV2\n    for (const ts of uiSettings.perTopicSettings) {\n        for (let i = 0; i < ts.previewTags.length; i++) {\n            const tag = ts.previewTags[i];\n            if (isPreviewTagV1(tag)) {\n                // upgrade by constructing a new tag from the old data\n                const newTag: PreviewTagV2 = {\n                    id: tag.id,\n                    isActive: tag.isActive,\n                    pattern: '**.' + tag.text,\n                    customName: tag.customName,\n                    searchInMessageHeaders: false,\n                    searchInMessageKey: false,\n                    searchInMessageValue: true,\n                };\n\n                // replace old tag\n                ts.previewTags[i] = newTag;\n            }\n        }\n    }\n}\n\nfunction isPreviewTagV1(tag: PreviewTag | PreviewTagV2): tag is PreviewTag {\n    return (tag as PreviewTag).text !== undefined;\n}\n\n\n// Auto save (timed)\nautorun(() => {\n    touch(uiSettings);\n    const json = JSON.stringify(uiSettings);\n    localStorage.setItem(settingsName, json);\n    //console.log('settings: ' + json);\n}, { delay: 1000 });\n\n// Auto save (on exit)\nwindow.addEventListener('beforeunload', () => {\n    const json = JSON.stringify(uiSettings);\n    localStorage.setItem(settingsName, json);\n    //console.log('settings (unload): ' + json);\n});\n\n","import { Component } from \"react\"\nimport React from \"react\"\nimport { Tooltip, message } from \"antd\"\nimport { findPopupContainer } from \"../../utils/tsxUtils\"\nimport { EyeClosedIcon } from \"@primer/octicons-react\"\n\n\n\nexport class HideStatisticsBarButton extends Component<{ onClick: () => void }> {\n\n    handleClick = () => {\n        this.props.onClick();\n        message.info('Statistics bar hidden! You can enable it again in the preferences.', 8);\n    }\n\n    render() {\n        return <Tooltip\n            title={<span style={{ whiteSpace: 'nowrap' }}>Hide statistics bar</span>}\n            getPopupContainer={findPopupContainer}\n            arrowPointAtCenter={true}\n            placement='right'\n        >\n            <div className='hideStatsBarButton' onClick={this.handleClick}>\n                <div style={{ display: 'flex', width: '100%' }}>\n                    <EyeClosedIcon size='medium' />\n                </div>\n            </div>\n        </Tooltip>\n    }\n}","import React, { Component } from 'react';\nimport { KafkaError, ConfigEntry, Topic } from '../../../state/restInterfaces';\nimport { Tooltip, Popover, Checkbox, Empty, Typography, Button, Result } from 'antd';\nimport { observer } from 'mobx-react';\nimport { uiSettings } from '../../../state/ui';\nimport topicConfigInfo from '../../../assets/topicConfigInfo.json';\nimport Paragraph from 'antd/lib/typography/Paragraph';\nimport '../../../utils/arrayExtensions';\nimport { HighlightTwoTone } from '@ant-design/icons';\nimport { uiState } from '../../../state/uiState';\nimport { DefaultSkeleton, findPopupContainer, OptionGroup } from '../../../utils/tsxUtils';\nimport { api } from '../../../state/backendApi';\nimport { toJson } from '../../../utils/jsonUtils';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { computed, makeObservable } from 'mobx';\nimport { formatConfigValue } from '../../../utils/formatters/ConfigValueFormatter';\nimport { ConfigList } from '../../misc/ConfigList';\nimport { prettyBytesOrNA, prettyMilliseconds } from \"../../../utils/utils\";\n\nconst { Text } = Typography;\n\n// todo: can we assume that config values for time and bytes will always be provided in the smallest units?\n// or is it possible we'll get something like 'segment.hours' instead of 'segment.ms'?\n\n// Full topic configuration\n@observer\nexport class TopicConfiguration extends Component<{ topic: Topic }> {\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n\n    render() {\n        const renderedError = this.handleError();\n        if (renderedError) return renderedError;\n\n        return (\n            <>\n                <ConfigDisplaySettings />\n                <TopicConfigList configEntries={this.configEntries} />\n            </>\n        );\n    }\n\n    @computed get configEntries(): ConfigEntry[] {\n        const config = api.topicConfig.get(this.props.topic.topicName);\n        if (config == null) return [];\n\n        return config.configEntries\n            .slice().sort((a, b) => {\n                switch (uiSettings.topicList.propsOrder) {\n                    case 'default':\n                        return 0;\n                    case 'alphabetical':\n                        return a.name.localeCompare(b.name);\n                    case 'changedFirst':\n                        if (uiSettings.topicList.propsOrder != 'changedFirst') return 0;\n                        const v1 = a.isExplicitlySet ? 1 : 0;\n                        const v2 = b.isExplicitlySet ? 1 : 0;\n                        return v2 - v1;\n                    default: return 0;\n                }\n            });\n    }\n\n    handleError(): JSX.Element | null {\n        const config = api.topicConfig.get(this.props.topic.topicName);\n        if (config === undefined) return DefaultSkeleton; // still loading\n        if (config && config.error) return this.renderKafkaError(this.props.topic.topicName, config.error);\n\n        if (config === null || config.configEntries.length == 0) {\n            // config===null should never happen, so we catch it together with empty\n            const desc = (\n                <>\n                    <Text type=\"secondary\" strong style={{ fontSize: '125%' }}>\n                        No config entries\n                    </Text>\n                    <br />\n                </>\n            );\n            return <Empty description={desc} />;\n        }\n        return null;\n    }\n\n    renderKafkaError(topicName: string, error: KafkaError) {\n        return (\n            <div style={{ marginBottom: '2em', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n                <div style={{ maxWidth: '800px', display: 'flex', flexDirection: 'column' }}>\n                    <Result\n                        style={{ margin: 0, padding: 0, marginTop: '1em' }}\n                        status=\"error\"\n                        title=\"Kafka Error\"\n                        subTitle={\n                            <>\n                                Kowl received the following error while fetching the configuration for topic <Text code>{topicName}</Text> from Kafka:\n                            </>\n                        }\n                    ></Result>\n                    <div style={{ margin: '1.5em 0', marginTop: '1em' }}>\n                        <div className=\"codeBox w100\" style={{ padding: '0.5em 1em' }}>\n                            {toJson(error, 4)}\n                        </div>\n                    </div>\n                    <Button type=\"primary\" size=\"large\" onClick={() => appGlobal.onRefresh()} style={{ width: '12em', margin: '0', alignSelf: 'center' }}>\n                        Retry\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\n\n\nconst TopicConfigList = observer(({ configEntries }: { configEntries: ConfigEntry[] }) => {\n    return <ConfigList configEntries={configEntries} valueDisplay={uiSettings.topicList.valueDisplay} />;\n});\n\nconst ConfigDisplaySettings = observer(() => (\n    <div\n        style={{\n            marginLeft: '1px',\n            marginBottom: '1.5em',\n            display: 'flex',\n            flexWrap: 'wrap',\n            gap: '2em',\n            rowGap: '1em',\n        }}\n    >\n        <OptionGroup\n            label=\"Formatting\"\n            options={{\n                Friendly: 'friendly',\n                Raw: 'raw',\n            }}\n            value={uiSettings.topicList.valueDisplay}\n            onChange={(s) => (uiSettings.topicList.valueDisplay = s)}\n        />\n\n        <OptionGroup\n            label=\"Sort\"\n            options={{\n                None: 'default',\n                Alphabetical: 'alphabetical',\n                'Changed First': 'changedFirst',\n            }}\n            value={uiSettings.topicList.propsOrder}\n            onChange={(s) => (uiSettings.topicList.propsOrder = s)}\n        />\n    </div>\n));\n\nconst markerIcon = <HighlightTwoTone twoToneColor=\"#1890ff\" style={{ fontSize: '1.5em', marginRight: '.25em' }} />;\n\nexport const FavoritePopover = (configEntry: ConfigEntry, children: React.ReactNode) => {\n    const name = configEntry.name;\n    const favs = uiState.topicSettings.favConfigEntries;\n    const isFav = favs.includes(name);\n    const toggleFav = isFav ? () => favs.splice(favs.indexOf(name), 1) : () => favs.push(name);\n\n    const infoEntry = topicConfigInfo.find((e) => e.Name == name);\n\n    const popupContent = (\n        <div>\n            <Paragraph style={{ maxWidth: '400px' }}>\n                <b>Description</b>\n                <br />\n                <Text>{infoEntry ? infoEntry.Description : \"Config property '\" + name + \"' unknown\"}</Text>\n            </Paragraph>\n\n            <Checkbox children=\"Show this setting in 'Quick Info'\" checked={isFav} onChange={() => toggleFav()} />\n        </div>\n    );\n\n    return (\n        <Popover\n            key={configEntry.name}\n            placement=\"right\"\n            trigger=\"click\"\n            title={\n                <>\n                    Config <Text code>{name}</Text>\n                </>\n            }\n            content={popupContent}\n        >\n            <div className=\"hoverLink\" style={{ display: 'flex', verticalAlign: 'middle', cursor: 'pointer' }}>\n                {children}\n                {/* <div style={{ flexGrow: 1 }} /> */}\n            </div>\n        </Popover>\n    );\n};\n\nexport function DataValue(name: string, value: string, isDefault: boolean, formatType: 'friendly' | 'raw' | 'both') {\n    value = formatConfigValue(name, value, formatType);\n\n    if (isDefault) return <code>{value}</code>;\n\n    return (\n        <Tooltip title=\"Value is different from the default\" getPopupContainer={findPopupContainer}>\n            <div>\n                {markerIcon}\n                <code>{value}</code>\n            </div>\n        </Tooltip>\n    );\n}\n","import { EditTwoTone, EyeInvisibleTwoTone, InfoCircleFilled, LockOutlined, LockTwoTone } from '@ant-design/icons';\nimport { Popover, Table, Tooltip } from 'antd';\nimport React, { useState } from 'react';\nimport { ConfigEntry } from '../../state/restInterfaces';\nimport { ValueDisplay } from '../../state/ui';\nimport { formatConfigValue } from '../../utils/formatters/ConfigValueFormatter';\nimport { findPopupContainer } from '../../utils/tsxUtils';\nimport { sortField } from './common';\n\nimport styles from './ConfigList.module.scss';\nimport { KowlColumnType, KowlTable } from './KowlTable';\n\nexport function ConfigList({ configEntries, valueDisplay }: { configEntries: ConfigEntry[]; valueDisplay: ValueDisplay }) {\n    const columns: KowlColumnType<ConfigEntry>[] = [\n        {\n            title: 'Configuration',\n            dataIndex: 'name',\n            render: (text: string, record: Partial<ConfigEntry>) => (\n                <div className={styles.name}>\n                    <Tooltip overlay={text} getPopupContainer={findPopupContainer} mouseEnterDelay={0.25}>\n                        <span className={styles.nameText}>{text}</span>\n                    </Tooltip>\n                    {(record.isSensitive || record.isExplicitlySet || record.isReadOnly) && <span className={styles.configFlags}>\n\n                        {/*\n                        {record.isExplicitlySet && <Tooltip overlay=\"Value was set explicitly\">\n                            <EditTwoTone twoToneColor=\"#1890ff\" />\n                        </Tooltip>} */}\n\n                        {record.isSensitive && <Tooltip overlay=\"Value has been redacted because it's sensitive\">\n                            <EyeInvisibleTwoTone twoToneColor=\"#1890ff\" />\n                        </Tooltip>}\n\n                    </span>}\n\n                </div>\n            )\n        },\n        {\n            title: 'Value',\n            dataIndex: 'value',\n            render: (_: unknown, record: Partial<ConfigEntry>) => (\n                <span className={styles.value}>\n                    {formatConfigValue(record.name as string, record.value as string, valueDisplay)}\n                </span>\n            ),\n        },\n        {\n            title: 'Type', width: '120px',\n            dataIndex: 'type',\n            render: (text: string) => <span className={styles.type}>{text?.toLowerCase()}</span>,\n            filterType: { type: 'enum', toDisplay: x => String(x).toLowerCase(), optionClassName: 'capitalize' },\n            sorter: sortField('type')\n        },\n        {\n            title: (\n                <span className={styles.sourceHeader}>\n                    Source\n                    <Tooltip\n                        overlay={<div style={{ width: '300px', textAlign: 'left' }}><p>Resources can be configured at different levels. Example: A topic config may be inherited from the static broker config.</p><p>Valid sources are: Dynamic Topic, Dynamic Broker, Default Broker, Static Broker, Dynamic Broker Logger and Default config.</p></div>}\n                        title=\"Source\"\n                        trigger=\"hover\"\n                        placement=\"left\"\n                        getPopupContainer={findPopupContainer}>\n                        <InfoCircleFilled style={{ color: '#bbbbbb' }} />\n                    </Tooltip>\n                </span>\n            ),\n            dataIndex: 'source', width: '180px',\n            render: (text: string) =>\n                <span className={styles.source}>{text\n                    .toLowerCase()\n                    .split('_')\n                    .join(' ')}\n                </span>,\n            filterType: { type: 'enum', toDisplay: x => x.toLowerCase().split('_').join(' '), optionClassName: 'capitalize' },\n            sorter: sortField('source')\n\n        },\n    ];\n\n    return (\n        <KowlTable className={styles.configEntryTable}\n\n            dataSource={configEntries}\n            columns={columns}\n\n            pagination={{\n                visible: false,\n                defaultPageSize: 10000,\n            }}\n\n            expandable={{\n                childrenColumnName: \"synonyms\",\n                indentSize: 20,\n            }}\n            search={{\n                searchColumnIndex: 0,\n                isRowMatch: (row, regex) => {\n                    if (row.name && regex.test(row.name)) return true;\n                    if (row.value && regex.test(row.value)) return true;\n                    return false;\n                }\n            }}\n\n            rowKey=\"name\"\n            rowClassName={(record) => (record.isExplicitlySet ? styles.overidden : styles.default)}\n        />\n    );\n}\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport { sortField } from '../../../misc/common';\nimport Table, { ColumnProps, TablePaginationConfig } from 'antd/lib/table';\nimport { toJson } from '../../../../utils/jsonUtils';\nimport { Alert } from 'antd';\n\nimport type { AclResponse } from '../../../../state/restInterfaces';\n\ntype Acls = AclResponse | null | undefined;\n\ninterface AclListProps {\n    acl: Acls;\n    onChange?: (config: TablePaginationConfig) => void;\n    paginationConfig?: TablePaginationConfig;\n}\n\nfunction flatResourceList(store: Acls) {\n    const acls = store;\n    if (acls?.aclResources == null) return [];\n    const flatResources = acls.aclResources\n        .map((res) => res.acls.map((rule) => ({ ...res, ...rule })))\n        .flat()\n        .map((x) => ({ ...x, eqKey: toJson(x) }));\n    return flatResources;\n}\n\nexport default observer(function ({ acl, onChange, paginationConfig }: AclListProps) {\n    const resources = flatResourceList(acl);\n    const columns: ColumnProps<typeof resources[0]>[] = [\n        { width: '120px', title: 'Resource', dataIndex: 'resourceType', sorter: sortField('resourceType'), defaultSortOrder: 'ascend' },\n        { width: '120px', title: 'Permission', dataIndex: 'permissionType', sorter: sortField('permissionType') },\n        { width: 'auto', title: 'Principal', dataIndex: 'principal', sorter: sortField('principal') },\n        { width: '160px', title: 'Operation', dataIndex: 'operation', sorter: sortField('operation') },\n        { width: 'auto', title: 'PatternType', dataIndex: 'resourcePatternType', sorter: sortField('resourcePatternType') },\n        { width: 'auto', title: 'Name', dataIndex: 'resourceName', sorter: sortField('resourceName') },\n        { width: '120px', title: 'Host', dataIndex: 'host', sorter: sortField('host') },\n    ];\n\n    return (\n        <>\n            {acl == null ? <Alert type=\"warning\" message=\"You do not have the necessary permissions to view ACLs\" showIcon style={{ marginBottom: '1em' }} /> : null}\n            {!acl?.isAuthorizerEnabled ? <Alert type=\"warning\" message=\"There's no authorizer configured in your Kafka cluster\" showIcon style={{ marginBottom: '1em' }} /> : null}\n            <Table\n                dataSource={resources}\n                columns={columns}\n                pagination={paginationConfig} onChange={onChange}\n                rowKey={(x) => x.eqKey}\n                rowClassName={() => 'pureDisplayRow'}\n            />\n        </>\n    );\n});\n","import { observable, autorun, IReactionDisposer, computed, transaction, action, makeObservable } from \"mobx\";\n\n/*\n    Intended use:\n    create a FilterableDataSource and give it a function (a mobx @computed) that acts as the data source,\n    as well as a filter function (that accepts or rejects elements of the data source based on the filterText).\n    When either the filterText or the dataSource change, the filter will be applied to all elements of the source,\n    and the result will be set to 'data' (which is observable as well of course)\n*/\nexport class FilterableDataSource<T> {\n    private reactionDisposer?: IReactionDisposer;\n\n    @observable filterText: string = ''; // set by the user (from an input field or so, can be read/write)\n\n    @observable private _lastFilterText: string = '';\n    @computed get lastFilterText() { return this._lastFilterText; }\n    @observable.ref private resultData: T[] = []; // set by this class (so only exposed through computed prop)\n    @computed get data(): T[] { return this.resultData; }\n\n    constructor(\n        private dataSource: () => T[] | undefined,\n        private filter: (filterText: string, item: T) => boolean,\n        debounceMilliseconds?: number\n    ) {\n        if (!debounceMilliseconds) debounceMilliseconds = 100;\n        this.reactionDisposer = autorun(this.update.bind(this), { delay: debounceMilliseconds, name: 'FilterableDataSource' });\n\n        makeObservable(this);\n    }\n\n    private update() {\n        transaction(() => {\n            const source = this.dataSource();\n            const filterText = this.filterText;\n            if (source) {\n                this.resultData = source.filter(x => this.filter(filterText, x));\n                //console.log('updating filterableDataSource: ...');\n            } else {\n                this.resultData = [];\n                //console.log('updating filterableDataSource: source == undefined|null');\n            }\n            this._lastFilterText = this.filterText;\n        });\n    }\n\n    dispose() {\n        if (this.reactionDisposer) {\n            this.reactionDisposer();\n            this.reactionDisposer = undefined;\n        }\n    }\n}","import { Component } from 'react';\nimport React from 'react';\nimport { DatePicker, Radio } from 'antd';\nimport { observer } from 'mobx-react';\nimport { makeObservable, observable } from 'mobx';\nimport moment from 'moment';\n\n@observer\nexport class KowlTimePicker extends Component<{\n    valueUtcMs: number;\n    onChange: (utcMs: number) => void;\n    disabled?: boolean;\n}> {\n    @observable isLocalTimeMode = false;\n    @observable timestampUtcMs: number = new Date().valueOf();\n\n    constructor(p: any) {\n        super(p);\n        this.timestampUtcMs = this.props.valueUtcMs;\n        makeObservable(this);\n    }\n\n    render() {\n        let format = 'DD.MM.YYYY HH:mm:ss';\n        let current: moment.Moment = moment.utc(this.timestampUtcMs);\n\n        if (this.isLocalTimeMode) {\n            current = current?.local();\n            format += ' [(Local)]';\n        } else {\n            format += ' [(UTC)]';\n        }\n\n        return (\n            <DatePicker\n                showTime={true}\n                allowClear={false}\n                renderExtraFooter={() => this.footer()}\n                format={format}\n                value={current}\n                onChange={(e) => {\n                    this.timestampUtcMs = e?.valueOf() ?? -1;\n                    this.props.onChange(this.timestampUtcMs);\n                }}\n                onOk={(e) => {\n                    this.timestampUtcMs = e.valueOf();\n                    this.props.onChange(this.timestampUtcMs);\n                }}\n                disabled={this.props.disabled}\n            />\n        );\n    }\n\n    footer() {\n        return (\n            <Radio.Group\n                value={this.isLocalTimeMode ? 'local' : 'utc'}\n                onChange={(e) => {\n                    // console.log(\"date mode changed\", { newValue: e.target.value, isLocalMode: this.isLocalTimeMode });\n                    this.isLocalTimeMode = e.target.value == 'local';\n                }}\n            >\n                <Radio value=\"local\">Local</Radio>\n                <Radio value=\"utc\">UTC</Radio>\n            </Radio.Group>\n        );\n    }\n}\n","import React, { ReactNode, Component } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Table, Statistic, Row, Skeleton, Checkbox, Steps, Button, message, Select, notification, ConfigProvider, Modal } from \"antd\";\nimport { PageComponent, PageInitHelper } from \"../Page\";\nimport { api, partialTopicConfigs } from \"../../../state/backendApi\";\nimport { uiSettings } from \"../../../state/ui\";\nimport { makePaginationConfig, range, sortField } from \"../../misc/common\";\nimport { Broker, Partition, PartitionReassignmentRequest, TopicAssignment, Topic, ConfigResourceType, AlterConfigOperation, PatchConfigsRequest, ResourceConfig, AlterPartitionReassignmentsPartitionResponse } from \"../../../state/restInterfaces\";\nimport { motion } from \"framer-motion\";\nimport { animProps, } from \"../../../utils/animationProps\";\nimport { observable, computed, autorun, IReactionDisposer, transaction, untracked, makeObservable } from \"mobx\";\nimport { clone, toJson } from \"../../../utils/jsonUtils\";\nimport { appGlobal } from \"../../../state/appGlobal\";\nimport Card from \"../../misc/Card\";\nimport Icon, { CheckCircleOutlined, CheckSquareOutlined, ContainerOutlined, CrownOutlined, ExclamationCircleOutlined, HddOutlined, UnorderedListOutlined, YahooFilled } from '@ant-design/icons';\nimport { DefaultSkeleton, ObjToKv, OptionGroup, QuickTable } from \"../../../utils/tsxUtils\";\nimport { stringify } from \"query-string\";\nimport { StepSelectBrokers } from \"./Step2.Brokers\";\nimport { BrokerList } from \"./components/BrokerList\";\nimport { IndeterminateCheckbox } from \"./components/IndeterminateCheckbox\";\nimport { SelectPartitionTable, StepSelectPartitions } from \"./Step1.Partitions\";\nimport { PartitionWithMoves, StepReview, TopicWithMoves } from \"./Step3.Review\";\nimport { ApiData, computeReassignments, TopicPartitions } from \"./logic/reassignLogic\";\nimport { computeMovedReplicas, partitionSelectionToTopicPartitions, removeRedundantReassignments, topicAssignmentsToReassignmentRequest } from \"./logic/utils\";\nimport { IsDev } from \"../../../utils/env\";\nimport { Message, scrollTo, scrollToTop } from \"../../../utils/utils\";\nimport { ActiveReassignments } from \"./components/ActiveReassignments\";\nimport { ReassignmentTracker } from \"./logic/reassignmentTracker\";\nimport { showErrorModal } from \"../../misc/ErrorModal\";\nimport { ChevronLeftIcon, ChevronRightIcon } from \"@primer/octicons-react\";\n\n\nconst { Step } = Steps;\n\nexport interface PartitionSelection { // Which partitions are selected?\n    [topicName: string]: number[] // topicName -> array of partitionIds\n}\n\n\nconst reassignmentTracker = new ReassignmentTracker();\nexport { reassignmentTracker };\n\n\n@observer\nclass ReassignPartitions extends PageComponent {\n    pageConfig = makePaginationConfig(15, true);\n\n    @observable currentStep = 0; // current page of the wizard\n\n    // topics/partitions selected by user\n    @observable partitionSelection: PartitionSelection = {\n        // \"weeco-frontend-events\": [0, 1, 2, 3, 4, 5] // 3.56gb\n    };\n    // brokers selected by user\n    @observable selectedBrokerIds: number[] = [];\n    // computed reassignments\n    @observable reassignmentRequest: PartitionReassignmentRequest | null = null; // request as returned by the computation\n    // @observable optimizedReassignmentRequest: PartitionReassignmentRequest | null = null; // optimized request that will be sent\n\n    @observable _debug_apiData: ApiData | null = null;\n    @observable _debug_topicPartitions: TopicPartitions[] | null = null;\n    @observable _debug_brokers: Broker[] | null = null;\n\n    refreshTopicConfigsTimer: NodeJS.Timer | null = null;\n    refreshTopicConfigsRequestsInProgress: number = 0;\n\n    @observable topicsWithThrottle: string[] = [];\n\n    @observable requestInProgress = false;\n\n    autoScrollReactionDisposer: IReactionDisposer | null = null;\n    resetSelectionOnErrorsReactionDisposer: IReactionDisposer | null = null;\n\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'Reassign Partitions';\n        p.addBreadcrumb('Reassign Partitions', '/reassign-partitions');\n\n        appGlobal.onRefresh = () => this.refreshData(true);\n        this.refreshData(true);\n    }\n\n    componentDidMount() {\n        this.removeThrottleFromTopics = this.removeThrottleFromTopics.bind(this);\n\n        const oriOnNextPage = this.onNextPage.bind(this);\n        this.onNextPage = () => transaction(oriOnNextPage);\n\n        const oriOnPrevPage = this.onPreviousPage.bind(this);\n        this.onPreviousPage = () => transaction(oriOnPrevPage);\n\n        this.startRefreshingTopicConfigs = this.startRefreshingTopicConfigs.bind(this);\n        this.stopRefreshingTopicConfigs = this.stopRefreshingTopicConfigs.bind(this);\n\n        this.refreshTopicConfigs = this.refreshTopicConfigs.bind(this);\n        this.refreshTopicConfigs();\n        this.startRefreshingTopicConfigs();\n\n        this.autoScrollReactionDisposer = autorun(() => {\n            const currentStep = this.currentStep;\n            if (currentStep != 0)\n                setTimeout(() => scrollTo('wizard', 'start', -20), 20);\n        })\n        this.resetSelectionOnErrorsReactionDisposer = autorun(() => {\n            if (this.selectedBrokerIds.length == 0) {\n                const selectedTopicPartitions = Object.values(this.partitionSelection);\n                if (selectedTopicPartitions.length == 0 || selectedTopicPartitions.all(x => x.length == 0))\n                    return;  // nothing selected so far\n            }\n\n            let reset = false;\n\n            // has user selected a broker that is not available anymore?\n            if (this.selectedBrokerIds.any(x => api.clusterInfo?.brokers.find(b => b.brokerId == x) == undefined))\n                reset = true;\n\n            // has user selected a topic partition that is not available anymore?\n            if (reset == false)\n                if (this.selectedTopicPartitions == null)\n                    reset = true;\n\n            if (reset) {\n                this.resetSelectionAndPage(true, true);\n            }\n        })\n\n        reassignmentTracker.start();\n    }\n\n    refreshData(force: boolean) {\n        api.refreshCluster(force); // need to know brokers for reassignment calculation, will also refresh config\n        api.refreshTopics(force);\n        api.refreshPartitions('all', force);\n        api.refreshPartitionReassignments(force);\n    }\n\n    componentWillUnmount() {\n        reassignmentTracker.stop();\n        if (this.autoScrollReactionDisposer) this.autoScrollReactionDisposer();\n        if (this.resetSelectionOnErrorsReactionDisposer) this.resetSelectionOnErrorsReactionDisposer();\n\n        this.stopRefreshingTopicConfigs();\n    }\n\n    render() {\n        if (!api.clusterInfo) return DefaultSkeleton;\n        if (!api.topics) return DefaultSkeleton;\n\n        // wait until every topic has partitions, and no partitions have errors\n        for (const t of api.topics) {\n            const p = api.topicPartitions.get(t.topicName);\n            if (!p)\n                // no partitions for this topic yet...\n                return null;\n        }\n\n        if (api.topicPartitions.size < api.topics.length) return DefaultSkeleton;\n        if (api.partitionReassignments === undefined) return DefaultSkeleton;\n\n        const partitionCountLeaders = api.topics?.sum(t => t.partitionCount);\n        const partitionCountOnlyReplicated = api.topics?.sum(t => t.partitionCount * (t.replicationFactor - 1));\n\n        const step = steps[this.currentStep];\n        const nextButtonCheck = step.nextButton.isEnabled(this);\n        const nextButtonEnabled = nextButtonCheck === true;\n        const nextButtonHelp = typeof nextButtonCheck === 'string' ? nextButtonCheck as string : null;\n\n        return <>\n            <motion.div className=\"reassignPartitions\" {...animProps} style={{ margin: '0 1rem', paddingBottom: '12em' }}>\n                {/* Statistics */}\n                <Card>\n                    <Row>\n                        <Statistic title='Broker Count' value={api.clusterInfo?.brokers.length} />\n                        <Statistic title='Leader Partitions' value={partitionCountLeaders ?? '...'} />\n                        <Statistic title='Replica Partitions' value={partitionCountOnlyReplicated ?? '...'} />\n                        <Statistic title='Total Partitions' value={(partitionCountLeaders != null && partitionCountOnlyReplicated != null)\n                            ? (partitionCountLeaders + partitionCountOnlyReplicated)\n                            : '...'} />\n                    </Row>\n                </Card>\n\n\n                {/* Active Reassignments */}\n                <Card id='activeReassignments'>\n                    <ActiveReassignments\n                        throttledTopics={this.topicsWithThrottle}\n                        onRemoveThrottleFromTopics={this.removeThrottleFromTopics}\n                    />\n                </Card>\n\n                {/* Content */}\n                <Card id='wizard'>\n                    {/* Steps */}\n                    <div style={{ margin: '.75em 1em 1em 1em' }}>\n                        <Steps current={this.currentStep}>\n                            {steps.map(item => <Step key={item.title} title={item.title} icon={item.icon} />)}\n                        </Steps>\n                    </div>\n\n                    {/* Content */}\n                    <motion.div {...animProps} key={\"step\" + this.currentStep}> {(() => {\n                        switch (this.currentStep) {\n                            case 0: return <StepSelectPartitions\n                                partitionSelection={this.partitionSelection}\n                                throttledTopics={this.topicsWithThrottle}\n                            />;\n                            case 1: return <StepSelectBrokers\n                                partitionSelection={this.partitionSelection}\n                                selectedBrokerIds={this.selectedBrokerIds} />;\n                            case 2: return <StepReview\n                                partitionSelection={this.partitionSelection}\n                                topicsWithMoves={this.topicsWithMoves}\n                                assignments={this.reassignmentRequest!}\n                                reassignPartitions={this} />;\n                        }\n                    })()}\n                    </motion.div>\n\n                    {/* Navigation */}\n                    <div style={{\n                        margin: '2.5em 0 1.5em', display: 'flex', alignItems: 'flex-end', height: '2.5em'\n                    }}>\n                        {/* Back */}\n                        {step.backButton &&\n                            <Button\n                                onClick={this.onPreviousPage}\n                                disabled={this.currentStep <= 0 || this.requestInProgress}\n                                style={{ minWidth: '14em', height: 'auto' }}\n                            >\n                                <span><ChevronLeftIcon /></span>\n                                <span>{step.backButton}</span>\n                            </Button>\n                        }\n\n                        {/* Next */}\n                        <div style={{ marginLeft: 'auto', display: 'flex', alignItems: 'center', gap: '2em' }}>\n                            <div>{nextButtonHelp}</div>\n                            <Button\n                                type='primary'\n                                style={{ minWidth: '14em', height: 'auto', marginLeft: 'auto' }}\n                                disabled={!nextButtonEnabled || this.requestInProgress}\n                                onClick={this.onNextPage}\n                                autoFocus={true}\n                            >\n                                <span>{step.nextButton.text}</span>\n                                <span><ChevronRightIcon /></span>\n                            </Button>\n                        </div>\n                    </div>\n                </Card>\n\n            </motion.div>\n        </>\n    }\n\n    resetSelectionAndPage(scrollTop: boolean, showSelectionWarning: boolean) {\n        transaction(() => {\n            this.refreshData(true);\n            this.partitionSelection = {};\n            this.selectedBrokerIds = [];\n            this.reassignmentRequest = null;\n\n            if (showSelectionWarning)\n                notification.warn({\n                    message: 'Selection has been reset',\n                    description: 'Your selection contained brokers or partitions that are not available anymore after the refresh. \\n' +\n                        'Your selection has been reset.',\n                    duration: 0,\n                });\n\n            if (scrollTop)\n                setTimeout(() => {\n                    this.currentStep = 0;\n                    setImmediate(() => scrollToTop());\n                }, 300);\n        });\n    }\n\n    // will be wrapped in a 'transaction' since we're modifying multiple observables\n    onNextPage() {\n        if (this.currentStep == 0) {\n            // Select -> Assign\n        }\n\n        if (this.currentStep == 1) {\n            // Assign -> Review\n            const topicPartitions = this.selectedTopicPartitions;\n            if (topicPartitions == null) {\n                this.resetSelectionAndPage(true, true);\n                return;\n            }\n\n            const targetBrokers = this.selectedBrokerIds.map(id => api.clusterInfo?.brokers.first(b => b.brokerId == id)).filterFalsy();\n            if (targetBrokers.any(b => b == null))\n                throw new Error('one or more broker ids could not be mapped to broker entries');\n\n            const apiTopicPartitions = new Map<string, Partition[]>();\n            for (const [topicName, partitions] of api.topicPartitions) {\n                if (!partitions) continue;\n                const validOnly = partitions.filter(x => !x.hasErrors);\n                apiTopicPartitions.set(topicName, validOnly);\n            }\n\n            // error checking will happen inside computeReassignments\n            const apiData = {\n                brokers: api.clusterInfo!.brokers,\n                topics: api.topics as Topic[],\n                topicPartitions: apiTopicPartitions\n            };\n\n            const topicAssignments = computeReassignments(\n                apiData,\n                topicPartitions,\n                targetBrokers\n            );\n\n            // this._debug_apiData = apiData;\n            // this._debug_topicPartitions = topicPartitions;\n            // this._debug_brokers = targetBrokers;\n\n\n            this.reassignmentRequest = topicAssignmentsToReassignmentRequest(topicAssignments);\n            // const optimizedAssignments = removeRedundantReassignments(topicAssignments, apiData);\n            // this.optimizedReassignmentRequest = topicAssignmentsToReassignmentRequest(optimizedAssignments);\n        }\n\n        if (this.currentStep == 2) {\n            // Review -> Start\n            const request = this.reassignmentRequest;\n            if (request == null) {\n                message.error('reassignment request was null', 3);\n                return;\n            }\n\n            setImmediate(async () => {\n                try {\n                    this.requestInProgress = true;\n                    // todo: Don't use returns and execeptions for control flow\n                    const success = await this.startReassignment(request);\n                    if (success) {\n                        // Reset settings, go back to first page\n                        this.resetSelectionAndPage(true, false);\n                    }\n                }\n                catch (err) {\n                    message.error('Error starting partition reassignment.\\nSee console for more information.', 3);\n                    console.error(\"error starting partition reassignment\", { error: err });\n                }\n                finally {\n                    this.requestInProgress = false;\n                }\n            });\n\n            return;\n        }\n\n        this.currentStep++;\n    }\n    onPreviousPage() { this.currentStep--; }\n\n\n    async startReassignment(request: PartitionReassignmentRequest): Promise<boolean> {\n        if (uiSettings.reassignment.maxReplicationTraffic != null && uiSettings.reassignment.maxReplicationTraffic > 0) {\n            const success = await this.setTrafficLimit(request);\n            if (!success) return false;\n        }\n\n        const msg = new Message('Starting reassignment');\n        try {\n            const response = await api.startPartitionReassignment(request);\n\n            const errors = response.reassignPartitionsResponses.map(e => {\n                const partErrors = e.partitions.filter(p => p.errorMessage != null);\n                if (partErrors.length == 0) return null;\n                return { topicName: e.topicName, partitions: partErrors };\n            }).filterNull();\n            const startedCount = response.reassignPartitionsResponses.sum(x => x.partitions.count(p => !p.errorCode));\n\n            if (errors.length == 0) {\n                // No errors\n                msg.setSuccess();\n                return true;\n            } else if (startedCount > 0) {\n                // Some errors\n                msg.setSuccess();\n                this.setReassignError(startedCount, errors);\n                return true;\n            } else {\n                // All errors\n                msg.setError();\n                this.setReassignError(startedCount, errors);\n                return false;\n            }\n        } catch (err) {\n            msg.hide();\n            return false;\n        }\n    }\n\n    async setTrafficLimit(request: PartitionReassignmentRequest): Promise<boolean> {\n        const maxBytesPerSecond = Math.round(uiSettings.reassignment.maxReplicationTraffic ?? 0);\n\n        const topicReplicas: {\n            topicName: string,\n            leaderReplicas: { brokerId: number, partitionId: number }[],\n            followerReplicas: { brokerId: number, partitionId: number }[]\n        }[] = [];\n\n        for (const t of request.topics) {\n            const topicName = t.topicName;\n            const leaderReplicas: { partitionId: number, brokerId: number }[] = [];\n            const followerReplicas: { partitionId: number, brokerId: number }[] = [];\n            for (const p of t.partitions) {\n                const partitionId = p.partitionId;\n                const brokersOld = api.topicPartitions?.get(t.topicName)?.first(p => p.id == partitionId)?.replicas;\n                const brokersNew = p.replicas;\n\n                if (brokersOld == null || brokersNew == null) {\n                    console.log(\"traffic limit: skipping partition because old or new brokers can't be found\", { topicName, partitionId, brokersOld, brokersNew, });\n                    continue;\n                }\n\n                // leader throttling is applied to all sources (all brokers that have a replica of this partition)\n                for (const sourceBroker of brokersOld)\n                    leaderReplicas.push({ partitionId: partitionId, brokerId: sourceBroker });\n\n                // follower throttling is applied only to target brokers that do not yet have a copy\n                const newBrokers = brokersNew.except(brokersOld);\n                for (const targetBroker of newBrokers)\n                    followerReplicas.push({ partitionId: partitionId, brokerId: targetBroker });\n            }\n\n            topicReplicas.push({\n                topicName: t.topicName,\n                leaderReplicas: leaderReplicas,\n                followerReplicas: followerReplicas,\n            })\n        }\n\n        const msg = new Message(\"Setting bandwidth throttle... 1/2\");\n        try {\n            let response = await api.setReplicationThrottleRate(api.clusterInfo!.brokers.map(b => b.brokerId), maxBytesPerSecond);\n            let errors = response.patchedConfigs.filter(c => c.error);\n            if (errors.length > 0)\n                throw new Error(toJson(errors));\n\n            msg.setLoading(\"Setting bandwidth throttle... 2/2\");\n\n            response = await api.setThrottledReplicas(topicReplicas);\n            errors = response.patchedConfigs.filter(c => c.error);\n            if (errors.length > 0)\n                throw new Error(toJson(errors));\n\n            msg.setSuccess(\"Setting bandwidth throttle... done\");\n            return true;\n        } catch (err) {\n            msg.hide();\n            console.error(\"error setting throttle\", err);\n            return false;\n        }\n    }\n\n    setReassignError(startedCount: number, errors: {\n        topicName: string;\n        partitions: AlterPartitionReassignmentsPartitionResponse[];\n    }[]) {\n\n        showErrorModal(\n            \"Reassign Partitions\",\n            `Reassignment request returned errors for ${errors.sum(e => e.partitions.length)} / ${startedCount} partitions.`,\n            <div style={{ maxHeight: '300px', overflowY: 'auto' }}>\n                {errors.map((r, i) => <div key={i}>\n                    <div>\n                        <h4>Topic: \"{r.topicName}\"</h4>\n                        <ul>\n                            {r.partitions.map(p =>\n                                <li key={p.partitionId}>\n                                    PartitionID {p.partitionId}: {p.errorMessage}\n                                </li>\n                            )}\n                        </ul>\n                    </div>\n                </div>)}\n            </div>\n        );\n    }\n\n    startRefreshingTopicConfigs() {\n        if (IsDev) console.log('starting refreshTopicConfigs', { stack: new Error().stack });\n        if (this.refreshTopicConfigsTimer == null)\n            this.refreshTopicConfigsTimer = setInterval(this.refreshTopicConfigs, 6000);\n    }\n    stopRefreshingTopicConfigs() {\n        if (IsDev) console.log('stopping refreshTopicConfigs', { stack: new Error().stack });\n        if (this.refreshTopicConfigsTimer) {\n            clearInterval(this.refreshTopicConfigsTimer);\n            this.refreshTopicConfigsTimer = null;\n        }\n    }\n\n    async refreshTopicConfigs() {\n        try {\n            if (this.refreshTopicConfigsRequestsInProgress > 0) return;\n            this.refreshTopicConfigsRequestsInProgress++;\n            const topicConfigs = await partialTopicConfigs([\n                \"follower.replication.throttled.replicas\",\n                \"leader.replication.throttled.replicas\"\n            ]);\n\n            // Only get the names of the topics that have throttles applied\n            const newThrottledTopics = topicConfigs.topicDescriptions\n                .filter(t => t.configEntries.any(x => Boolean(x.value)))\n                .map(t => t.topicName).sort();\n\n            // Filter topics that are still being reassigned\n            const inProgress = this.topicPartitionsInProgress;\n            newThrottledTopics.removeAll(t => inProgress.includes(t));\n\n            // Update observable\n            const changes = this.topicsWithThrottle.updateWith(newThrottledTopics);\n            // if (changes.added || changes.removed)\n            //     if (IsDev) console.log('refreshTopicConfigs updated', changes);\n\n        } catch (err) {\n            console.error(\"error while refreshing topic configs, stopping auto refresh\", { error: err });\n            this.stopRefreshingTopicConfigs();\n        } finally {\n            this.refreshTopicConfigsRequestsInProgress--;\n        }\n    }\n\n    async removeThrottleFromTopics() {\n        const throttledTopics = clone(this.topicsWithThrottle);\n        const refreshTopicConfigs = this.refreshTopicConfigs;\n\n        Modal.confirm({\n            title: 'Remove throttle config from topics',\n            icon: <ExclamationCircleOutlined />,\n            width: 'auto',\n            style: { maxWidth: '66%' },\n            content:\n                <div>\n                    <div>\n                        There are {this.topicsWithThrottle.length} topics with throttling applied to their replicas.<br />\n                        Kowl implements throttling of reassignments by\n                        setting{' '}\n                        <span className='tooltip' style={{ textDecoration: 'dotted underline' }}>\n                            two configuration values\n                            <span className='tooltiptext' style={{ textAlign: 'left', width: '500px' }}>\n                                Kowl sets those two configuration entries when throttling a topic reassignment:\n                                <div style={{ marginTop: '.5em' }}>\n                                    <code>leader.replication.throttled.replicas</code><br />\n                                    <code>follower.replication.throttled.replicas</code>\n                                </div>\n                            </span>\n                        </span>{' '}\n                        in a topics configuration.<br />\n                        So if you previously used Kowl to reassign any of the partitions of the following topics, the throttling config might still be active.\n                    </div>\n                    <div style={{ margin: '1em 0' }}>\n                        <h4>Throttled Topics</h4>\n                        <ul style={{ maxHeight: '145px', overflowY: 'auto' }}>\n                            {throttledTopics.map(t => <li key={t}>{t}</li>)}\n                        </ul>\n                    </div>\n                    <div>\n                        Do you want to remove the throttle config from those topics?\n                    </div>\n                </div>,\n\n            okText: 'Remove throttle',\n            okButtonProps: { danger: true, autoFocus: false, },\n            async onOk() {\n                const baseText = 'Removing throttle config from topics';\n                const msg = new Message(baseText + '...');\n\n                const result = await api.resetThrottledReplicas(throttledTopics);\n                const errors = result.patchedConfigs.filter(r => r.error);\n\n                if (errors.length == 0) {\n                    msg.setSuccess(baseText + \" - Done\");\n                }\n                else {\n                    msg.setError(baseText + \": \" + errors.length + \" errors\");\n                    console.error(\"errors in removeThrottleFromTopics\", errors);\n                }\n\n                refreshTopicConfigs();\n            },\n\n            maskClosable: true,\n            cancelButtonProps: { autoFocus: true },\n        })\n\n\n    }\n\n    @computed get selectedTopicPartitions(): TopicPartitions[] | undefined {\n        const apiTopics = api.topics;\n        if (!apiTopics) return undefined;\n        const apiPartitions = api.topicPartitions;\n        if (!apiPartitions) return undefined;\n\n        return partitionSelectionToTopicPartitions(\n            this.partitionSelection,\n            apiPartitions,\n            apiTopics\n        );\n    }\n\n    @computed get maximumSelectedReplicationFactor(): number {\n        let maxRf = 0;\n        for (const topicName in this.partitionSelection) {\n            const topic = api.topics?.first(x => x.topicName == topicName);\n            if (topic)\n                if (topic.replicationFactor > maxRf)\n                    maxRf = topic.replicationFactor;\n        }\n        return maxRf;\n    }\n\n    @computed get topicsWithMoves(): TopicWithMoves[] {\n        if (this.reassignmentRequest == null) return [];\n        if (api.topics == null) return [];\n        return computeMovedReplicas(\n            this.partitionSelection,\n            this.reassignmentRequest,\n            api.topics,\n            api.topicPartitions,\n        );\n    }\n\n    @computed get topicPartitionsInProgress(): string[] {\n        return api.partitionReassignments?.map(r => r.topicName) ?? [];\n    }\n}\nexport default ReassignPartitions;\n\n\n\ninterface WizardStep {\n    step: number;\n    title: string;\n    icon: React.ReactElement;\n    backButton?: string;\n    nextButton: {\n        text: string;\n        isEnabled: (rp: ReassignPartitions) => boolean | string;\n        computeWarning?: (rp: ReassignPartitions) => string | undefined;\n    };\n}\nconst steps: WizardStep[] = [\n    {\n        step: 0, title: 'Select Partitions',\n        icon: <UnorderedListOutlined />,\n        nextButton: {\n            text: 'Select Target Brokers',\n            // Can only continue if at least one partition was selected\n            isEnabled: rp => Object.keys(rp.partitionSelection).length > 0\n        }\n    },\n    {\n        step: 1, title: 'Assign to Brokers',\n        icon: <HddOutlined />,\n        backButton: 'Select Partitions',\n        nextButton: {\n            text: 'Review Plan',\n            // Can only continue if enough brokers are selected,\n            // so all replicas of each partitions can be put on a different broker.\n            isEnabled: rp => {\n                const maxRf = rp.maximumSelectedReplicationFactor;\n\n                if (rp.selectedBrokerIds.length < maxRf)\n                    return `Select at least ${maxRf} brokers`;\n\n                return true;\n            },\n            computeWarning: rp => {\n                const allBrokers = api.clusterInfo?.brokers;\n                if (!allBrokers) return undefined;\n\n                // Show a warning if the user has selected brokers that are all in the same rack, but\n                // could theoretically select brokers that are in different racks.\n                const allRacks = allBrokers.map(x => x.rack ?? '').distinct();\n                if (!allRacks) return undefined; // can't happen since no brokers == can't reach this page anyway\n                if (allRacks.length <= 1) return undefined; // Ok, all available brokers are on the same rack\n\n                // At least 2 racks available\n                const selectedBrokers = rp.selectedBrokerIds\n                    .map(id => allBrokers.first(x => x.brokerId == id)) // map ID to Broker\n                    .filter(Boolean) as Broker[]; // filter missing entries\n                const selectedRacks = selectedBrokers.map(x => x.rack ?? '').distinct();\n\n                if (selectedRacks.length == 1 && allRacks.length >= 2) {\n                    let selectedRack = selectedRacks[0];\n                    if (!selectedRack || selectedRack.length == 0) selectedRack = \"(empty)\";\n                    const msgStart = selectedBrokers.length == 1\n                        ? `Your selected Brokers, Your cluster contains ${allBrokers.length} brokers across `\n                        : \"\";\n\n\n                }\n            }\n        }\n    },\n    {\n        step: 2, title: 'Review and Confirm',\n        icon: <CheckCircleOutlined />,\n        backButton: 'Select Target Brokers',\n        nextButton: {\n            text: 'Start Reassignment',\n            isEnabled: c => true,\n        }\n    },\n];\n","import React, { Component } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { api } from \"../../../../state/backendApi\";\nimport { Broker, Partition } from \"../../../../state/restInterfaces\";\nimport { computed, makeObservable } from \"mobx\";\nimport { PartitionSelection } from \"../ReassignPartitions\";\nimport { prettyBytesOrNA } from \"../../../../utils/utils\";\nimport { TopicWithMoves } from \"../Step3.Review\";\n\n\n@observer\nexport class SelectionInfoBar extends Component<{ partitionSelection: PartitionSelection, margin?: string }> {\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    render() {\n        if (api.topicPartitions == null)\n            return null;\n\n        const allSelectedPartitions = this.selectedPartitions.flatMap(p => p.partitions);\n        const partitionCountLeaders = allSelectedPartitions.length; // every partition has a leader\n        const totalPartitionsCount = allSelectedPartitions.sum(t => t.replicas.length);\n\n        const brokers = this.involvedBrokers;\n\n        const data = [\n            { title: 'Leader Partitions', value: partitionCountLeaders, },\n            { title: 'Total Partitions', value: totalPartitionsCount },\n            // {\n            //     title: 'Partitions', value: <span style={{ display: 'inline-flex', gap: '1em' }}>\n            //         <span>\n            //             <span>{partitionCountLeaders}</span>\n            //             <span> leaders</span>\n            //         </span>\n            //         <span>\n            //             <span>{totalPartitionsCount}</span>\n            //             <span> total</span>\n            //         </span>\n            //     </span>\n            // },\n\n            { title: 'Involved Topics', value: this.selectedPartitions.length },\n            { title: 'Involved Brokers', value: brokers?.length ?? '...' },\n            { title: 'Involved Racks', value: brokers?.map(b => b.rack).distinct().length ?? '...' },\n            { title: 'Size', value: prettyBytesOrNA(allSelectedPartitions.sum(p => p.replicas.length * p.replicaSize)) },\n        ];\n\n        return <div style={{ margin: this.props.margin }}>\n            <h4>Current Selection</h4>\n            <div style={{ display: 'flex', flexWrap: 'nowrap', gap: '3em', fontFamily: 'Open Sans', color: 'hsl(0deg, 0%, 30%)', fontSize: '1.1em' }}>\n                {data.map(item => <div key={item.title}>\n                    <div style={{ fontSize: '.8em', opacity: 0.6, paddingBottom: '.5em' }}>{item.title}</div>\n                    <div style={{}}>{item.value}</div>\n                </div>)}\n            </div>\n        </div>;\n    }\n\n    @computed get selectedPartitions(): { topic: string; partitions: Partition[]; }[] {\n        const ar = [];\n        for (const [topic, partitions] of api.topicPartitions) {\n            if (partitions == null)\n                continue;\n            if (this.props.partitionSelection[topic] == null)\n                continue;\n            const relevantPartitions = partitions.filter(p => this.props.partitionSelection[topic].includes(p.id));\n            ar.push({ topic: topic, partitions: relevantPartitions });\n        }\n        return ar;\n    }\n\n\n    @computed get involvedBrokers(): Broker[] | null {\n        if (api.clusterInfo == null)\n            return null;\n        const brokerIds = new Set<number>();\n\n        // Find IDs of all involved brokers\n        for (const t of this.selectedPartitions) {\n            for (const p of t.partitions) {\n                brokerIds.add(p.leader);\n                for (const id of p.replicas)\n                    brokerIds.add(id);\n            }\n        }\n\n        // Translate to Broker info\n        return api.clusterInfo.brokers.filter(b => brokerIds.has(b.brokerId));\n    }\n}","\nexport { }\n\ndeclare global {\n    interface Number {\n        /**\n         * linear interpolation to another number\n         * @param to number to interpolate to\n         * @param t factor between 0 and 1\n         */\n        lerp(this: number, to: number, t: number): number;\n\n        clamp(this: number, min: number | undefined, max: number | undefined): number;\n    }\n}\n\nNumber.prototype.lerp = function (this: number, to: number, t: number): number {\n    const d = to - this;\n    return this + d * t;\n};\n\nNumber.prototype.clamp = function (this: number, min: number | undefined, max: number | undefined): number {\n    if (max !== undefined)\n        if (this > max) return max;\n    if (min !== undefined)\n        if (this < min) return min;\n    return this;\n};\n","import { Slider } from \"antd\";\nimport React, { Component } from \"react\";\nimport { uiSettings } from \"../../../../state/ui\";\nimport { prettyBytesOrNA } from \"../../../../utils/utils\";\nimport '../../../../utils/numberExtensions';\n\n//\n// BandwidthSlider can work with two kinds of inputs\n// 1) Simple 'controlled state'\n//    You pass a 'value' and 'onChange' callback.\n// 2) A settings object (that is supposed to be a mobx observable)\n//    in which a 'maxReplicationTraffic' property exists.\n//    The property will be directly read from / written to.\n//\ntype ValueAndChangeCallback = { value: number | null, onChange: (x: number | null) => void };\ntype BindableSettings = Pick<typeof uiSettings.reassignment, 'maxReplicationTraffic'>;\n\nexport class BandwidthSlider extends Component<ValueAndChangeCallback | { settings: BindableSettings }> {\n\n    render() {\n        const value = this.value ?? 0;\n\n        return <Slider style={{ minWidth: '300px', margin: '0 1em', paddingBottom: '2em', flex: 1 }}\n            min={2} max={12} step={0.1}\n            marks={{\n                2: \"-\",\n                3: \"1kB\", 6: \"1MB\", 9: \"1GB\", 12: \"1TB\",\n            }}\n            included={true}\n            tipFormatter={f => {\n                if (f == null) return null;\n                if (f < 3) return 'No change';\n                if (f > 12) return 'Unlimited';\n                const v = Math.round(Math.pow(10, f.clamp(3, 12)));\n                return prettyBytesOrNA(v) + '/s';\n            }}\n\n            value={Math.log10(value)}\n            onChange={(n: number) => {\n                switch (true) {\n                    case n < 2.5:\n                        this.value = null; return;\n                    // case n > 12.5:\n                    //     this.value = Number.POSITIVE_INFINITY; return;\n                    default:\n                        this.value = Math.round(Math.pow(10, n.clamp(3, 12))); return;\n                }\n            }}\n        />\n    }\n\n    get value(): number | null {\n        if ('value' in this.props) return this.props.value;\n        else return this.props.settings.maxReplicationTraffic;\n    }\n\n    set value(x: number | null) {\n        if ('value' in this.props) this.props.onChange(x);\n        else this.props.settings.maxReplicationTraffic = x;\n    }\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigationList\":\"Tabs_navigationList__2otYf\",\"disabled\":\"Tabs_disabled__1XfYW\",\"active\":\"Tabs_active__2RXUa\"};","import { Partition, PartitionReassignmentRequest, Topic, TopicAssignment } from \"../../../../state/restInterfaces\";\nimport { clone } from \"../../../../utils/jsonUtils\";\nimport { PartitionSelection } from \"../ReassignPartitions\";\nimport { PartitionWithMoves, TopicWithMoves } from \"../Step3.Review\";\nimport { ApiData, TopicAssignments, TopicPartitions } from \"./reassignLogic\";\n\nexport function partitionSelectionToTopicPartitions(\n    partitionSelection: PartitionSelection,\n    apiTopicPartitions: Map<string, Partition[] | null>,\n    apiTopics: Topic[]\n): TopicPartitions[] | undefined {\n\n    const ar: TopicPartitions[] = [];\n\n    for (const topicName in partitionSelection) {\n        const topic = apiTopics.first(x => x.topicName == topicName);\n        if (!topic) return undefined; // topic not available\n\n        const allPartitions = apiTopicPartitions.get(topicName);\n        if (!allPartitions) return undefined; // partitions for topic not available\n\n        const partitionIds = partitionSelection[topicName];\n        const relevantPartitions = partitionIds.map(id => allPartitions.first(p => p.id == id));\n        if (relevantPartitions.any(p => p == null))\n            return undefined; // at least one selected partition not available\n\n        // we've checked that there can't be any falsy partitions\n        // so we assert that 'relevantPartitions' is the right type\n        ar.push({ topic: topic, partitions: relevantPartitions as Partition[] });\n    }\n\n    return ar;\n}\n\nexport function computeMovedReplicas(\n    partitionSelection: PartitionSelection,\n    assignments: PartitionReassignmentRequest,\n    apiTopics: Topic[],\n    apiTopicPartitions: Map<string, Partition[] | null>,\n): TopicWithMoves[] {\n    const ar = [];\n    // For each partition in each topic:\n    // - get Partition objects\n    // - compute number of moved replicas\n    for (const [topicName, allPartitions] of apiTopicPartitions) {\n        if (allPartitions == null) continue;\n        if (partitionSelection[topicName] == null || partitionSelection[topicName].length == 0) continue;\n        const topic = apiTopics?.first(t => t.topicName == topicName);\n        if (topic == null) continue;\n\n        const selectedPartitions = allPartitions.filter(p => partitionSelection[topicName].includes(p.id));\n        const partitionsWithMoves: PartitionWithMoves[] = [];\n\n        // Count how many replicas will be moved\n        for (const partition of selectedPartitions) {\n            const oldBrokers = partition.replicas;\n            const newBrokers = assignments.topics\n                .first(t => t.topicName == topicName)?.partitions\n                .first(e => e.partitionId == partition.id)?.replicas;\n\n            let added = 0;\n            let removed = 0;\n            let changedLeader = false;\n            let anyChanges = false;\n\n            if (newBrokers) {\n                // find those brokers that are completely new (did not previously host a replica of this partition)\n                added = newBrokers.except(oldBrokers).length;\n                removed = oldBrokers.except(newBrokers).length;\n                changedLeader = oldBrokers[0] != newBrokers[0];\n\n                anyChanges = changedLeader || oldBrokers.length != newBrokers.length;\n                if (!anyChanges) {\n                    for (let i = 0; i < oldBrokers.length && !anyChanges; i++)\n                        if (oldBrokers[i] != newBrokers[i])\n                            anyChanges = true;\n                }\n            }\n            partitionsWithMoves.push({\n                ...partition,\n                brokersBefore: oldBrokers,\n                brokersAfter: newBrokers ?? [],\n                numAddedBrokers: added,\n                numRemovedBrokers: removed,\n                changedLeader: changedLeader,\n                anyChanges: anyChanges,\n            });\n        }\n\n        ar.push({\n            topicName: topicName,\n            topic: topic,\n            allPartitions: allPartitions,\n            selectedPartitions: partitionsWithMoves,\n        });\n    }\n    return ar;\n}\n\n/**\n * Returns a clone of topicAssignments with redundant reassignments removed\n*/\nexport function removeRedundantReassignments(topicAssignments: TopicAssignments, apiData: ApiData): TopicAssignments {\n\n    topicAssignments = clone(topicAssignments);\n\n    // Remove partition reassignments that have no effect\n    let totalRemovedPartitions = 0;\n    const emptyTopics: string[] = [];\n    for (const t in topicAssignments) {\n        const topicAssignment = topicAssignments[t];\n        const curTopicPartitions = apiData.topicPartitions.get(t);\n        if (!curTopicPartitions) continue;\n\n        const partitionIdsToRemove: string[] = [];\n        let originalReassignedPartitionsCount = 0;\n        for (const partitionId in topicAssignment) {\n            originalReassignedPartitionsCount++;\n            const a = topicAssignment[partitionId];\n            const brokersBefore = curTopicPartitions.first(p => p.id == Number(partitionId))?.replicas;\n            if (!brokersBefore) continue;\n            const brokersAfter = a.brokers;\n\n            if (brokersBefore.length != brokersAfter.length) {\n                console.warn('remove empty reassignments: brokersBefore.length != brokersAfter.length');\n                continue;\n            }\n\n            let sameBrokers = true;\n            for (let i = 0; i < brokersBefore.length; i++) {\n                if (brokersBefore[i] != brokersAfter[i].brokerId) {\n                    sameBrokers = false;\n                    break;\n                }\n            }\n\n            if (sameBrokers)\n                partitionIdsToRemove.push(partitionId);\n        }\n\n        totalRemovedPartitions += partitionIdsToRemove.length;\n\n        if (partitionIdsToRemove.length == originalReassignedPartitionsCount) {\n            // All partition reassignments for this topic have are redundant, remove the whole topic\n            emptyTopics.push(t);\n        }\n        else if (partitionIdsToRemove.length > 0) {\n            // Only some of the reassignments need to be removed\n            for (const r of partitionIdsToRemove)\n                delete topicAssignment[Number(r)];\n        }\n        else {\n            // All are required\n        }\n    }\n\n\n    // Remove topics that are completely redundant\n    for (const t of emptyTopics)\n        delete topicAssignments[t];\n\n    console.log('removed redundant partition reassignments', {\n        totalRemovedTopics: emptyTopics.length,\n        totalRemovedPartitions: totalRemovedPartitions,\n        removedTopics: emptyTopics,\n        optimizedAssignments: clone(topicAssignments)\n    });\n\n    return topicAssignments;\n}\n\nexport function topicAssignmentsToReassignmentRequest(topicAssignments: TopicAssignments): PartitionReassignmentRequest {\n    // Construct reassignment request from topicAssignments\n    const topics = [];\n    for (const t in topicAssignments) {\n        const topicAssignment = topicAssignments[t];\n        const partitions: { partitionId: number, replicas: number[] | null }[] = [];\n        for (const partitionId in topicAssignment)\n            partitions.push({\n                partitionId: Number(partitionId),\n                replicas: topicAssignment[partitionId].brokers.map(b => b.brokerId)\n            });\n\n        topics.push({ topicName: t, partitions: partitions });\n    }\n\n    return { topics: topics };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wizardView\":\"CreateConnector_wizardView__L9als\",\"motionContainer\":\"CreateConnector_motionContainer__1d8l-\",\"connectorBoxCard\":\"CreateConnector_connectorBoxCard__1OIUf\"};","import { FilterOutlined } from \"@ant-design/icons\";\nimport { AutoComplete, Button, Checkbox, Input, Modal, Popover, Typography } from \"antd\";\nimport Item from \"antd/lib/list/Item\";\nimport Paragraph from \"antd/lib/typography/Paragraph\";\nimport arrayMove from \"array-move\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { computed, makeObservable, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport { Component } from \"react\";\nimport { DragDropContext, Draggable, Droppable, DropResult, ResponderProvided } from \"react-beautiful-dnd\";\nimport { api } from \"../../../../state/backendApi\";\nimport { PreviewTagV2 } from \"../../../../state/ui\";\nimport { uiState } from \"../../../../state/uiState\";\nimport { MotionDiv } from \"../../../../utils/animationProps\";\nimport { IsDev } from \"../../../../utils/env\";\nimport { clone, toJson } from \"../../../../utils/jsonUtils\";\nimport { Code, Label, OptionGroup, QuickTable, toSafeString } from \"../../../../utils/tsxUtils\";\nimport { getAllMessageKeys, randomId, collectElements2, CollectedProperty } from \"../../../../utils/utils\";\nimport globExampleImg from '../../../../assets/globExample.png';\nimport { InfoIcon, ThreeBarsIcon, GearIcon, XIcon } from \"@primer/octicons-react\";\n\nconst { Text } = Typography;\n\nconst globHelp = <div>\n    {/* Examples + Image */}\n    <div style={{ display: 'flex', gap: '2em', minWidth: '900px' }}>\n        <div style={{ flexGrow: 1 }}>\n            <h3>Glob Pattern Examples</h3>\n            <div className=\"globHelpGrid\">\n                <div className='h'>Pattern</div>\n                <div className='h'>Result</div>\n                <div className='h'>Reason / Explanation</div>\n\n                <div className='titleRowSeparator' />\n\n                {/* Example */}\n                <div className=\"c1\"><Code>id</Code></div>\n                <div className=\"c2\">id: 1111</div>\n                <div className=\"c3\">There is only one 'id' property at the root of the object</div>\n                <div className='rowSeparator' />\n\n                {/* Example */}\n                <div className=\"c1 \"><Code>*.id</Code></div>\n                <div className=\"c2\">\n                    <div>customer.id: 2222</div>\n                    <div>key.with.dots.id: 3333</div>\n                </div >\n                <div className=\"c3\">Star only seraches in direct children. Here, only 2 children contain an 'id' prop</div>\n                <div className='rowSeparator' />\n\n                {/* Example */}\n                <div className=\"c1\"><Code>**.id</Code></div>\n                <div className=\"c2\">\n                    (all ID properties)\n                </div >\n                <div className=\"c3\">Double-star searches everywhere</div>\n                <div className='rowSeparator' />\n\n                {/* Example */}\n                <div className=\"c1\"><Code>customer.*Na*</Code></div>\n                <div className=\"c2\">\n                    <div>customer.firstName: John</div>\n                    <div>customer.lastName: Example</div>\n                </div >\n                <div className=\"c3\">In the direct child named 'customer', find all properties that contain 'Na'</div>\n                <div className='rowSeparator' />\n\n                {/* Example */}\n                <div className=\"c1\"><Code>key.with.dots.id</Code></div>\n                <div className=\"c2\">(no results!)</div>\n                <div className=\"c3\">There is no property named 'key'!</div>\n                <div className='rowSeparator' />\n\n                {/* Example */}\n                <div className=\"c1\"><Code>\"key.with.dots\".id</Code></div>\n                <div className=\"c2\">key.with.dots.id: 3333</div>\n                <div className=\"c3\">To find properties with special characters in their name, use single or double-quotes</div>\n                <div className='rowSeparator' />\n\n            </div>\n        </div>\n        <div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'flex-end' }}>\n            <div style={{ opacity: 0.5, fontSize: 'smaller', textAlign: 'center' }}>Example Data</div>\n            <img src={globExampleImg} alt=\"Examples for glob patterns\" />\n        </div>\n    </div>\n\n    {/* Details */}\n    <div>\n        <h3>Details</h3>\n        <div>\n            A glob pattern is just a list of property names seperated by dots. In addition to simple property names you can use:\n        </div>\n        <ul style={{ paddingLeft: '2em', marginTop: '.5em' }}>\n            <li><Code>*</Code> Star to match all current properties</li>\n            <li><Code>**</Code> Double-Star to matches all current and nested properties</li>\n            <li><Code>\"</Code>/<Code>'</Code> Quotes for when a property-name contains dots</li>\n            <li><Code>abc*</Code> One or more stars within a name. Depending on where you place the star, you can check if a name starts with, ends with, or contains some string.</li>\n        </ul>\n    </div>\n</div>;\n\n@observer\nexport class PreviewSettings extends Component<{ getShowDialog: () => boolean, setShowDialog: (show: boolean) => void }> {\n    @computed.struct get allCurrentKeys() {\n        const unused = api.messages.length;\n        // console.log(\"get all current keys: \" + unused);\n        return getAllMessageKeys(api.messages).map(p => p.propertyName).distinct();\n    }\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n\n    render() {\n        const currentKeys = this.props.getShowDialog() ? this.allCurrentKeys : [];\n\n        const tags = uiState.topicSettings.previewTags;\n        // add ids to elements that don't have any\n        const getFreeId = function (): string {\n            let i = 1;\n            // eslint-disable-next-line no-loop-func\n            while (tags.any(t => t.id == String(i))) i++;\n            return String(i);\n        };\n        tags.filter(t => !t.id).forEach(t => t.id = getFreeId());\n\n\n        const onDragEnd = function (result: DropResult, provided: ResponderProvided) {\n            if (!result.destination) return;\n            arrayMove.mutate(tags, result.source.index, result.destination.index);\n        };\n\n        const content = <>\n            <div>\n                <span style={{ display: 'inline-flex' }}>\n                    When viewing large messages we're often only interested in a few specific fields.\n                    Add <Popover trigger={['click']} placement='bottom' content={globHelp}>\n                        <span style={{\n                            display: 'inline-flex', gap: '2px', margin: '0 0.6ch',\n                            color: 'hsl(205deg, 100%, 50%)',\n                            textDecoration: 'underline dotted', cursor: 'pointer'\n                        }}><InfoIcon size={15} />glob patterns</span>\n                    </Popover> to this list to show found values as previews.\n                </span>\n            </div>\n\n            <div className=\"previewTagsList\">\n                <DragDropContext onDragEnd={onDragEnd} >\n                    <Droppable droppableId=\"droppable\">\n                        {(droppableProvided, droppableSnapshot) => (\n                            <div\n                                ref={droppableProvided.innerRef}\n                                style={{ display: 'flex', flexDirection: 'column' }}\n                            >\n                                {tags.map((tag, index) => (\n                                    <Draggable key={tag.id} draggableId={tag.id} index={index}>\n                                        {(draggableProvided, draggableSnapshot) => (\n                                            <div\n                                                ref={draggableProvided.innerRef}\n                                                {...draggableProvided.draggableProps}\n                                                {...draggableProvided.dragHandleProps}\n                                            >\n                                                <PreviewTagSettings tag={tag} index={index}\n                                                    onRemove={() => tags.removeAll(t => t.id == tag.id)}\n                                                    allCurrentKeys={currentKeys}\n                                                />\n                                            </div>\n                                        )}\n                                    </Draggable>\n                                ))}\n                                {droppableProvided.placeholder}\n                                <Button onClick={() => {\n                                    const newTag: PreviewTagV2 = {\n                                        id: getFreeId(),\n                                        isActive: true,\n                                        pattern: '',\n                                        searchInMessageHeaders: false,\n                                        searchInMessageKey: false,\n                                        searchInMessageValue: true,\n                                    };\n                                    tags.push(newTag);\n                                }}>Add entry...</Button>\n                            </div>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n\n                {/* <CustomTagList tags={uiState.topicSettings.previewTags} allCurrentKeys={this.props.allCurrentKeys} /> */}\n            </div>\n\n            <div style={{ marginTop: '1em' }}>\n                <h3 style={{ marginBottom: '0.5em' }}>Settings</h3>\n                <div className=\"previewTagsSettings\" >\n                    <OptionGroup label='Matching' options={{ 'Ignore Case': false, 'Case Sensitive': true }} size='small'\n                        value={uiState.topicSettings.previewTagsCaseSensitive}\n                        onChange={e => uiState.topicSettings.previewTagsCaseSensitive = e}\n                    />\n                    <OptionGroup label='Multiple Results' options={{ 'First result': 'showOnlyFirst', 'Show All': 'showAll' }}\n                        value={uiState.topicSettings.previewMultiResultMode}\n                        onChange={e => uiState.topicSettings.previewMultiResultMode = e}\n                    />\n\n                    <OptionGroup label='Wrapping' options={{ 'Single Line': 'single', 'Wrap': 'wrap', 'Rows': 'rows' }}\n                        value={uiState.topicSettings.previewDisplayMode}\n                        onChange={e => uiState.topicSettings.previewDisplayMode = e}\n                    />\n                </div>\n            </div>\n        </>;\n\n        return <Modal\n            title={<span><FilterOutlined style={{ fontSize: '22px', verticalAlign: 'bottom', marginRight: '16px', color: 'hsla(209, 20%, 35%, 1)' }} />Preview Fields</span>}\n            visible={this.props.getShowDialog()}\n\n            style={{ minWidth: '750px', maxWidth: '1000px', top: '26px' }}\n            width={'auto'}\n            bodyStyle={{ paddingTop: '12px' }}\n            centered={false}\n\n\n            okText='Close'\n            cancelButtonProps={{ style: { display: 'none' } }}\n            onOk={() => this.props.setShowDialog(false)}\n            onCancel={() => this.props.setShowDialog(false)}\n\n            closable={false}\n            maskClosable={true}\n        >\n            {content}\n        </Modal>;\n    }\n}\n\n/*\ntodo:\n- mark patterns red when they are invalid\n- better auto-complete: get suggestions from current pattern (except for last segment)\n-\n */\n@observer\nclass PreviewTagSettings extends Component<{ tag: PreviewTagV2, index: number, onRemove: () => void, allCurrentKeys: string[] }>{\n    render() {\n        const { tag, index, onRemove, allCurrentKeys } = this.props;\n\n        return <div style={{\n            display: 'flex', placeItems: 'center', gap: '4px',\n            background: 'hsl(0deg, 0%, 91%)', padding: '4px', borderRadius: '4px',\n            marginBottom: '6px'\n        }}>\n\n            {/* Move Handle */}\n            <span className=\"moveHandle\"><ThreeBarsIcon /></span>\n\n            {/* Enabled */}\n            <Checkbox checked={tag.isActive} onChange={e => tag.isActive = e.target.checked} />\n\n            {/* Settings */}\n            <Popover\n                trigger={['click']}\n                placement='bottomLeft'\n                arrowPointAtCenter={true}\n                content={<div style={{ display: 'flex', flexDirection: 'column', gap: '.3em' }} >\n\n                    <Label text=\"Display Name\" style={{ marginBottom: '.5em' }}>\n                        <Input size='small' style={{ flexGrow: 1, flexBasis: '50px' }}\n                            value={tag.customName}\n                            onChange={e => tag.customName = e.target.value}\n                            autoComplete={randomId()}\n                            spellCheck={false}\n                            placeholder=\"Enter a display name...\"\n                        />\n                    </Label>\n\n                    <span><Checkbox checked={tag.searchInMessageKey} onChange={e => tag.searchInMessageKey = e.target.checked}>Search in message key</Checkbox></span>\n                    <span><Checkbox checked={tag.searchInMessageValue} onChange={e => tag.searchInMessageValue = e.target.checked}>Search in message value</Checkbox></span>\n                </div>}>\n                <span className=\"inlineButton\" ><GearIcon /></span>\n            </Popover>\n\n            {/* Pattern */}\n            <AutoComplete options={allCurrentKeys.map(t => ({ label: t, value: t }))}\n                size=\"small\"\n                style={{ flexGrow: 1, flexBasis: '400px' }}\n\n                defaultActiveFirstOption={true}\n                onSearch={(value) => {\n                    // console.log('onSearch ', value);\n                }}\n                value={tag.pattern}\n\n                onChange={e => tag.pattern = e}\n                placeholder=\"Pattern...\"\n                filterOption={(inputValue, option) => option?.value.toUpperCase().indexOf(inputValue.toUpperCase()) !== -1}\n\n                notFoundContent=\"None\"\n\n                {...{ spellCheck: \"false\" }}\n            />\n\n            {/* Remove */}\n            <span className=\"inlineButton\" onClick={onRemove} ><XIcon /></span>\n        </div>;\n    }\n}\n\n/*\ntodo:\n- support regex patterns as path elements\n    - `data./pattern/.email`\n    - in order to match `/pattern/` our 'parseJsonPath' must support escaping forward slashes: \"\\/\"\n\n*/\nexport function getPreviewTags(targetObject: any, tags: PreviewTagV2[]): React.ReactNode[] {\n    const ar: React.ReactNode[] = [];\n\n    const results: { prop: CollectedProperty, tag: PreviewTagV2, fullPath: string }[] = [];\n    const caseSensitive = uiState.topicSettings.previewTagsCaseSensitive;\n\n    for (const t of tags) {\n        if (t.pattern.length == 0) continue;\n\n        const trimmed = t.pattern.trim();\n        const searchPath = parseJsonPath(trimmed);\n        if (searchPath == null) continue;\n        if (typeof searchPath == 'string') continue; // todo: show error to user\n\n        const foundProperties = collectElements2(targetObject, searchPath, (pathElement, propertyName, value) => {\n            // We'll never get called for '*' or '**' patterns\n            // So we can be sure that the pattern is not just '*'\n            const segmentRegex = caseSensitive\n                ? wildcardToRegex(pathElement)\n                : new RegExp(wildcardToRegex(pathElement), 'i');\n            return segmentRegex.test(propertyName);\n        });\n\n        for (const p of foundProperties)\n            results.push({\n                tag: t,\n                prop: p,\n                fullPath: p.path.join('.'),\n            });\n    }\n\n    // order results by their path\n    results.sort((a, b) => {\n        // first sort by path length\n        const pathLengthDiff = a.prop.path.length - b.prop.path.length;\n        if (pathLengthDiff != 0) return pathLengthDiff;\n\n        // then alphabetically\n        const pathA = a.fullPath;\n        const pathB = b.fullPath;\n        return pathA.localeCompare(pathB,\n            undefined, // no locales\n            {\n                numeric: true,\n                ignorePunctuation: false,\n                sensitivity: 'base',\n            });\n    });\n\n    // found some properties, create JSX for them\n    for (const r of results) {\n        const tag = r.tag;\n\n        const displayName = tag.customName && tag.customName.length > 0\n            ? tag.customName\n            : r.fullPath;\n\n        ar.push(<span className='previewTag'>\n            <span className='path'>{displayName}</span>\n            <span>{toSafeString(r.prop.value)}</span>\n        </span >);\n    }\n\n    return ar;\n}\n\nconst splitChars = [\"'\", \"\\\"\", \".\"];\n// Splits a given path into its path segments.\n// Path segments are seperated by the dot-character.\n// This function also supports quotes, so that the dot can still be used (the path segment just needs to be wrapped in quotes then).\n// Returns:\n// - String array when the path was parsed correctly\n// - Single string as error reason why the path couldn't be parsed\nfunction parseJsonPath(str: string): string[] | string {\n    // Collect symbols until we find a dot, single-quote, or double-quote\n    const result: string[] = [];\n\n    let pos = 0;\n    while (pos < str.length) {\n        let c = str[pos];\n        let start: number;\n        let end: number;\n        let match: string;\n        switch (c) {\n            case \"'\":\n            case \"\\\"\":\n                // A quote is opened\n                // Find the closing quote and collect everything in-between\n\n                start = pos + 1; // start just after the quote\n                end = str.indexOf(c, start); // and collect until the closing quote\n\n                if (end == -1) return \"missing closing quote, quote was opened at index \" + (start - 1);\n                match = str.slice(start, end);\n\n                if (match.length > 0)\n                    result.push(match);\n\n                pos = end == -1 ? str.length : end + 1; // continue after the end of our string and the closing quote\n                break;\n\n            case \".\":\n                // A dot, skip over it\n\n                if (pos == 0) return \"pattern cannot start with a dot\";\n                pos++;\n                if (pos >= str.length) return \"pattern can not end with a dot\";\n                c = str[pos];\n                if (c == '.') return \"pattern cannot contain more than one dot in a row\";\n                break;\n\n            default:\n                // We're at a simple character, just collect everything until the next dot or quote\n                start = pos; // start here\n                end = indexOfMany(str, splitChars, pos); // collect until dot or quote\n\n                match = end >= 0\n                    ? str.slice(start, end)\n                    : str.slice(start, str.length);\n\n                if (match.length > 0)\n                    result.push(match);\n\n                pos = end == -1 ? str.length : end; // continue after the end\n                break;\n        }\n    }\n\n    // While we do support the '**' pattern, it must always appear alone.\n    // In other words, a path segment is valid if it is exactly equal to '**',\n    // but it is invalid if it contains '**'\n    //\n    // Valid example paths: can appear anywhere as long as it is\n    //    **.a.b.c\n    //    a.b.**.c.**\n    //    a.b.**\n    //\n    // Invalid example paths:\n    //    b**c.d\n    //    a.b**\n    //    a.**b\n    //\n\n    for (const segment of result) {\n        if (segment != \"**\" && segment.includes(\"**\"))\n            return \"path segment '**' must not have anything before or after it (except for dots of course)\";\n    }\n\n    return result;\n}\n\nfunction indexOfMany(str: string, matches: string[], position: number): number {\n\n    const indices: number[] = matches.map(_ => -1);\n    // for every string we want to find, record the index of its first occurance\n    for (let i = 0; i < matches.length; i++)\n        indices[i] = str.indexOf(matches[i], position);\n\n    // find the first match (smallest value in our results)\n    // but skip over -1, because that means the string didn't contain that match\n    let smallest = -1;\n    for (const i of indices) {\n        if (smallest == -1 || i < smallest)\n            smallest = i;\n    }\n\n    return smallest;\n}\n\nif (IsDev) {\n    const tests = [\n        // simple case\n        { input: `abc`, output: [`abc`] },\n\n        // single quotes, double quotes\n        { input: `\"xx\".\"yy\"`, output: [`xx`, `yy`] },\n        { input: `'xx'.'yy'`, output: [`xx`, `yy`] },\n        { input: `\".\".'.'`, output: [`.`, `.`] },\n\n        // keys with split-characters inside them\n        { input: `\"'a.'b\".asdf`, output: [`'a.'b`, `asdf`] },\n        { input: `\"x.y.z\".firstName`, output: [`x.y.z`, `firstName`] },\n        { input: `a.\".b\"`, output: [`a`, `.b`] },\n        { input: `a.'.b'`, output: [`a`, `.b`] },\n        { input: `a.'\"\"\".b\"'`, output: [`a`, `\"\"\".b\"`] },\n        { input: `a.'\"\"\".b'`, output: [`a`, `\"\"\".b`] },\n\n        // empty\n        { input: ``, output: [] },\n        { input: `''`, output: [] },\n        { input: `\"\"`, output: [] },\n\n        // invalid inputs\n        // missing closing quotes\n        { input: `\"`, output: null },\n        { input: `.\"`, output: null },\n        { input: `\".`, output: null },\n        { input: `'`, output: null },\n        { input: `.'`, output: null },\n        { input: `'.`, output: null },\n\n        // dots at the wrong location\n        { input: `.`, output: null },\n        { input: `'a'.`, output: null },\n        { input: `.a`, output: null },\n        { input: `.'a'`, output: null },\n        { input: `a..b`, output: null },\n    ];\n\n    for (const test of tests) {\n        const expected = test.output;\n        let result = parseJsonPath(test.input);\n\n        if (typeof result == 'string') result = null as unknown as string[]; // string means error message\n\n        if (result === null && expected === null)\n            continue;\n\n        let hasError = false;\n        if (result === null && expected !== null)\n            hasError = true; // didn't match when it should have\n        if (result !== null && expected === null)\n            hasError = true; // matched something we don't want\n\n        if (!hasError && result && expected) {\n\n            if (result.length != expected.length)\n                hasError = true; // wrong length\n\n            for (let i = 0; i < result.length && !hasError; i++)\n                if (result[i] != expected[i])\n                    hasError = true; // wrong array entry\n        }\n\n        if (hasError)\n            throw new Error(`Error in parseJsonPath test:\\nTest: ${JSON.stringify(test)}\\nActual Result: ${JSON.stringify(result)}`);\n    }\n}\n\nfunction wildcardToRegex(pattern: string): RegExp {\n    const components = pattern.split('*'); // split by '*' symbol\n    const escapedComponents = components.map(regexEscape); // ensure the components don't contain regex special characters\n    const joined = escapedComponents.join('.*'); // join components, adding back the wildcard\n    return new RegExp('^' + joined + '$');\n}\n\nfunction regexEscape(regexPattern: string): string {\n    return regexPattern.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}","export default \"data:image/png;base64,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\"","import { observable, computed, makeObservable } from \"mobx\";\nimport { PageDefinition } from \"../components/routes\";\nimport { clone } from \"../utils/jsonUtils\";\nimport { api } from \"./backendApi\";\nimport { AclRequest, AclRequestDefault } from \"./restInterfaces\";\nimport { uiSettings, TopicDetailsSettings as TopicSettings } from \"./ui\";\n\n\nexport interface BreadcrumbEntry {\n    title: string;\n    linkTo: string;\n}\n\n\nclass UIState {\n    constructor() {\n        makeObservable(this);\n    }\n\n\n    @observable private _pageTitle: string = ' '\n    @computed get pageTitle() { return this._pageTitle; }\n    set pageTitle(title: string) { this._pageTitle = title; document.title = title + ' - Kowl'; }\n\n    @observable pageBreadcrumbs: BreadcrumbEntry[] = []\n\n    @computed get selectedClusterName(): string | null {\n        if (uiSettings.selectedClusterIndex in api.clusters)\n            return api.clusters[uiSettings.selectedClusterIndex];\n        return null;\n    }\n\n    @observable currentRoute = null as (PageDefinition<any> | null); // will be null when a page fails to render\n\n    @observable pathName: string; // automatically updated from router path\n    @computed get selectedMenuKeys(): string[] | undefined {\n        // For now path root is perfect\n        let path = this.pathName;\n\n        const i = path.indexOf('/', 1);\n        if (i > -1) path = path.substr(0, i);\n\n        return [path];\n    }\n\n\n    @observable\n    private _currentTopicName: string | undefined;\n    public get currentTopicName(): string | undefined { return this._currentTopicName; }\n    public set currentTopicName(topicName: string | undefined) {\n        this._currentTopicName = topicName;\n        if (topicName) {\n            if (!uiSettings.perTopicSettings.any(s => s.topicName == topicName)) {\n                // console.log('creating details for topic: ' + topicName);\n                const topicSettings = new TopicSettings();\n                topicSettings.topicName = topicName;\n                uiSettings.perTopicSettings.push(topicSettings);\n            }\n        }\n    }\n\n    get topicSettings(): TopicSettings {\n        const n = this.currentTopicName;\n        if (!n) {\n            return new TopicSettings();\n        }\n\n        const topicSettings = uiSettings.perTopicSettings.find(t => t.topicName == n);\n        if (topicSettings) return topicSettings;\n\n        throw new Error('reaction for \"currentTopicName\" was supposed to create topicDetail settings container');\n    }\n\n    @observable loginError: string | null = null;\n    @observable isUsingDebugUserLogin: boolean = false;\n\n    // Every response from the backend contains, amongst others, the 'app-sha' header (was previously named 'app-version' which was confusing).\n    // If the version doesn't match the current frontend version a promt is shown (like 'new version available, want to reload to update?').\n    // If the user declines, updatePromtHiddenUntil is set to prevent the promt from showing up for some time.\n    @observable.shallow serverVersion: ServerVersionInfo | undefined = undefined;\n    @observable updatePromtHiddenUntil: number | undefined = undefined;\n}\n\nexport interface ServerVersionInfo {\n    ts?: string; // build timestamp, unix seconds\n    sha?: string;\n    branch?: string;\n    shaBusiness?: string;\n    branchBusiness?: string;\n}\n\nconst uiState = new UIState();\nexport { uiState };\n","import React, { Component, } from \"react\";\nimport { autorun, IReactionDisposer, makeObservable, observable } from \"mobx\";\nimport prettyBytesOriginal from \"pretty-bytes\";\nimport prettyMillisecondsOriginal from 'pretty-ms';\nimport queryString from 'query-string';\nimport { editQuery } from \"./queryHelper\";\nimport { message } from \"antd\";\nimport { MessageType } from \"antd/lib/message\";\nimport { TopicMessage } from \"../state/restInterfaces\";\n\n\n\n// Note: Making a <Memo> component is not possible, the container JSX will always render children first so they can be passed as props\nexport const nameof = <T>(name: Extract<keyof T, string>): string => name;\n\nexport class AutoRefresh extends Component {\n\n    timerId: NodeJS.Timeout;\n\n    componentDidMount() {\n        this.reload = this.reload.bind(this);\n        this.timerId = setInterval(() => this.reload(), 1000);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.timerId);\n    }\n\n    reload() {\n        this.forceUpdate();\n    }\n\n    render() {\n        //let c = this.props.children as ReactNodeArray;\n        //console.log('AutoRefresh.render(): ' + c.length + ' children');\n        return (this.props.children);\n    }\n}\n\nexport class TimeSince {\n    timestamp: number = Date.now();\n\n    /** Reset timer back to 0 ms (or the given value). For example '1000' will set the timer as if it was started 1 second ago.  */\n    reset(to: number = 0) {\n        this.timestamp = Date.now() - to;\n    }\n\n    /** Time since last reset (or create) in ms */\n    get value() {\n        return Date.now() - this.timestamp;\n    }\n}\n\nexport class Cooldown {\n    timestamp: number = 0; // time of last trigger\n    duration: number = 0; // how long the CD takes to charge\n\n    /**\n     * @description Create a cooldown with the given duration\n     * @param duration time the cooldown takes to complete in ms\n     * @param start `running` to start 'on cooldown', `ready` to start already charged\n     */\n    constructor(duration: number, start: ('ready' | 'running') = 'running') {\n        this.duration = duration;\n        if (start === 'running') {\n            this.timestamp = Date.now()\n        }\n    }\n\n    /** Time (in ms) since the last time the cooldown was triggered */\n    timeSinceLastTrigger(): number {\n        return Date.now() - this.timestamp;\n    }\n\n    /** Time (in ms) until the cooldown is ready (or 0 if it is) */\n    get timeLeft(): number {\n        const t = this.duration - this.timeSinceLastTrigger();\n        if (t < 0)\n            return 0;\n        return t;\n    }\n\n    // Check if ready\n    get isReady(): boolean {\n        return this.timeLeft <= 0;\n    }\n\n    // 'Use' the cooldown. Check if ready, and if it is also trigger it\n    consume(force: boolean = false): boolean {\n        if (this.timeLeft <= 0 || force) {\n            this.timestamp = Date.now();\n            return true;\n        }\n        return false;\n    }\n\n    // Force the cooldown to be ready\n    setReady(): void {\n        this.timestamp = 0;\n    }\n\n    // Same as 'consume(true)'\n    restart(): void {\n        this.timestamp = Date.now();\n    }\n}\n\nexport class Timer {\n    target: number = 0;\n    duration: number = 0;\n\n    constructor(duration: number, initialState: ('started' | 'done') = 'started') {\n        this.duration = duration;\n        if (initialState === 'started') {\n            this.target = Date.now() + duration;\n        } else {\n            this.target = 0;\n        }\n    }\n\n    /** Time (in ms) until done (or 0) */\n    get timeLeft() {\n        const t = this.target - Date.now();\n        if (t < 0)\n            return 0;\n        return t;\n    }\n\n    get isRunning() {\n        return !this.isDone;\n    }\n\n    get isDone() {\n        return this.timeLeft <= 0;\n    }\n\n    /** Restart timer */\n    restart() {\n        this.target = Date.now() + this.duration;\n    }\n\n    /** Set timer completed */\n    setDone() {\n        this.target = 0;\n    }\n}\n\n\nexport class DebugTimerStore {\n\n    private static instance: DebugTimerStore;\n    static get Instance() {\n        if (!this.instance)\n            this.instance = new DebugTimerStore();\n        return this.instance;\n    }\n\n    @observable secondCounter = 0;\n    @observable private frame = 0;\n\n    private constructor() {\n        this.increaseSec = this.increaseSec.bind(this);\n        setInterval(this.increaseSec, 1000);\n\n        this.increaseFrame = this.increaseFrame.bind(this);\n        //setInterval(this.increaseFrame, 30);\n        makeObservable(this);\n    }\n\n    private increaseSec() { this.secondCounter++; }\n    private increaseFrame() { this.frame++; }\n\n    public useSeconds() {\n        this.mobxTrigger = this.secondCounter;\n    }\n    public useFrame() {\n        this.mobxTrigger = this.frame;\n    }\n\n    mobxTrigger: any;\n}\n\n\nlet refreshCounter = 0; // used to always create a different value, forcing some components to always re-render\nexport const alwaysChanging = () => refreshCounter = (refreshCounter + 1) % 1000;\n\n\n\nexport function assignDeep(target: any, source: any) {\n    for (const key in source) {\n        if (!Object.prototype.hasOwnProperty.call(source, key)) continue;\n        if (key === \"__proto__\" || key === \"constructor\") continue;\n\n        const value = source[key];\n        const existing = key in target ? target[key] : undefined;\n\n        // if (existing === undefined && onlySetExisting) {\n        // \tconsole.log('skipping key ' + key + ' because it doesnt exist in the target');\n        // \tcontinue;\n        // }\n\n        if (typeof value === 'function' || typeof value === 'symbol') {\n            //console.log('skipping key ' + key + ' because its type is ' + typeof value);\n            continue;\n        }\n\n        if (typeof value === 'object') {\n\n            if (!existing || typeof existing !== 'object')\n                target[key] = value;\n            else\n                assignDeep(target[key], value);\n\n            continue;\n        }\n\n        if (existing === value) continue;\n\n        // console.log(`Key [\"${key}\"]:  ${JSON.stringify(existing)} ->  ${JSON.stringify(value)}`);\n\n        target[key] = value;\n    }\n\n}\n\nexport function containsIgnoreCase(str: string, search: string): boolean {\n    return str.toLowerCase().indexOf(search.toLowerCase()) >= 0;\n}\n\n\nconst collator = new Intl.Collator(undefined, {\n    usage: 'search',\n    sensitivity: 'base',\n});\nexport function compareIgnoreCase(a: string, b: string) {\n    return collator.compare(a, b);\n}\n\ntype FoundProperty = { propertyName: string, path: string[], value: any }\ntype PropertySearchResult = 'continue' | 'abort';\n\n\ntype PropertySearchExContext = {\n    isMatch: (propertyName: string, path: string[], value: any) => boolean,\n    currentPath: string[],\n    results: FoundProperty[],\n    returnFirstResult: boolean\n}\n\nexport function collectElements(obj: any, isMatch: (propertyName: string, path: string[], value: any) => boolean, returnFirstMatch: boolean): FoundProperty[] {\n    const ctx: PropertySearchExContext = {\n        isMatch: isMatch,\n        currentPath: [],\n        results: [],\n        returnFirstResult: returnFirstMatch,\n    };\n    collectElementsRecursive(ctx, obj);\n    return ctx.results;\n}\n\nfunction collectElementsRecursive(ctx: PropertySearchExContext, obj: any): PropertySearchResult {\n    for (const key in obj) {\n\n        const value = obj[key];\n\n        // property match?\n        const isMatch = ctx.isMatch(key, ctx.currentPath, value);\n\n        if (isMatch) {\n            const clonedPath = Object.assign([], ctx.currentPath);\n            ctx.results.push({ propertyName: key, path: clonedPath, value: value });\n\n            if (ctx.returnFirstResult) return 'abort';\n        }\n\n        // descend into object\n        if (typeof value === 'object') {\n            ctx.currentPath.push(key);\n            const childResult = collectElementsRecursive(ctx, value);\n            ctx.currentPath.pop();\n\n            if (childResult == 'abort')\n                return 'abort';\n        }\n    }\n\n    return 'continue';\n}\n\n\n\ntype IsMatchFunc = (pathElement: string, propertyName: string, value: any) => boolean;\nexport type CollectedProperty = { path: string[], value: any }\n\nexport function collectElements2(\n    targetObject: any,\n\n    // \"**\" collectes all current and nested properties\n    // \"*\" collects all current properties\n    // anything else is passed to \"isMatch\"\n    path: string[],\n    isMatch: IsMatchFunc\n): CollectedProperty[] {\n\n    // Explore set\n    let currentExplore: CollectedProperty[] = [\n        { path: [], value: targetObject },\n    ];\n    let nextExplore: CollectedProperty[] = [];\n    const results: CollectedProperty[] = [];\n\n    for (let i = 0; i < path.length; i++) {\n        const segment = path[i];\n        const isLast = i == (path.length - 1);\n        const targetList = isLast ? results : nextExplore;\n\n        for (const foundProp of currentExplore) {\n            const currentObj = foundProp.value;\n\n            switch (segment) {\n                case \"**\":\n                    // And all their nested objects are a result\n                    const allNested = collectElements(currentObj, (key, path, value) => {\n                        return typeof value == 'object';\n                    }, false);\n\n                    for (const n of allNested) {\n                        targetList.push({\n                            path: [...foundProp.path, ...n.path, n.propertyName],\n                            value: n.value\n                        });\n                    }\n\n                    // Also explore this object again as well (because '**' also includes the current props)\n                    targetList.push({\n                        path: [...foundProp.path],\n                        value: currentObj,\n                    });\n\n                    break;\n\n                case \"*\":\n                    // Explore all properties\n                    for (const key in currentObj) {\n                        const value = currentObj[key];\n                        if (value == null || typeof value == 'function') continue;\n\n                        targetList.push({\n                            path: [...foundProp.path, key],\n                            value: value,\n                        });\n                    }\n                    break;\n\n                default:\n                    // Some user defined string\n                    for (const key in currentObj) {\n                        const value = currentObj[key];\n                        if (value == null || typeof value == 'function') continue;\n\n                        const match = isMatch(segment, key, value);\n                        if (match) {\n                            targetList.push({\n                                path: [...foundProp.path, key],\n                                value: value,\n                            });\n                        }\n                    }\n                    break;\n            }\n        }\n\n        // use the next array as the current one\n        currentExplore = nextExplore;\n        nextExplore = [];\n    }\n\n    return results;\n}\n\n\nexport function getAllMessageKeys(messages: TopicMessage[]): Property[] {\n    const ctx: GetAllKeysContext = {\n        currentFullPath: \"\",\n        currentPath: [],\n        results: [],\n        existingPaths: new Set<string>(),\n    };\n\n    // slice is needed because messages array is observable\n    for (const m of messages.slice()) {\n        const payload = m.value.payload;\n        getAllKeysRecursive(ctx, payload);\n\n        ctx.currentPath = [];\n        ctx.currentFullPath = \"\";\n    }\n\n    // console.log('getAllMessageKeys', ctx.results);\n\n    return ctx.results;\n}\n\n\ninterface Property {\n    /** property name */\n    propertyName: string;\n    /** path to the property (excluding 'prop' itself) */\n    path: string[];\n    /** path + prop */\n    fullPath: string;\n}\ntype GetAllKeysContext = {\n    currentPath: string[], // complete, real path\n    currentFullPath: string, // string path, with array indices replaced by a start\n    existingPaths: Set<string>, // list of 'currentFullPath' entries, used to filter duplicates\n    results: Property[],\n}\n\nfunction getAllKeysRecursive(ctx: GetAllKeysContext, obj: any): PropertySearchResult {\n    const isArray = Array.isArray(obj);\n    let result = 'continue' as PropertySearchResult;\n\n    const pathToHere = ctx.currentFullPath;\n\n    for (const key in obj) {\n        const value = obj[key];\n\n        ctx.currentPath.push(key);\n        const currentFullPath = isArray\n            ? pathToHere + `[*]`\n            : pathToHere + `.${key}`;\n        ctx.currentFullPath = currentFullPath;\n\n        if (!isArray) { // add result, but only for object properties\n            const isNewPath = !ctx.existingPaths.has(currentFullPath);\n            if (isNewPath) { // and only if its a new path\n                ctx.existingPaths.add(currentFullPath);\n\n                const clonedPath = Object.assign([], ctx.currentPath);\n                ctx.results.push({\n                    propertyName: key,\n                    path: clonedPath, // all the keys\n                    fullPath: currentFullPath,\n                });\n            }\n        }\n\n\n        // descend into object\n        if (typeof value === 'object' && value != null) {\n\n            const childResult = getAllKeysRecursive(ctx, value);\n\n            if (childResult == 'abort')\n                result = 'abort';\n        }\n\n        ctx.currentPath.pop();\n        ctx.currentFullPath = currentFullPath;\n\n        if (result == 'abort') break;\n    }\n\n    ctx.currentFullPath = pathToHere;\n\n    return result;\n}\n\n\n\nconst secToMs = 1000;\nconst minToMs = 60 * secToMs;\nconst hoursToMs = 60 * minToMs;\nconst daysToMs = 24 * hoursToMs;\n\nexport function hoursToMilliseconds(hours: number) {\n    return hours * hoursToMs;\n}\n\nexport const cullText = (str: string, length: number) => str.length > length ? `${str.substring(0, length - 3)}...` : str;\n\nexport function groupConsecutive(ar: number[]): number[][] {\n    const groups: number[][] = [];\n\n    for (const cur of ar) {\n        const group = groups.length > 0 ? groups[groups.length - 1] : undefined;\n\n        if (group) {\n            const last = group[group.length - 1];\n            if (last == cur - 1) {\n                // We can extend the group\n                group.push(cur);\n                continue;\n            }\n        }\n\n        groups.push([cur]);\n    }\n\n    return groups;\n}\n\nexport const prettyBytesOrNA = function (n: number) {\n    if (!isFinite(n) || n < 0) return \"N/A\";\n    return prettyBytes(n);\n}\nexport const prettyBytes = function (n: number) {\n    if (typeof n === 'undefined' || n === null)\n        return \"N/A\"; // null, undefined -> N/A\n\n    if (typeof n !== 'number') {\n        if (typeof n === 'string') {\n            // string\n            if (n === \"\")\n                return \"N/A\"; // empty -> N/A\n\n            n = parseFloat(String(n));\n\n            if (!isFinite(n))\n                return String(n); // \"NaN\" or \"Infinity\"\n\n            // number parsed, fall through\n        }\n        else {\n            // something else: object, function, ...\n            return \"NaN\";\n        }\n    }\n\n    // n is a finite number\n    return prettyBytesOriginal(n);\n}\n\nexport const prettyMilliseconds = function (n: number, options?: prettyMillisecondsOriginal.Options) {\n    if (typeof n === 'undefined' || n === null)\n        return \"N/A\"; // null, undefined -> N/A\n\n    if (typeof n !== 'number') {\n        if (typeof n === 'string') {\n            // string\n            if (n === \"\")\n                return \"N/A\"; // empty -> N/A\n\n            n = parseFloat(String(n));\n\n            if (!isFinite(n))\n                return String(n); // \"NaN\" or \"Infinity\"\n\n            // number parsed, fall through\n        }\n        else {\n            // something else: object, function, ...\n            return \"NaN\";\n        }\n    }\n    else {\n        if (!isFinite(n)) return \"N/A\";\n    }\n\n    // n is a finite number\n    return prettyMillisecondsOriginal(n, options);\n}\n\nconst between = (min: number, max: number) => (num: number) => num >= min && num < max;\nconst isK = between(1000, 1000000);\nconst isM = between(1000000, 1000000000);\n\nconst isInfinite = (num: number) => !isFinite(num);\nconst toK = (num: number) => `${(num / 1000).toFixed(1)}k`;\nconst toM = (num: number) => `${(num / 1000000).toFixed(1)}m`;\nconst toG = (num: number) => `${(num / 1000000000).toFixed(1)}g`;\n\nexport function prettyNumber(num: number) {\n    if (isNaN(num) || isInfinite(num) || num < 1000) return String(num);\n    if (isK(num)) return toK(num);\n    if (isM(num)) return toM(num);\n    return toG(num);\n}\n\nexport function fromDecimalSeparated(str: string): number {\n    if (!str || str === '') return 0;\n    return parseInt(str.replace(',', ''));\n}\n\nexport function toDecimalSeparated(num: number): string {\n    return String(num).replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\nexport function keepInRange(num: number, min: number, max: number) {\n    if (num < min) return min;\n    else if (num > max) return max;\n    else return num;\n}\n\n/**\n * random digits and letters (entropy: 53bit)\n */\nexport function randomId() {\n    return (Math.random() * Number.MAX_SAFE_INTEGER).toString(36);\n}\n\n/**\n * \"prefix-randomId()-randomId()\"\n */\nexport function simpleUniqueId(prefix?: string) {\n    return `${prefix}-${randomId()}-${randomId()}`;\n}\n\n/**\n * 4x 'randomId()'\n */\nexport function uniqueId4(): string {\n    return randomId() + randomId() + randomId() + randomId();\n}\n\n\nexport function titleCase(str: string): string {\n    if (!str) return str;\n    return str[0].toUpperCase() + str.slice(1);\n}\n\n\n// Bind an observable object to the url query\n// - reads the current query parameters and sets them on the observable\n// - whenever a prop in the observable changes, it updates the url\n// You might want to use different names for the query parameters:\n// observable = { propA: 5 }\n// queryNames = { 'propA': 'x' }\n// query => ?x=5\n\n// export function bindObjectToUrl<\n//     T extends { [key: string]: (number | string | number[] | string[]) },\n// >(observable: T, queryNames: { [K in keyof T]?: string }): IReactionDisposer {\nexport function bindObjectToUrl<\n    TObservable extends { [K in keyof TQueryNames]: (number | string | number[] | string[] | null | undefined) },\n    TQueryNames extends { [K in keyof TObservable]: string },\n    >(\n        observable: { [K in keyof TQueryNames]: any },\n        queryNames: TQueryNames,\n        shouldInclude?: (propName: keyof TObservable, obj: TObservable) => boolean\n    ): IReactionDisposer {\n\n    const query = queryString.parse(window.location.search);\n\n    // query -> observable\n    for (const propName of Object.keys(queryNames) as [keyof TObservable]) {\n        const queryName = queryNames[propName];\n\n        const value = query[queryName as string];\n        if (value == null) continue;\n\n        if (Array.isArray(value)) {\n            const allNum = value.all(v => Number.isFinite(Number(v)));\n            const ar = allNum ? value.map(v => Number(v)) : value;\n            observable[propName] = ar as any;\n        } else {\n            const v = Number.isFinite(Number(value)) ? Number(value) : value;\n            observable[propName] = v as any;\n        }\n    }\n\n    const disposer = autorun(() => {\n        editQuery(query => {\n            for (const propName of Object.keys(queryNames) as [keyof TObservable]) {\n\n                const queryName = queryNames[propName];\n                const newValue = observable[propName];\n\n                if (shouldInclude && !shouldInclude(propName, observable)) {\n                    query[queryName] = null;\n                    continue;\n                }\n\n                if (newValue == null)\n                    query[queryName] = null;\n                else if (typeof newValue === 'boolean')\n                    query[queryName] = String(Number(newValue));\n                else\n                    query[queryName] = String(newValue);\n\n                // console.log('updated', { propName: propName, queryName: queryName, newValue: newValue });\n            }\n        })\n    });\n\n    return disposer;\n}\n\n\ntype NoticeType = 'info' | 'success' | 'error' | 'warning' | 'loading';\nexport class Message {\n    private key: string;\n    private hideFunc: MessageType;\n    private duration: number | null;\n\n    constructor(private text: string, private type: NoticeType = 'loading', private suffix: string = \"\") {\n        this.key = randomId();\n        if (type == 'loading')\n            this.duration = 0; // loading stays open until changed\n        else\n            this.duration = null; // others disappear automatically\n        this.update();\n    }\n\n    private update() {\n        this.hideFunc = message.open({\n            content: this.text + this.suffix,\n            key: this.key,\n            type: this.type,\n            duration: this.duration,\n        });\n    }\n\n    hide() {\n        this.hideFunc();\n    }\n\n    setLoading(text?: string, suffix?: string) {\n        if (text) this.text = text;\n        if (suffix) this.suffix = suffix;\n        this.type = 'loading';\n        this.duration = 0;\n        this.update();\n    }\n\n    setSuccess(text?: string, suffix?: string) {\n        if (text) this.text = text;\n        if (suffix) this.suffix = suffix;\n        this.type = 'success';\n        this.duration = 2.5;\n        this.update();\n    }\n\n    setError(text?: string, suffix?: string) {\n        if (text) this.text = text;\n        if (suffix) this.suffix = suffix;\n        this.type = 'error';\n        this.duration = 2.5;\n        this.update();\n    }\n}\n\n/**\n * Scroll the main content region\n */\nexport function scrollToTop(): void {\n    const mainLayout = document.getElementById('mainLayout');\n    if (!mainLayout) return;\n\n    mainLayout.scrollTo({ behavior: 'smooth', left: 0, top: 0 });\n}\n\n/**\n * Scroll the main content region to the target element (which is found by the given id)\n */\nexport function scrollTo(targetId: string, anchor: 'start' | 'end' | 'center' = 'center', offset?: number): void {\n    const mainLayout = document.getElementById('mainLayout');\n    if (!mainLayout) return;\n    const target = document.getElementById(targetId);\n    if (!target) return;\n\n    const rect = target.getBoundingClientRect();\n    let top = 0;\n    switch (anchor) {\n        case 'start': top = rect.top; break;\n        case 'center': top = (rect.top + rect.bottom) / 2; break;\n        case 'end': top = rect.bottom; break;\n    }\n\n    mainLayout.scrollTo({\n        behavior: 'smooth',\n        top: target.getBoundingClientRect().top + mainLayout.scrollTop + (offset ?? 0)\n    });\n}\n\n\n// See: https://stackoverflow.com/questions/30106476/using-javascripts-atob-to-decode-base64-doesnt-properly-decode-utf-8-strings\nexport function decodeBase64(base64: string) {\n    const data = atob(base64);\n    const length = data.length;\n    const bytes = new Uint8Array(length);\n    for (let i = 0; i < length; i++)\n        bytes[i] = data.charCodeAt(i);\n\n    const decoder = new TextDecoder(); // default is utf-8\n    return decoder.decode(bytes);\n}","\nexport function wrapFilterFragment(filterFragment: string) {\n    if (!filterFragment.includes('return '))\n        filterFragment = `return (${filterFragment})`;\n    return filterFragment;\n}\n\nexport function injectFindFunc(fullFilterCode: string) {\n    const code = fullFilterCode;\n    if (!code.includes('find'))\n        return code;\n\n\n    const regexFindPropGlobal = /findProp\\('(.*?)'\\)/g;\n    const regexFindProp = /findProp\\('(.*?)'\\)/;\n\n    // Find the group of occurrences\n    const findPropOccurences = code.match(regexFindPropGlobal) || [];\n\n    findPropOccurences.forEach(occurence => {\n        // Extract the attributes or keys from the string\n        const keysMatch = occurence.match(regexFindProp) || [];\n        const keys = keysMatch[1]?.split('.') ?? [];\n\n        // Map it from 'key.key' into ['key']['key']\n        const replacedKeys = keys.map(key => `['${key}']`);\n        const replacedString = `value${replacedKeys.join('')}`;\n\n        // Replace the code with the replaced string\n        // From: findProp('key.key')\n        // To: value['key']['key']\n        // code = code.replace(occurence, replacedString);\n    });\n}\n\nexport function sanitizeString(input: string) {\n    return input.split('')\n        .map((char: string) => {\n            const code = char.charCodeAt(0);\n            if (code > 0 && code < 128) {\n                return char;\n            } else if (code >= 128 && code <= 255) {\n                //Hex escape encoding\n                return `/x${code.toString(16)}`.replace('/', '\\\\');\n            }\n            return '';\n        })\n        .join('');\n}","\nimport { PencilIcon, TrashIcon, XCircleIcon } from '@heroicons/react/solid';\nimport { TrashIcon as TrashIconOutline, PencilIcon as PencilIconOutline } from '@heroicons/react/outline';\nimport { Component } from 'react';\nimport React from 'react';\nimport { findPopupContainer, numberToThousandsString, QuickTable, RadioOptionGroup, InfoText } from '../../../utils/tsxUtils';\nimport { Alert, Button, Collapse, ConfigProvider, message, Modal, Popover, Radio, Select, Table, Tooltip } from 'antd';\nimport { observer } from 'mobx-react';\nimport { action, autorun, computed, FlowCancellationError, IReactionDisposer, makeObservable, observable, transaction, untracked } from 'mobx';\nimport { DeleteConsumerGroupOffsetsTopic, EditConsumerGroupOffsetsTopic, GroupDescription, PartitionOffset, TopicOffset } from '../../../state/restInterfaces';\nimport { animProps_modalPage, animProps_radioOptionGroup, MotionDiv } from '../../../utils/animationProps';\nimport { AnimatePresence, AnimateSharedLayout, motion } from 'framer-motion';\nimport ReactCSSTransitionReplace from 'react-css-transition-replace';\nimport { sortField } from '../../misc/common';\nimport { clone, toJson } from '../../../utils/jsonUtils';\nimport { api } from '../../../state/backendApi';\nimport { WarningOutlined } from '@ant-design/icons';\nimport { Message } from '../../../utils/utils';\nimport { showErrorModal } from '../../misc/ErrorModal';\nimport { basePathS } from '../../../utils/env';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { KowlTimePicker } from '../../misc/KowlTimePicker';\nimport { ChevronLeftIcon, ChevronRightIcon, SkipIcon } from '@primer/octicons-react';\n\ntype EditOptions = 'startOffset' | 'endOffset' | 'time' | 'otherGroup';\n\n// props:\n// - consumer group\n// - topics\n//      - partitionIds\n\n\nexport type GroupOffset = {\n    topicName: string;\n    partitionId: number;\n\n    // Current Offset\n    // Can be undefined when we extend our offsets using another group,\n    // in that case we don't have a \"Current Offset\"\n    offset?: number;\n\n    // start/end/other:\n    // undefined  =>\n    // number     => concrete offset from other consumer group\n    // Date       => placeholder for 'specific time' until real offsets are loaded\n    // PartitionOffset => real offsets for Date\n    newOffset?: number | Date | PartitionOffset;\n};\n\n\n\n@observer\nexport class EditOffsetsModal extends Component<{\n    group: GroupDescription,\n    offsets: GroupOffset[] | null,\n    onClose: () => void,\n}> {\n    lastOffsets: GroupOffset[];\n    lastVisible = false;\n    offsetsByTopic: {\n        topicName: string;\n        items: GroupOffset[];\n    }[] = [];\n    autorunDisposer: IReactionDisposer | null = null;\n\n    @observable page: 0 | 1 = 0;\n    @observable selectedOption: EditOptions = 'startOffset';\n    @observable timestampUtcMs: number = new Date().valueOf();\n    @observable otherConsumerGroups: GroupDescription[] = [];\n    @observable selectedGroup: string | undefined = undefined;\n    @observable otherGroupCopyMode: 'all' | 'onlyExisting' = 'onlyExisting';\n\n    @observable isLoadingTimestamps = false;\n    @observable isApplyingEdit = false;\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    render() {\n        let offsets = this.props.offsets;\n        const group = this.props.group;\n\n        const visible = Boolean(offsets);\n        this.updateVisible(visible);\n        if (offsets) this.lastOffsets = offsets;\n        offsets = offsets ?? this.lastOffsets;\n        if (!offsets) return null;\n\n        this.offsetsByTopic = offsets.groupInto(x => x.topicName).map(g => ({ topicName: g.key, items: g.items }));\n        const single = this.offsetsByTopic.length == 1;\n\n        return <Modal\n            title=\"Edit consumer group\"\n            visible={visible}\n            closeIcon={<></>} maskClosable={false}\n            okText=\"Review\"\n            width=\"700px\"\n            footer={this.footer()}\n            centered\n            className=\"consumerGroupModal consumerGroupModal-edit\"\n        >\n            {/* Header */}\n            <div style={{ display: 'flex', flexDirection: 'row', gap: '22px' }}>\n                <div>\n                    <div style={{\n                        width: '64px', height: '64px', padding: '14px',\n                        marginTop: '4px', marginLeft: '4px',\n                        background: '#718096', borderRadius: '1000px',\n                    }}>\n                        <PencilIconOutline color=\"white\" />\n                    </div>\n                </div>\n                <div>\n                    <span>Group offsets will be editted for:</span>\n\n                    <div style={{ fontWeight: 600, margin: '8px 0', lineHeight: '1.5' }}>\n                        <div>Group: <span className='codeBox'>{group.groupId}</span></div>\n                        <div>\n                            {this.offsetsByTopic.length} {single ? 'Topic' : 'Topics'} / {offsets.length} {offsets.length == 1 ? 'Partition' : 'Partitions'}\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Content */}\n            <div style={{ marginTop: '2em' }}>\n                {this.page == 0\n                    ? <div key='p1'>{this.page1()}</div>\n                    : <div key='p2'>{this.page2()}</div>\n                }\n            </div>\n\n        </Modal>;\n    }\n\n    page1() {\n\n        return <RadioOptionGroup<EditOptions>\n            disabled={this.isLoadingTimestamps}\n            value={this.selectedOption}\n            onChange={v => this.selectedOption = v}\n            options={[\n                {\n                    value: 'startOffset',\n                    title: \"Start Offset\",\n                    subTitle: \"Set all offsets to the oldest partition's offset.\",\n                },\n                {\n                    value: 'endOffset',\n                    title: \"End Offset\",\n                    subTitle: \"Set all offsets to the newest partition's offset.\",\n                },\n                {\n                    value: 'time',\n                    title: \"Specific Time\",\n                    subTitle: \"Choose a timestamp to which all partition's offsets will be set.\",\n                    content: <div style={{\n                        paddingTop: '6px',\n                        marginLeft: '-1px',\n                    }}>\n                        <KowlTimePicker valueUtcMs={this.timestampUtcMs} onChange={t => this.timestampUtcMs = t} disabled={this.isLoadingTimestamps} />\n                    </div>\n                },\n                {\n                    value: 'otherGroup',\n                    title: \"Other Consumer Group\",\n                    subTitle: \"Copy offsets from another (inactive) consumer group\",\n                    content: <>\n                        <div style={{\n                            display: 'flex', gap: '.5em', flexDirection: 'column',\n                            paddingTop: '12px', marginLeft: '-1px'\n                        }}>\n                            <Select style={{ minWidth: '260px' }}\n                                placeholder=\"Select another consumer group...\"\n                                showSearch\n                                options={this.otherConsumerGroups.map(g => ({ value: g.groupId, label: g.groupId, title: g.groupId, }))}\n                                value={this.selectedGroup}\n                                onChange={x => this.selectedGroup = x}\n                                disabled={this.isLoadingTimestamps}\n                            />\n\n                            <Radio.Group defaultValue='onlyExisting' style={{\n                                display: 'flex', flexDirection: 'column', gap: '4px',\n                                padding: '1px 8px 1px 4px',\n                            }}\n                                value={this.otherGroupCopyMode}\n                                onChange={x => this.otherGroupCopyMode = x.target.value}\n                            >\n                                <Radio value='onlyExisting' disabled={this.isLoadingTimestamps} >\n                                    <InfoText tooltip=\"Will only lookup the offsets for the topics/partitions that are defined in this group. If the other group has offsets for some additional topics/partitions they will be ignored.\" maxWidth=\"450px\" >\n                                        Copy matching offsets\n                                    </InfoText>\n                                </Radio>\n                                <Radio value='all' disabled={this.isLoadingTimestamps} >\n                                    <InfoText tooltip=\"If the selected group has offsets for some topics/partitions that don't exist in the current consumer group, they will be copied anyway.\" maxWidth=\"450px\" >\n                                        Full Copy\n                                    </InfoText>\n                                </Radio>\n                            </Radio.Group>\n                        </div>\n                    </>\n                },\n            ]}\n        />;\n    }\n\n    page2() {\n        const firstTopic = this.offsetsByTopic[0].topicName;\n        const offsetsCanDiffer = this.selectedOption == 'startOffset'\n            || this.selectedOption == 'endOffset'\n            || this.selectedOption == 'time';\n\n        return <div style={{ maxHeight: '400px', overflowY: 'auto' }}>\n            <Collapse bordered={false} defaultActiveKey={firstTopic}>\n                {this.offsetsByTopic.map(({ topicName, items }) =>\n\n                    <Collapse.Panel key={topicName}\n                        style={{ padding: 0 }}\n                        header={\n                            <div style={{\n                                display: 'flex', alignItems: 'center', gap: '4px',\n                                fontWeight: 600, whiteSpace: 'nowrap'\n                            }}>\n                                {/* Title */}\n                                <span style={{\n                                    textOverflow: 'ellipsis',\n                                    overflow: 'hidden',\n                                    paddingRight: '30px',\n                                }}>{topicName}</span>\n                                <span style={{ display: 'inline-block', marginLeft: 'auto', padding: '0 1em', }}>{items.length} Partitions</span>\n                            </div>\n                        }>\n\n                        <Table\n                            size='small'\n                            showSorterTooltip={false}\n                            pagination={{ pageSize: 1000, position: ['none', 'none'] as any }}\n\n                            dataSource={items}\n                            rowKey={r => r.partitionId}\n                            rowClassName={(r) => r.newOffset == null ? 'unchanged' : ''}\n                            columns={[\n                                { width: 130, title: 'Partition', dataIndex: 'partitionId', sorter: sortField('partitionId'), sortOrder: 'ascend' },\n                                {\n                                    width: 150, title: 'Offset Before', dataIndex: 'offset',\n                                    render: v => v == null\n                                        ? <Tooltip\n                                            title=\"The group does not have an offset for this partition yet\"\n                                            mouseEnterDelay={0.1} getPopupContainer={findPopupContainer}\n                                        >\n                                            <span style={{ opacity: 0.66, marginLeft: '2px' }}><SkipIcon /></span>\n                                        </Tooltip>\n                                        : numberToThousandsString(v)\n                                },\n                                {\n                                    title: 'Offset After',\n                                    render: (_, r) => <ColAfter selectedTime={this.timestampUtcMs} record={r} />\n                                }\n                            ]}\n                        />\n\n                    </Collapse.Panel>\n                )}\n            </Collapse>\n        </div>;\n    }\n\n    differWarning() {\n        const content = <div>\n            <p>The offsets that actually get applied may be different from what is shown in this column.</p>\n            <h6>Example</h6>\n            <p>\n                If you chose to change all group offsets to 'End Offset', the offsets for each topic (high/low watermarks) are fetched.\n                But when your change request reaches the backend, those offsets might have changed already because new messages were written to the topic.\n                The backend will correct for this difference and apply the correct offset.\n            </p>\n        </div>;\n\n        return <Popover trigger='click' content={content}>\n            <WarningOutlined />\n        </Popover>;\n    }\n\n    @action\n    setPage(page: 0 | 1) {\n        if (page == 1) {\n            // compute and set newOffset\n            if (this.props.offsets == null) return;\n            const op = this.selectedOption;\n\n            if (op == 'startOffset') {\n                // Earliest\n                this.props.offsets.forEach(x => x.newOffset = -2);\n            } else if (op == 'endOffset') {\n                // Latest\n                this.props.offsets.forEach(x => x.newOffset = -1);\n            } else if (op == 'time') {\n                // Time\n                // this.props.offsets.forEach(x => x.newOffset = new Date(this.timestampUtcMs));\n                this.props.offsets.forEach(x => x.newOffset = \"fetching offsets...\" as any);\n                const requiredTopics = this.props.offsets.map(x => x.topicName).distinct();\n\n                const propOffsets = this.props.offsets;\n                // Fetch offset for each partition\n                setImmediate(async () => {\n                    const msg = new Message('Fetching offsets for timestamp', 'loading', '...');\n\n                    let offsetsForTimestamp: TopicOffset[];\n                    try {\n                        offsetsForTimestamp = await api.getTopicOffsetsByTimestamp(requiredTopics, this.timestampUtcMs);\n                        msg.setSuccess(undefined, ' - done');\n                    } catch (err) {\n                        showErrorModal(\n                            'Failed to fetch offsets for timestamp',\n                            <span>Could not lookup offsets for given timestamp <span className='codeBox'>{new Date(this.timestampUtcMs).toUTCString()}</span>.</span>,\n                            toJson({ errors: err, request: requiredTopics }, 4)\n                        );\n                        msg.setError(undefined, ' - failed');\n                        return;\n                    }\n\n                    propOffsets.forEach(x => {\n                        const responseOffset = offsetsForTimestamp.first(t => t.topicName == x.topicName)?.partitions.first(p => p.partitionId == x.partitionId);\n                        x.newOffset = responseOffset;\n                    });\n                });\n            } else {\n                // Other group\n                // Lookup offsets from the other group\n                const other = api.consumerGroups.get(this.selectedGroup ?? '');\n                if (other) {\n\n                    // Helper functions\n                    const getOffset = function (topicName: string, partitionId: number): number | undefined {\n                        return other.topicOffsets\n                            .first(t => t.topic == topicName)?.partitionOffsets\n                            .first(p => p.partitionId == partitionId)?.groupOffset;\n                    };\n\n                    const currentOffsets = this.props.offsets;\n                    const alreadyExists = function (topicName: string, partitionId: number): boolean {\n                        return currentOffsets.any(x => x.topicName == topicName && x.partitionId == partitionId);\n                    };\n\n                    //\n                    // Copy offsets that exist in the current group from the other group\n                    for (const x of this.props.offsets)\n                        x.newOffset = getOffset(x.topicName, x.partitionId);\n\n                    //\n                    // Extend our offsets with any offsets that our group currently doesn't have\n                    if (this.otherGroupCopyMode == 'all') {\n\n                        const otherFlat = other.topicOffsets.flatMap(x => x.partitionOffsets.flatMap(p => ({\n                            topicName: x.topic,\n                            partitionId: p.partitionId,\n                            offset: p.groupOffset,\n                        })));\n\n                        for (const o of otherFlat)\n                            if (!alreadyExists(o.topicName, o.partitionId))\n                                currentOffsets.push({\n                                    topicName: o.topicName,\n                                    partitionId: o.partitionId,\n                                    offset: undefined,\n                                    newOffset: o.offset,\n                                });\n                    }\n                }\n                else {\n                    showErrorModal(\n                        'Consumer group not found',\n                        null,\n                        <span>Could not find a consumer group named <span className='codeBox'>{this.selectedGroup}</span> to compute new offsets.</span>,\n                    );\n                }\n            }\n        }\n\n        this.page = page;\n    }\n\n    footer() {\n        const disableContinue = this.selectedOption == 'otherGroup' && !this.selectedGroup;\n        const disableNav = this.isApplyingEdit || this.isLoadingTimestamps;\n\n        if (this.page == 0) return <div>\n            <Button key='cancel' onClick={this.props.onClose} >Cancel</Button>\n\n            <Button key='next' type='primary' onClick={() => this.setPage(1)}\n                disabled={disableContinue || disableNav}\n                loading={this.isLoadingTimestamps}\n            >\n                <span>Review</span>\n                <span><ChevronRightIcon /></span>\n            </Button>\n        </div>;\n        else return <div style={{ display: 'flex' }}>\n            <Button key='back' onClick={() => this.setPage(0)} style={{ paddingRight: '18px' }}\n                disabled={disableNav}\n            >\n                <span><ChevronLeftIcon /></span>\n                <span>Back</span>\n            </Button>\n\n            <Button key='cancel'\n                style={{ marginLeft: 'auto' }}\n                onClick={this.props.onClose}\n            >Cancel</Button>\n\n            <Button key='next' type='primary' disabled={disableNav}\n                onClick={() => this.onApplyEdit()}\n            >\n                <span>Apply</span>\n            </Button>\n        </div>;\n    }\n\n    updateVisible(visible: boolean) {\n        if (visible == this.lastVisible) return;\n\n        if (visible) {\n            setImmediate(() => {\n                // modal became visible\n\n                // need all groups for \"other groups\" dropdown\n                api.refreshConsumerGroups();\n\n                // need watermarks for all topics the group consumes\n                // in order to know earliest/latest offsets\n                const topics = this.props.group.topicOffsets.map(x => x.topic).distinct();\n                api.refreshPartitions(topics, true);\n\n\n                this.autorunDisposer = autorun(() => {\n                    this.otherConsumerGroups = [...api.consumerGroups.values()]\n                        .filter(g => g.groupId != this.props.group.groupId);\n                });\n\n                // reset settings\n                transaction(() => {\n                    this.setPage(0);\n                    this.selectedOption = 'startOffset';\n                });\n            });\n\n        }\n        else {\n            if (this.autorunDisposer) {\n                this.autorunDisposer();\n                this.autorunDisposer = null;\n            }\n        }\n\n        this.lastVisible = visible;\n    }\n\n\n    @action async onApplyEdit() {\n        const group = this.props.group;\n        const offsets = this.props.offsets!;\n\n        this.isApplyingEdit = true;\n        const msg = new Message('Applying offsets', 'loading', '...');\n        const topics = createEditRequest(offsets);\n        try {\n            const editResponse = await api.editConsumerGroupOffsets(group.groupId, topics);\n            const errors = editResponse.map(t => ({\n                ...t,\n                partitions: t.partitions.filter(x => x.error),\n            })).filter(t => t.partitions.length > 0);\n            if (errors.length > 0) {\n                console.error('apply offsets, backend errors', { errors: errors, request: topics });\n                // eslint-disable-next-line no-throw-literal\n                throw { errors: errors, request: topics };\n            }\n\n            msg.setSuccess(undefined, ' - done');\n        }\n        catch (err) {\n            console.error('failed to apply offset edit', err);\n            msg.setError(undefined, ' - failed');\n            showErrorModal(\n                'Apply editted offsets',\n                <span>\n                    Could not apply offsets for consumer\n                    group <span className='codeBox'>{group.groupId}</span>.\n                </span>,\n                toJson(err, 4),\n            );\n        }\n        finally {\n            this.isApplyingEdit = false;\n            api.refreshConsumerGroup(this.props.group.groupId, true);\n            this.props.onClose();\n        }\n    }\n}\n\n@observer class ColAfter extends Component<{\n    selectedTime?: number\n    record: GroupOffset\n}> {\n\n    render() {\n        const record = this.props.record;\n        const val = record.newOffset;\n\n        // No change\n        if (val == null) {\n            return <Tooltip title=\"Offset will not be changed\" mouseEnterDelay={0.1} getPopupContainer={findPopupContainer}>\n                <span style={{ opacity: 0.66, marginLeft: '2px' }}><SkipIcon /></span>\n            </Tooltip>;\n        }\n\n        // Set by timestamp\n        if (typeof val == 'object') {\n            // placeholder while loading\n            if (val instanceof Date)\n                return val.toLocaleString();\n\n            // actual offset\n            if ('offset' in val) {\n\n                // error\n                if (val.error) return <span style={{ color: 'orangered' }}>\n                    {val.error}\n                </span>;\n\n                // successful fetch\n                if (val.timestamp > 0)\n                    return <div style={{ display: 'inline-flex', gap: '6px', alignItems: 'center' }}>\n                        <span>{numberToThousandsString(val.offset)}</span>\n                        <span style={{ fontSize: 'smaller', color: 'hsl(0deg 0% 67%)', userSelect: 'none', cursor: 'default' }}\n                        >({new Date(val.timestamp).toLocaleString()})</span>\n                    </div>;\n\n                // not found - no message after given timestamp\n                // use 'latest'\n                const partition = api.topicPartitions.get(record.topicName)?.first(p => p.id == record.partitionId);\n                return <div style={{ display: 'inline-flex', gap: '6px', alignItems: 'center' }}>\n                    <InfoText tooltip={<div>\n                        There is no offset for this partition at or after the given timestamp (<code>{new Date(this.props.selectedTime ?? 0).toLocaleString()}</code>).\n                        As a fallback, the last offset in that partition will be used.\n                    </div>}\n                        icon={<WarningOutlined />}\n                        iconSize='18px'\n                        iconColor='orangered'\n                        maxWidth='350px'\n                    >\n                        <span>{numberToThousandsString(partition?.waterMarkHigh ?? -1)}</span>\n\n                    </InfoText>\n                </div>;\n            }\n        }\n\n\n        // Earliest / Latest / OtherGroup\n        if (typeof val === 'number') {\n            // copied from other group\n            if (val >= 0) return numberToThousandsString(val);\n\n            // Get offset from current partition values\n            const partition = api.topicPartitions.get(record.topicName)?.first(p => p.id == record.partitionId);\n\n            const content = (val == -2)\n                ? { name: \"Earliest\", offset: partition?.waterMarkLow ?? '...' }\n                : { name: \"Latest\", offset: partition?.waterMarkHigh ?? '...' };\n\n            return <div style={{ display: 'inline-flex', gap: '6px', alignItems: 'center' }}>\n                <span>{typeof content.offset == 'number' ? numberToThousandsString(content.offset) : content.offset}</span>\n                <span style={{ fontSize: 'smaller', color: 'hsl(0deg 0% 67%)', userSelect: 'none', cursor: 'default' }}>({content.name})</span>\n            </div>;\n        }\n\n        // Loading placeholder\n        if (typeof val === 'string') {\n            return <span style={{ opacity: 0.66, fontStyle: 'italic' }}>{val}</span>;\n        }\n\n        return `Unknown type in 'newOffset' type='${typeof val}' value='{v}'`;\n    }\n}\n\n\nexport type GroupDeletingMode = 'group' | 'topic' | 'partition';\n// Why do we pass 'mode'?\n//   It is the users \"intent\" (where he clicked).\n//   Without it, we'd have to infer it, which is possible, but will result in strange wording.\n//   For example:\n//     - user is viewing a group that has offsets for only one topic\n//     - user clicks 'delete' on the topic\n//     - dialog would show \"you want to delete ALL offsets for this group\"\n//       which is technically correct, but might give the impression of deleting more than he wanted\n@observer\nexport class DeleteOffsetsModal extends Component<{\n    group: GroupDescription,\n    mode: GroupDeletingMode,\n    offsets: GroupOffset[] | null,\n    onClose: () => void,\n}> {\n\n    lastOffsets: GroupOffset[];\n\n    render() {\n        const { group, mode } = this.props;\n        let offsets = this.props.offsets;\n\n        const visible = Boolean(offsets);\n        if (offsets) this.lastOffsets = offsets;\n        offsets = offsets ?? this.lastOffsets;\n        if (!offsets) return null;\n\n        const offsetsByTopic = offsets.groupInto(x => x.topicName).map(g => ({ topicName: g.key, items: g.items }));\n        const singleTopic = offsetsByTopic.length == 1;\n        const singlePartition = offsets.length == 1;\n\n        const subTitle =\n            (mode == 'group' && <span>All group offsets will be deleted for:</span>) ||\n            (mode == 'topic' && <span>Group offsets will be deleted for topic:</span>) ||\n            (mode == 'partition' && <span>Group offsets will be deleted for:</span>);\n\n\n        return <Modal\n            title={mode == 'group'\n                ? \"Delete consumer group\"\n                : \"Delete consumer group offsets\"\n            }\n            visible={visible}\n            closeIcon={<></>} maskClosable={false}\n            width=\"600px\"\n\n            okText=\"Delete\"\n            okButtonProps={{ danger: true }}\n            onOk={() => this.onDeleteOffsets()}\n\n            onCancel={() => this.props.onClose()}\n        >\n            <div style={{ display: 'flex', flexDirection: 'row', gap: '1.8em' }}>\n                <div>\n                    <div style={{\n                        width: '64px', height: '64px', padding: '12px', marginTop: '4px',\n                        background: '#F53649', borderRadius: '1000px'\n                    }}>\n                        <TrashIconOutline color=\"white\" />\n                    </div>\n                </div>\n                <div>\n                    <div>\n                        <span>Are you sure you want to delete offsets from this consumer group?</span>\n                        <div style={{ fontWeight: 600, marginTop: '2px', marginBottom: '1.5em' }}>\n                            <div>Group: <span className='codeBox'>{group.groupId}</span></div>\n                        </div>\n                    </div>\n\n                    <div>\n                        {mode == 'group' && <div>\n                            <span>Group offsets will be deleted for all topics and partitions:</span>\n                            <ul style={{ fontWeight: 600, margin: '6px 0' }}>\n                                {singleTopic\n                                    ? <>\n                                        <li>Topic: <span className='codeBox'>{offsetsByTopic[0].topicName}</span></li>\n                                        <li>{offsets.length} {singlePartition ? 'Partition' : 'Partitions'}</li>\n                                    </>\n                                    : <>\n                                        <li>{offsetsByTopic.length} Topics / {offsets.length} {singlePartition ? 'partition' : 'partitions'}</li>\n                                    </>\n                                }\n                            </ul>\n                        </div>}\n\n                        {mode == 'topic' && <div>\n                            <span>Group offsets will be deleted for topic:</span>\n                            <ul style={{ fontWeight: 600, margin: '6px 0' }}>\n                                <li>Topic: <span className='codeBox'>{offsetsByTopic[0].topicName}</span></li>\n                                <li>{offsets.length} {singlePartition ? 'Partition' : 'Partitions'}</li>\n                            </ul>\n                        </div>}\n\n                        {mode == 'partition' && <div>\n                            <span>Group offsets will be deleted for partition:</span>\n                            <ul style={{ fontWeight: 600, margin: '6px 0' }}>\n                                <li>Topic: <span className='codeBox'>{offsetsByTopic[0].topicName}</span></li>\n                                <li>Partition: <span className='codeBox'>{offsetsByTopic[0].items[0].partitionId}</span></li>\n                            </ul>\n                        </div>}\n                    </div>\n                </div>\n\n            </div>\n        </Modal >;\n    }\n\n\n    @action async onDeleteOffsets() {\n        const group = this.props.group;\n        const offsets = this.props.offsets!;\n\n        const msg = new Message('Deleting offsets', 'loading', '...');\n        const deleteRequest = createDeleteRequest(offsets);\n        try {\n            const deleteResponse = await api.deleteConsumerGroupOffsets(group.groupId, deleteRequest);\n            const errors = deleteResponse.map(t => ({\n                ...t,\n                partitions: t.partitions.filter(x => x.error),\n            })).filter(t => t.partitions.length > 0);\n            if (errors.length > 0) {\n                console.error('backend returned errors for deleteOffsets', { request: deleteRequest, errors: errors });\n                // eslint-disable-next-line no-throw-literal\n                throw { request: deleteRequest, errors: errors };\n            }\n\n            msg.setSuccess(undefined, ' - done');\n        }\n        catch (err) {\n            console.error(err);\n            msg.setError(undefined, ' - failed');\n            showErrorModal(\n                'Delete offsets',\n                <span>\n                    Could not delete selected offsets\n                    in consumer group <span className='codeBox'>{group.groupId}</span>.\n                </span>,\n                toJson(err, 4)\n            );\n        }\n        finally {\n            api.refreshConsumerGroups(true);\n\n            const remainingOffsets = group.topicOffsets.sum(t => t.partitionOffsets.length) - offsets.length;\n            if (remainingOffsets == 0) {\n                // Group is fully deleted, go back to list\n                appGlobal.history.replace('/groups');\n            }\n            else {\n                this.props.onClose();\n            }\n        }\n    }\n\n}\n\nfunction createEditRequest(offsets: GroupOffset[]): EditConsumerGroupOffsetsTopic[] {\n\n    const getOffset = function (x: GroupOffset['newOffset']): number | undefined {\n\n        // no offset set\n        if (x == null) return undefined;\n\n        // from other group\n        if (typeof x == 'number') return x;\n\n        // from timestamp\n        if ('offset' in x) return x.offset;\n\n        // otherwise 'x' might be 'Date', which means timestamps are resolved yet\n        return undefined;\n    };\n\n    const topicOffsets = offsets.groupInto(x => x.topicName).map(t => ({\n        topicName: t.key,\n        partitions: t.items.map(p => ({\n            partitionId: p.partitionId,\n            offset: getOffset(p.newOffset),\n        }))\n    }));\n\n    // filter undefined partitions\n    for (const t of topicOffsets)\n        t.partitions.removeAll(p => p.offset == null);\n\n    // assert type:\n    // we know that there can't be any undefined offsets anymore\n    const cleanOffsets = topicOffsets as {\n        topicName: string;\n        partitions: {\n            partitionId: number;\n            offset: number;\n        }[];\n    }[];\n\n    // filter topics with zero partitions\n    cleanOffsets.removeAll(t => t.partitions.length == 0);\n\n    return cleanOffsets;\n}\n\n\nfunction createDeleteRequest(offsets: GroupOffset[]): DeleteConsumerGroupOffsetsTopic[] {\n\n    const topicOffsets = offsets.groupInto(x => x.topicName).map(t => ({\n        topicName: t.key,\n        partitions: t.items.map(p => ({\n            partitionId: p.partitionId,\n        }))\n    }));\n\n    // filter topics with zero partitions\n    topicOffsets.removeAll(t => t.partitions.length == 0);\n\n    return topicOffsets;\n}","\nimport { History } from 'history';\nimport { api } from './backendApi';\nimport { uiState } from './uiState';\n\nclass AppGlobal {\n    private _history = (null as unknown as History<any>);\n    get history() { return this._history }\n\n    set history(h: History<any>) {\n        if (this._history === h || !h) return;\n        if (this._history) throw new Error('_history should not be overwritten');\n\n        this._history = h;\n\n        h.listen((location, action) => {\n            api.errors = [];\n            uiState.pathName = location.pathname;\n        });\n        uiState.pathName = h.location.pathname;\n    }\n\n    onRefresh: (() => void) = () => {\n        // intended for pages to set\n    }\n}\nexport const appGlobal = new AppGlobal();","\nexport { }\n\ndeclare global {\n    interface String {\n        removePrefix(this: string, prefix: string): string;\n        removeSuffix(this: string, suffix: string): string;\n    }\n}\n\n\nString.prototype.removePrefix = function (this: string, prefix: string) {\n    if (prefix.length == 0) return this;\n\n    if (this.toLowerCase().startsWith(prefix.toLowerCase()))\n        return this.substr(prefix.length);\n    return this;\n}\n\nString.prototype.removeSuffix = function (this: string, suffix: string) {\n    if (suffix.length == 0) return this;\n\n    if (this.toLowerCase().endsWith(suffix.toLowerCase()))\n        return this.substr(0, this.length - suffix.length);\n    return this;\n}\n\n","import { toJson } from \"./jsonUtils\";\nimport './extensions';\n\n// const assertions and mapped types are awesome!\n// type\n// { [key: string]: string }\n\nconst envNames = [\n    'NODE_ENV',\n\n    'REACT_APP_KOWL_GIT_SHA',\n    'REACT_APP_KOWL_GIT_REF', // 'master' or 'v1.2.3'\n    'REACT_APP_KOWL_TIMESTAMP',\n\n    'REACT_APP_KOWL_BUSINESS_GIT_SHA',\n    'REACT_APP_KOWL_BUSINESS_GIT_REF',\n\n    'REACT_APP_BUILT_FROM_PUSH', // was built by 'image-on-push'?\n    'REACT_APP_BUSINESS', // is business version?\n\n    'REACT_APP_DEV_HINT', // for debugging, since we can't override NODE_ENV\n] as const;\n\ntype Environment = { [key in typeof envNames[number]]: string };\n\nconst env = {} as Environment;\nfor (const k of envNames)\n    env[k] = process.env[k] || '';\n\nexport default env;\n\n\n//\n// Helpers\nconst isDev = (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') || process.env.REACT_APP_DEV_HINT;\nexport const IsProd = !isDev; // todo: rename IsProd IsDev\nexport const IsDev = isDev;\n\nexport const IsBusiness = Boolean(env.REACT_APP_BUSINESS);\nexport const AppName = IsBusiness ? 'Kowl Business' : 'Kowl';\n\nconst basePathRaw: string = (window as any)[\"BASE_URL\"];\nconst basePath = (typeof basePathRaw === 'string' && !basePathRaw.startsWith('__BASE_PATH'))\n    ? basePathRaw\n    : '';\nexport const basePathNo = basePath ? basePath.removePrefix('/').removeSuffix('/') : '';\nexport const basePathS = basePathNo ? '/' + basePathNo : '';\nexport const basePathE = basePathNo ? basePathNo + '/' : '';\n\n\nexport function getBuildDate(): Date | undefined {\n    const timestamp = +env.REACT_APP_KOWL_TIMESTAMP;\n    if (timestamp == 0) return undefined;\n    return new Date(timestamp * 1000);\n}\n\n\n//\n// Print all env vars to console\nconst envVarDebugObj = {} as any;\nconst envVarDebugAr: { name: string, value: string }[] = [];\n\nconst addProp = (key: string, value: any) => {\n    if (value === undefined || value === null || value === \"\") return;\n    key = key.removePrefix(\"REACT_APP_KOWL_\").removePrefix(\"REACT_APP_\");\n    envVarDebugObj[key] = value;\n    envVarDebugAr.push({ name: key, value: value });\n}\n// - add env vars\nfor (const k in env) addProp(k, (env as any)[k]);\n\n// - add custom\naddProp(\"appName\", AppName);\n\n// - print\nconsole.log(toJson(envVarDebugObj));\n\nexport { envVarDebugObj, envVarDebugAr };","export interface ApiError {\n    statusCode: number;\n    message: string;\n}\n\nexport function isApiError(obj: any): obj is ApiError {\n    if (!obj || typeof obj != 'object')\n        return false;\n\n    if (typeof obj.statusCode == 'number' && typeof obj.message == 'string')\n        return true;\n\n    return false;\n}\n\nexport class WrappedError extends Error {\n    statusCode: number;\n    path: string;\n\n    constructor(response: Response, apiError: ApiError) {\n        super(apiError.message);\n\n        this.statusCode = apiError.statusCode;\n\n        // try showing only the path of the url\n        try {\n            const u = new URL(response.url);\n            this.path = u.pathname + u.search;\n        } catch {\n            this.path = response.url;\n        }\n    }\n}\n\n\nexport const TopicActions = ['seeTopic', 'viewPartitions', 'viewMessages', 'useSearchFilter', 'viewConsumers', 'viewConfig', 'deleteTopic', 'deleteTopicRecords'] as const;\nexport type TopicAction = 'all' | typeof TopicActions[number];\n\nexport interface Topic {\n    topicName: string;\n    isInternal: boolean;\n    partitionCount: number;\n    replicationFactor: number;\n    cleanupPolicy: string;\n    documentation: \"UNKNOWN\" | \"NOT_CONFIGURED\" | \"NOT_EXISTENT\" | \"AVAILABLE\";\n    logDirSummary: TopicLogDirSummary;\n    allowedActions: TopicAction[] | undefined;\n}\n\nexport interface TopicLogDirSummary {\n    totalSizeBytes: number; // how much space this topic takes up (files in its log dir)\n    replicaErrors: {\n        brokerId: number;\n        error: string | null;\n    }[] | null;\n    hint: string | null;\n}\n\nexport interface GetTopicsResponse {\n    topics: Topic[];\n}\n\n\n\nexport interface Partition {\n    id: number;\n\n    // When set, all props from replicas to partitionLogDirs are null\n    partitionError: string | null;\n    replicas: number[]; // brokerIds of all brokers that host the leader or a replica of this partition\n    offlineReplicas: number[] | null;\n    inSyncReplicas: number[]; // brokerId (can only be one?) of the leading broker\n    leader: number; // id of the \"leader\" broker for this partition\n    partitionLogDirs: {\n        error: string, // empty when no error\n        brokerId: number,\n        partitionId: number, // redundant?\n        size: number, // size (in bytes) of log dir on that broker\n    }[];\n\n    // When set, waterMarkLow/High are not set\n    waterMarksError: string | null;\n    waterMarkLow: number;\n    waterMarkHigh: number;\n\n    // added by frontend:\n    replicaSize: number; // largest known/reported size of any replica; used for estimating how much traffic a reassignment would cause\n    topicName: string; // used for finding the actual topic this partition belongs to (in case we pass around a partition reference on its own)\n    hasErrors: boolean; // just (partitionError || waterMarksError)\n}\n\nexport interface GetPartitionsResponse {\n    topicName: string;\n    error: string | null; // only set if metadata request has failed for the whole topic\n    partitions: Partition[];\n}\n\nexport interface GetAllPartitionsResponse {\n    topics: {\n        topicName: string;\n        error: string | null;\n        partitions: Partition[];\n    }[];\n}\n\nexport interface DeleteRecordsResponseData {\n    topicName: string;\n    partitions: [\n        {\n            partitionId: number;\n            lowWaterMark: number;\n            error: string;\n        }\n    ];\n}\n\n\n\nexport interface TopicConsumer {\n    groupId: string\n    summedLag: number\n}\n\nexport interface GetTopicConsumersResponse {\n    topicName: string;\n    topicConsumers: TopicConsumer[];\n}\n\n\nexport type MessageDataType = 'none' | 'avro' | 'protobuf' | 'json' | 'xml' | 'text' | 'consumerOffsets' | 'binary' | 'msgpack';\nexport type CompressionType = 'uncompressed' | 'gzip' | 'snappy' | 'lz4' | 'zstd' | 'unknown';\nexport interface Payload {\n    payload: any, // json obj\n    encoding: MessageDataType, // actual format of the message (before the backend converted it to json)\n    schemaId: number,\n    size: number,\n}\n\nexport interface TopicMessage {\n    partitionID: number,\n    offset: number,\n    timestamp: number,\n\n    compression: CompressionType,\n    isTransactional: boolean,\n\n    headers: {\n        key: string,\n        value: Payload,\n    }[]\n    key: Payload,\n    value: Payload,\n\n    isValueNull: boolean, // todo: rename to isTombstone\n\n    // Added by the frontend\n    valueJson: string,\n    valueBinHexPreview: string,\n    keyJson: string,\n}\n\nexport interface ListMessageResponse {\n    elapsedMs: number,\n    fetchedMessages: number,\n    isCancelled: boolean,\n    messages: TopicMessage[],\n}\n\nexport interface GetTopicMessagesResponse {\n    kafkaMessages: ListMessageResponse,\n}\n\n\n\nexport interface KafkaError {\n    code: number,\n    message: string,\n    description: string\n}\n\nexport interface ConfigEntry {\n    name: string,\n    value: string | null,\n    source: string,\n    type: string,\n    isExplicitlySet: boolean,\n    isDefaultValue: boolean,\n    isReadOnly: boolean,\n    isSensitive: boolean,\n    // documentation: string, // remvoed for now, we have documentation locally in the frontend\n    synonyms: ConfigEntrySynonym[] | undefined;\n}\n\ninterface ConfigEntrySynonym {\n    name: string,\n    value: string | null,\n    source: string,\n\n    // added by frontend\n    type: string | null,\n}\n\nexport interface TopicDescription {\n    topicName: string\n    configEntries: ConfigEntry[]\n    error: KafkaError | null\n}\nexport interface TopicConfigResponse {\n    topicDescription: TopicDescription\n}\nexport interface PartialTopicConfigsResponse {\n    topicDescriptions: TopicDescription[];\n}\nexport interface TopicDocumentation {\n    // if false: topic documentation is not configured\n    isEnabled: boolean;\n    // empty: actually empty\n    // null:  no .md docu file found for this topic\n    markdown: string | null; // base64\n\n    // added by frontend:\n    text: string | null; // atob(markdown)\n}\nexport interface TopicDocumentationResponse {\n    topicName: string;\n    documentation: TopicDocumentation;\n}\n\n\n\n\nexport interface GroupMemberAssignment {\n    topicName: string;\n    partitionIds: number[];\n\n}\nexport interface GroupMemberDescription {\n    id: string; // unique ID assigned to the member after login\n    clientId: string; // custom id reported by the member\n    clientHost: string; // address/host of the connection\n    assignments: GroupMemberAssignment[]; // topics+partitions that the worker is assigned to\n\n}\n\n\nexport const GroupActions = ['seeConsumerGroup', 'editConsumerGroup', 'deleteConsumerGroup'] as const;\nexport type GroupAction = 'all' | typeof GroupActions[number];\n\nexport interface GroupDescription {\n    groupId: string; // name of the group\n    state: string; // Dead, Initializing, Rebalancing, Stable\n    protocol: string;\n    protocolType: string; // Will be \"consumer\" if we can decode the members; otherwise \".members\" will be empty, which happens for \"sr\" (for schema registry) for example\n    members: GroupMemberDescription[]; // members (consumers) that are currently present in the group\n    coordinatorId: number;\n    topicOffsets: GroupTopicOffsets[];\n    allowedActions: GroupAction[] | null;\n\n    // Added by frontend\n    lagSum: number; // sum of lag for all topic offsets\n\n    // reasons for why the group can't be editted\n    noEditSupport: boolean;\n    noDeleteSupport: boolean;\n    isInUse: boolean;\n    noEditPerms: boolean;\n    noDeletePerms: boolean;\n}\n\nexport interface GroupTopicOffsets {\n    topic: string;\n    summedLag: number; // summed lag of all partitions (non consumed partitions are not considered)\n    partitionCount: number;\n    partitionsWithOffset: number; // number of partitions that have an active group offset\n    partitionOffsets: GroupPartitionOffset[];\n}\n\n// PartitionOffset describes the kafka lag for a partition for a single consumer group\nexport interface GroupPartitionOffset {\n    partitionId: number;\n    groupOffset: number;\n\n    error: string | undefined; // Error will be set when the high water mark could not be fetched\n    highWaterMark: number;\n    lag: number;\n}\n\n\nexport interface EditConsumerGroupOffsetsRequest {\n    groupId: string;\n    topics: EditConsumerGroupOffsetsTopic[];\n}\n\nexport interface EditConsumerGroupOffsetsTopic {\n    topicName: string;\n    partitions: {\n        partitionId: number;\n        offset: number; // -1 latest, -2 earliest\n    }[];\n}\n\nexport interface EditConsumerGroupOffsetsResponse {\n    error: string | undefined;\n    topics: EditConsumerGroupOffsetsResponseTopic[]\n}\n\nexport interface EditConsumerGroupOffsetsResponseTopic {\n    topicName: string,\n    partitions: {\n        partitionID: number,\n        error: string,\n    }[],\n}\n\n\n\n\nexport interface DeleteConsumerGroupOffsetsRequest {\n    groupId: string;\n    topics: DeleteConsumerGroupOffsetsTopic[];\n}\nexport interface DeleteConsumerGroupOffsetsTopic {\n    topicName: string;\n    partitions: {\n        partitionId: number;\n    }[];\n}\n\nexport interface DeleteConsumerGroupOffsetsResponse {\n    topics: DeleteConsumerGroupOffsetsResponseTopic[]\n}\n\nexport interface DeleteConsumerGroupOffsetsResponseTopic {\n    topicName: string,\n    partitions: {\n        partitionID: number,\n        error: string | undefined,\n    }[],\n}\n\n\nexport interface GetTopicOffsetsByTimestampRequest {\n    topics: GetTopicOffsetsByTimestampRequestTopic[];\n    timestamp: number; // unix ms\n}\nexport interface GetTopicOffsetsByTimestampRequestTopic {\n    topicName: string;\n    partitionIds: number[];\n}\n\nexport interface GetTopicOffsetsByTimestampResponse {\n    topicOffsets: TopicOffset[];\n}\nexport interface TopicOffset {\n    topicName: string;\n    partitions: PartitionOffset[];\n}\n\nexport interface PartitionOffset {\n    error: string | undefined;\n    partitionId: number;\n\n    // will return the first message after the given timestamp\n    // if there is no message at or after this timestamp, the offset will be -1\n    offset: number;\n\n    // unix ms\n    // if offset is not -1, this will tell us the timestamp of that message\n    timestamp: number;\n}\n\n\n\n\nexport interface TopicLag {\n    topic: string; // name\n    summedLag: number;\n\n    partitionCount: number; // number of partitions the topic has\n    partitionsWithOffset: number; // number of partitions that have an active offset in this group\n\n    // only lists partitions that have a commited offset (independent of whether or not a member is currently assigned to it)\n    partitionLags: PartitionLag[]\n}\n\nexport interface PartitionLag {\n    partitionId: number;\n    offset: number;\n    lag: number;\n}\n\nexport interface GetConsumerGroupsResponse {\n    consumerGroups: GroupDescription[];\n}\nexport interface GetConsumerGroupResponse {\n    consumerGroup: GroupDescription;\n}\n\n\n\nexport interface ClusterInfoResponse {\n    clusterInfo: ClusterInfo;\n}\nexport interface ClusterInfo {\n    controllerId: number;\n    brokers: Broker[];\n    kafkaVersion: string;\n}\nexport interface Broker {\n    brokerId: number;\n    logDirSize: number; // bytes of the whole directory\n    address: string;\n    rack: string | null;\n\n    config: BrokerConfig;\n}\nexport interface BrokerConfig {\n    configs: ConfigEntry[];\n    error: string | undefined;\n}\n\n\n\nexport interface EndpointCompatibilityResponse {\n    endpointCompatibility: EndpointCompatibility;\n}\n\nexport interface EndpointCompatibility {\n    kafkaVersion: string;\n    endpoints: EndpointCompatibilityEntry[];\n}\n\nexport interface EndpointCompatibilityEntry {\n    endpoint: string;\n    method: string;\n    isSupported: boolean;\n}\n\n// Response when requesting configuration of a single broker\nexport interface BrokerConfigResponse { // | ApiError\n    brokerConfigs: ConfigEntry[];\n}\n\n\n// Current user\nexport interface User {\n    id: string,\n    internalIdentifier: string,\n    providerID: number,\n    providerName: string,\n    meta: {\n        email: string,\n        name: string,\n        avatarUrl: string,\n    },\n}\nexport interface Seat {\n    id: string, // id of seat\n    licenseId: string, // shouldn't that be censored??\n    user: User, // user representation of firestore? should be removed...\n    lastActivity: string, // is a datetime string, should probably be a \"UnixMillis\"\n}\nexport interface UserData {\n    user: User;\n    seat: Seat;\n    canManageKowl: boolean;\n    canListAcls: boolean;\n    canListQuotas: boolean;\n    canReassignPartitions: boolean;\n    canPatchConfigs: boolean;\n}\nexport type UserPermissions = Exclude<keyof UserData, 'user' | 'seat'>;\n\n\n\nexport interface AdminInfo {\n    roles: Role[];\n    roleBindings: RoleBinding[];\n    users: UserDetails[];\n}\n\nexport interface UserDetails {\n    internalIdentifier: string;\n    oauthUserId: string;\n    loginProviderId: number;\n    loginProvider: string;\n    bindingIds: string[]; // rolebindings\n    audits: {\n        [roleName: string]: string[]; // roleName to (RoleBinding.ephemeralID)[]\n    };\n\n    // Added by frontend:\n    bindings: RoleBinding[];\n    grantedRoles: {\n        role: Role;\n        grantedBy: RoleBinding[];\n    }[];\n}\n\nexport interface PermissionAudit {\n    roleName: string; // Role.name\n    grantedBy: string; // RoleBinding.ephemeralId\n}\n\nexport interface RoleBinding {\n    ephemeralId: string;\n    metadata: { [key: string]: string; };\n    subjects: Subject[];\n    roleName: string;\n\n    // Added by frontend:\n    resolvedRole: Role;\n}\n\nexport interface Role {\n    name: string;\n    permissions: Permission[];\n}\n\nexport interface Permission {\n    resourceName: string;\n    resourceId: number;\n\n    // Those 3 may be missing or contain a single empty string.\n    // The frontend fixes / normalizes those cases to '[]'.\n    allowedActions: string[];\n    includes: string[];\n    excludes: string[];\n}\n\nexport interface Subject {\n    name: string;\n\n    organization: string;\n\n    subjectKind: number;\n    subjectKindName: string;\n\n    provider: number;\n    providerName: string;\n}\n\n\nexport interface TopicPermissions {\n    canSeeTopic: boolean;\n    canViewTopicPartitions: boolean;\n    canSeeTopicConfig: boolean;\n    canUseSearchFilters: boolean;\n    canViewTopicMessages: boolean;\n    canViewTopicConsumers: boolean;\n}\n\n\n//\n// ACLs\n\n// https://github.com/twmb/franz-go/blob/master/generate/definitions/enums#L47\nexport enum AclResourceType {\n    AclResourceUnknown,\n    AclResourceAny,\n    AclResourceTopic,\n    AclResourceGroup,\n    AclResourceCluster,\n    AclResourceTransactionalID,\n    AclDelegationToken,\n}\n\n// https://github.com/twmb/franz-go/blob/master/generate/definitions/enums#L59\nexport enum AclResourcePatternTypeFilter {\n    AclPatternUnknown,\n    AclPatternAny,\n    AclPatternMatch,\n    AclPatternLiteral,\n    AclPatternPrefixed\n}\n\n// https://github.com/twmb/franz-go/blob/master/generate/definitions/enums#L81\nexport enum AclOperation {\n    AclOperationUnknown,\n    AclOperationAny,\n    AclOperationAll,\n    AclOperationRead,\n    AclOperationWrite,\n    AclOperationCreate,\n    AclOperationDelete,\n    AclOperationAlter,\n    AclOperationDescribe,\n    AclOperationClusterAction,\n    AclOperationDescribeConfigs,\n    AclOperationAlterConfigs,\n    AclOperationIdempotentWrite\n}\n\n// https://github.com/twmb/franz-go/blob/master/generate/definitions/enums#L71\nexport enum AclPermissionType {\n    AclPermissionUnknown,\n    AclPermissionAny,\n    AclPermissionDeny,\n    AclPermissionAllow\n}\n\n// list all:\n//   /api/acls?resourceType=1&resourcePatternTypeFilter=1&operation=1&permissionType=1\nexport interface AclRequest {\n    resourceType: AclResourceType;\n    resourceName?: string;\n    resourcePatternTypeFilter: AclResourcePatternTypeFilter;\n    principal?: string;\n    host?: string;\n    operation: AclOperation;\n    permissionType: AclPermissionType;\n}\n\nexport const AclRequestDefault = {\n    resourceType: AclResourceType.AclResourceAny,\n    resourceName: \"\",\n    resourcePatternTypeFilter: AclResourcePatternTypeFilter.AclPatternAny,\n    principal: \"\",\n    host: \"\",\n    operation: AclOperation.AclOperationAny,\n    permissionType: AclPermissionType.AclPermissionAny,\n} as const;\n\nexport interface AclResponse {\n    aclResources: AclResource[];\n    isAuthorizerEnabled: boolean;\n}\n\nexport enum ResourcePatternType {\n    'UNKNOWN', 'MATCH', 'LITERAL', 'PREFIXED'\n}\nexport interface AclResource {\n    resourceType: string;\n    resourceName: string;\n    resourcePatternType: ResourcePatternType;\n    acls: AclRule[];\n}\n\nexport interface AclRule {\n    principal: string;\n    host: string;\n    operation: string;\n    permissionType: string;\n}\n\nexport interface QuotaResponse {\n    error?: string;\n    items: QuotaResponseItem[];\n}\n\nexport interface QuotaResponseItem {\n    entityType: 'client-id' | 'user' | 'ip';\n    entityName?: string;\n    settings: QuotaResponseSetting[];\n}\n\nexport enum QuotaType {\n    // A rate representing the upper bound (bytes/sec) for producer traffic\n    PRODUCER_BYTE_RATE = 'producer_byte_rate',\n    // A rate representing the upper bound (bytes/sec) for consumer traffic.\n    CONSUMER_BYTE_RATE = 'consumer_byte_rate',\n    // A percentage representing the upper bound of time spent for processing requests.\n    REQUEST_PERCENTAGE = 'request_percentage',\n    // The rate at which mutations are accepted for the create \"topics request,\n    // the create partitions request and the delete topics request. The rate is accumulated by\n    // the number of partitions created or deleted.\n    CONTROLLER_MUTATION_RATE = 'controller_mutation_rate',\n    // An int representing the upper bound of connections accepted for the specified IP.\n    CONNECTION_CREATION_RATE = 'connection_creation_rate'\n}\n\nexport interface QuotaResponseSetting {\n    key: QuotaType;\n    value: number;\n}\n\nexport interface SchemaOverviewResponse {\n    schemaOverview: SchemaOverview;\n    isConfigured: boolean;\n}\n\nexport interface SchemaOverview {\n    mode: string;\n    compatibilityLevel: string;\n    subjects: string[];\n    requestErrors: SchemaOverviewRequestError[];\n}\n\nexport interface SchemaOverviewRequestError {\n    requestDescription: string;\n    errorMessage: string;\n}\n\nexport interface SchemaDetailsResponse {\n    schemaDetails: SchemaDetails\n}\n\nexport enum SchemaType {\n    AVRO = \"AVRO\",\n    JSON = \"JSON\",\n    PROTOBUF = \"PROTOBUF\",\n}\n\nexport interface SchemaDetails {\n    string: string;\n    schemaId: number;\n    version: number;\n    compatibility: string;\n    type: SchemaType;\n    schema: Schema | JsonSchema;\n    registeredVersions: number[];\n\n    // added by frontend:\n    // 'schema' is (in some cases, like JSON schema) converted from string to object\n    // however, we want to keep the original\n    rawSchema: string;\n}\n\nexport interface Schema {\n    doc: string;\n    name: string;\n    namespace: string;\n    type: string;\n    fields: SchemaField[];\n}\n\nexport enum JsonFieldType {\n    STRING = \"string\",\n    NUMBER = \"number\",\n    INTEGER = \"integer\",\n    OBJECT = \"object\",\n    ARRAY = \"array\",\n    BOOLEAN = \"boolean\",\n    NULL = \"null\"\n}\n\nexport interface JsonSchema {\n    $id: string;\n    type: JsonFieldType;\n    title: string;\n    description: string;\n    properties?: Record<string, JsonField>;\n}\n\nexport interface JsonField {\n    type: string;\n    items?: JsonField;\n    properties?: Record<string, JsonField>;\n}\n\nexport interface SchemaField {\n    name: string;\n    type: string | Record<string, unknown> | null | undefined;\n    doc?: string | null | undefined;\n    default?: string | Record<string, unknown> | null | undefined;\n}\n\n\n// Partition Reassignments - Get\nexport interface PartitionReassignmentsResponse {\n    topics: PartitionReassignments[];\n}\nexport interface PartitionReassignments {\n    topicName: string;\n    partitions: PartitionReassignmentsPartition[];\n}\nexport interface PartitionReassignmentsPartition {\n    partitionId: number;\n    addingReplicas: number[];\n    removingReplicas: number[];\n    replicas: number[];\n}\n\n// PartitionReassignments - Patch\nexport interface PartitionReassignmentRequest {\n    topics: TopicAssignment[];\n}\nexport type TopicAssignment = {\n    topicName: string; // name of topic to change\n    partitions: { // partitions to reassign\n        partitionId: number;\n        replicas: number[] | null;\n        // Entries are brokerIds.\n        // Since the replicationFactor of a partition tells us the total number\n        // of 'instances' of a partition (leader + follower replicas) the length of the array is always 'replicationFactor'.\n        // The first entry in the array is the brokerId that will host the leader replica\n        // Since Kafka rebalances the leader partitions across the brokers periodically, it is not super important which broker is the leader.\n        //\n        // Can also be null to cancel a pending reassignment.\n    }[];\n};\n\nexport interface AlterPartitionReassignmentsResponse {\n    reassignPartitionsResponses: {\n        topicName: string;\n        partitions: AlterPartitionReassignmentsPartitionResponse[];\n    }[];\n}\nexport interface AlterPartitionReassignmentsPartitionResponse {\n    partitionId: number;\n    errorCode: string;\n    errorMessage: string | null;\n}\n\n\n// Change broker config\n// PATCH api/operations/configs\nexport enum ConfigResourceType {\n    Unknown = 0,\n    Topic = 2,\n    Broker = 4,\n    BrokerLogger = 8,\n}\n\n// export enum ConfigSource {\n//     Unknown = 0,\n//     DynamicTopicConfig = 1,\n//     DynamicBrokerConfig = 2,\n//     DynamicDefaultBrokerConfig = 3,\n//     StaticBrokerConfig = 4,\n//     DefaultConfig = 5,\n//     DynamicBrokerLoggerConfig = 6,\n// }\n\nexport enum AlterConfigOperation {\n    Set = 0, // set a config key\n    Delete = 1, // remove/unset a config key\n    Append = 2, // add a value to a list\n    Subtract = 3, // remove a value from a list\n}\n\nexport interface IncrementalAlterConfigsRequestResourceConfig {\n    // name of key to modify (e.g segment.bytes)\n    name: string;\n\n    // set(0) value must not be null\n    // delete(1) delete a config key\n    // append(2) append value to list of values, the config entry must be a list\n    // subtract(3) remove an entry from a list of values\n    op: AlterConfigOperation;\n\n    // value to set the key to\n    value?: string;\n}\n\n// Example\n// To throttle replication rate for reassignments (bytes per second):\n// - On the leader\n//      --add-config 'leader.replication.throttled.rate=10000'\n//      --entity-type broker\n//      --entity-name brokerId\n//\n// - On the follower\n//      --add-config 'follower.replication.throttled.rate=10000'\n//      --entity-type broker\n//      --entity-name brokerId\n\nexport interface ResourceConfig {\n    // ResourceType is an enum that represents TOPIC, BROKER or BROKER_LOGGER\n    resourceType: ConfigResourceType;\n\n    // ResourceName is the name of config to alter.\n    //\n    // If the requested type is a topic, this corresponds to a topic name.\n    //\n    // If the requested type if a broker, this should either be empty or be\n    // the ID of the broker this request is issued to. If it is empty, this\n    // updates all broker configs. If a specific ID, this updates just the\n    // broker. Using a specific ID also ensures that brokers reload config\n    // or secret files even if the file path has not changed. Lastly, password\n    // config options can only be defined on a per broker basis.\n    //\n    // If the type is broker logger, this must be a broker ID.\n    resourceName: string\n\n    // key/value config pairs to set on the resource.\n    configs: IncrementalAlterConfigsRequestResourceConfig[];\n}\nexport interface PatchConfigsRequest {\n    resources: ResourceConfig[];\n}\n\nexport interface PatchConfigsResponse {\n    patchedConfigs: {\n        error?: string;\n        resourceName: string;\n        resourceType: ConfigResourceType;\n    }[];\n}\n\n\n// GET \"/kafka-connect/clusters\"\nexport interface ConnectClusters { // response\n    clusterShards: ConnectClusterShard[];\n    filtered: {\n        clusterCount: number;\n        connectorCount: number;\n    };\n}\nexport interface ConnectClusterShard { // GetClusterShard\n    clusterName: string;\n    clusterAddress: string;\n    clusterInfo: { // RootResource\n        version: string;\n        commit: string;\n        kafka_cluster_id: string;\n    };\n\n    runningConnectors: number;\n    totalConnectors: number;\n    runningTasks: number;\n    totalTasks: number;\n\n    error?: string;\n}\n\n\n// GET \"/kafka-connect/connectors\"\nexport interface KafkaConnectors { // response\n    clusters: ClusterConnectors[] | null; // only null when isConfigured=false\n    isConfigured: boolean;\n}\n\nexport const ConnectClusterActions = ['canViewConnectCluster', 'canEditConnectCluster', 'canDeleteConnectCluster'] as const;\nexport type ConnectClusterAction = 'all' | typeof ConnectClusterActions[number];\n\nexport interface ClusterConnectors { // ClusterConnectors\n    clusterName: string;\n    clusterAddress: string;\n    clusterInfo: {\n        version: string;\n        commit: string;\n        kafka_cluster_id: string;\n    };\n\n    totalConnectors: number;\n    runningConnectors: number;\n    connectors: ClusterConnectorInfo[];\n    allowedActions: ConnectClusterAction[] | undefined;\n\n    error?: string;\n\n    // Added by frontend\n    canViewCluster: boolean;\n    canEditCluster: boolean;\n    canDeleteCluster: boolean;\n}\n\n// https://docs.confluent.io/home/connect/monitoring.html#connector-and-task-status\nexport enum ConnectorState {\n    Unassigned = 'UNASSIGNED',\n    Running = 'RUNNING',\n    Paused = 'PAUSED',\n    Failed = 'FAILED',\n}\nexport type TaskState = ConnectorState;\n\nexport interface ClusterConnectorInfo {\n    name: string;\n    class: string; // java class name\n    config: object; // map[string]string\n    type: string;  // Source or Sink\n    topic: string; // Kafka Topic name\n    state: ConnectorState;\n\n    totalTasks: number;\n    runningTasks: number;\n    tasks: ClusterConnectorTaskInfo[];\n\n    // added by frontend\n    jsonConfig: string;\n}\n\nexport interface ClusterConnectorTaskInfo {\n    taskId: number;\n    state: TaskState;\n    workerId: string;\n    trace?: string; // error message\n}\n\n\n\n\n// GET \"/kafka-connect/clusters/{clusterName}\"\nexport interface ClusterAdditionalInfo {\n    clusterName: string;\n    host: string;\n    clusterVersion: string;\n    plugins: {\n        class: string;\n        type?: string;\n        version?: string;\n    }[];\n}\n\n/*\n// GET \"/kafka-connect/clusters/{clusterName}/connectors\"\nexport interface GetConnectorsShard { // GetConnectorsShard\n    clusterName: string;\n    clusterAddress: string; // useless?\n    connectors: {\n        [connectorName: string]: ListConnectorsExpanded;\n    };\n    error?: string;\n}\nexport interface ListConnectorsExpanded { // ListConnectorsResponseExpanded\n    info: null | {\n        name: string;\n        config: { [key: string]: string };\n        tasks: {\n            connector: string;\n            task: number;\n        }[];\n        type: string;\n    };\n    status: null | {\n        name: string;\n        Connector: {\n            state: string;\n            worker_id: string;\n        };\n        tasks: {\n            id: number;\n            state: string;\n            worker_id: string;\n        }[];\n        type: string;\n    };\n}\n\n\n// GET \"/kafka-connect/clusters/{clusterName}/connectors/{connector}\"\nexport interface KafkaConnectorInfoWithStatus { // ConnectorInfoWithStatus\n    // embedded ConnectorStateInfo\n    name: string;\n    connector: { // ConnectorState\n        state: string;\n        worker_id: string;\n    };\n    tasks: { // TaskState\n        id: number;\n        state: string;\n        worker_id: string;\n    }[];\n    type: string;\n\n    // Additional Props\n    config: {\n        [key: string]: string;\n    };\n}\n*/\n\n// DELETE \"/kafka-connect/clusters/{clusterName}/connectors/{connector}\"\n// PUT  \"/kafka-connect/clusters/{clusterName}/connectors/{connector}/pause\"  (idempotent)\n// PUT  \"/kafka-connect/clusters/{clusterName}/connectors/{connector}/resume\" (idempotent)\n// POST \"/kafka-connect/clusters/{clusterName}/connectors/{connector}/restart\"\n// all 4 return either nothing (code 200), or an ApiError\n\n\nexport interface ConnectorValidationResult {\n    name: string;\n    error_count: number;\n    groups: string[];\n    configs: ConnectorProperty[];\n}\n\nexport interface ConnectorProperty {\n    definition: {\n        name: string;\n        type: DataType;\n        required: boolean;\n        default_value: null | string;\n        importance: PropertyImportance;\n        documentation: string;\n        group: null | string;\n        width: PropertyWidth;\n        display_name: string;\n        dependents: string[];\n        order: number;\n    };\n    value: {\n        name: string;\n        value: null | string;\n        recommended_values: string[];\n        errors: string[];\n        visible: boolean;\n    };\n}\n\nexport enum PropertyImportance {\n    Low = \"LOW\",\n    Medium = \"MEDIUM\",\n    High = \"HIGH\",\n}\n\nexport enum DataType {\n    Boolean = \"BOOLEAN\",\n    Class = \"CLASS\",\n    Int = \"INT\",\n    List = \"LIST\",\n    Long = \"LONG\",\n    Password = \"PASSWORD\",\n    Short = \"SHORT\",\n    String = \"STRING\",\n}\n\nexport enum PropertyWidth {\n    None = \"NONE\",\n    Short = \"SHORT\",\n    Medium = \"MEDIUM\",\n    Long = \"LONG\",\n}\n","import React, { FC, CSSProperties } from \"react\";\nimport { Transition, motion } from \"framer-motion\";\nimport { alwaysChanging } from \"./utils\";\n\nexport type PositionProp = \"static\" | \"absolute\" | \"initial\" | \"inherit\" | \"-moz-initial\" | \"revert\" | \"unset\" | \"-webkit-sticky\" | \"fixed\" | \"relative\" | \"sticky\" | undefined;\n\nconst time = 0.25; // 0.15\nconst dist = 2;\nconst dx100em = [(dist * -1) + 'em', 0, dist + 'em'];\nconst dx50em = [(dist * 0.5 * -1) + 'em', 0, (dist * 0.5) + 'em'];\n// ease:\n// \"linear\" | \"easeIn\" | \"easeOut\" | \"easeInOut\" | \"circIn\" | \"circOut\" | \"circInOut\" | \"backIn\" | \"backOut\" | \"backInOut\" | \"anticipate\"\n\nconst transition: Transition = {\n    ease: 'circOut', //staggerChildren: 0,\n    duration: time,\n};\n\n\n// Page switch\nexport const animProps = {\n    transition: transition,\n    initial: { opacity: 0, x: dx100em[0], position: 'static' as PositionProp },\n    animate: { opacity: 1, x: dx100em[1], position: 'static' as PositionProp },\n    exit: { opacity: 0, x: dx100em[2], position: 'absolute' as PositionProp, width: 'auto' },\n};\n\nexport const animProps_span_searchResult = {\n    transition: { ease: 'circOut', duration: 0.2 },\n    initial: { opacity: 0, x: dx100em[0] },\n    animate: { opacity: 1, x: dx100em[1] },\n    exit: { opacity: 0, x: dx50em[2] },\n};\n\nexport const animProps_span_messagesStatus = {\n    initial: {\n        opacity: 0,\n        x: 0,\n        display: 'inline-block'\n    },\n    animate: {\n        opacity: 1,\n        x: dx100em[1],\n        transition: {\n            ease: 'easeOut',\n            duration: 0,\n            delay: 0\n        },\n    },\n    exit: {\n        opacity: 0,\n        x: dx100em[2],\n        transition: {\n            ease: 'easeOut',\n            duration: 0.35,\n            delay: 0.9\n        }\n    },\n};\n\nexport const animProps_radioOptionGroup = {\n    transition: transition,\n    initial: { opacity: 0, y: '-1em', height: 0, marginTop: 0 },\n    animate: { opacity: 1, y: '0em', height: 'auto' },\n    exit: { opacity: 0, y: '0em', height: 0, marginTop: 0 },\n};\n\nexport const animProps_modalPage = {\n    transition: { ease: 'easeOut', duration: 0.3 },\n    initial: { opacity: 0, x: '1em', height: 'auto' }, // , position: 'relative' as PositionProp\n    animate: { opacity: 1, x: '0em', height: 'auto' },\n    exit: { opacity: 0, x: '-1em', height: 'auto', },\n};\n\n\nexport const MotionAlways: FC = (p: { children?: React.ReactNode, style?: CSSProperties }) =>\n    <motion.div key={alwaysChanging()} {...animProps} style={p.style} >\n        {p.children}\n    </motion.div>;\n\nexport const MotionDiv: FC<{ identityKey?: any, positionTransition?: boolean, layoutTransition?: boolean, animProps?: any, style?: CSSProperties, className?: string }> = (p) =>\n    <motion.div className={p.className} key={p.identityKey} positionTransition={p.positionTransition} layoutTransition={p.layoutTransition} style={p.style} {...(p.animProps ?? animProps)} >\n        {p.children}\n    </motion.div>;\n\nexport const MotionSpan: FC<{ identityKey?: any, overrideAnimProps?: any, style?: CSSProperties }> = (p) =>\n    <motion.span key={p.identityKey} style={p.style} {...(p.overrideAnimProps ?? animProps)}>\n        {p.children}\n    </motion.span>;\n\n/*\n\n\n@observer\nclass AnimationExample extends Component<{}> {\n    @observable counter = 0;\n    @observable random = 0;\n\n    obj = [\n        '#f6d8aeff',\n        '#2e4057ff',\n        '#083d77ff',\n        '#da4167ff',\n        '#f4d35eff',\n\n        '#264653ff',\n        '#2a9d8fff',\n        '#e9c46aff',\n        '#f4a261ff',\n        '#e76f51ff',\n\n    ];\n\n    tick = () => transaction(() => {\n\n        this.counter++;\n        this.random = Math.random();\n        console.log('tick', this.counter);\n    });\n\n    constructor(p: any) {\n        super(p);\n        // setInterval(this.tick, 3000);\n    }\n\n    render() {\n        // const index = Math.round(this.random * (this.obj.length - 1));\n        const index = this.counter;\n        const entry = this.obj[index % this.obj.length];\n\n        const fw = (((this.random - 0.5) * 0.25) + 1);\n        const fh = (((this.random - 0.5) * 0.5) + 1);\n        let w = (400 * fw) + 'px';\n        let h = (250 * fh) + 'px';\n\n        // w = '400px';\n        // h = '250px';\n\n        return <div style={{ background: '#DDD' }}>\n            <button onClick={this.tick}>tick</button>\n\n            <div style={{ display: 'flex', gap: '1em', alignItems: 'center' }}>\n                <div>some text before </div>\n\n                <ReactCSSTransitionReplace transitionName=\"crossFade\"\n                    changeWidth={true}\n                    overflowHidden={false}\n                    transitionEnterTimeout={400}\n                    transitionLeaveTimeout={400}\n                >\n\n                    <div key={entry}>\n                        <div style={{\n                            width: w, height: h,\n                            display: 'flex', alignItems: 'center', flexDirection: 'column', justifyContent: 'center',\n                            borderRadius: '3px', border: '1px solid hsla(0deg, 0%, 0%, 0.08)',\n                            background: entry,\n\n                            color: 'white',\n                            textShadow: '0 0 5px black',\n                            fontFamily: 'Inter'\n                        }}>\n                            <span style={{ fontSize: '130%', fontWeight: 'bold' }}>{entry}</span>\n                            <br />\n                            <span>Index {index}</span>\n                        </div>\n                    </div>\n\n                </ReactCSSTransitionReplace>\n                <div>\n                    some text here\n            </div>\n            </div>\n        </div>\n\n\n    }\n}\n*/","const seen = new Set();\n// Serialize object to json, handling reference loops gracefully\nexport function toJson(obj: any, space?: string | number | undefined): string {\n    seen.clear();\n    try {\n        return JSON.stringify(obj,\n            (key: string, value: any) => {\n                if (typeof value === \"object\" && value !== null) {\n                    if (seen.has(value)) {\n                        return;\n                    }\n                    seen.add(value);\n                }\n\n                if (value instanceof Error) {\n                    return value.toString();\n                }\n\n                return value;\n            },\n            space\n        );\n    }\n    finally {\n        seen.clear();\n    }\n}\n// Clone object using serialization\n\nexport function clone<T>(obj: T): T {\n    if (!obj)\n        return obj;\n    return JSON.parse(toJson(obj));\n}\n// Accesses all members of an object by serializing it\n\n\nexport function touch(obj: any): void {\n    JSON.stringify(obj, (k, v) => {\n        if (typeof v === 'object')\n            return v;\n        return '';\n    });\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"kowlTable\":\"KowlTable_kowlTable__3H81q\"};","import React from 'react';\nimport { Button, Popover, Result, Tooltip, Typography } from 'antd';\nimport { motion } from 'framer-motion';\nimport { computed, makeObservable, observable } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { api } from '../../../state/backendApi';\nimport { ConfigEntry, Topic, TopicAction } from '../../../state/restInterfaces';\nimport { uiSettings } from '../../../state/ui';\nimport { uiState } from '../../../state/uiState';\nimport { animProps } from '../../../utils/animationProps';\nimport '../../../utils/arrayExtensions';\nimport { DefaultSkeleton } from '../../../utils/tsxUtils';\nimport Card from '../../misc/Card';\nimport { makePaginationConfig } from '../../misc/common';\nimport { HideStatisticsBarButton } from '../../misc/HideStatisticsBarButton';\nimport Tabs from '../../misc/tabs/Tabs';\nimport { PageComponent, PageInitHelper } from '../Page';\nimport { TopicQuickInfoStatistic } from './QuickInfo';\nimport AclList from './Tab.Acl/AclList';\nimport { TopicConfiguration } from './Tab.Config';\nimport { TopicConsumers } from './Tab.Consumers';\nimport { TopicDocumentation } from './Tab.Docu';\nimport { TopicMessageView } from './Tab.Messages';\nimport { TopicPartitions } from './Tab.Partitions';\nimport DeleteRecordsModal from './DeleteRecordsModal/DeleteRecordsModal';\nimport { IsBusiness } from '../../../utils/env';\nimport { WarningOutlined } from '@ant-design/icons';\nimport { LockIcon } from '@primer/octicons-react';\n\nconst { Text } = Typography;\n\nconst TopicTabIds = ['messages', 'consumers', 'partitions', 'configuration', 'documentation', 'topicacl'] as const;\nexport type TopicTabId = typeof TopicTabIds[number];\n\n// A tab (specifying title+content) that disable/lock itself if the user doesn't have some required permissions.\nclass TopicTab {\n    constructor(\n        public readonly topicGetter: () => Topic | undefined | null,\n        public id: TopicTabId,\n        private requiredPermission: TopicAction,\n        public titleText: string,\n        private contentFunc: (topic: Topic) => React.ReactNode,\n        private disableHooks?: ((topic: Topic) => React.ReactNode | undefined)[]\n    ) { }\n\n    @computed get isEnabled(): boolean {\n        const topic = this.topicGetter();\n\n        if (topic && this.disableHooks) {\n            for (const h of this.disableHooks) {\n                if (h(topic)) return false;\n            }\n        }\n\n        if (!topic) return true; // no data yet\n        if (!topic.allowedActions || topic.allowedActions[0] == 'all') return true; // kowl free version\n\n        return topic.allowedActions.includes(this.requiredPermission);\n    }\n\n    @computed get isDisabled(): boolean {\n        return !this.isEnabled;\n    }\n\n    @computed get title(): React.ReactNode {\n        if (this.isEnabled) return this.titleText;\n\n        const topic = this.topicGetter();\n        if (topic && this.disableHooks) {\n            for (const h of this.disableHooks) {\n                const replacementTitle = h(topic);\n                if (replacementTitle) return replacementTitle;\n            }\n        }\n\n        return (\n            1 && (\n                <Popover content={`You're missing the required permission '${this.requiredPermission}' to view this tab`}>\n                    <div>\n                        <LockIcon size={16} /> {this.titleText}\n                    </div>\n                </Popover>\n            )\n        );\n    }\n\n    @computed get content(): React.ReactNode {\n        const topic = this.topicGetter();\n        if (topic) return this.contentFunc(topic);\n        return null;\n    }\n}\n\n@observer\nclass TopicDetails extends PageComponent<{ topicName: string }> {\n    @observable deleteRecordsModalVisible = false\n    topicTabs: TopicTab[];\n\n    constructor(props: any) {\n        super(props);\n\n        const topic = () => this.topic;\n\n        const mkDocuTip = (text: string, icon?: JSX.Element) => <Tooltip overlay={text} placement='left'><span>{icon ?? null}Documentation</span></Tooltip>\n        const warnIcon = <span style={{ fontSize: '15px', marginRight: '5px', transform: 'translateY(1px)', display: 'inline-block' }}><WarningOutlined color='hsl(22deg 29% 85%)' /></span>;\n\n        this.topicTabs = [\n            new TopicTab(topic, 'messages', 'viewMessages', 'Messages', (t) => <TopicMessageView topic={t} refreshTopicData={(force: boolean) => this.refreshData(force)} />),\n            new TopicTab(topic, 'consumers', 'viewConsumers', 'Consumers', (t) => <TopicConsumers topic={t} />),\n            new TopicTab(topic, 'partitions', 'viewPartitions', 'Partitions', (t) => <TopicPartitions topic={t} />),\n            new TopicTab(topic, 'configuration', 'viewConfig', 'Configuration', (t) => <TopicConfiguration topic={t} />),\n            new TopicTab(topic, 'topicacl', 'seeTopic', 'ACL', (t) => {\n                const paginationConfig = makePaginationConfig();\n                return (\n                    <AclList\n                        acl={api.topicAcls.get(t.topicName)}\n                        onChange={(pagination) => {\n                            if (pagination.pageSize) uiState.topicSettings.aclPageSize = pagination.pageSize;\n                            paginationConfig.current = pagination.current;\n                            paginationConfig.pageSize = pagination.pageSize;\n                        }}\n                    />\n                );\n            }, [(t) => {\n                if (IsBusiness)\n                    if (api.userData != null && !api.userData.canListAcls)\n                        return <Popover content={`You need the cluster-permission 'viewAcl' to view this tab`}>\n                            <div> <LockIcon size={16} /> ACL</div>\n                        </Popover>\n                return undefined;\n            }]),\n            new TopicTab(topic, 'documentation', 'seeTopic', 'Documentation', (t) => <TopicDocumentation topic={t} />, [\n                t => t.documentation == 'NOT_CONFIGURED' ? mkDocuTip('Topic documentation is not configured in Kowl') : null,\n                t => t.documentation == 'NOT_EXISTENT' ? mkDocuTip('Documentation for this topic was not found in the configured repository', warnIcon) : null,\n            ]),\n        ];\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        const topicName = this.props.topicName;\n        uiState.currentTopicName = topicName;\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n\n        p.title = topicName;\n        p.addBreadcrumb('Topics', '/topics');\n        p.addBreadcrumb(topicName, '/topics/' + topicName);\n\n        // clear messages from different topic if we have some\n        if (api.messagesFor != '' && api.messagesFor != topicName) {\n            api.messages = [];\n            api.messagesFor = '';\n        }\n    }\n\n    refreshData(force: boolean) {\n        // there is no single endpoint to refresh a single topic\n        api.refreshTopics(force);\n\n        api.refreshTopicPermissions(this.props.topicName, force);\n\n        // consumers are lazy loaded because they're (relatively) expensive\n        if (uiSettings.topicDetailsActiveTabKey == 'consumers') api.refreshTopicConsumers(this.props.topicName, force);\n\n        // partitions are always required to display message count in the statistics bar\n        api.refreshPartitionsForTopic(this.props.topicName, force);\n\n        // configuration is always required for the statistics bar\n        api.refreshTopicConfig(this.props.topicName, force);\n\n        // documentation can be lazy loaded\n        if (uiSettings.topicDetailsActiveTabKey == 'documentation') api.refreshTopicDocumentation(this.props.topicName, force);\n\n        // ACL can be lazy loaded\n        if (uiSettings.topicDetailsActiveTabKey == 'topicacl') api.refreshTopicAcls(this.props.topicName, force);\n    }\n\n    @computed get topic(): undefined | Topic | null {\n        // undefined = not yet known, null = known to be null\n        if (!api.topics) return undefined;\n        const topic = api.topics.find((e) => e.topicName == this.props.topicName);\n        if (!topic) return null;\n        return topic;\n    }\n    @computed get topicConfig(): undefined | ConfigEntry[] | null {\n        const config = api.topicConfig.get(this.props.topicName);\n        if (config === undefined) return undefined;\n        if (config === null || config.error != null) return null;\n        return config.configEntries;\n    }\n\n    get selectedTabId(): TopicTabId {\n        function computeTabId() {\n            // use url anchor if possible\n            let key = appGlobal.history.location.hash.replace('#', '');\n            if (TopicTabIds.includes(key as any)) return key as TopicTabId;\n\n            // use settings (last visited tab)\n            key = uiSettings.topicDetailsActiveTabKey!;\n            if (TopicTabIds.includes(key as any)) return key as TopicTabId;\n\n            // default to partitions\n            return 'messages';\n        }\n\n        // 1. calculate what tab is selected as usual: url -> settings -> default\n        // 2. if that tab is enabled, return it, otherwise return the first one that is not\n        //    (todo: should probably show some message if all tabs are disabled...)\n        const id = computeTabId();\n        if (this.topicTabs.first((t) => t.id == id)!.isEnabled) return id;\n        return this.topicTabs.first((t) => t.isEnabled)?.id ?? 'messages';\n    }\n\n    componentDidMount() {\n        // fix anchor\n        const anchor = '#' + this.selectedTabId;\n        const location = appGlobal.history.location;\n        if (location.hash !== anchor) {\n            location.hash = anchor;\n            appGlobal.history.replace(location);\n        }\n    }\n\n    componentWillUnmount() {\n        // leaving the topic details view, stop any pending message searches\n        api.stopMessageSearch();\n    }\n\n    render() {\n        const topic = this.topic;\n        if (topic === undefined) return DefaultSkeleton;\n        if (topic == null) return this.topicNotFound();\n\n        const topicConfig = this.topicConfig;\n\n        setImmediate(() => topicConfig && this.addBaseFavs(topicConfig));\n\n        return (\n            <>\n                <motion.div {...animProps} key={'b'} style={{ margin: '0 1rem' }}>\n                    {uiSettings.topicDetailsShowStatisticsBar && (\n                        <Card className=\"statisticsBar\">\n                            <HideStatisticsBarButton onClick={() => (uiSettings.topicDetailsShowStatisticsBar = false)} />\n                            <TopicQuickInfoStatistic topic={topic} />\n                        </Card>\n                    )}\n\n                    {/* Tabs:  Messages, Configuration */}\n                    <Card>\n                        <Tabs\n                            tabs={this.topicTabs.map(({ id, title, content, isDisabled }) => ({\n                                key: id,\n                                disabled: isDisabled,\n                                title,\n                                content,\n                            }))}\n                            onChange={this.setTabPage}\n                            selectedTabKey={this.selectedTabId}\n                        />\n                    </Card>\n                </motion.div>\n            </>\n        );\n    }\n\n    // depending on the cleanupPolicy we want to show specific config settings at the top\n    addBaseFavs(topicConfig: ConfigEntry[]): void {\n        const cleanupPolicy = topicConfig.find((e) => e.name === 'cleanup.policy')?.value;\n        const favs = uiState.topicSettings.favConfigEntries;\n\n        switch (cleanupPolicy) {\n            case 'delete':\n                favs.pushDistinct('retention.ms', 'retention.bytes');\n                break;\n            case 'compact':\n                favs.pushDistinct('min.cleanable.dirty.ratio', 'delete.retention.ms');\n                break;\n            case 'compact,delete':\n                favs.pushDistinct('retention.ms', 'retention.bytes', 'min.cleanable.dirty.ratio', 'delete.retention.ms');\n                break;\n        }\n    }\n\n    setTabPage = (activeKey: string): void => {\n        uiSettings.topicDetailsActiveTabKey = activeKey as any;\n\n        const loc = appGlobal.history.location;\n        loc.hash = String(activeKey);\n        appGlobal.history.replace(loc);\n\n        this.refreshData(false);\n    };\n\n    topicNotFound() {\n        const name = this.props.topicName;\n        return (\n            <Result\n                status={404}\n                title=\"404\"\n                subTitle={\n                    <>\n                        The topic <Text code>{name}</Text> does not exist.\n                    </>\n                }\n                extra={\n                    <Button type=\"primary\" onClick={() => appGlobal.history.goBack()}>\n                        Go Back\n                    </Button>\n                }\n            />\n        );\n    }\n}\n\nexport default TopicDetails;\n","import React from \"react\";\nimport { ConfigEntry, Topic } from \"../../../state/restInterfaces\";\nimport { Row, Statistic } from \"antd\";\nimport { observer } from \"mobx-react\";\nimport { api } from \"../../../state/backendApi\";\nimport '../../../utils/arrayExtensions';\nimport { uiState } from \"../../../state/uiState\";\nimport { FavoritePopover } from \"./Tab.Config\";\nimport { uiSettings } from \"../../../state/ui\";\nimport { prettyBytesOrNA } from \"../../../utils/utils\";\nimport { formatConfigValue } from \"../../../utils/formatters/ConfigValueFormatter\";\n\nconst StatsSeparator = () => <div style={{ width: '1px', background: '#8883', margin: '0 1.5rem', marginLeft: 0 }} />\n\n\n// todo: rename QuickInfo\nexport const TopicQuickInfoStatistic = observer((p: { topic: Topic }) => {\n    const topic = p.topic;\n    const statsAr = [] as JSX.Element[];\n\n    // Size\n    const size = <Statistic key='size' title='Size' value={topic\n        ? prettyBytesOrNA(topic.logDirSummary.totalSizeBytes)\n        : \"...\"} />\n    statsAr.push(size);\n\n    // Messages\n    const partitions = api.topicPartitions.get(topic.topicName);\n    let messageSum: null | string;\n    if (partitions === undefined) messageSum = '...'; // no response yet\n    else if (partitions === null) messageSum = \"N/A\"; // explicit null -> not allowed\n    else messageSum = partitions.sum(p => (p.waterMarkHigh - p.waterMarkLow)).toString();\n    statsAr.push(<Statistic key='msgs' title='Messages' value={messageSum} />);\n\n    // Config Entries / Seperator\n    const configEntries = filterTopicConfig(api.topicConfig.get(topic.topicName)?.configEntries);\n    if (configEntries) {\n        const configStats = uiState.topicSettings.favConfigEntries\n            .map(favName => configEntries!.find(e => e.name === favName))\n            .filter(e => e != null)\n            .map(configEntry =>\n                FavoritePopover(configEntry!, <Statistic key={(configEntry!.name)} title={(configEntry!.name)} value={formatConfigValue(configEntry!.name, configEntry?.value, uiSettings.topicList.valueDisplay)} />)\n            );\n\n        if (configStats.length > 0)\n            statsAr.push(<StatsSeparator key={'separator'} />);\n\n        statsAr.push(...configStats);\n    }\n\n    return <Row>{statsAr}</Row>\n})\n\nfunction filterTopicConfig(config: ConfigEntry[] | null | undefined): ConfigEntry[] | null | undefined {\n    if (!config) return config;\n\n    const newConfig: ConfigEntry[] = [];\n    for (const e of config) newConfig.push(e);\n\n    if (config.find(e => e.name == 'cleanup.policy' && (e.value ?? '').includes('compact'))) {\n        // this is a compacted topic, 'retention.bytes', 'retention.ms' don't apply, so hide them\n        newConfig.removeAll(e => e.name == 'retention.bytes' || e.name == 'retention.ms');\n    }\n\n    return newConfig;\n}","import React, { Component } from \"react\";\nimport { Topic } from \"../../../state/restInterfaces\";\nimport {\n    Table,\n    Skeleton,\n    ConfigProvider\n} from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport \"../../../utils/arrayExtensions\";\n\nimport { api } from \"../../../state/backendApi\";\nimport { motion } from \"framer-motion\";\nimport { animProps } from \"../../../utils/animationProps\";\nimport { appGlobal } from \"../../../state/appGlobal\";\nimport { sortField, makePaginationConfig } from \"../../misc/common\";\nimport { uiState } from \"../../../state/uiState\";\nimport { DefaultSkeleton } from \"../../../utils/tsxUtils\";\n\n@observer\nexport class TopicConsumers extends Component<{ topic: Topic }> {\n\n    pageConfig = makePaginationConfig(20);\n\n    render() {\n        let consumers = api.topicConsumers.get(this.props.topic.topicName);\n        const isLoading = consumers == null;\n        if (!consumers) consumers = [];\n\n        return <div>\n            <ConfigProvider renderEmpty={isLoading ? renderEmpty : undefined}>\n                <Table\n                    style={{ margin: '0', padding: '0' }} size='middle'\n                    showSorterTooltip={false}\n                    onRow={(record) =>\n                    ({\n                        onClick: () => appGlobal.history.push('/groups/' + record.groupId),\n                    })}\n                    pagination={this.pageConfig}\n                    onChange={(pagination) => {\n                        if (pagination.pageSize) uiState.topicSettings.consumerPageSize = pagination.pageSize;\n                        this.pageConfig.current = pagination.current;\n                        this.pageConfig.pageSize = pagination.pageSize;\n                    }}\n                    rowClassName={() => 'hoverLink'}\n                    dataSource={consumers}\n                    rowKey={x => x.groupId}\n                    columns={[\n                        { width: 1, title: 'Group', dataIndex: 'groupId', sorter: sortField('groupId'), defaultSortOrder: 'ascend' },\n                        { title: 'Lag', dataIndex: 'summedLag', sorter: sortField('summedLag') },\n                    ]} />\n            </ConfigProvider>\n        </div>\n    }\n}\n\nconst renderEmpty = () => {\n    const defaultSkeletonStyle = { margin: '.5em 0' };\n    return <div style={defaultSkeletonStyle}>\n        <Skeleton loading={true} active={true} paragraph={{ rows: 2, width: '100%' }} />\n    </div>\n}\n","import React, { Component } from \"react\";\nimport { Topic } from \"../../../state/restInterfaces\";\nimport \"../../../utils/arrayExtensions\";\nimport { api } from \"../../../state/backendApi\";\nimport {Prism as SyntaxHighlighter} from 'react-syntax-highlighter'\nimport {vs} from 'react-syntax-highlighter/dist/esm/styles/prism'\nimport ReactMarkdown from 'react-markdown';\nimport remarkGfm from 'remark-gfm';\nimport remarkEmoji from 'remark-emoji';\nimport { uriTransformer as baseUriTransformer } from 'react-markdown';\nimport { DefaultSkeleton } from \"../../../utils/tsxUtils\";\nimport { motion } from \"framer-motion\";\nimport { animProps } from \"../../../utils/animationProps\";\nimport { Button, Empty } from \"antd\";\nimport { observer } from \"mobx-react\";\n\n\n// Test for link sanitizer\n/*\n<a href=\"javascript:alert('h4x0red!');\">\nMy nonsuspious link\n</a>\n*/\n\nconst allowedProtocols = [\n    \"http://\",\n    \"https://\",\n    \"mailto://\",\n];\n\nfunction sanitizeUrl(uri: string, children?: any, title?: string | null): string {\n    const baseTransformed = baseUriTransformer(uri);\n    if (baseTransformed != uri) return baseTransformed;\n\n    const cleanedUri = uri.trim().toLocaleLowerCase();\n\n    for (const p of allowedProtocols)\n        if (cleanedUri.startsWith(p)) {\n            return uri;\n        }\n\n    return \"\"; // didn't match any allowed protocol, remove the link\n}\n\n@observer\nexport class TopicDocumentation extends Component<{ topic: Topic }> {\n\n    private components = {\n        code({node, inline, className, children, ...props}:any) {\n          const match = /language-(\\w+)/.exec(className || '')\n          return !inline && match ? (\n            <SyntaxHighlighter style={vs}\n            customStyle={{\n                \"background-color\": null,\n                border: null,\n                margin: null,\n                padding: null,\n            }}\n            language={match[1]}\n            children={String(children).replace(/\\n$/, '')} {...props} />\n          ) : (\n            <code className={className} {...props} />\n          )\n        }\n      }\n\n    render() {\n        const docu = api.topicDocumentation.get(this.props.topic.topicName);\n        if (docu === undefined) return DefaultSkeleton; // not yet loaded\n        if (!docu.isEnabled)\n            return errorNotConfigured;\n\n        const markdown = docu?.text;\n        if (markdown === null || markdown === undefined)\n            return errorNotFound;\n\n        if (markdown === '')\n            return errorEmpty;\n\n        return <div className='topicDocumentation'>\n            <ReactMarkdown components={this.components} remarkPlugins={[remarkGfm, remarkEmoji]} children={markdown} skipHtml={false} transformLinkUri={sanitizeUrl} />\n        </div>\n    }\n}\n\nconst errorNotConfigured = renderDocuError('Not Configured', <>\n    <p>Topic Documentation is not configured in Kowl.</p>\n    <p>Provide the connection credentials in the Kowl config, to fetch and display docmentation for the topics.</p>\n</>);\nconst errorNotFound = renderDocuError('Not Found', <>\n    <p>No documentation file was found for this topic.</p>\n    <ul style={{ listStyle: 'none' }}>\n        <li>Ensure the Git connection to the documentation repository is configured correctly in the Kowl backend.</li>\n        <li>Ensure that a markdown file (named just like the topic) exists in the repository.</li>\n    </ul>\n</>);\nconst errorEmpty = renderDocuError('Empty', <>\n    <p>The documentation file is empty.</p>\n    <p>In case you just changed the file, keep in mind that Kowl will only<br />\n        periodically check the documentation repo for changes (every minute by default).</p>\n</>);\n\n// todo: use common renderError function everywhere\n// todo: use <MotionAlways> for them\nfunction renderDocuError(title: string, body: JSX.Element) {\n    return (\n        <motion.div {...animProps} key={'b'} style={{ margin: '2rem 1rem' }}>\n            <Empty description={null}>\n                <div style={{ marginBottom: '1.5rem' }}>\n                    <h2>{title}</h2>\n\n                    {body}\n                </div>\n\n                {/* todo: fix link once we have a better guide */}\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/cloudhut/kowl/blob/master/docs/config/kowl.yaml\">\n                    <Button type=\"primary\">Kowl Documentation</Button>\n                </a>\n            </Empty>\n        </motion.div>\n    );\n}","import { ClockCircleOutlined, DeleteOutlined, DownloadOutlined, EllipsisOutlined, FilterOutlined, SettingFilled, SettingOutlined } from '@ant-design/icons';\nimport { DownloadIcon, PlusIcon, SkipIcon, SyncIcon, XCircleIcon } from '@primer/octicons-react';\nimport { Alert, Button, ConfigProvider, DatePicker, Dropdown, Empty, Input, Menu, message, Modal, Popover, Radio, Row, Select, Space, Switch, Table, Tabs, Tag, Tooltip, Typography } from \"antd\";\nimport { ColumnProps } from \"antd/lib/table\";\nimport { SortOrder } from \"antd/lib/table/interface\";\nimport Paragraph from \"antd/lib/typography/Paragraph\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { action, autorun, computed, IReactionDisposer, makeObservable, observable, transaction, untracked } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport Prism, { languages as PrismLanguages } from \"prismjs\";\nimport 'prismjs/components/prism-javascript';\nimport \"prismjs/components/prism-js-extras\";\nimport 'prismjs/prism.js';\nimport 'prismjs/themes/prism.css';\nimport queryString from 'query-string';\nimport React, { Component, CSSProperties, ReactNode } from \"react\";\nimport { CollapsedFieldProps } from 'react-json-view';\nimport Editor from 'react-simple-code-editor';\nimport { format as formatUrl, parse as parseUrl } from \"url\";\nimport { api } from \"../../../../state/backendApi\";\nimport { Payload, Topic, TopicAction, TopicMessage } from \"../../../../state/restInterfaces\";\nimport { ColumnList, FilterEntry, PreviewTagV2, TopicOffsetOrigin } from \"../../../../state/ui\";\nimport { uiState } from \"../../../../state/uiState\";\nimport { animProps_span_messagesStatus, MotionDiv, MotionSpan } from \"../../../../utils/animationProps\";\nimport '../../../../utils/arrayExtensions';\nimport { IsDev } from \"../../../../utils/env\";\nimport { isClipboardAvailable } from \"../../../../utils/featureDetection\";\nimport { FilterableDataSource } from \"../../../../utils/filterableDataSource\";\nimport { sanitizeString, wrapFilterFragment } from \"../../../../utils/filterHelper\";\nimport { editQuery } from \"../../../../utils/queryHelper\";\nimport { Ellipsis, findPopupContainer, Label, LayoutBypass, numberToThousandsString, OptionGroup, StatusIndicator, TimestampDisplay, toSafeString } from \"../../../../utils/tsxUtils\";\nimport { cullText, prettyBytes, prettyMilliseconds, titleCase } from \"../../../../utils/utils\";\nimport { clone, toJson } from \"../../../../utils/jsonUtils\";\nimport { makePaginationConfig, range, sortField } from \"../../../misc/common\";\nimport { KowlJsonView } from \"../../../misc/KowlJsonView\";\nimport { NoClipboardPopover } from \"../../../misc/NoClipboardPopover\";\nimport styles from './styles.module.scss';\nimport filterExample1 from '../../../../assets/filter-example-1.png';\nimport filterExample2 from '../../../../assets/filter-example-2.png';\nimport { getPreviewTags, PreviewSettings } from './PreviewSettings';\nimport * as moment from 'moment';\nimport DeleteRecordsModal from '../DeleteRecordsModal/DeleteRecordsModal';\n\n\n\nconst { Text } = Typography;\nconst { Option } = Select;\nconst InputGroup = Input.Group;\n\ninterface TopicMessageViewProps {\n    topic: Topic;\n    refreshTopicData: (force: boolean) => void;\n}\n\n/*\n    TODO:\n        - when the user has entered a specific offset, we should prevent selecting 'all' partitions, as that wouldn't make any sense.\n        - add back summary of quick search  <this.FilterSummary />\n*/\n\n@observer\nexport class TopicMessageView extends Component<TopicMessageViewProps> {\n    @observable previewDisplay: string[] = [];\n    // @observable allCurrentKeys: string[];\n\n    @observable showColumnSettings = false;\n\n    @observable fetchError = null as any | null;\n\n    pageConfig = makePaginationConfig(uiState.topicSettings.messagesPageSize);\n    messageSource = new FilterableDataSource<TopicMessage>(() => api.messages, this.isFilterMatch, 16);\n\n    autoSearchReaction: IReactionDisposer | null = null;\n    quickSearchReaction: IReactionDisposer | null = null;\n\n    currentSearchRun: string | null = null;\n\n    @observable downloadMessages: TopicMessage[] | null;\n    @observable expandedKeys: React.Key[] = [];\n\n    @observable deleteRecordsModalVisible = false\n    @observable deleteRecordsModalAlive = false\n\n    constructor(props: TopicMessageViewProps) {\n        super(props);\n        this.executeMessageSearch = this.executeMessageSearch.bind(this); // needed because we must pass the function directly as 'submit' prop\n        makeObservable(this);\n    }\n\n    componentDidMount() {\n        // unpack query parameters (if any)\n        const searchParams = uiState.topicSettings.searchParams;\n        const query = queryString.parse(window.location.search);\n        // console.debug(\"parsing query: \" + toJson(query));\n        if (query.p != null) searchParams.partitionID = Number(query.p);\n        if (query.s != null) searchParams.maxResults = Number(query.s);\n        if (query.o != null) {\n            searchParams.startOffset = Number(query.o);\n            searchParams.offsetOrigin = (searchParams.startOffset >= 0) ? TopicOffsetOrigin.Custom : searchParams.startOffset;\n        }\n        if (query.q != null) uiState.topicSettings.quickSearch = String(query.q);\n\n        // Auto search when parameters change\n        this.autoSearchReaction = autorun(() => this.searchFunc('auto'), { delay: 100, name: 'auto search when parameters change' });\n\n        // Quick search -> url\n        this.quickSearchReaction = autorun(() => {\n            editQuery(query => {\n                const q = String(uiState.topicSettings.quickSearch);\n                query[\"q\"] = q ? q : null;\n            });\n        }, { name: 'update query string' });\n\n        this.messageSource.filterText = uiState.topicSettings.quickSearch;\n    }\n    componentWillUnmount() {\n        this.messageSource.dispose();\n        if (this.autoSearchReaction)\n            this.autoSearchReaction();\n        if (this.quickSearchReaction)\n            this.quickSearchReaction();\n    }\n\n    render() {\n        return <>\n            <this.SearchControlsBar />\n\n            {/* Message Table (or error display) */}\n            {this.fetchError\n                ? <Alert\n                    type=\"error\" showIcon\n                    message=\"Backend API Error\"\n                    description={<div>\n                        <Text>Please check and modify the request before resubmitting.</Text>\n                        <div className='codeBox'>{((this.fetchError as Error).message ?? String(this.fetchError))}</div>\n                        <Button onClick={() => this.executeMessageSearch()}>\n                            Retry Search\n                        </Button>\n                    </div>}\n                />\n                : <>\n                    <Row align='middle' style={{ marginBottom: '0rem', display: 'flex', alignItems: 'center' }} >\n                        {/*\n                            todo: move this below the table (aligned left)\n                            This requires more work becasue we'd have to remove the pagination controls from the table and provide our own\n                         */}\n                        {/* <this.SearchQueryAdditionalInfo /> */}\n                    </Row>\n\n                    <this.MessageTable />\n                </>\n            }\n\n            {\n                this.deleteRecordsModalAlive\n                && (\n                    <DeleteRecordsModal\n                        topic={this.props.topic}\n                        visible={this.deleteRecordsModalVisible}\n                        onCancel={() => this.hideDeleteRecordsModal()}\n                        onFinish={() => this.finishDeleteRecordsModal()}\n                        afterClose={() => console.log('after close', this.deleteRecordsModalAlive = false)}\n                    />\n                )\n            }\n        </>;\n    }\n    SearchControlsBar = observer(() => {\n        const searchParams = uiState.topicSettings.searchParams;\n        const topic = this.props.topic;\n        const spaceStyle = { marginRight: '16px', marginTop: '12px' };\n        const canUseFilters = api.topicPermissions.get(topic.topicName)?.canUseSearchFilters ?? true;\n\n        const isCompacted = this.props.topic.cleanupPolicy.includes('compact');\n        return <React.Fragment>\n            <div style={{ margin: '0 1px', marginBottom: '12px', display: 'flex', flexWrap: 'wrap', alignItems: 'flex-end' }}>\n                {/* Search Settings*/}\n                <Label text='Partition' style={{ ...spaceStyle }}>\n                    <Select<number> value={searchParams.partitionID} onChange={c => searchParams.partitionID = c} style={{ width: '9em' }} size='middle'>\n                        <Select.Option key='all' value={-1}>All</Select.Option>\n                        {range(0, topic.partitionCount).map(i =>\n                            <Select.Option key={i} value={i}>Partition {i.toString()}</Select.Option>)}\n                    </Select>\n                </Label>\n                <Label text='Start Offset' style={{ ...spaceStyle }}>\n                    <InputGroup compact style={{ display: 'inline-block', width: 'auto' }}>\n                        <Select<TopicOffsetOrigin> value={searchParams.offsetOrigin} onChange={e => searchParams.offsetOrigin = e} size='middle'\n                            dropdownMatchSelectWidth={false} style={{ width: '9em' }}\n                        >\n                            <Option value={TopicOffsetOrigin.End}>Newest</Option>\n                            <Option value={TopicOffsetOrigin.EndMinusResults}>Newest<span style={{ opacity: '0.9' }}>-{searchParams.maxResults}</span></Option>\n                            <Option value={TopicOffsetOrigin.Start}>Oldest</Option>\n                            <Option value={TopicOffsetOrigin.Custom}>Custom</Option>\n                            <Option value={TopicOffsetOrigin.Timestamp}>Timestamp</Option>\n                        </Select>\n                        {\n                            searchParams.offsetOrigin == TopicOffsetOrigin.Custom &&\n                            <Input style={{ width: '7.5em' }} maxLength={20}\n                                value={searchParams.startOffset} onChange={e => searchParams.startOffset = +e.target.value}\n                                disabled={searchParams.offsetOrigin != TopicOffsetOrigin.Custom} />\n                        }\n                        {\n                            searchParams.offsetOrigin == TopicOffsetOrigin.Timestamp &&\n                            <StartOffsetDateTimePicker />\n                        }\n                    </InputGroup>\n                </Label>\n                <Label text='Max Results' style={{ ...spaceStyle }}>\n                    <Select<number> value={searchParams.maxResults} onChange={c => searchParams.maxResults = c} style={{ width: '9em' }} size='middle'>\n                        {[1, 3, 5, 10, 20, 50, 100, 200, 500].map(i => <Select.Option key={i} value={i}>{i.toString()}</Select.Option>)}\n                    </Select>\n                </Label>\n                <Label text='Filter' style={{ ...spaceStyle }}>\n                    <div style={{ height: '32px', paddingTop: '4px' }}>\n                        <Tooltip title=\"You don't have permissions to use search filters in this topic\" trigger={canUseFilters ? 'none' : 'hover'}>\n                            <Switch checked={searchParams.filtersEnabled && canUseFilters} onChange={v => searchParams.filtersEnabled = v} disabled={!canUseFilters} />\n                        </Tooltip>\n                    </div>\n                </Label>\n\n                {/* Refresh Button */}\n                <Label text='' style={{ ...spaceStyle }}>\n                    <div style={{ display: 'flex' }}>\n\n                        <AnimatePresence>\n                            {api.messageSearchPhase == null &&\n                                <MotionSpan identityKey='btnRefresh' overrideAnimProps={animProps_span_messagesStatus}>\n                                    <Tooltip title='Repeat current search' getPopupContainer={findPopupContainer}>\n                                        <Button type='primary' onClick={() => this.searchFunc('manual')}>\n                                            <SyncIcon size={16} />\n                                        </Button>\n                                    </Tooltip>\n                                </MotionSpan>\n                            }\n                            {api.messageSearchPhase != null &&\n                                <MotionSpan identityKey='btnCancelSearch' overrideAnimProps={animProps_span_messagesStatus}>\n                                    <Tooltip title='Stop searching' getPopupContainer={findPopupContainer}>\n                                        <Button type='primary' danger onClick={() => api.stopMessageSearch()} style={{ padding: 0, width: '48px' }}>\n                                            <LayoutBypass >\n                                                <XCircleIcon size={20} />\n                                            </LayoutBypass>\n                                        </Button>\n                                    </Tooltip>\n                                </MotionSpan>\n                            }\n                        </AnimatePresence>\n                    </div>\n                </Label>\n\n                {/* Delete Records */}\n                <div className={styles.deleteButtonWrapper}>\n                    <DeleteRecordsButton allowedActions={topic.allowedActions || []} isCompacted={isCompacted} onClick={() => this.showDeleteRecordsModal()} />\n                </div>\n\n                {/* Quick Search */}\n                <div className={styles.quickSearchWrapper}>\n                    <Input placeholder='Quick Search' allowClear={true} size='middle'\n                        className={styles.quickSearchInput}\n                        value={uiState.topicSettings.quickSearch}\n                        onChange={e => uiState.topicSettings.quickSearch = this.messageSource.filterText = e.target.value}\n                        addonAfter={null} disabled={this.fetchError != null}\n                    />\n                </div>\n\n                {/* Search Progress Indicator: \"Consuming Messages 30/30\" */}\n                {\n                    Boolean(api.messageSearchPhase && api.messageSearchPhase.length > 0) &&\n                    <StatusIndicator\n                        identityKey='messageSearch'\n                        fillFactor={(api.messages?.length ?? 0) / searchParams.maxResults}\n                        statusText={api.messageSearchPhase!}\n                        progressText={`${api.messages?.length ?? 0} / ${searchParams.maxResults}`}\n                        bytesConsumed={searchParams.filtersEnabled ? prettyBytes(api.messagesBytesConsumed) : undefined}\n                        messagesConsumed={searchParams.filtersEnabled ? String(api.messagesTotalConsumed) : undefined}\n                    />\n\n                }\n\n                {/*\n                api.MessageSearchPhase && api.MessageSearchPhase.length > 0 && searchParams.filters.length>0 &&\n                    <StatusIndicator\n                        identityKey='messageSearch'\n                        fillFactor={(api.Messages?.length ?? 0) / searchParams.maxResults}\n                        statusText={api.MessageSearchPhase}\n                        progressText={`${api.Messages?.length ?? 0} / ${searchParams.maxResults}`}\n                        bytesConsumed={searchParams.filtersEnabled ? prettyBytes(api.MessagesBytesConsumed) : undefined}\n                        messagesConsumed={searchParams.filtersEnabled ? String(api.MessagesTotalConsumed) : undefined}\n                    />\n                    */\n                }\n\n                {/* Filter Tags */}\n                {searchParams.filtersEnabled && <div style={{ paddingTop: '1em', width: '100%' }}>\n                    <MessageSearchFilterBar />\n                </div>}\n\n            </div>\n\n        </React.Fragment>;\n    });\n\n    showDeleteRecordsModal() {\n        this.deleteRecordsModalAlive = true;\n        this.deleteRecordsModalVisible = true;\n    }\n\n    hideDeleteRecordsModal() {\n        this.deleteRecordsModalVisible = false;\n    }\n\n    finishDeleteRecordsModal() {\n        this.hideDeleteRecordsModal();\n        this.props.refreshTopicData(true);\n    }\n\n    searchFunc = (source: 'auto' | 'manual') => {\n\n        // need to do this first, so we trigger mobx\n        const params = uiState.topicSettings.searchParams;\n        const searchParams = String(params.offsetOrigin) + params.maxResults + params.partitionID + params.startOffset + params.startTimestamp;\n\n        if (this.currentSearchRun)\n            return console.warn(`searchFunc: function already in progress (trigger:${source})`);\n\n        const phase = untracked(() => api.messageSearchPhase);\n        if (phase)\n            return console.warn(`searchFunc: previous search still in progress (trigger:${source}, phase:${phase})`);\n\n        try {\n            this.currentSearchRun = searchParams;\n\n            if (this.fetchError == null)\n                untracked(() => this.executeMessageSearch());\n        } catch (error) {\n            console.error(error);\n        } finally {\n            this.currentSearchRun = null;\n        }\n    }\n\n    cancelSearch = () => api.stopMessageSearch();\n\n    isFilterMatch(str: string, m: TopicMessage) {\n        str = str.toLowerCase();\n        if (m.offset.toString().toLowerCase().includes(str)) return true;\n        if (m.keyJson && m.keyJson.toLowerCase().includes(str)) return true;\n        if (m.valueJson && m.valueJson.toLowerCase().includes(str)) return true;\n        return false;\n    }\n\n    FilterSummary() {\n\n        if (this && this.messageSource && this.messageSource.data) {\n            // todo\n        }\n        else {\n            return null;\n        }\n\n        const displayText = this.messageSource.data.length == api.messages.length\n            ? 'Filter matched all messages'\n            : <><b>{this.messageSource.data.length}</b> results</>;\n\n        return <div style={{ marginRight: '1em' }}>\n            <MotionDiv identityKey={displayText}>\n                <Text type='secondary'>{displayText}</Text>\n            </MotionDiv>\n        </div>;\n    }\n\n    @computed\n    get activePreviewTags(): PreviewTagV2[] {\n        return uiState.topicSettings.previewTags.filter(t => t.isActive);\n    }\n\n    MessageTable = observer(() => {\n\n        const [showPreviewSettings, setShowPreviewSettings] = React.useState(false);\n\n        const previewButton = <>\n            <span style={{ display: 'inline-flex', alignItems: 'center', height: 0, marginLeft: '4px' }}>\n                <Button shape='round' className='hoverBorder' onClick={() => setShowPreviewSettings(true)} style={{ color: '#1890ff', padding: '0 0.5em', background: 'transparent' }}>\n                    <SettingOutlined style={{ fontSize: '1rem', transform: 'translateY(1px)' }} />\n                    <span style={{ marginLeft: '.3em', fontSize: '85%' }}>Preview</span>\n                    {(() => {\n                        const count = uiState.topicSettings.previewTags.sum(t => t.isActive ? 1 : 0);\n                        if (count > 0)\n                            return <span style={{ marginLeft: '.3em' }}>(<b>{count} active</b>)</span>;\n                        return <></>;\n                    })()}\n                </Button>\n            </span>\n        </>;\n\n        const copyDropdown = (record: TopicMessage) => (\n            <Menu>\n                <Menu.Item key=\"0\" onClick={() => this.copyMessage(record, 'jsonKey')}>\n                    Copy Key\n                </Menu.Item>\n                <Menu.Item key=\"2\" onClick={() => this.copyMessage(record, 'jsonValue')}>\n                    Copy Value\n                </Menu.Item>\n                <Menu.Item key=\"4\" onClick={() => this.copyMessage(record, 'timestamp')}>\n                    Copy Epoch Timestamp\n                </Menu.Item>\n                <Menu.Item key=\"5\" onClick={() => this.downloadMessages = [record]}>\n                    Save to File\n                </Menu.Item>\n            </Menu>\n        );\n\n        const tsFormat = uiState.topicSettings.previewTimestamps;\n        const IsColumnSettingsEnabled = uiState.topicSettings.previewColumnFields.length || uiState.topicSettings.previewTimestamps !== 'default';\n        const hasKeyTags = uiState.topicSettings.previewTags.count(x => x.isActive && x.searchInMessageKey) > 0;\n        const hasValueTags = uiState.topicSettings.previewTags.count(x => x.isActive && x.searchInMessageValue) > 0;\n\n        const columns: ColumnProps<TopicMessage>[] = [\n            { width: 1, title: 'Offset', dataIndex: 'offset', sorter: sortField('offset'), defaultSortOrder: 'descend', render: (t: number) => numberToThousandsString(t) },\n            { width: 1, title: 'Partition', dataIndex: 'partitionID', sorter: sortField('partitionID'), },\n            { width: 1, title: 'Timestamp', dataIndex: 'timestamp', sorter: sortField('timestamp'), render: (t: number) => <TimestampDisplay unixEpochSecond={t} format={tsFormat} /> },\n            {\n                width: hasKeyTags ? '30%' : 1, title: 'Key', dataIndex: 'key',\n                render: (_, r) => <MessageKeyPreview msg={r} previewFields={() => this.activePreviewTags} />,\n                sorter: this.keySorter\n            },\n            {\n                dataIndex: 'value',\n                width: 'auto',\n                title: <span>Value {previewButton}</span>,\n                render: (t, r) => <MessagePreview msg={r} previewFields={() => this.activePreviewTags} />,\n                //filteredValue: ['?'],\n                //onFilter: (value, record) => { console.log(`Filtering value: ${value}`); return true; },\n            },\n            {\n                width: 1, title: ' ', key: 'action', className: 'msgTableActionColumn',\n                filters: [],\n                filterDropdownVisible: false,\n                onFilterDropdownVisibleChange: (_) => this.showColumnSettings = true,\n                filterIcon: (_) => {\n                    return <Tooltip title='Column Settings' mouseEnterDelay={0.1} getPopupContainer={findPopupContainer} placement='left'>\n                        <SettingFilled style={IsColumnSettingsEnabled ? { color: '#1890ff' } : { color: '#a092a0' }} />\n                    </Tooltip>;\n                },\n                render: (text, record) => !record.isValueNull && (\n                    <NoClipboardPopover placement='left'>\n                        <div> {/* the additional div is necessary because popovers do not trigger on disabled elements, even on hover */}\n                            <Dropdown disabled={!isClipboardAvailable} overlayClassName='disableAnimation' overlay={copyDropdown(record)} trigger={['click']}>\n                                <Button className='iconButton' style={{ height: '100%', width: '100%', verticalAlign: 'middle', pointerEvents: isClipboardAvailable ? 'auto' : 'none' }} type='link'\n                                    icon={<EllipsisOutlined style={{ fontSize: '32px', display: 'flex', alignContent: 'center', justifyContent: 'center' }} />} size='middle' />\n                            </Dropdown>\n                        </div>\n                    </NoClipboardPopover>\n                    // <ZeroSizeWrapper width={32} height={0}>\n                    //     <Button className='iconButton' style={{ height: '40px', width: '40px' }} type='link' icon={<CopyOutlined />} size='middle' onClick={() => this.copyMessage(record)} />\n                    // </ZeroSizeWrapper>\n                    // <ZeroSizeWrapper width={32} height={0}>\n                    //     <Button className='iconButton fill' style={{ height: '40px', width: '40px' }} type='link' icon={<LinkOutlined />} size='middle' onClick={() => this.copyLinkToMessage(record)} />\n                    // </ZeroSizeWrapper>\n                    // <Divider type=\"vertical\" />\n                ),\n            },\n            // todo: size was a guess anyway, might be added back later\n            // {\n            //     width: 1, title: 'Size', dataIndex: 'size', render: (s) => { if (s > 1000) s = Math.round(s / 1000) * 1000; return prettyBytes(s) },\n            //     sorter: (a, b) => b.size - a.size\n            // },\n        ];\n\n        // If the previewColumnFields is empty then use the default columns, otherwise filter it based on it\n        const filteredColumns: (ColumnProps<TopicMessage>)[] =\n            uiState.topicSettings.previewColumnFields.length == 0\n                ? columns\n                : uiState.topicSettings.previewColumnFields\n                    .map(columnList =>\n                        columns.find(c => c.dataIndex === columnList.dataIndex)\n                    )\n                    .filter(column => !!column)\n                    // Add the action tab at the end\n                    .concat(columns[columns.length - 1]) as (ColumnProps<TopicMessage>)[];\n\n        const showTombstones = this.props.topic.cleanupPolicy.includes('compact');\n\n        return <>\n            <ConfigProvider renderEmpty={this.empty}>\n                <Table\n                    style={{ margin: '0', padding: '0', whiteSpace: 'nowrap' }}\n                    size='middle'\n                    showSorterTooltip={false}\n                    pagination={this.pageConfig}\n                    onChange={(pagination) => {\n                        if (pagination.pageSize) uiState.topicSettings.messagesPageSize = pagination.pageSize;\n                        this.pageConfig.current = pagination.current;\n                        this.pageConfig.pageSize = pagination.pageSize;\n                    }}\n\n                    dataSource={this.messageSource.data}\n\n                    rowKey={r => r.offset + ' ' + r.partitionID + r.timestamp}\n                    rowClassName={(r: TopicMessage) => (r.isValueNull && showTombstones) ? 'tombstone' : ''}\n                    onRow={r => {\n                        return {\n                            onDoubleClick: e => {\n                                // Double clicking a row should expand/collapse it\n                                // But not when the user double-clicks the expand/collapse button\n                                if (e.target instanceof HTMLElement)\n                                    if (e.target.classList.contains(\"ant-table-row-expand-icon\"))\n                                        return;\n                                this.toggleRecordExpand(r);\n                            },\n                        };\n                    }}\n\n                    expandable={{\n                        expandRowByClick: false,\n                        expandIconColumnIndex: filteredColumns.findIndex(c => c.dataIndex === 'value'),\n                        rowExpandable: _ => filteredColumns.findIndex(c => c.dataIndex === 'value') === -1 ? false : true,\n                        expandedRowRender: record => renderExpandedMessage(record),\n                        expandedRowKeys: this.expandedKeys.slice(),\n                        onExpand: (p, r) => {\n                            this.toggleRecordExpand(r);\n                        }\n                    }}\n\n                    columns={filteredColumns}\n                />\n\n                <Button\n                    type='primary' style={{ marginTop: '4px', marginLeft: '-2px' }}\n                    icon={<span style={{ paddingRight: '4px' }}><DownloadIcon /></span>}\n                    onClick={() => { this.downloadMessages = api.messages; }}\n                    disabled={!api.messages || api.messages.length == 0}\n                >Save Messages</Button>\n\n                <SaveMessagesDialog messages={this.downloadMessages} onClose={() => this.downloadMessages = null} />\n\n                {\n                    (this.messageSource?.data?.length > 0) &&\n                    <PreviewSettings getShowDialog={() => showPreviewSettings} setShowDialog={s => setShowPreviewSettings(s)} />\n                }\n\n                <ColumnSettings getShowDialog={() => this.showColumnSettings} setShowDialog={s => this.showColumnSettings = s} />\n\n\n            </ConfigProvider>\n        </>;\n    })\n\n\n    @action toggleRecordExpand(r: TopicMessage) {\n        const key = r.offset + ' ' + r.partitionID + r.timestamp;\n        // try collapsing it, removeAll returns the number of matches\n        const removed = this.expandedKeys.removeAll(x => x == key);\n        if (removed == 0) // wasn't expanded, so expand it now\n            this.expandedKeys.push(key);\n    }\n\n    keySorter(a: TopicMessage, b: TopicMessage, sortOrder?: SortOrder): number {\n        const ta = String(a.key) ?? \"\";\n        const tb = String(b.key) ?? \"\";\n        return ta.localeCompare(tb);\n    }\n\n    // we can only write text to the clipboard, so rawKey/rawValue have been removed for now\n    copyMessage(record: TopicMessage, field: \"jsonKey\" | \"jsonValue\" | \"timestamp\") {\n        switch (field) {\n            case \"jsonKey\":\n                typeof record.key.payload === 'string'\n                    ? navigator.clipboard.writeText(record.key.payload as string)\n                    : navigator.clipboard.writeText(JSON.stringify(record.key.payload, null, 4));\n                message.success('Key copied to clipboard', 5);\n                break;\n            case \"jsonValue\":\n                typeof record.value.payload === 'string'\n                    ? navigator.clipboard.writeText(record.value.payload as string)\n                    : navigator.clipboard.writeText(JSON.stringify(record.value.payload, null, 4));\n                message.success('Value copied to clipboard', 5);\n                break;\n            case \"timestamp\":\n                navigator.clipboard.writeText(record.timestamp.toString());\n                message.success('Epoch Timestamp copied to clipboard', 5);\n                break;\n            default:\n            // empty\n        }\n    }\n\n    copyLinkToMessage(record: TopicMessage) {\n        const searchParams = { o: record.offset, p: record.partitionID, s: 1 };\n        const query = queryString.stringify(searchParams);\n        const url = parseUrl(window.location.href);\n        url.search = query;\n\n        const newUrl = formatUrl(url);\n        console.log(\"copied url: \" + newUrl);\n\n        //navigator.clipboard.writeText(record.valueJson);\n        //message.success('Message content (JSON) copied to clipboard', 5);\n    }\n\n    async executeMessageSearch(): Promise<void> {\n        const searchParams = uiState.topicSettings.searchParams;\n        const canUseFilters = api.topicPermissions.get(this.props.topic.topicName)?.canUseSearchFilters ?? true;\n\n        if (searchParams.offsetOrigin != TopicOffsetOrigin.Custom)\n            searchParams.startOffset = searchParams.offsetOrigin;\n\n        editQuery(query => {\n            query[\"p\"] = String(searchParams.partitionID); // p = partition\n            query[\"s\"] = String(searchParams.maxResults); // s = size\n            query[\"o\"] = String(searchParams.startOffset); // o = offset\n        });\n\n        let filterCode: string = \"\";\n        if (searchParams.filtersEnabled && canUseFilters) {\n            const functionNames: string[] = [];\n            const functions: string[] = [];\n\n            searchParams.filters.filter(e => e.isActive && e.code).forEach(e => {\n                const name = `filter${functionNames.length + 1}`;\n                functionNames.push(name);\n                functions.push(`\nfunction ${name}() {\n    ${wrapFilterFragment(e.code)}\n}`);\n            });\n\n            if (functions.length > 0) {\n                filterCode = functions.join('\\n\\n') + \"\\n\\n\"\n                    + `return ${functionNames.map(f => f + \"()\").join(' && ')}`;\n                if (IsDev) console.log(`constructed filter code (${functions.length} functions)`, \"\\n\\n\" + filterCode);\n            }\n        }\n\n        const request = {\n            topicName: this.props.topic.topicName,\n            partitionId: searchParams.partitionID,\n            startOffset: searchParams.startOffset,\n            startTimestamp: searchParams.startTimestamp,\n            maxResults: searchParams.maxResults,\n            filterInterpreterCode: btoa(sanitizeString(filterCode)),\n        };\n\n        // if (typeof searchParams.startTimestamp != 'number' || searchParams.startTimestamp == 0)\n        //     console.error(\"startTimestamp is not valid\", { request: request, searchParams: searchParams });\n\n        transaction(async () => {\n            try {\n                this.fetchError = null;\n                api.startMessageSearch(request);\n            } catch (error: any) {\n                console.error('error in searchTopicMessages: ' + ((error as Error).message ?? String(error)));\n                this.fetchError = error;\n            }\n        });\n\n    }\n\n    /*\n        SearchQueryAdditionalInfo = observer(() => {\n            if (!api.MessageResponse) return null;\n            if (api.MessageResponse.fetchedMessages === undefined) return null;\n            const formatTime = (ms: number) => !!ms && ms > 0\n                ? prettyMilliseconds(api.MessageResponse.elapsedMs, { secondsDecimalDigits: 2 })\n                : \"undefined\";\n\n            const warningDisplay = () => <>\n                <Icon type=\"warning\" theme=\"twoTone\" twoToneColor=\"orange\" style={{ fontSize: '150%', marginRight: '0.2em' }} />\n                <Text type='warning' strong>\n                    Backend aborted the search after <b>{formatTime(api.MessageResponse.elapsedMs)}</b> (fetched {api.MessageResponse.fetchedMessages} messages)\n                </Text>\n            </>\n\n            const typeTags = api.MessageResponse.messages.map(m => m.valueType).distinct().map(t => this.formatTypeToTag(t)).filter(t => t != null);\n\n            const normalDisplay = () => <>\n                <Text type='secondary'>\n                    <b>{api.MessageResponse.fetchedMessages}</b> messages (in <b>{formatTime(api.MessageResponse.elapsedMs)}</b>)\n                </Text>\n                <Divider type='vertical' />\n                {typeTags}\n            </>\n\n            return <MotionAlways>\n                <span style={{ display: 'flex', alignItems: 'center' }}>\n                    <Divider type='vertical' />\n                    {api.MessageResponse.isCancelled === true ? warningDisplay() : normalDisplay()}\n                </span>\n            </MotionAlways>\n        })\n    */\n\n    formatTypeToTag(type: string) {\n        type = String(type);\n        switch (type) {\n            case 'json': return <Tag key={1} color='orange'>JSON</Tag>;\n            case 'xml': return <Tag key={2} color='green'>XML</Tag>;\n            case 'avro': return <Tag key={3} color='blue'>Avro</Tag>;\n            case 'binary': return <Tag key={4} color='red'>Binary</Tag>;\n            case 'text': return <Tag key={5} color='gold'>Text</Tag>;\n            case '': return null;\n        }\n        return <Tag key={6} color='black'>Unknown: {type}</Tag>;\n    }\n\n    empty = () => <Empty description={<>\n        <Text type='secondary' strong style={{ fontSize: '125%' }}>No messages</Text>\n        <br />\n        <span>Either the selected topic/partition did not contain any messages</span>\n    </>} />\n}\n\n@observer\nclass SaveMessagesDialog extends Component<{ messages: TopicMessage[] | null, onClose: () => void }> {\n    @observable isOpen = false;\n    @observable format = 'json' as 'json' | 'csv';\n\n    radioStyle = { display: 'block', lineHeight: '30px' };\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    render() {\n        const { messages, onClose } = this.props;\n        const count = (messages?.length ?? 0);\n        const title = count > 1 ? \"Save Messages\" : \"Save Message\";\n\n        // Keep dialog open after closing it, so it can play its closing animation\n        if (count > 0 && !this.isOpen) setImmediate(() => this.isOpen = true);\n        if (this.isOpen && count == 0) setImmediate(() => this.isOpen = false);\n\n        return <Modal\n            title={title} centered closable={false}\n            visible={count > 0}\n            onOk={() => this.saveMessages()}\n            onCancel={onClose}\n            afterClose={onClose}\n            okText=\"Save Messages\"\n        >\n            <div>Select the format in which you want to save {count == 1 ? \"the message\" : \"all messages\"}</div>\n            <Radio.Group value={this.format} onChange={e => this.format = e.target.value}>\n                <Radio value='json' style={this.radioStyle}>JSON</Radio>\n                <Radio value='csv' disabled={true} style={this.radioStyle}>CSV</Radio>\n            </Radio.Group>\n        </Modal>;\n    }\n\n    saveMessages() {\n        const cleanMessages = this.cleanMessages(this.props.messages ?? []);\n\n        const json = toJson(cleanMessages, 4);\n\n        const link = document.createElement(\"a\");\n        const file = new Blob([json], { type: 'application/json' });\n        link.href = URL.createObjectURL(file);\n        link.download = \"messages.json\";\n        document.body.appendChild(link); // required in firefox\n        link.click();\n\n        this.props.onClose();\n    }\n\n    cleanMessages(messages: TopicMessage[]): any[] {\n        const ar: any[] = [];\n\n        // create a copy of each message, omitting properties that don't make\n        // sense for the user, like 'size' or caching properties like 'keyJson'.\n\n        const cleanPayload = function (p: Payload): Payload {\n            if (!p) return undefined as any;\n            return {\n                payload: p.payload,\n                encoding: p.encoding,\n                schemaId: p.schemaId,\n            } as any as Payload;\n        };\n\n        for (const src of messages) {\n            const msg = {} as Partial<typeof src>;\n\n            msg.partitionID = src.partitionID;\n            msg.offset = src.offset;\n            msg.timestamp = src.timestamp;\n            msg.compression = src.compression;\n            msg.isTransactional = src.isTransactional;\n\n            msg.headers = src.headers.map(h => ({\n                key: h.key,\n                value: cleanPayload(h.value),\n            }));\n\n            msg.key = cleanPayload(src.key);\n            msg.value = cleanPayload(src.value);\n\n            ar.push(msg);\n        }\n\n        return ar;\n    }\n}\n\n\n@observer\nclass MessageKeyPreview extends Component<{ msg: TopicMessage, previewFields: () => PreviewTagV2[] }> {\n    render() {\n        const value = this.props.msg.key.payload;\n        const text = typeof value === 'string' ? value : toJson(value);\n\n        if (value == undefined || value == null || text.length == 0 || text == '{}')\n            return renderEmptyIcon(\"Empty Key\");\n\n        if (typeof value == 'object') {\n            const previewTags = this.props.previewFields().filter(t => t.searchInMessageKey);\n            if (previewTags.length > 0) {\n                const tags = getPreviewTags(value, previewTags);\n                return <span className='cellDiv fade' style={{ fontSize: '95%' }}>\n                    <div className={\"previewTags previewTags-\" + uiState.topicSettings.previewDisplayMode}>\n                        {tags.map((t, i) => <React.Fragment key={i}>{t}</React.Fragment>)}\n                    </div>\n                </span>;\n            }\n        }\n\n        const content = text.length > 44\n            ? <>{text.slice(0, 44)}&hellip;</>\n            : text;\n\n        return <span className='cellDiv' style={{ minWidth: '10ch', width: 'auto', maxWidth: '45ch' }}>\n            <code style={{ fontSize: '95%' }}>{content}</code>\n        </span>;\n    }\n}\n\n\n@observer\nclass StartOffsetDateTimePicker extends Component {\n\n    constructor(p: any) {\n        super(p);\n        const searchParams = uiState.topicSettings.searchParams;\n        // console.log('time picker 1', { setByUser: searchParams.startTimestampWasSetByUser, startTimestamp: searchParams.startTimestamp, format: new Date(searchParams.startTimestamp).toLocaleDateString() })\n        if (!searchParams.startTimestampWasSetByUser) {\n            // so far, the user did not change the startTimestamp, so we set it to 'now'\n            searchParams.startTimestamp = new Date().getTime();\n        }\n        // console.log('time picker 2', { setByUser: searchParams.startTimestampWasSetByUser, startTimestamp: searchParams.startTimestamp, format: new Date(searchParams.startTimestamp).toLocaleDateString() })\n    }\n\n    render() {\n        const searchParams = uiState.topicSettings.searchParams;\n        // new Date().getTimezoneOffset()\n\n        // startTimestamp is always in unixSeconds, so for display we might have to convert\n        let format = \"DD.MM.YYYY HH:mm:ss\";\n        let current: moment.Moment | undefined = searchParams.startTimestamp <= 0 ? undefined : moment.utc(searchParams.startTimestamp);\n\n        if (uiState.topicSettings.searchParametersLocalTimeMode) {\n            current = current?.local();\n            format += \" [(Local)]\";\n        } else {\n            format += \" [(UTC)]\";\n        }\n\n        return <DatePicker showTime={true} allowClear={false}\n            renderExtraFooter={() => <DateTimePickerExtraFooter />}\n            format={format}\n            value={current}\n            onChange={e => {\n                // console.log('onChange', { value: e?.format() ?? 'null', isLocal: e?.isLocal(), unix: e?.valueOf() });\n                searchParams.startTimestamp = e?.valueOf() ?? -1;\n                searchParams.startTimestampWasSetByUser = true;\n            }}\n            onOk={e => {\n                // console.log('onOk', { value: e.format(), isLocal: e.isLocal(), unix: e.valueOf() });\n                searchParams.startTimestamp = e.valueOf();\n            }}\n        />;\n    }\n}\n\n@observer\nclass DateTimePickerExtraFooter extends Component {\n    render() {\n        return <Radio.Group\n            value={uiState.topicSettings.searchParametersLocalTimeMode ? 'local' : 'utc'}\n            onChange={e => {\n                // console.log(\"date mode changed\", { newValue: e.target.value, isLocalMode: uiState.topicSettings.searchParametersLocalTimeMode });\n                uiState.topicSettings.searchParametersLocalTimeMode = e.target.value == 'local';\n            }}>\n            <Radio value='local'>Local</Radio>\n            <Radio value='utc'>UTC</Radio>\n        </Radio.Group>;\n    }\n}\n\n\n@observer\nclass MessagePreview extends Component<{ msg: TopicMessage, previewFields: () => PreviewTagV2[] }> {\n    render() {\n        const msg = this.props.msg;\n        const value = msg.value.payload;\n\n        const isPrimitive =\n            typeof value === 'string' ||\n            typeof value === 'number' ||\n            typeof value === 'boolean';\n\n        try {\n            let text: ReactNode = <></>;\n\n            if (value === null || value === undefined || msg.isValueNull) {\n                // null: tombstone\n                text = <><DeleteOutlined style={{ fontSize: 16, color: 'rgba(0,0,0, 0.35)', verticalAlign: 'text-bottom', marginRight: '4px', marginLeft: '1px' }} /><code>Tombstone</code></>;\n            }\n            else if (msg.value.encoding == 'binary') {\n                // If the original data was binary, display as hex dump\n                text = msg.valueBinHexPreview;\n            }\n            else if (isPrimitive) {\n                // If we can show the value as a primitive, do so.\n                text = value;\n            }\n            else {\n                // Only thing left is 'object'\n                // Stuff like 'bigint', 'function', or 'symbol' would not have been deserialized\n                const previewTags = this.props.previewFields().filter(t => t.searchInMessageValue);\n                if (previewTags.length > 0) {\n                    const tags = getPreviewTags(value, previewTags);\n                    text = <span className='cellDiv fade' style={{ fontSize: '95%' }}>\n                        <div className={\"previewTags previewTags-\" + uiState.topicSettings.previewDisplayMode}>\n                            {tags.map((t, i) => <React.Fragment key={i}>{t}</React.Fragment>)}\n                        </div>\n                    </span>;\n                    return text;\n\n                }\n                else {\n                    // Normal display (json, no filters). Just stringify the whole object\n                    text = cullText(JSON.stringify(value), 300);\n                }\n            }\n\n            return <code><span className='cellDiv' style={{ fontSize: '95%' }}>{text}</span></code>;\n        }\n        catch (e) {\n            return <span style={{ color: 'red' }}>Error in RenderPreview: {((e as Error).message ?? String(e))}</span>;\n        }\n    }\n}\n\n\nfunction renderExpandedMessage(msg: TopicMessage, shouldExpand?: ((x: CollapsedFieldProps) => boolean)) {\n    return <div className='expandedMessage'>\n        <MessageMetaData msg={msg} />\n\n        {/* .ant-tabs-nav { width: ??; } */}\n        <Tabs animated={false} defaultActiveKey='value'>\n            <Tabs.TabPane key='key' tab='Key' disabled={msg.key == null || msg.key.size == 0}>\n                {renderPayload(msg.key, shouldExpand)}\n            </Tabs.TabPane>\n            <Tabs.TabPane key='value' tab='Value'>\n                {renderPayload(msg.value, shouldExpand)}\n            </Tabs.TabPane>\n            <Tabs.TabPane key='headers' tab='Headers' disabled={msg.headers.length == 0}>\n                <MessageHeaders msg={msg} />\n            </Tabs.TabPane>\n        </Tabs>\n    </div>;\n}\n\nfunction renderPayload(payload: Payload, shouldExpand?: ((x: CollapsedFieldProps) => boolean)) {\n    try {\n        if (payload === null || payload === undefined || payload.payload === null || payload.payload === undefined)\n            return <code>null</code>;\n\n        const val = payload.payload;\n        const isPrimitive =\n            typeof val === 'string' ||\n            typeof val === 'number' ||\n            typeof val === 'boolean';\n\n        const shouldCollapse = shouldExpand ? shouldExpand : false;\n\n        if (payload.encoding == 'binary') {\n            const mode = 'ascii' as ('ascii' | 'raw' | 'hex');\n            if (mode == 'raw') {\n                return <code style={{ fontSize: '.85em', lineHeight: '1em', whiteSpace: 'normal' }}>{val}</code>;\n            }\n            else if (mode == 'hex') {\n                const str = String(val);\n                let hex = '';\n                for (let i = 0; i < str.length; i++) {\n                    let n = str.charCodeAt(i).toString(16);\n                    if (n.length == 1) n = '0' + n;\n                    hex += n + ' ';\n                }\n\n                return <code style={{ fontSize: '.85em', lineHeight: '1em', whiteSpace: 'normal' }}>{hex}</code>;\n            }\n            else {\n                const str = String(val);\n                let result = '';\n                const isPrintable = /[\\x20-\\x7E]/;\n                for (let i = 0; i < str.length; i++) {\n                    let ch = String.fromCharCode(str.charCodeAt(i)); // str.charAt(i);\n                    ch = isPrintable.test(ch) ? ch : '. ';\n                    result += ch + ' ';\n                }\n\n                return <code style={{ fontSize: '.85em', lineHeight: '1em', whiteSpace: 'normal' }}>{result}</code>;\n            }\n        }\n\n        if (isPrimitive) {\n            return <div className='codeBox'>{String(val)}</div>;\n        }\n\n        return <KowlJsonView src={val} shouldCollapse={shouldCollapse} />;\n    }\n    catch (e) {\n        return <span style={{ color: 'red' }}>Error in RenderExpandedMessage: {((e as Error).message ?? String(e))}</span>;\n    }\n}\n\nconst MessageMetaData = observer((props: { msg: TopicMessage }) => {\n    const msg = props.msg;\n    const data = {\n        \"Key\": `${titleCase(msg.key.encoding)} (${prettyBytes(msg.key.size)})`,\n        \"Value\": `${titleCase(msg.value.encoding)} (${msg.value.schemaId > 0 ? `${msg.value.schemaId} / ` : ''}${prettyBytes(msg.value.size)})`,\n        \"Headers\": msg.headers.length > 0 ? `${msg.headers.length}` : \"No headers set\",\n        \"Compression\": msg.compression,\n        \"Transactional\": msg.isTransactional ? 'true' : 'false',\n        // \"Producer ID\": \"(msg.producerId)\",\n    };\n\n    return <div style={{ display: 'flex', flexWrap: 'wrap', fontSize: '0.75rem', gap: '1em 3em', color: 'rgba(0, 0, 0, 0.8)', margin: '1em 0em 1.5em .3em' }}>\n        {Object.entries(data).map(([k, v]) => <React.Fragment key={k}>\n            <div style={{ display: 'flex', rowGap: '.4em', flexDirection: 'column', fontFamily: 'Open Sans' }}>\n                <div style={{ fontWeight: 600 }}>{k}</div>\n                <div style={{ color: 'rgba(0, 0, 0, 0.6)', }}>{v}</div>\n            </div>\n        </React.Fragment>)}\n    </div>;\n});\n\nconst MessageHeaders = observer((props: { msg: TopicMessage }) => {\n\n    return <div className='messageHeaders'>\n        <div>\n            <Table\n                size='small' style={{ margin: '0', padding: '0' }}\n                indentSize={0}\n                dataSource={props.msg.headers}\n                pagination={false}\n                columns={[\n                    {\n                        width: 200, title: 'Key', dataIndex: 'key',\n                        render: headerKey => <span className='cellDiv' style={{ width: 'auto' }}>\n                            {headerKey\n                                ? <Ellipsis>{toSafeString(headerKey)}</Ellipsis>\n                                : renderEmptyIcon(\"Empty Key\")}\n                        </span>\n                    },\n                    {\n                        width: 'auto', title: 'Value', dataIndex: 'value',\n                        render: headerValue => {\n                            if (typeof headerValue.payload === 'undefined') return renderEmptyIcon('\"undefined\"');\n                            if (headerValue.payload === null) return renderEmptyIcon('\"null\"');\n                            if (typeof headerValue.payload === 'number') return <span>{String(headerValue.payload)}</span>;\n\n                            if (typeof headerValue.payload === 'string')\n                                return <span className='cellDiv'>{headerValue.payload}</span>;\n\n                            // object\n                            return <span className='cellDiv'>{toSafeString(headerValue.payload)}</span>;\n                        },\n                    },\n                    {\n                        width: 120, title: 'Encoding', dataIndex: 'value',\n                        render: payload => <span className='nowrap'>{payload.encoding}</span>\n                    },\n                ]}\n                expandable={{\n                    rowExpandable: header => (typeof header.value?.payload === 'object' && header.value?.payload != null) || typeof header.value?.payload === 'string', // names of 'value' and 'payload' should be swapped; but has to be fixed in backend\n                    expandIconColumnIndex: 1,\n                    expandRowByClick: true,\n                    expandedRowRender: header => typeof header.value?.payload !== 'object'\n                        ? <div className='codeBox' style={{ margin: '0', width: '100%' }}>{toSafeString(header.value.payload)}</div>\n                        : <KowlJsonView src={header.value.payload as object} style={{ margin: '2em 0' }} />,\n                }}\n                rowKey={r => r.key}\n            />\n            <br />\n        </div>\n    </div>;\n});\n\n\n@observer\nclass ColumnSettings extends Component<{ getShowDialog: () => boolean, setShowDialog: (show: boolean) => void }> {\n\n    render() {\n\n        const content = <>\n            <Paragraph>\n                <Text>\n                    Click on the column field on the text field and/or <b>x</b> on to remove it.<br />\n                </Text>\n            </Paragraph>\n            <div style={{ padding: '1.5em 1em', background: 'rgba(200, 205, 210, 0.16)', borderRadius: '4px' }}>\n                <ColumnOptions tags={uiState.topicSettings.previewColumnFields} />\n            </div>\n            <div style={{ marginTop: '1em' }}>\n                <h3 style={{ marginBottom: '0.5em' }}>More Settings</h3>\n                <Space size='large'>\n                    <OptionGroup label='Timestamp' options={{\n                        'Local DateTime': 'default',\n                        'Unix DateTime': 'unixTimestamp',\n                        'Relative': 'relative',\n                        'Local Date': 'onlyDate',\n                        'Local Time': 'onlyTime',\n                        'Unix Seconds': 'unixSeconds',\n                    }}\n                        value={uiState.topicSettings.previewTimestamps}\n                        onChange={e => uiState.topicSettings.previewTimestamps = e}\n                    />\n                </Space>\n            </div>\n        </>;\n\n        return <Modal\n            title={<span><FilterOutlined style={{ fontSize: '22px', verticalAlign: 'bottom', marginRight: '16px', color: 'hsla(209, 20%, 35%, 1)' }} />Column Settings</span>}\n            visible={this.props.getShowDialog()}\n            onOk={() => this.props.setShowDialog(false)}\n            onCancel={() => this.props.setShowDialog(false)}\n            width={750}\n            okText='Close'\n            cancelButtonProps={{ style: { display: 'none' } }}\n            closable={false}\n            maskClosable={true}\n        >\n            {content}\n        </Modal>;\n    }\n}\n\n@observer\nclass ColumnOptions extends Component<{ tags: ColumnList[] }> {\n\n    defaultColumnList: ColumnList[] = [\n        { title: 'Offset', dataIndex: 'offset' },\n        { title: 'Partition', dataIndex: 'partitionID' },\n        { title: 'Timestamp', dataIndex: 'timestamp' },\n        { title: 'Key', dataIndex: 'key' },\n        // { title: 'Headers', dataIndex: 'headers' },\n        { title: 'Value', dataIndex: 'value' },\n        // { title: 'Size', dataIndex: 'size' }, // size of the whole message is not available (bc it was a bad guess), might be added back later\n    ];\n\n    render() {\n        const defaultValues = uiState.topicSettings.previewColumnFields.map(column => column.title);\n        const children = this.defaultColumnList.map((column: ColumnList) =>\n            <Option value={column.dataIndex} key={column.dataIndex}>{column.title}</Option>\n        );\n\n        return <>\n            <Select\n                mode=\"multiple\"\n                style={{ width: '100%' }}\n                placeholder=\"Currently on default View, please select\"\n                defaultValue={defaultValues}\n                onChange={this.handleColumnListChange}\n            >\n                {children}\n            </Select>\n        </>;\n    }\n\n    handleColumnListChange = (values: string[]) => {\n        if (!values.length) {\n            uiState.topicSettings.previewColumnFields = [];\n        } else {\n            const columnsSelected = values\n                .map(value => this.defaultColumnList.find(columnList => columnList.dataIndex === value))\n                .filter(columnList => !!columnList) as ColumnList[];\n            uiState.topicSettings.previewColumnFields = columnsSelected;\n        }\n    }\n}\n\n\nconst makeHelpEntry = (title: string, content: ReactNode, popTitle?: string): ReactNode => (\n    <Popover key={title} trigger='click' title={popTitle} content={content} overlayClassName='noArrow' overlayStyle={{ maxWidth: '600px' }}\n    >\n        <Button type='link' size='small' style={{ fontSize: '1.2em' }}>{title}</Button>\n    </Popover>\n);\n\n// TODO Explain:\n// - multiple filters are combined with &&\n// - 'return' is optional if you only have an expression! as is ';'\n// - more examples for 'value', along with 'find(...)'\nconst helpEntries = [\n    makeHelpEntry('Basics', <ul style={{ margin: 0, paddingInlineStart: '15px' }}>\n        <li>The filter code is a javascript function body (click 'parameters' to see what arguments are available)</li>\n        <li>Return true to allow a message, return false to discard the message.</li>\n        <li>You can omit the 'return' keyword if your filter is just an 'expression'</li>\n        <li>If you have multiple active filters, they're combined with 'and'. Meaning that ALL filters a message is tested on must return true for it to be passed to the frontend.</li>\n        <li>The context is re-used between messages, but every partition has its own context</li>\n    </ul>),\n    makeHelpEntry('Parameters', <ul style={{ margin: 0, paddingInlineStart: '15px' }}>\n        <li><span className='codeBox'>offset</span> (number)</li>\n        <li><span className='codeBox'>partitionId</span> (number)</li>\n        <li><span className='codeBox'>key</span> (string)</li>\n        <li><span className='codeBox'>value</span> (object)</li>\n        <li><span className='codeBox'>headers</span> (object)</li>\n    </ul>),\n    makeHelpEntry('Examples', <ul style={{ margin: 0, paddingInlineStart: '15px' }}>\n        <li style={{ margin: '1em 0' }}><span className='codeBox'>offset &gt; 10000</span></li>\n        <li style={{ margin: '1em 0' }}><span className='codeBox'>value != null</span> Skips tombstone messages</li>\n        <li style={{ margin: '1em 0' }}><span className='codeBox'>if (key == 'example') return true</span></li>\n        <li style={{ margin: '1em 0' }}><span className='codeBox'>headers.myVersionHeader &amp;&amp; (headers.myVersionHeader &gt;&eq; 2)</span> Only messages that have a header entry like {'{key: \"myVersionHeader\", \"value:\" 12345}'}</li>\n        <li style={{ margin: '1em 0' }}><span className='codeBox'>return (partitionId == 2) &amp;&amp; (value.someProperty == 'test-value')</span></li>\n        <li style={{ margin: '1em 0' }}><div style={{ border: '1px solid #ccc', borderRadius: '4px' }}><img src={filterExample1} alt=\"Filter Example 1\" loading='lazy' /></div></li>\n        <li style={{ margin: '1em 0' }}><div style={{ border: '1px solid #ccc', borderRadius: '4px' }}><img src={filterExample2} alt=\"Filter Example 2\" loading='lazy' /></div></li>\n    </ul>),\n].genericJoin((last, cur, curIndex) => <div key={'separator_' + curIndex} style={{ display: 'inline', borderLeft: '1px solid #0003' }} />);\n\n@observer\nclass MessageSearchFilterBar extends Component {\n    /*\n    todo:\n        - does a click outside of the editor mean \"ok\" or \"cancel\"?\n            - maybe don't allow closing by clicking outside?\n            - ok: so we can make quick changes\n        - maybe submit the code live, show syntax errors below\n        - maybe havee a button that runs the code against the newest message?\n     */\n\n    @observable currentFilter: FilterEntry | null = null;\n    currentFilterBackup: string | null = null; // json of 'currentFilter'\n    currentIsNew = false; // true: 'onCancel' must remove the filter again\n\n    @observable hasChanges = false; // used by editor; shows \"revert changes\" when true\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    render() {\n        const settings = uiState.topicSettings.searchParams;\n\n        return <div className={styles.filterbar}>\n\n            <div className={styles.filters}>\n                {/* Existing Tags List  */}\n                {settings.filters?.map(e =>\n                    <Tag\n                        style={{ userSelect: 'none' }}\n                        className={e.isActive ? 'filterTag' : 'filterTag filterTagDisabled'}\n                        key={e.id}\n                        closable\n                        color={e.isActive ? 'blue' : undefined}\n                        onClose={() => settings.filters.remove(e)}\n                    >\n                        <SettingOutlined\n                            className='settingIconFilter'\n                            onClick={() => {\n                                this.currentIsNew = false;\n                                this.currentFilterBackup = toJson(e);\n                                this.currentFilter = e;\n                                this.hasChanges = false;\n                            }}\n                        />\n                        <span className={`filterName ${styles.filterName}`} onClick={() => e.isActive = !e.isActive}>\n                            {e.name ? e.name : (e.code ? e.code : 'New Filter')}\n                        </span>\n                    </Tag>\n                )}\n\n                {/* Add Filter Button */}\n                <Tag onClick={() => transaction(() => {\n                    this.currentIsNew = true;\n                    this.currentFilterBackup = null;\n                    this.currentFilter = new FilterEntry();\n                    this.hasChanges = false;\n                    settings.filters.push(this.currentFilter);\n                })}>\n                    <span className={styles.addFilter}> {/* marginRight: '4px' */}\n                        <PlusIcon size='small' />\n                    </span>\n                    {/* <span>New Filter</span> */}\n                </Tag>\n            </div>\n\n            {console.log(api.messageSearchPhase)}\n\n            {api.messageSearchPhase === null || api.messageSearchPhase === 'Done'\n                ? (\n                    <div className={styles.metaSection}>\n                        <span><DownloadOutlined className={styles.bytesIcon} /> {prettyBytes(api.messagesBytesConsumed)}</span>\n                        <span className={styles.time}><ClockCircleOutlined className={styles.timeIcon} /> {api.messagesElapsedMs ? prettyMilliseconds(api.messagesElapsedMs) : \"\"}</span>\n                    </div>\n                )\n                : (\n                    <div className={`${styles.metaSection} ${styles.isLoading}`}>\n                        <span className={`spinner ${styles.spinner}`} />\n                        <span className={`pulsating ${styles.spinnerText}`}>Fetching data...</span>\n                    </div>\n                )\n            }\n\n\n\n\n            {/* Editor */}\n            <Modal centered visible={this.currentFilter != null}\n                //title='Edit Filter'\n                closable={false}\n                title={null}\n                onOk={() => this.currentFilter = null}\n                onCancel={() => this.currentFilter = null}\n\n                destroyOnClose={true}\n                // footer={null}\n\n                okText='Close'\n                cancelButtonProps={{ style: { display: 'none' } }}\n                maskClosable={true}\n                footer={<div style={{ display: 'flex', gap: '16px', alignItems: 'center', justifyContent: 'flex-end' }}>\n                    <div style={{ fontFamily: '\"Open Sans\", sans-serif', fontSize: '10.5px', color: '#828282' }}>\n                        Changes are saved automatically\n                    </div>\n                    <Button type='primary' onClick={() => this.currentFilter = null} >Close</Button>\n                </div>}\n\n                bodyStyle={{ paddingTop: '18px', paddingBottom: '12px', display: 'flex', gap: '12px', flexDirection: 'column' }}\n            >\n                {this.currentFilter && <>\n\n                    {/* Title */}\n                    <span style={{ display: 'inline-flex', alignItems: 'center', marginBottom: '8px' }}>\n                        <span className='h3' style={{ marginRight: '0.3em' }}>Edit Filter</span>\n                        <Button style={{\n                            opacity: this.hasChanges ? 1 : 0,\n                            transform: this.hasChanges ? '' : 'translate(-10px 0px)',\n                            transition: 'all 0.4s ease-out',\n                            fontFamily: '\"Open Sans\", sans-serif',\n                            fontSize: '73%',\n                        }}\n                            danger type='dashed' size='small'\n                            onClick={() => this.revertChanges()}\n                        >\n                            Revert Changes\n                        </Button>\n                    </span>\n\n                    {/* Name */}\n                    <Label text='Display Name'>\n                        <Input\n                            style={{ padding: '2px 8px' }}\n                            value={this.currentFilter!.name}\n                            onChange={e => { this.currentFilter!.name = e.target.value; this.hasChanges = true; }}\n                            placeholder='will be shown instead of the code'\n                            size='small' />\n                    </Label>\n\n                    {/* Code Box */}\n                    <Label text='Filter Code'>\n                        <Editor\n                            value={this.currentFilter!.code}\n                            onValueChange={code => { this.currentFilter!.code = code; this.hasChanges = true; }}\n                            highlight={code => Prism.highlight(code, PrismLanguages[\"javascript\"], \"javascript\")}\n                            padding={10}\n                            style={{\n                                fontFamily: '\"Fira code\", \"Fira Mono\", monospace',\n                                fontSize: 12,\n                                minWidth: '300px',\n                                minHeight: '200px',\n                                border: '1px solid #0004',\n                                outline: 'none',\n                                borderRadius: '2px',\n                            }}\n                            textareaClassName='code-editor-textarea'\n                        />\n                    </Label>\n\n                    {/* Help Bar */}\n                    <Alert type='info' style={{ margin: '0px', padding: '3px 8px', }} message={<>\n                        <span style={{ fontFamily: '\"Open Sans\", sans-serif', fontWeight: 600, fontSize: '80%', color: '#0009' }}>\n                            <span>Help:</span>\n                            {helpEntries}\n                        </span>\n                    </>} />\n\n                </>}\n            </Modal>\n        </div>;\n    }\n\n    revertChanges() {\n        if (this.currentFilter && this.currentFilterBackup) {\n            const restored = JSON.parse(this.currentFilterBackup);\n            if (restored)\n                Object.assign(this.currentFilter, restored);\n            this.hasChanges = false;\n        }\n    }\n}\n\nfunction renderEmptyIcon(tooltipText?: string) {\n    if (!tooltipText) tooltipText = \"Empty\";\n    return <Tooltip title={tooltipText} mouseEnterDelay={0.1} getPopupContainer={findPopupContainer}><span style={{ opacity: 0.66, marginLeft: '2px' }}><SkipIcon /></span></Tooltip>;\n}\n\nfunction hasDeleteRecordsPrivilege(allowedActions: Array<TopicAction>) {\n    return allowedActions.includes('deleteTopicRecords') || allowedActions.includes('all');\n}\n\nfunction DeleteRecordsButton({\n    isCompacted,\n    allowedActions,\n    onClick,\n}: {\n    isCompacted: boolean;\n    allowedActions: Array<TopicAction>;\n    onClick: () => void;\n}) {\n    if (isCompacted) {\n        return (\n            <Tooltip placement=\"top\" title=\"Records on Topics with the `compact` cleanup policy cannot be deleted.\">\n                <Button disabled>Delete Records</Button>\n            </Tooltip>\n        );\n    } else if (hasDeleteRecordsPrivilege(allowedActions)) {\n        return (\n            <Button type=\"default\" danger onClick={onClick} disabled={isCompacted}>\n                Delete Records\n            </Button>\n        );\n    } else {\n        return (\n            <Tooltip placement=\"top\" title=\"You're not permitted to delete records on this topic.\">\n                <Button disabled>Delete Records</Button>\n            </Tooltip>\n        );\n    }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"copyHint\":\"KowlJsonView_copyHint__6XR1X\",\"tooltipTransformFix\":\"KowlJsonView_tooltipTransformFix__HYQAf\"};","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import React, { useEffect, useState } from 'react';\nimport { Alert, Input, Modal, notification, Select, Slider, Spin } from 'antd';\nimport { observer } from 'mobx-react';\nimport { api } from '../../../../state/backendApi';\nimport { DeleteRecordsResponseData, Partition, Topic, TopicOffset } from '../../../../state/restInterfaces';\nimport { RadioOptionGroup } from '../../../../utils/tsxUtils';\nimport { fromDecimalSeparated, keepInRange, prettyNumber, toDecimalSeparated } from '../../../../utils/utils';\nimport { range } from '../../../misc/common';\n\nimport styles from './DeleteRecordsModal.module.scss';\nimport { KowlTimePicker } from '../../../misc/KowlTimePicker';\n\ntype AllPartitions = 'allPartitions';\ntype SpecificPartition = 'specificPartition';\ntype PartitionOption = null | AllPartitions | SpecificPartition;\n\nconst SLIDER_INPUT_REGEX = /(^([1-9]\\d*)|(\\d{1,3}(,\\d{3})*)$)|^$/;\nconst DIGITS_ONLY_REGEX = /^\\d*$/;\n\nfunction TrashIcon() {\n    return (\n        <svg width=\"66\" height=\"67\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"33\" cy=\"33.6\" r=\"33\" fill=\"#F53649\" />\n            <path\n                d=\"M18.806 24.729h28.388M29.452 31.826V42.47M36.548 31.826V42.47M20.58 24.729l1.775 21.29a3.548 3.548 0 003.548 3.549h14.194a3.548 3.548 0 003.548-3.549l1.774-21.29\"\n                stroke=\"#fff\"\n                strokeWidth=\"3.333\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n            <path\n                d=\"M27.677 24.729v-5.322a1.774 1.774 0 011.775-1.775h7.096a1.774 1.774 0 011.774 1.774v5.323\"\n                stroke=\"#fff\"\n                strokeWidth=\"3.333\"\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </svg>\n    );\n}\n\nfunction SelectPartitionStep({\n    selectedPartitionOption,\n    onPartitionOptionSelected,\n    onPartitionSpecified: onSpecificPartitionSelected,\n    partitions,\n}: {\n    selectedPartitionOption: PartitionOption;\n    onPartitionOptionSelected: (v: PartitionOption) => void;\n    onPartitionSpecified: (v: null | number) => void;\n    partitions: Array<number>;\n}): JSX.Element {\n    return (\n        <>\n            <div className={styles.twoCol}>\n                <TrashIcon />\n                <p>\n                    You are about to delete records in your topic. Choose on what partitions you want to delete records.\n                    In the next step you can choose the new low water mark for your selected partitions.\n                </p>\n            </div>\n            <RadioOptionGroup<PartitionOption>\n                value={selectedPartitionOption}\n                onChange={(v) => {\n                    if (v === 'allPartitions') {\n                        onSpecificPartitionSelected(null);\n                    }\n                    onPartitionOptionSelected(v);\n                }}\n                showContent=\"onlyWhenSelected\"\n                options={[\n                    {\n                        value: 'allPartitions',\n                        title: 'All Partitions',\n                        subTitle:\n                            'Delete records until specified offset across all available partitions in this topic.',\n                    },\n                    {\n                        value: 'specificPartition',\n                        title: 'Specific Partition',\n                        subTitle: 'Delete records within a specific partition in this topic only.',\n                        content: (\n                            // Workaround for Ant Design Issue: https://github.com/ant-design/ant-design/issues/25959\n                            // fixes immediately self closing Select drop down after an option has already been selected\n                            <span\n                                onClick={(e) => {\n                                    e.preventDefault();\n                                    e.stopPropagation();\n                                }}\n                            >\n                                <Select<number>\n                                    size=\"middle\"\n                                    className={styles.partitionSelect}\n                                    onChange={onSpecificPartitionSelected}\n                                    defaultActiveFirstOption={false}\n                                    placeholder=\"Choose Partition\"\n                                >\n                                    {partitions.map((i) => (\n                                        <Select.Option key={i} value={i}>\n                                            Partition {i.toString()}\n                                        </Select.Option>\n                                    ))}\n                                </Select>\n                            </span>\n                        ),\n                    },\n                ]}\n            ></RadioOptionGroup>\n        </>\n    );\n}\n\ntype OffsetOption = null | 'highWatermark' | 'manualOffset' | 'timestamp';\ntype PartitionInfo = [SpecificPartition, number] | AllPartitions;\n\nconst SelectOffsetStep = ({\n    onOffsetOptionSelected: selectValue,\n    offsetOption: selectedValue,\n    topicName,\n    partitionInfo,\n    onOffsetSpecified,\n    timestamp,\n    onTimestampChanged,\n}: {\n    topicName: string;\n    offsetOption: OffsetOption;\n    onOffsetOptionSelected: (v: OffsetOption) => void;\n    partitionInfo: PartitionInfo;\n    onOffsetSpecified: (v: number) => void;\n    timestamp: number | null;\n    onTimestampChanged: (v: number) => void;\n}) => {\n    const upperOption =\n        partitionInfo === 'allPartitions'\n            ? {\n                  value: 'highWatermark' as OffsetOption,\n                  title: 'High Watermark',\n                  subTitle: 'Delete records until high watermark across all partitions in this topic.',\n              }\n            : {\n                  value: 'manualOffset' as OffsetOption,\n                  title: 'Manual Offset',\n                  subTitle: `Delete records until specified offset across all selected partitions (ID: ${partitionInfo[1]}) in this topic.`,\n                  content: (\n                      <ManualOffsetContent\n                          topicName={topicName}\n                          partitionInfo={partitionInfo}\n                          onOffsetSpecified={onOffsetSpecified}\n                      />\n                  ),\n              };\n\n    return (\n        <>\n            <div className={styles.twoCol}>\n                <TrashIcon />\n                <p>\n                    Choose the new low offset for your selected partitions. Take note that this is a soft delete and\n                    that the actual data may still be on the hard drive but not visible for any clients, even if they\n                    request the data.\n                </p>\n            </div>\n            <RadioOptionGroup<OffsetOption>\n                value={selectedValue}\n                onChange={selectValue}\n                showContent=\"onlyWhenSelected\"\n                options={[\n                    upperOption,\n                    {\n                        value: 'timestamp',\n                        title: 'Timestamp',\n                        subTitle: 'Delete all records prior to the selected timestamp.',\n                        content: (\n                            // Workaround for Ant Design Issue: https://github.com/ant-design/ant-design/issues/25959\n                            // fixes immediately self closing Select drop down after an option has already been selected\n                            <span\n                                onClick={(e) => {\n                                    e.preventDefault();\n                                    e.stopPropagation();\n                                }}\n                            >\n                                <KowlTimePicker\n                                    valueUtcMs={timestamp || Date.now().valueOf()}\n                                    onChange={onTimestampChanged}\n                                />\n                            </span>\n                        ),\n                    },\n                ]}\n            />\n        </>\n    );\n};\n\nconst ManualOffsetContent = observer(\n    ({\n        topicName,\n        onOffsetSpecified,\n        partitionInfo,\n    }: {\n        topicName: string;\n        partitionInfo: PartitionInfo;\n        onOffsetSpecified: (v: number) => void;\n    }) => {\n        const [sliderValue, setSliderValue] = useState(0);\n\n        const updateOffsetFromSlider = (v: number) => {\n            setSliderValue(v);\n            onOffsetSpecified(v);\n        };\n\n        if (api.topicPartitionErrors?.get(topicName) || api.topicWatermarksErrors?.get(topicName)) {\n            const partitionErrors = api.topicPartitionErrors\n                .get(topicName)\n                ?.map(({ partitionError }) => <li>{partitionError}</li>);\n            const waterMarksErrors = api.topicWatermarksErrors\n                .get(topicName)\n                ?.map(({ waterMarksError }) => <li>{waterMarksError}</li>);\n            const message = (\n                <>\n                    {partitionErrors && partitionErrors.length > 0 ? (\n                        <>\n                            <strong>Partition Errors:</strong>\n                            <ul>{partitionErrors}</ul>\n                        </>\n                    ) : null}\n                    {waterMarksErrors && waterMarksErrors.length > 0 ? (\n                        <>\n                            <strong>Watermarks Errors:</strong>\n                            <ul>{waterMarksErrors}</ul>\n                        </>\n                    ) : null}\n                </>\n            );\n            return <Alert type=\"error\" message={message} />;\n        }\n\n        const partitions = api.topicPartitions?.get(topicName);\n\n        if (!partitions) {\n            return <Spin />;\n        }\n\n        const [_, partitionId] = partitionInfo;\n        const partition = partitions.find((p) => p.id === partitionId);\n\n        if (!partition) {\n            return <Alert type=\"error\" message={`Partition of topic ${topicName} with ID ${partitionId} not found!`} />;\n        }\n\n        const { marks, min, max } = getMarks(partition);\n        return (\n            <div className={styles.sliderContainer}>\n                <Slider\n                    marks={marks}\n                    min={min}\n                    max={max}\n                    onChange={updateOffsetFromSlider}\n                    \n                    className={styles.slider}\n                />\n                <Input\n                    className={styles.sliderValue}\n                    value={sliderValue}\n                    onChange={(e) => {\n                        const { value } = e.target;\n                        if(!DIGITS_ONLY_REGEX.test(value)) return;\n                        updateOffsetFromSlider(Number(value))\n                    }}\n                    onBlur={() => {\n                        if (sliderValue < min) {\n                            updateOffsetFromSlider(min)\n                        } else if (sliderValue > max) {\n                            updateOffsetFromSlider(max)\n                        } else {\n                            updateOffsetFromSlider(sliderValue)\n                        }\n                    }}\n\n                    // onChange={(e) => {\n                    //     const { value } = e.target;\n                    //     if (!SLIDER_INPUT_REGEX.test(value)) return;\n                    //     const rangedValue = keepInRange(\n                    //         fromDecimalSeparated(value),\n                    //         min || 0,\n                    //         max || Number.MAX_SAFE_INTEGER\n                    //     );\n                    //     updateOffsetFromSlider(rangedValue);\n                    // }}\n                />\n            </div>\n        );\n    }\n);\n\nfunction getMarks(partition: Partition) {\n    if (!partition) return {\n        min: 0,\n        max: Infinity,\n    };\n\n    const diff = partition.waterMarkHigh - partition.waterMarkLow;\n\n    let marks: Array<number> = [];\n\n    if (diff > 0) {\n        marks = [partition.waterMarkLow, partition.waterMarkLow];\n    }\n\n    if (diff > 100) {\n        marks = [partition.waterMarkLow, partition.waterMarkLow + diff * 0.33, partition.waterMarkLow + diff * 0.67, partition.waterMarkHigh];\n    }\n\n    return {\n        min: partition.waterMarkLow,\n        max: partition.waterMarkHigh,\n        marks: formatMarks(marks),\n    };\n}\n\nfunction formatMarks(marks: number[]) {\n    return marks.reduce((acc, it) => {\n        const key = it.toFixed(0);\n        const value = prettyNumber(it);\n        acc[key] = value;\n        return acc;\n    }, {} as { [index: string]: string });\n}\n\ninterface DeleteRecordsModalProps {\n    topic: Topic | undefined | null;\n    visible: boolean;\n    onCancel: () => void;\n    onFinish: () => void;\n    afterClose: () => void;\n}\n\nexport default function DeleteRecordsModal(props: DeleteRecordsModalProps): JSX.Element {\n    const { visible, topic, onCancel, onFinish, afterClose } = props;\n\n    useEffect(() => {\n        topic?.topicName && api.refreshPartitionsForTopic(topic.topicName, true);\n    }, [topic?.topicName]);\n\n    const [partitionOption, setPartitionOption] = useState<PartitionOption>(null);\n    const [specifiedPartition, setSpecifiedPartition] = useState<null | number>(null);\n    const [offsetOption, setOffsetOption] = useState<OffsetOption>(null);\n    const [step, setStep] = useState<1 | 2>(1);\n    const [specifiedOffset, setSpecifiedOffset] = useState<number>(0);\n    const [okButtonLoading, setOkButtonLoading] = useState<boolean>(false);\n    const [timestamp, setTimestamp] = useState<number>(Date.now());\n    const [errors, setErrors] = useState<Array<string>>([]);\n\n    const hasErrors = errors.length > 0;\n    const isAllPartitions = partitionOption === 'allPartitions';\n    const isSpecficPartition = partitionOption === 'specificPartition';\n    const isManualOffset = offsetOption === 'manualOffset';\n    const isHighWatermark = offsetOption === 'highWatermark';\n    const isTimestamp = offsetOption === 'timestamp';\n\n    const handleFinish = async (responseData: DeleteRecordsResponseData | null | void) => {\n        if (responseData == null) {\n            setErrors([\n                'You are not allowed to delete records on this topic. Please contact your Kafka administrator.',\n            ]);\n            return;\n        }\n\n        const errorPartitions = responseData.partitions.filter((partition) => !!partition.error);\n\n        if (errorPartitions.length > 0) {\n            setErrors(errorPartitions.map(({ partitionId, error }) => `Partition ${partitionId}: ${error}`));\n            setOkButtonLoading(false);\n        } else {\n            onFinish();\n            notification['success']({\n                message: 'Records deleted successfully',\n            });\n        }\n    };\n\n    if (!topic) return <></>;\n\n    const isOkButtonDisabled = () => {\n        if (hasErrors) return false;\n\n        if (step === 1) {\n            return partitionOption === null || (isSpecficPartition && specifiedPartition === null);\n        }\n\n        if (step === 2) {\n            return offsetOption === null || (isTimestamp && timestamp === null);\n        }\n\n        return offsetOption === null;\n    };\n\n    const onOk = () => {\n        if (hasErrors) {\n            onFinish();\n        }\n\n        if (step === 1) {\n            setStep(2);\n            return;\n        }\n\n        setOkButtonLoading(true);\n\n        if (isAllPartitions && isHighWatermark) {\n            api.deleteTopicRecordsFromAllPartitionsHighWatermark(topic.topicName).then(handleFinish);\n        } else if (isSpecficPartition && isManualOffset) {\n            api.deleteTopicRecords(topic.topicName, specifiedOffset, specifiedPartition!).then(handleFinish);\n        } else if (isTimestamp && timestamp != null) {\n            api.getTopicOffsetsByTimestamp([topic.topicName], timestamp).then((topicOffsets) => {\n                if (isAllPartitions) {\n                    const pairs = topicOffsets[0].partitions.map(({ partitionId, offset }) => ({\n                        partitionId,\n                        offset,\n                    }));\n                    api.deleteTopicRecordsFromMultiplePartitionOffsetPairs(topic.topicName, pairs).then(handleFinish);\n                } else if (isSpecficPartition) {\n                    const partitionOffset = topicOffsets[0].partitions.find(\n                        (p) => specifiedPartition === p.partitionId\n                    )?.offset;\n\n                    if (partitionOffset != null) {\n                        api.deleteTopicRecords(topic.topicName, partitionOffset, specifiedPartition!).then(\n                            handleFinish\n                        );\n                    } else {\n                        setErrors([\n                            'No partition offset was specified, this should not happen. Please contact your Kowl administrator.',\n                        ]);\n                    }\n                }\n            });\n        } else {\n            setErrors(['Something went wrong, please contact your Kowl administrator.']);\n        }\n    };\n\n    const getPartitionInfo = (): PartitionInfo => {\n        if (specifiedPartition != null && partitionOption === 'specificPartition') {\n            return ['specificPartition', specifiedPartition];\n        }\n        return 'allPartitions';\n    };\n\n    return (\n        <Modal\n            title=\"Delete records in topic\"\n            visible={visible}\n            okType={hasErrors ? 'default' : 'danger'}\n            okText={hasErrors ? 'Ok' : step === 1 ? 'Choose End Offset' : 'Delete Records'}\n            onOk={onOk}\n            okButtonProps={{\n                disabled: isOkButtonDisabled(),\n                loading: okButtonLoading,\n            }}\n            onCancel={onCancel}\n            width=\"700px\"\n            afterClose={afterClose}\n        >\n            {hasErrors && (\n                <Alert\n                    type=\"error\"\n                    message={\n                        <>\n                            <p>\n                                Errors have occurred when processing your request. Please contact your Kafka\n                                Administrator.\n                            </p>\n                            <ul>\n                                {errors.map((error) => (\n                                    <li>{error}</li>\n                                ))}\n                            </ul>\n                        </>\n                    }\n                />\n            )}\n            {!hasErrors && step === 1 && (\n                <SelectPartitionStep\n                    partitions={range(0, topic.partitionCount)}\n                    onPartitionOptionSelected={setPartitionOption}\n                    selectedPartitionOption={partitionOption}\n                    onPartitionSpecified={setSpecifiedPartition}\n                />\n            )}\n            {!hasErrors && step === 2 && partitionOption != null && (\n                <SelectOffsetStep\n                    onOffsetOptionSelected={setOffsetOption}\n                    offsetOption={offsetOption}\n                    topicName={topic.topicName}\n                    onOffsetSpecified={setSpecifiedOffset}\n                    partitionInfo={getPartitionInfo()}\n                    timestamp={timestamp}\n                    onTimestampChanged={setTimestamp}\n                />\n            )}\n        </Modal>\n    );\n}\n","import { Component, ReactNode } from \"react\";\nimport React from \"react\";\nimport { Partition, Topic, } from \"../../../state/restInterfaces\";\nimport { Table, Alert, Tooltip, Popover, } from \"antd\";\nimport { observer } from \"mobx-react\";\nimport { api, } from \"../../../state/backendApi\";\nimport { sortField, makePaginationConfig } from \"../../misc/common\";\nimport { MotionAlways } from \"../../../utils/animationProps\";\nimport '../../../utils/arrayExtensions';\nimport { uiState } from \"../../../state/uiState\";\nimport { numberToThousandsString, DefaultSkeleton, InfoText, findPopupContainer, LayoutBypass } from \"../../../utils/tsxUtils\";\nimport { BrokerList } from \"../reassign-partitions/components/BrokerList\";\nimport { WarningTwoTone } from \"@ant-design/icons\";\n\n\n@observer\nexport class TopicPartitions extends Component<{ topic: Topic }> {\n\n    pageConfig = makePaginationConfig(100); // makePaginationConfig(uiSettings.topics.partitionPageSize);\n\n    render() {\n        const topic = this.props.topic;\n        let partitions = api.topicPartitions.get(topic.topicName);\n        if (partitions === undefined) return DefaultSkeleton;\n        if (partitions === null) partitions = []; // todo: show the error (if one was reported);\n\n        let warning: JSX.Element = <></>\n        if (topic.cleanupPolicy.toLowerCase() == 'compact')\n            warning = <Alert type=\"warning\" message=\"Topic cleanupPolicy is 'compact'. Message Count is an estimate!\" showIcon style={{ marginBottom: '1em' }} />\n\n        const table = <Table\n            size={'middle'} style={{ margin: '0', padding: '0', whiteSpace: 'nowrap' }} bordered={false}\n            showSorterTooltip={false}\n            pagination={this.pageConfig}\n            onChange={(pagination) => {\n                if (pagination.pageSize) uiState.topicSettings.partitionPageSize = pagination.pageSize;\n                this.pageConfig.current = pagination.current;\n                this.pageConfig.pageSize = pagination.pageSize;\n            }}\n            dataSource={partitions}\n            rowKey={x => x.id.toString()}\n            columns={[\n                {\n                    title: 'Partition ID', dataIndex: 'id', sorter: sortField('id'), defaultSortOrder: 'ascend',\n                    render: (v, p) => !p.hasErrors\n                        ? v\n                        : <span style={{ display: 'inline-flex', width: '100%' }}>\n                            <span>{v}</span>\n                            <span style={{ marginLeft: 'auto', marginRight: '2px', display: 'inline-block' }}>{renderPartitionError(p)}</span>\n                        </span>\n                },\n                {\n                    title: <InfoText tooltip=\"Low Water Mark\" tooltipOverText>Low</InfoText>,\n                    dataIndex: 'waterMarkLow',\n                    render: (value, p) => !p.hasErrors && numberToThousandsString(value),\n                    sorter: sortField('waterMarkLow'),\n                },\n                {\n                    title: <InfoText tooltip=\"High Water Mark\" tooltipOverText>High</InfoText>,\n                    dataIndex: 'waterMarkHigh',\n                    render: (value, p) => !p.hasErrors && numberToThousandsString(value),\n                    sorter: sortField('waterMarkHigh')\n                },\n                {\n                    title: 'Messages', key: 'msgCount',\n                    render: (_, p) => !p.hasErrors && numberToThousandsString(p.waterMarkHigh - p.waterMarkLow),\n                    sorter: (p1, p2) => (p1.waterMarksError || p2.waterMarksError)\n                        ? 0\n                        : (p1.waterMarkHigh - p1.waterMarkLow) - (p2.waterMarkHigh - p2.waterMarkLow)\n                },\n                {\n                    title: 'Brokers',\n                    render: (v, r) => r.replicas && <BrokerList brokerIds={r.replicas} leaderId={r.replicas.length > 0 ? r.replicas[0] : -1} />\n                }\n            ]} />\n\n        return <>\n            {warning}\n            {table}\n        </>\n    }\n}\n\nfunction renderPartitionError(partition: Partition) {\n    const txt = [partition.partitionError, partition.waterMarksError].join('\\n\\n');\n\n    return <Popover\n        title='Partition Error'\n        placement='rightTop' overlayClassName='popoverSmall'\n        getPopupContainer={findPopupContainer}\n        content={<div style={{ maxWidth: '500px', whiteSpace: 'pre-wrap' }}>\n            {txt}\n        </div>\n        }\n    >\n        <span>\n            <LayoutBypass justifyContent='center' alignItems='center' width='20px' height='18px'>\n                <span style={{ fontSize: '19px' }}>\n                    <WarningTwoTone twoToneColor='orange' />\n                </span>\n            </LayoutBypass>\n        </span>\n    </Popover>\n\n}","import { Checkbox, Input } from 'antd';\nimport { AnimatePresence } from 'framer-motion';\nimport { autorun, IReactionDisposer, makeObservable, transaction, untracked } from 'mobx';\nimport { observer } from 'mobx-react';\nimport React, { Component } from 'react';\nimport { animProps_span_searchResult, MotionSpan } from '../../utils/animationProps';\nimport { FilterableDataSource } from '../../utils/filterableDataSource';\nimport { clone } from '../../utils/jsonUtils';\n\n// todo: extract out where the filterText is retreived from / saved.\n//       this component was originally extracted out of another component, but we probably want to re-use it elsewhere in the future\n@observer\nclass SearchBar<TItem> extends Component<{\n    dataSource: () => TItem[],\n    isFilterMatch: (filter: string, item: TItem) => boolean,\n    filterText: string,\n    onQueryChanged: (value: string) => void,\n    onFilteredDataChanged: (data: TItem[]) => void,\n}> {\n\n    private filteredSource = {} as FilterableDataSource<TItem>;\n    autorunDisposer: IReactionDisposer | undefined = undefined;\n\n    /*\n        todo: autocomplete:\n        - save as suggestion on focus lost, enter, or clear\n        - only show entries with matching start\n    */\n    // todo: allow setting custom \"rows\" to search, and case sensitive or not (pass those along to isFilterMatch)\n\n    constructor(p: any) {\n        super(p);\n        this.filteredSource = new FilterableDataSource<TItem>(this.props.dataSource, this.props.isFilterMatch);\n        this.filteredSource.filterText = this.props.filterText;\n\n        this.onChange = this.onChange.bind(this);\n    }\n\n    componentDidMount() {\n        this.autorunDisposer = autorun(() => {\n            const data = this.filteredSource.data;\n\n            transaction(() => {\n                setImmediate(() => {\n                    this.props.onFilteredDataChanged(data);\n                });\n            });\n        });\n    }\n\n    onChange(e: React.ChangeEvent<HTMLInputElement>) {\n        this.filteredSource.filterText = e.target.value;\n        this.props.onQueryChanged(e.target.value);\n    }\n\n    componentWillUnmount() {\n        this.filteredSource.dispose();\n        if (this.autorunDisposer) this.autorunDisposer();\n    }\n\n    render() {\n        return <div style={{ marginBottom: '.5rem', padding: '0', whiteSpace: 'nowrap', display: 'flex', alignItems: 'center' }}>\n            {/* <AutoComplete placeholder='Quick Search' size='large'\n                style={{ width: 'auto', padding: '0' }}\n                onChange={v => this.filteredSource.filterText = String(v)}\n                dataSource={['battle-logs', 'customer', 'asdfg', 'kafka', 'some word']}\n            > */}\n            <Input allowClear={true} placeholder='Quick Search' size='large' style={{ width: '350px' }}\n                onChange={this.onChange}\n                value={this.props.filterText}\n            // addonAfter={\n            //     <Popover trigger='click' placement='right' title='Search Settings' content={<this.Settings />}>\n            //         <Icon type='setting' style={{ color: '#0006' }} />\n            //     </Popover>\n            // }\n            />\n\n            <this.FilterSummary />\n        </div>;\n    }\n\n    Settings = observer(() => {\n        return <div>\n            <Checkbox checked={true}>Column 1</Checkbox>\n            <div style={{ height: 1, margin: '1em 0', background: '#0003' }} />\n            <Checkbox>Case-Sensitive</Checkbox>\n        </div>;\n    })\n\n    FilterSummary = observer((() => {\n        const searchSummary = this.computeFilterSummary();\n\n        return (\n            <AnimatePresence>\n                {searchSummary &&\n                    <MotionSpan\n                        identityKey={searchSummary?.identity ?? 'null'} // identityKey={searchSummary?.identity ?? 'null'}\n                        overrideAnimProps={animProps_span_searchResult}\n                    >\n                        <span style={{ opacity: 0.8, paddingLeft: '1em' }}>\n                            {searchSummary?.node}\n                        </span>\n                    </MotionSpan>\n                }\n            </AnimatePresence>\n\n        );\n        // eslint-disable-next-line no-extra-bind\n    }).bind(this));\n\n    computeFilterSummary(): { identity: string, node: React.ReactNode } | null {\n        const source = this.props.dataSource();\n        if (!source || source.length == 0) {\n            // console.log('filter summary:');\n            // console.dir(source);\n            // console.dir(this.filteredSource.filterText);\n            return null;\n        }\n\n        if (!this.filteredSource.lastFilterText)\n            return null;\n\n        const sourceLength = source.length;\n        const resultLength = this.filteredSource.data.length;\n\n        if (sourceLength == resultLength)\n            return { identity: 'all', node: <span>Filter matched everything</span> };\n\n        return { identity: 'r', node: <span><span style={{ fontWeight: 600 }}>{this.filteredSource.data.length}</span> results</span> };\n    }\n\n}\n\nexport default SearchBar;","import React, { Component } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Table } from \"antd\";\nimport { ColumnProps } from \"antd/lib/table\";\nimport { api } from \"../../../state/backendApi\";\nimport { makePaginationConfig } from \"../../misc/common\";\nimport { Broker } from \"../../../state/restInterfaces\";\nimport { transaction } from \"mobx\";\nimport { prettyBytesOrNA } from \"../../../utils/utils\";\nimport { SelectionInfoBar } from \"./components/StatisticsBars\";\nimport { PartitionSelection } from \"./ReassignPartitions\";\nimport { uiSettings } from \"../../../state/ui\";\n\n\n@observer\nexport class StepSelectBrokers extends Component<{ selectedBrokerIds: number[], partitionSelection: PartitionSelection }> {\n    pageConfig = makePaginationConfig(uiSettings.reassignment.pageSizeBrokers ?? 10);\n\n\n    brokers: Broker[];\n\n    constructor(props: any) {\n        super(props);\n        this.brokers = api.clusterInfo!.brokers;\n    }\n\n    render() {\n        if (!this.brokers || this.brokers.length == 0) {\n            console.error('brokers', { brokers: this.brokers, apiClusterInfo: api.clusterInfo });\n            return <div>Error: no brokers available</div>;\n        }\n\n        const selectedBrokers = this.props.selectedBrokerIds;\n\n        const columns: ColumnProps<Broker>[] = [\n            { title: 'ID', width: 40, dataIndex: 'brokerId' },\n            { title: 'Broker Address', width: undefined, dataIndex: 'address' },\n            { title: 'Rack', width: undefined, dataIndex: 'rack' },\n            { title: 'Used Space', width: 150, dataIndex: 'logDirSize', render: prettyBytesOrNA },\n        ];\n\n        return <>\n            <div style={{ margin: '2em 1em' }}>\n                <h2>Target Brokers</h2>\n                <p>Choose the target brokers to move the selected partitions to. Kowl will consider them as desired targets and distribute partitions across the available racks of the selected target brokers.</p>\n            </div>\n\n            <SelectionInfoBar partitionSelection={this.props.partitionSelection} margin=\"1em\" />\n\n            <Table\n                style={{ margin: '0', }} size='middle'\n                pagination={this.pageConfig}\n                onChange={(p) => {\n                    if (p.pageSize) uiSettings.reassignment.pageSizeBrokers = p.pageSize;\n                    this.pageConfig.current = p.current;\n                    this.pageConfig.pageSize = p.pageSize;\n                }}\n\n                dataSource={this.brokers}\n                columns={columns}\n\n                onRow={record => ({\n                    onClick: () => selectedBrokers.includes(record.brokerId)\n                        ? selectedBrokers.remove(record.brokerId)\n                        : selectedBrokers.push(record.brokerId),\n                })}\n\n                rowKey='brokerId'\n                rowClassName={() => 'pureDisplayRow'}\n                rowSelection={{\n                    type: 'checkbox',\n                    selectedRowKeys: selectedBrokers.slice(),\n                    onChange: (keys, values) => {\n                        transaction(() => {\n                            selectedBrokers.splice(0);\n                            for (const broker of values)\n                                selectedBrokers.push(broker.brokerId);\n                        });\n                    },\n                }} />\n        </>;\n    }\n}\n","import React, { Component } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Button, Checkbox, Empty, Input, Select, Slider, Table } from \"antd\";\nimport { ColumnProps } from \"antd/lib/table\";\nimport { api } from \"../../../state/backendApi\";\nimport { makePaginationConfig } from \"../../misc/common\";\nimport { Partition, PartitionReassignmentRequest, Topic, TopicAssignment } from \"../../../state/restInterfaces\";\nimport { computed, makeObservable, observable } from \"mobx\";\nimport { prettyBytesOrNA, prettyMilliseconds } from \"../../../utils/utils\";\nimport { DefaultSkeleton, Label, InfoText } from \"../../../utils/tsxUtils\";\nimport { BrokerList } from \"./components/BrokerList\";\nimport ReassignPartitions, { PartitionSelection, } from \"./ReassignPartitions\";\nimport { clone, toJson } from \"../../../utils/jsonUtils\";\nimport { computeMovedReplicas } from \"./logic/utils\";\nimport { uiSettings } from \"../../../state/ui\";\nimport { IsDev } from \"../../../utils/env\";\nimport { BandwidthSlider } from \"./components/BandwidthSlider\";\n\nexport type PartitionWithMoves = Partition & {\n    brokersBefore: number[],\n    brokersAfter: number[],\n    // numAddedBrokers = number of brokers that are \"new\" to the partition\n    // So only *new* brokers, not counting brokers that have previously (and maybe still are) hosted a replica of the partition\n    numAddedBrokers: number,\n    numRemovedBrokers: number,\n    changedLeader: boolean,\n    anyChanges: boolean, // if false, replica assignment is exactly as before\n};\nexport type TopicWithMoves = { topicName: string; topic: Topic; allPartitions: Partition[]; selectedPartitions: PartitionWithMoves[]; };\n\n@observer\nexport class StepReview extends Component<{\n    partitionSelection: PartitionSelection,\n    topicsWithMoves: TopicWithMoves[],\n    assignments: PartitionReassignmentRequest,\n    reassignPartitions: ReassignPartitions, // since api is still changing, we pass parent down so we can call functions on it directly\n}> {\n    @observable unused: number = 0;\n\n    pageConfig = makePaginationConfig(uiSettings.reassignment.pageSizeReview, true);\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    render() {\n        if (!api.topics)\n            return DefaultSkeleton;\n        if (api.topicPartitions.size == 0)\n            return <Empty />;\n\n\n        const columns: ColumnProps<TopicWithMoves>[] = [\n            {\n                width: undefined, title: 'Topic', dataIndex: 'topicName', defaultSortOrder: 'ascend',\n            },\n            {\n                width: '50%', title: 'Brokers Before',\n                render: (v, r) => {\n                    const brokersBefore = r.selectedPartitions.flatMap(x => x.brokersBefore).distinct().sort((a, b) => a - b);\n                    return <BrokerList brokerIds={brokersBefore} />\n                }\n            },\n            {\n                width: '50%', title: 'Brokers After',\n                render: (v, r) => {\n                    const plannedBrokers = r.selectedPartitions.flatMap(x => x.brokersAfter).distinct().sort((a, b) => a - b);\n                    return <BrokerList brokerIds={plannedBrokers} />\n                }\n            },\n            {\n                width: 100, title: (p) =>\n                    <InfoText\n                        tooltip=\"The number of replicas that will be moved to a different broker.\"\n                        maxWidth='180px'\n                    >Reassignments</InfoText>,\n                render: (v, r) => r.selectedPartitions.sum(p => p.numAddedBrokers),\n            },\n            {\n                width: 120, title: 'Estimated Traffic',\n                render: (v, r) => prettyBytesOrNA(r.selectedPartitions.sum(p => p.numAddedBrokers * p.replicaSize)),\n            },\n        ];\n\n        return <>\n            <div style={{ margin: '2em 1em' }}>\n                <h2>Review Reassignment Plan</h2>\n                <p>Kowl computed the following reassignment plan to distribute the selected partitions onto the selected brokers.</p>\n            </div>\n\n            <Table\n                style={{ margin: '0', }} size={'middle'}\n                pagination={this.pageConfig}\n                onChange={(p) => {\n                    if (p.pageSize) uiSettings.reassignment.pageSizeReview = p.pageSize;\n                    this.pageConfig.current = p.current;\n                    this.pageConfig.pageSize = p.pageSize;\n                }}\n                dataSource={this.props.topicsWithMoves}\n                rowKey={r => r.topicName}\n                rowClassName={() => 'pureDisplayRow'}\n                columns={columns}\n                expandable={{\n                    expandIconColumnIndex: 0,\n                    expandRowByClick: true,\n                    expandedRowRender: topic => topic.selectedPartitions\n                        ? <ReviewPartitionTable\n                            topic={topic.topic}\n                            topicPartitions={topic.selectedPartitions}\n                            assignments={this.props.assignments.topics.first(t => t.topicName == topic.topicName)!} />\n                        : <>Error loading partitions</>,\n                }}\n            />\n\n            {this.reassignmentOptions()}\n\n            {this.summary()}\n        </>;\n    }\n\n    reassignmentOptions() {\n        const settings = uiSettings.reassignment;\n\n        return <div style={{ margin: '4em 1em 3em 1em' }}>\n            <h2>Bandwidth Throttle</h2>\n            <p>Using throttling you can limit the network traffic for reassignments.</p>\n\n            <div style={{ marginTop: '2em', paddingBottom: '1em' }}>\n                <BandwidthSlider settings={settings} />\n            </div>\n\n            <ul style={{ marginTop: '0.5em' }}>\n                <li>Throttling applies to all replication traffic, not just to active reassignments.</li>\n                <li>Once the reassignment completes you'll have to remove the throttling configuration. <br />\n                    Kowl will show a warning below the \"Current Reassignments\" table when there are throttled topics that are no longer being reassigned.\n                </li>\n            </ul>\n        </div>\n    }\n\n    summary() {\n        const settings = uiSettings.reassignment;\n        const maxReplicationTraffic = settings.maxReplicationTraffic ?? 0;\n\n        const trafficStats = this.props.topicsWithMoves.map(t => {\n            const partitionStats = t.selectedPartitions.map(p => {\n                const totalTraffic = p.replicaSize * p.numAddedBrokers;\n\n                if (totalTraffic == 0) {\n                    // Moving zero replicas or replicas with zero size won't take any time\n                    return {\n                        ...p,\n                        totalTraffic: 0,\n                        potentialBandwidth: 0,\n                        estimatedTimeSec: 0,\n                    };\n                }\n\n                // if there are 2 senders and 2 receivers, the bandwidth limit is effectively double\n                // but for (1sender and 2receivers), or (2senders and 1receiver) it won't go any faster.\n                const senders = p.brokersBefore.except(p.brokersAfter);\n                const receivers = p.brokersAfter.except(p.brokersBefore);\n\n                const participatingTransferPairs = Math.min(senders.length, receivers.length);\n                const potentialBandwidth = participatingTransferPairs * maxReplicationTraffic;\n\n                let estimatedTimeSec = totalTraffic / potentialBandwidth;\n                if (estimatedTimeSec <= 0 || !Number.isFinite(estimatedTimeSec)) {\n                    estimatedTimeSec = 0;\n                }\n\n                return {\n                    ...p,\n                    totalTraffic: totalTraffic,\n                    potentialBandwidth: potentialBandwidth,\n                    estimatedTimeSec: estimatedTimeSec,\n                }\n            });\n\n            return {\n                ...t,\n                partitionStats: partitionStats,\n            }\n        });\n        const estimatedTimeSec = trafficStats.sum(t => t.partitionStats.sum(p => p.estimatedTimeSec));\n\n        const totalTraffic = trafficStats.sum(t => t.partitionStats.sum(p => p.totalTraffic));\n\n        const isThrottled = settings.maxReplicationTraffic != null && settings.maxReplicationTraffic > 0;\n        const trafficThrottle = isThrottled\n            ? prettyBytesOrNA(settings.maxReplicationTraffic ?? 0) + '/s'\n            : 'disabled';\n\n        const estimatedTime = !isThrottled ? '-'\n            : estimatedTimeSec < 10\n                ? '< 10 seconds'\n                : prettyMilliseconds(estimatedTimeSec * 1000, { secondsDecimalDigits: 0, unitCount: 2, verbose: true })\n\n        const data = [\n            { title: 'Moved Replicas', value: this.props.topicsWithMoves.sum(t => t.selectedPartitions.sum(p => p.numAddedBrokers)) },\n            { title: 'Total Traffic', value: \"~\" + prettyBytesOrNA(totalTraffic) },\n            { title: 'Traffic Throttle', value: trafficThrottle },\n            { title: 'Estimated Time', value: estimatedTime },\n        ];\n\n        return <div style={{ margin: '2em 1em 5em 1em' }}>\n            <h2>Summary</h2>\n            <div style={{\n                display: 'flex', flexWrap: 'wrap', gap: '3em',\n                marginTop: '1em',\n                color: 'hsl(0deg, 0%, 30%)'\n            }}>\n                {data.map(item => <div key={item.title}>\n                    <div style={{ opacity: 0.6, }}>{item.title}</div>\n                    <div style={{ fontSize: 'calc(1em * 24 / 14)', }}>{item.value}</div>\n                </div>)}\n            </div>\n        </div>;\n    }\n}\n\n\n@observer\nclass ReviewPartitionTable extends Component<{ topic: Topic, topicPartitions: Partition[], assignments: TopicAssignment }> {\n    partitionsPageConfig = makePaginationConfig(100, true);\n    brokerTooltip = <div style={{ maxWidth: '380px', fontSize: 'smaller' }}>\n        These are the brokers this partitions replicas are assigned to.<br />\n        The broker highlighted in blue is currently hosting/handling the leading partition, while the brokers shown in grey are hosting the partitions replicas.\n    </div>;\n\n    render() {\n\n        return <div style={{ paddingTop: '4px', paddingBottom: '8px', width: 0, minWidth: '100%' }}>\n            <Table size='small' className='nestedTable'\n                dataSource={this.props.topicPartitions}\n                pagination={this.partitionsPageConfig}\n                scroll={{ y: '300px' }}\n                rowKey={r => r.id}\n                columns={[\n                    { width: 120, title: 'Partition', dataIndex: 'id', sortOrder: 'ascend', sorter: (a, b) => a.id - b.id },\n                    {\n                        width: undefined, title: 'Brokers Before',\n                        render: (v, record) => <BrokerList brokerIds={record.replicas} leaderId={record.leader} />\n                    },\n                    {\n                        width: undefined, title: 'Brokers After',\n                        render: (v, record) => {\n                            const partitionAssignments = this.props.assignments.partitions.first(p => p.partitionId == record.id);\n                            if (partitionAssignments == null || partitionAssignments.replicas == null) return '??';\n                            return <BrokerList brokerIds={partitionAssignments.replicas} leaderId={partitionAssignments.replicas[0]} />\n                        }\n                    },\n                ]}\n            />\n        </div>\n    }\n}\n\n","import React, { ReactNode, Component, CSSProperties } from \"react\";\n\n\nclass Card extends Component<{ id?: string, style?: CSSProperties, className?: string }> {\n\n    render() {\n        return <div id={this.props.id} className={'kowlCard ' + (this.props.className ?? '')} style={this.props.style}>\n            {this.props.children}\n        </div>\n    }\n}\n\nexport default Card;\n","import { untracked } from \"mobx\";\nimport { Topic, Partition, Broker, ConfigEntry, BrokerConfig } from \"../../../../state/restInterfaces\";\nimport { clone, toJson } from \"../../../../utils/jsonUtils\";\n\n// Requirements:\n// 1. Each replica must be on a different broker (unless replicationFactor < brokerCount makes it impossible).\n// 2. Partitions should be balanced as evenly as possible across the brokers\n\n// Optimization:\n// If, while we're looking for a broker to assigning a replica to, we find there are multiple \"good\" brokers, we can\n// optimize according to the following priority list.\n//   1. rack: try to stay within the same rack, maybe even the same broker (is that neccesary?)\n//   2. partition count, brokers should have roughly the same number of replicas (need to get all topics, all their partitions to even know which broker has which partitions)\n//   3. disk space, only if partition count is equal and can't help us decide\n\n// also optimize network traffic: that means trying to stay \"inter rack\" (bc that traffic is mostly free)\n//\n// maybe \"unassign\" all replicas, subtracing used disk space from that broker,\n// then, from a fresh start, assign preferably to the original broker, or to a broker in the same rack, or ... (using optimization priorities)\n\n\n// Input for a reassignment computation. A selection of partitions that should be reassigned.\nexport type TopicPartitions = {\n    topic: Topic // topic the partitions belong to\n    partitions: Partition[], // selected partitions\n}\n\n// Result of a reassignment computation. Tells you what brokers to use for each partition in each topic.\nexport type TopicAssignments = {\n    [topicName: string]: {\n        [partitionId: number]: PartitionAssignments\n    }\n};\nexport type PartitionAssignments = {\n    partition: Partition,\n    brokers: Broker[] // brokers the replicas are on; meaning length is always equal to the replicationFactor\n};\n\ntype BrokerReplicaCount = { // track how many replicas were assigned to a broker (over all partitions)\n    broker: ExBroker;\n    assignedReplicas: number;\n};\n\nexport type ApiData = { brokers: Broker[], topics: Topic[], topicPartitions: Map<string, Partition[]> };\n\n\nfunction computeReassignments(\n    apiData: ApiData,\n    selectedTopicPartitions: TopicPartitions[],\n    targetBrokers: Broker[]\n): TopicAssignments {\n\n    checkArguments(apiData, selectedTopicPartitions, targetBrokers);\n\n    // Track information like used disk space per broker, so we extend each broker with some metadata\n    const allExBrokers = apiData.brokers.map(b => new ExBroker(b));\n    const targetExBrokers = allExBrokers.filter(exb => targetBrokers.find(b => exb.brokerId == b.brokerId) != undefined);\n    const getExBroker = (brokerId: number): ExBroker => {\n        const exBroker = allExBrokers.find(x => x.brokerId == brokerId);\n        if (exBroker === undefined) throw new Error(\"cannot find ExBroker with brokerId \" + brokerId);\n        return exBroker;\n    };\n\n    // Recompute broker stats:\n    // For the sake of calculation, it is easier to start with a fresh slate.\n    // So we first 'virtually' remove these assignments by going through each replica\n    // and subtracting its size(disk space) from broker it is on.\n    for (const broker of allExBrokers)\n        broker.recompute(apiData, selectedTopicPartitions);\n\n    const resultAssignments: TopicAssignments = {};\n    for (const t of selectedTopicPartitions) {\n        resultAssignments[t.topic.topicName] = {};\n        for (const partition of t.partitions)\n            resultAssignments[t.topic.topicName][partition.id] = { partition: partition, brokers: [] };\n    }\n\n    // Distribute:\n    // Go through each topic, assign the replicas of its partitions to the brokers\n    for (const topicPartitions of selectedTopicPartitions) {\n        if (topicPartitions.topic.replicationFactor <= 0) continue; // must be an error?\n        if (topicPartitions.partitions.length == 0) continue; // no partitions to be reassigned in this topic\n\n        computeTopicAssignments(topicPartitions, targetExBrokers, allExBrokers, resultAssignments[topicPartitions.topic.topicName]);\n    }\n\n    // Optimize Leaders:\n    // Every broker should have roughly the same number of partitions it leads.\n    const skewActual = calcRange(allExBrokers, x => x.actualLeader);\n\n    const optimizationLog: { skewBefore: number, skewAfter: number, swaps: number }[] = [];\n    for (let round = 0; round < 10; round++) {\n        const { range: skewBefore } = calcRange(allExBrokers, x => x.plannedLeader);\n        const leaderSwitchCount = balanceLeaders(selectedTopicPartitions, resultAssignments, allExBrokers, apiData);\n        const { range: skewAfter } = calcRange(allExBrokers, x => x.plannedLeader);\n\n        optimizationLog.push({\n            skewBefore,\n            skewAfter,\n            swaps: leaderSwitchCount\n        });\n\n        if (skewAfter == 0 || skewBefore <= skewAfter) {\n            break;\n        }\n    }\n\n    const skewPlannedInCluster = calcRange(allExBrokers, x => x.plannedLeader);\n    console.debug(`leader skew in cluster`, {\n        actual: {\n            skew: skewActual.range,\n            min: `${skewActual.minValue} partitions (brokerId ${skewActual.min?.brokerId})`,\n            max: `${skewActual.maxValue} partitions (brokerId ${skewActual.max?.brokerId})`,\n        },\n\n        planned: {\n            skew: skewPlannedInCluster.range,\n            min: `${skewPlannedInCluster.minValue} partitions (brokerId ${skewPlannedInCluster.min?.brokerId})`,\n            max: `${skewPlannedInCluster.maxValue} partitions (brokerId ${skewPlannedInCluster.max?.brokerId})`,\n        },\n\n        log: optimizationLog\n    });\n\n    const criticalBrokers = findRiskyPartitions(allExBrokers, selectedTopicPartitions, resultAssignments, getExBroker);\n    reportRiskyPartitions(criticalBrokers);\n\n    return resultAssignments;\n}\n\nconst untrackedCompute = function (apiData: ApiData,\n    selectedTopicPartitions: TopicPartitions[],\n    targetBrokers: Broker[]\n): TopicAssignments {\n    return untracked(() => computeReassignments(apiData, selectedTopicPartitions, targetBrokers));\n}\nexport { untrackedCompute as computeReassignments };\n\n// Compute, for the partitions of a single topic, to which brokers their replicas should be assigned to.\nfunction computeTopicAssignments(\n    topicPartitions: TopicPartitions,\n    targetBrokers: ExBroker[],\n    allBrokers: ExBroker[],\n    resultAssignments: { [partitionId: number]: PartitionAssignments; },\n) {\n    const { topic, partitions } = topicPartitions;\n\n    // shouldn't happen, if the user didn't select any partitions, the entry for that topic shouldn't be there either\n    if (partitions.length == 0) return;\n\n    const replicationFactor = topic.replicationFactor;\n    if (replicationFactor <= 0) return; // normally it shouldn't be possible; every topic must have at least 1 replica for each of its partitions\n\n    // Track how many replicas (of this topic!) were assigned to each broker\n    const brokerReplicaCount: BrokerReplicaCount[] = targetBrokers.map(b => ({ broker: b, assignedReplicas: 0 }));\n\n    // Find the most suitable brokers for each partition\n    partitions.sort((a, b) => a.id - b.id);\n    for (const partition of partitions) {\n        // Find brokers to host the replicas (order is not important, leader is determined later)\n        const replicaAssignments = computeReplicaAssignments(partition, replicationFactor, brokerReplicaCount, allBrokers);\n\n        resultAssignments[partition.id].brokers = replicaAssignments;\n    }\n}\n\n\n// todo:\n// The current approach is \"greedy\" in that it just wants to assign a replica to whatever broker.\n// But because of 'example#2' it is possible that we'll end up causing a lot of network traffic that\n// could have been avoided if we had just the two brokers.\n\n// A better appraoch would be to find the best broker for each replica, but instead of commiting to that immediately,\n// we'd first save that as a \"pending\" assignment, along with a score of how much work that assignment would be.\n// That'd give us a list of pending assignments, which we can sort by their score.\n// To determine that score we'd just re-use the first two very simple metrics (same broker is best: score=2, and same rack is almost as good: score=1)\n\nfunction computeReplicaAssignments(partition: Partition, replicas: number, brokerReplicaCount: BrokerReplicaCount[], allBrokers: ExBroker[]): ExBroker[] {\n    const resultBrokers: ExBroker[] = []; // result\n    const sourceBrokers = partition.replicas.map(id => allBrokers.first(b => b.brokerId == id)!);\n    if (sourceBrokers.any(x => x == null)) throw new Error(`replicas of partition ${partition.id} (${toJson(partition.replicas)}) define a brokerId which can't be found in 'allBrokers': ${toJson(allBrokers.map(b => ({ id: b.brokerId, address: b.address, rack: b.rack })))}`);\n    const sourceRacks = sourceBrokers.map(b => b.rack).distinct();\n\n    // Track brokers we've used so far (trying to not use any broker twice)\n    const consumedBrokers: ExBroker[] = [];\n\n    // Track racks we've used so far (trying to not use any rack twice)\n    const replicasInRack = (rack: string) => brokerReplicaCount.filter(x => x.broker.rack == rack).sum(x => x.assignedReplicas);\n\n    for (let i = 0; i < replicas; i++) {\n\n        // Sort to find the best broker (better brokers first)\n        brokerReplicaCount.sort((a, b) => {\n            // Precondition\n            // Each broker can't host more than 1 replica of a partition\n            const aConsumed = consumedBrokers.includes(a.broker);\n            const bConsumed = consumedBrokers.includes(b.broker);\n            if (aConsumed && !bConsumed) return 1;\n            if (!aConsumed && bConsumed) return -1;\n\n            // 1. Prefer distribution across different racks.\n            //    If we already assigned a replica to one broker, we'd like to\n            //    assign the next replica to a broker in a different rack.\n            //    (-> robustness against outages of a whole rack)\n            const replicasInRackA = replicasInRack(a.broker.rack);\n            const replicasInRackB = replicasInRack(b.broker.rack);\n            if (replicasInRackA < replicasInRackB) return -1;\n            if (replicasInRackB < replicasInRackA) return 1;\n\n            // 2. Prefer the broker hosting the fewest replicas (for *this* topic).\n            //    (-> balanced replicas across user-selected brokers)\n            const topicReplicasOnA = a.assignedReplicas;\n            const topicReplicasOnB = b.assignedReplicas;\n            if (topicReplicasOnA < topicReplicasOnB) return -1;\n            if (topicReplicasOnB < topicReplicasOnA) return 1;\n\n            // 3. Prefer the broker hosting the fewest replicas (over *all* topics).\n            //    (-> balanced replica count across cluster)\n            const replicasOnA = a.broker.plannedReplicas;\n            const replicasOnB = b.broker.plannedReplicas;\n            if (replicasOnA < replicasOnB) return -1;\n            if (replicasOnB < replicasOnA) return 1;\n\n            // 4. Prefer using the same brokers as before.\n            //    (-> no network traffic)\n            const aIsSource = sourceBrokers.includes(a.broker);\n            const bIsSource = sourceBrokers.includes(b.broker);\n            if (aIsSource && !bIsSource) return -1;\n            if (bIsSource && !aIsSource) return 1;\n\n            // 5. Prefer using the same rack as before.\n            //    (-> less expensive network traffic)\n            const aIsSameRack = sourceRacks.includes(a.broker.rack);\n            const bIsSameRack = sourceRacks.includes(b.broker.rack);\n            if (aIsSameRack && !bIsSameRack) return -1;\n            if (bIsSameRack && !aIsSameRack) return 1;\n\n            // 6. Prefer brokers with free disk space\n            //    (-> balanced disk-space across cluster)\n            const diskOnA = a.broker.plannedSize;\n            const diskOnB = b.broker.plannedSize;\n            if (diskOnA < diskOnB) return -1;\n            if (diskOnB < diskOnA) return 1;\n\n            // They're identical, so it doesn't matter which one we use.\n            return 0;\n        });\n\n        // Take the best broker\n        const bestTrackedBroker = brokerReplicaCount[0];\n        const bestBroker = bestTrackedBroker.broker;\n        bestTrackedBroker.assignedReplicas++; // increase temporary counter (which only tracks assignments within the topic)\n        resultBrokers.push(bestBroker);\n        consumedBrokers.push(bestBroker);\n\n        // Increase total number of assigned replicas\n        bestBroker.assignedReplicas++;\n        // The new assignment will take up disk space, which must be tracked as well.\n        bestBroker.assignedSize += partition.replicaSize;\n    }\n\n    // Count the first broker in the list as the leader\n    resultBrokers[0].assignedLeader++;\n\n    return resultBrokers;\n}\n\n\nfunction balanceLeaders(selectedTopicPartitions: TopicPartitions[], resultAssignments: TopicAssignments, allExBrokers: ExBroker[], apiData: ApiData) {\n    let leaderSwitchCount = 0;\n    for (const t of selectedTopicPartitions) {\n        for (const p of t.partitions) {\n            // map plain brokers to extended brokers (those with attached tracking data)\n            const newBrokers = resultAssignments[t.topic.topicName][p.id].brokers.map(b => allExBrokers.first(e => e.brokerId == b.brokerId)!);\n            const plannedLeader = newBrokers[0];\n\n            // from all the brokers that will soon be the ones hosting this partitions replicas,\n            // is there one that would be better suited to be the leader?\n            // Sort them by ascending leader count (number of partitions they lead)\n            // We must make a copy of the newBrokers aray because we don't want to modify it (yet)\n            const sortedBrokers = newBrokers.slice(0);\n            sortedBrokers.sort((a, b) => a.plannedLeader - b.plannedLeader);\n\n            const betterLeader = sortedBrokers[0];\n\n            if (betterLeader != plannedLeader) {\n                // We found a better leader, swap the two and adjust their tracking info\n                const betterLeaderIndex = newBrokers.indexOf(betterLeader);\n                if (betterLeaderIndex < 0)\n                    throw new Error('cannot find new/best leader in exBroker array');\n\n                // Swap the two brokers\n                newBrokers[0] = betterLeader;\n                newBrokers[betterLeaderIndex] = plannedLeader;\n\n                // Adjust tracking info for leaders and consumed disk size\n                plannedLeader.assignedLeader--;\n                plannedLeader.assignedSize -= p.replicaSize;\n                betterLeader.assignedLeader++;\n                betterLeader.assignedSize += p.replicaSize;\n\n                // Update final assignments\n                // mapping our extendedBrokers back to the \"simple\" brokers\n                resultAssignments[t.topic.topicName][p.id].brokers = newBrokers.map(exBroker => apiData.brokers.first(b => b.brokerId == exBroker.brokerId)!);\n\n                leaderSwitchCount++;\n            }\n        }\n    }\n\n    return leaderSwitchCount;\n}\n\ntype RiskyPartition = {\n    topic: Topic,\n    partition: Partition,\n    criticalRacks: string[], // if this rack is offline, the whole partition will be unavailable\n    criticalBrokers: ExBroker[], // if this broker is offline...\n};\n\nfunction findRiskyPartitions(\n    targetBrokers: ExBroker[],\n    selectedTopicPartitions: TopicPartitions[],\n    resultAssignments: TopicAssignments,\n    getExBroker: (id: number) => ExBroker\n): RiskyPartition[] {\n    const targetRacks = targetBrokers.map(b => b.rack).distinct();\n\n    const riskyPartitions: RiskyPartition[] = [];\n\n    for (const t of selectedTopicPartitions) {\n        const { topic, partitions } = t;\n        const topicAssignments = resultAssignments[topic.topicName];\n        for (const partition of partitions) {\n            const partitionAssignments = topicAssignments[partition.id];\n            const replicaBrokers = partitionAssignments.brokers.map(b => getExBroker(b.brokerId));\n\n            // Will this partition be unavailable when any one broker is offline?\n            // If so, which are the \"critical\" brokers (or racks) for each partition?\n            const riskyPartition: RiskyPartition = {\n                topic, partition,\n                criticalBrokers: [],\n                criticalRacks: [],\n            };\n\n            // Check if the partition would be offline if each single broker is offline\n            for (const b of targetBrokers) {\n                const remainingBrokers = replicaBrokers.except([b]);\n                if (remainingBrokers.length == 0)\n                    riskyPartition.criticalBrokers.push(b);\n            }\n\n            // Check for offline racks\n            for (const rack of targetRacks) {\n                const remainingBrokers = replicaBrokers.filter(x => x.rack !== rack);\n                if (remainingBrokers.length == 0)\n                    riskyPartition.criticalRacks.push(rack);\n            }\n\n            if (riskyPartition.criticalRacks.length > 0 || riskyPartition.criticalBrokers.length > 0)\n                riskyPartitions.push(riskyPartition);\n        }\n    }\n\n    return riskyPartitions;\n}\n\n// If there are any critical brokers or racks, this might indicate a bug in the distribution algorithm.\n// Except for situations where a topic has a replication factor of 1 (each partition will always be on only one broker),\n// or when there is only a single rack available (happens when brokers have null or empty string set as their rack).\nfunction reportRiskyPartitions(riskyPartitions: RiskyPartition[]) {\n    for (const { key: topic, items: partitionIssues } of riskyPartitions.groupInto(x => x.topic)) {\n\n        // topics with rf:1 will always be an issue\n        if (topic.replicationFactor <= 1)\n            continue;\n\n        // check if any partition has any issues\n        const issues = partitionIssues.filter(x => x.criticalBrokers.length > 0 || x.criticalRacks.length > 0);\n        if (issues.length == 0)\n            continue;\n\n        // at least one partition with issues, report as table\n        const table = issues.map(x => ({\n            partitionId: x.partition.id,\n            criticalBrokers: x.criticalBrokers.map(b => String(b.brokerId)).join(', '),\n            criticalRacks: x.criticalRacks.join(', '),\n        }));\n        console.error(`Issues in topic \"${topic.topicName}\" (RF: ${topic.replicationFactor}) (${issues.length} issues).`);\n        console.table(table);\n    }\n}\n\n// Broker extended with tracking information.\n// Used to quickly determine which is the best broker for a given replica, without having to recompute the tracked information all the time\n// (Otherwise we'd have to iterate over every topic/partition/replica all the time)\nclass ExBroker implements Broker {\n    brokerId: number;\n    logDirSize: number;\n    address: string;\n    rack: string;\n    config: BrokerConfig;\n\n    // Values as they actually are currently in the cluster\n    actualReplicas: number = 0; // number of all replicas (no matter from which topic) assigned to this broker\n    actualSize: number = 0; // total size used by all the replicas assigned to this broker\n    actualLeader: number = 0; // for how many partitions is this broker the leader?\n\n    // 'actual' values minus everything that is to be reassigned\n    // in other words: the state of the broker without counting anything we're about to reassign\n    initialReplicas: number = 0;\n    initialSize: number = 0;\n    initialLeader: number = 0;\n\n    // values of the current assignments\n    // counting only whenever we assign something to this broker.\n    assignedReplicas: number = 0;\n    assignedSize: number = 0;\n    assignedLeader: number = 0;\n\n    get plannedReplicas(): number { return this.initialReplicas + this.assignedReplicas; }\n    get plannedSize(): number { return this.initialSize + this.assignedSize; }\n    get plannedLeader(): number { return this.initialLeader + this.assignedLeader; }\n\n\n    constructor(sourceBroker: Broker) {\n        Object.assign(this, sourceBroker);\n    }\n\n    recompute(apiData: ApiData, selectedTopicPartitions: TopicPartitions[]) {\n        this.recomputeActual(apiData);\n        this.recomputeInitial(selectedTopicPartitions);\n    }\n\n    private recomputeActual(apiData: ApiData) {\n        this.actualReplicas = 0;\n        this.actualSize = 0;\n        this.actualLeader = 0;\n\n        if (apiData.topicPartitions == null)\n            throw new Error(`cannot recompute actual usage of broker '${this.brokerId}' because 'api.topicPartitions == null' (no permissions?)`);\n\n        for (const [topic, partitions] of apiData.topicPartitions) {\n            if (partitions == null) throw new Error(`cannot recompute actual usage of broker '${this.brokerId}' for topic '${topic}', because 'partitions == null' (no permissions?)`);\n\n            for (const p of partitions) {\n                // replicas\n                const replicasAssignedToThisBroker = p.replicas.count(x => x == this.brokerId);\n                this.actualReplicas += replicasAssignedToThisBroker;\n                this.actualLeader += p.leader == this.brokerId ? 1 : 0;\n\n                if (replicasAssignedToThisBroker > 0) {\n                    // This broker hosts a replica of this partition\n                    // find size of the logdir for the partition on this broker\n                    const logDirEntry = p.partitionLogDirs.first(x => !x.error && x.brokerId == this.brokerId);\n                    if (logDirEntry !== undefined)\n                        this.actualSize += logDirEntry.size;\n                    else {\n                        // todo:\n                        // - fallback to another entry? (using maximum size we find)\n                        // - throw error?\n                    }\n                }\n            }\n        }\n    }\n\n    private recomputeInitial(selectedTopicPartitions: TopicPartitions[]) {\n        // Subtract the stats of the selected partitions\n        let selectedReplicas = 0;\n        let selectedSize = 0;\n        let selectedLeader = 0;\n\n        for (const topic of selectedTopicPartitions)\n            for (const p of topic.partitions) {\n                const replicasOnBroker = p.replicas.count(x => x == this.brokerId);\n                selectedReplicas += replicasOnBroker;\n                selectedLeader += (p.leader == this.brokerId) ? 1 : 0;\n\n                if (replicasOnBroker > 0) {\n                    // using 'first()' because each broker has exactly one logDirEntry (or maybe zero if broker is offline)\n                    const logDirEntry = p.partitionLogDirs.first(x => !x.error && x.brokerId == this.brokerId);\n                    if (logDirEntry) {\n                        // direct match\n                        selectedSize += logDirEntry.size;\n                    } else {\n                        // broker offline, use fallback\n                        selectedSize += p.replicaSize;\n                    }\n                }\n            }\n\n        // Since at the start we'll pretend the selected partitions are not assigned to any broker\n        // we'll get our \"initial\" from actual minus selecte.\n        this.initialReplicas = this.actualReplicas - selectedReplicas;\n        this.initialSize = this.actualSize - selectedSize;\n        this.initialLeader = this.actualLeader - selectedLeader;\n    }\n}\n\n\nfunction checkArguments(\n    apiData: ApiData,\n    selectedTopicPartitions: TopicPartitions[],\n    targetBrokers: Broker[]) {\n    // Check for missing or invalid api data\n    throwIfNullOrEmpty(\"apiData.brokers\", apiData.brokers);\n    throwIfNullOrEmpty(\"apiData.topics\", apiData.topics);\n    throwIfNullOrEmpty(\"apiData.topicPartitions\", apiData.topicPartitions);\n    const topicsMissingPartitionData = apiData.topics.filter(t => apiData.topicPartitions.get(t.topicName) == null);\n    if (topicsMissingPartitionData.length > 0)\n        throw new Error(\"apiData is missing topicPartitions for these topics: \" + topicsMissingPartitionData.map(t => t.topicName).join(', '))\n\n    // Require at least one selected partition\n    if (selectedTopicPartitions.sum(x => x.partitions.length) == 0)\n        throw new Error(\"No partitions selected\");\n\n    // Require at least as many brokers as the highest replication factor of any selected partition\n    const maxRf = selectedTopicPartitions\n        .groupInto(t => t.topic.replicationFactor) // group topics by replication factor\n        .sort((a, b) => b.key - a.key)[0]; // sort descending, then take first group\n    if (maxRf.key > targetBrokers.length)\n        throw new Error(`You selected ${targetBrokers.length} target brokers, but the following topics have a replicationFactor of ${maxRf.key}, so at least ${maxRf.key} target brokers are required: ${toJson(maxRf.items.map(t => t.topic.topicName))}`);\n}\n\nfunction throwIfNullOrEmpty(name: string, obj: any[] | Map<any, any>) {\n    if (obj == null)\n        throw new Error(name + \" is null\");\n\n    if (Array.isArray(obj)) {\n        if (obj.length == 0)\n            throw new Error(name + \" is empty\");\n    } else {\n        if (obj.size == 0)\n            throw new Error(name + \" is empty\");\n    }\n}\n\nfunction calcRange<T>(ar: T[], selector: (item: T) => number): {\n    range: number,\n    min: T | undefined,\n    minValue: number,\n\n    max: T | undefined,\n    maxValue: number,\n} {\n    if (ar.length == 0) return {\n        range: 0,\n        min: undefined,\n        minValue: 0,\n        max: undefined,\n        maxValue: 0\n    };\n\n    const max = ar.maxBy(selector)!;\n    const maxVal = selector(max);\n\n    const min = ar.minBy(selector)!;\n    const minVal = selector(min);\n\n    const range = maxVal - minVal;\n\n    return {\n        range: range,\n        min: min,\n        minValue: minVal,\n        max: max,\n        maxValue: maxVal,\n    };\n}\n\nfunction dumpBrokerInfo(title: string, brokers: ExBroker[]) {\n    console.log(title);\n    console.table(brokers.map((x: ExBroker) => ({\n        id: x.brokerId,\n        address: x.address,\n        actualLeader: x.actualLeader,\n        plannedLeader: x.plannedLeader,\n\n        actualReplicas: x.actualReplicas,\n        plannedReplicas: x.plannedReplicas,\n\n        actualSize: x.actualSize,\n        plannedSize: x.plannedSize,\n\n        full: {\n            ...x\n        }\n    })), [\n        'address',\n        'actualLeader',\n        'plannedLeader',\n        'actualReplicas',\n        'plannedReplicas',\n        'actualSize',\n        'plannedSize'\n    ]);\n}","import React, { Component, useState } from \"react\";\nimport { Tag, Popover, Tooltip, ConfigProvider, Table, Progress, Button, Modal, Slider, Popconfirm, Checkbox, Skeleton, message } from \"antd\";\nimport { LazyMap } from \"../../../../utils/LazyMap\";\nimport { Broker, ConfigEntry, Partition, PartitionReassignmentsPartition } from \"../../../../state/restInterfaces\";\nimport { api, brokerMap } from \"../../../../state/backendApi\";\nimport { computed, makeObservable, observable } from \"mobx\";\nimport { DefaultSkeleton, findPopupContainer, QuickTable } from \"../../../../utils/tsxUtils\";\nimport { makePaginationConfig, sortField } from \"../../../misc/common\";\nimport { uiSettings } from \"../../../../state/ui\";\nimport { ColumnProps } from \"antd/lib/table\";\nimport { TopicWithPartitions } from \"../Step1.Partitions\";\nimport { DebugTimerStore, Message, prettyBytesOrNA, prettyMilliseconds } from \"../../../../utils/utils\";\nimport { BrokerList } from \"./BrokerList\";\nimport { ReassignmentState, ReassignmentTracker } from \"../logic/reassignmentTracker\";\nimport { observer } from \"mobx-react\";\nimport { EllipsisOutlined } from \"@ant-design/icons\";\nimport { strictEqual } from \"assert\";\nimport { reassignmentTracker } from \"../ReassignPartitions\";\nimport { BandwidthSlider } from \"./BandwidthSlider\";\nimport { KowlTable } from \"../../../misc/KowlTable\";\n\n\n@observer\nexport class ActiveReassignments extends Component<{ throttledTopics: string[], onRemoveThrottleFromTopics: () => void }> {\n    pageConfig = { defaultPageSize: 5 };\n\n    // When set, a modal will be shown for the reassignment state\n    @observable reassignmentDetails: ReassignmentState | null = null;\n    @observable showThrottleDialog = false;\n\n    constructor(p: any) {\n        super(p);\n        api.refreshCluster(true);\n        makeObservable(this);\n    }\n\n    render() {\n        const columnsActiveReassignments: ColumnProps<ReassignmentState>[] = [\n            {\n                title: 'Topic', width: '1%',\n                render: (v, t) => <TopicNameCol state={t} />,\n                sorter: sortField('topicName')\n            },\n            {\n                title: 'Progress', // ProgressBar, Percent, ETA\n                render: (v, t) => <ProgressCol state={t} />,\n                sorter: (a, b) => {\n                    if (a.progressPercent == null && b.progressPercent != null) return 1;\n                    if (a.progressPercent != null && b.progressPercent == null) return -1;\n                    if (a.progressPercent == null || b.progressPercent == null) return 0;\n                    return a.progressPercent - b.progressPercent;\n                }\n            },\n            {\n                title: 'ETA', width: '100px', align: 'right',\n                render: (v, t) => <ETACol state={t} />,\n                sorter: (a, b) => {\n                    if (a.estimateCompletionTime == null && b.estimateCompletionTime != null) return 1;\n                    if (a.estimateCompletionTime != null && b.estimateCompletionTime == null) return -1;\n                    if (a.estimateCompletionTime == null || b.estimateCompletionTime == null) return 0;\n                    return a.estimateCompletionTime.getTime() - b.estimateCompletionTime.getTime();\n                },\n                defaultSortOrder: 'ascend'\n            },\n            {\n                title: 'Brokers', width: '0.1%',\n                render: (v, t) => <BrokersCol state={t} />,\n            },\n        ];\n\n        const minThrottle = this.minThrottle;\n        const throttleText = minThrottle === undefined\n            ? <>Throttle: Not set (unlimited)</>\n            : <>Throttle: {prettyBytesOrNA(minThrottle)}/s</>\n\n        const currentReassignments = reassignmentTracker.trackingReassignments ?? [];\n\n        return <>\n            {/* Title */}\n            <div className='currentReassignments' style={{ display: 'flex', placeItems: 'center', marginBottom: '.5em' }}>\n                <span className='title'>Current Reassignments</span>\n\n                <Button type='link' size='small' style={{ fontSize: 'smaller', padding: '0px 8px' }}\n                    onClick={() => this.showThrottleDialog = true}\n                >{throttleText}</Button>\n            </div>\n\n            {/* Table */}\n            <KowlTable\n                className='activeReassignments'\n\n                dataSource={currentReassignments}\n                columns={columnsActiveReassignments}\n\n                rowKey={r => r.topicName}\n                onRow={(state, index) => {\n                    return {\n                        onClick: e => this.reassignmentDetails = state,\n                    };\n                }}\n                pagination={this.pageConfig}\n                observableSettings={uiSettings.reassignment.activeReassignments}\n\n                emptyText={<div style={{ color: '#00000059', margin: '.4em 0' }}>No reassignments currently in progress</div>}\n            />\n\n            <ReassignmentDetailsDialog state={this.reassignmentDetails} onClose={() => this.reassignmentDetails = null} />\n            <ThrottleDialog visible={this.showThrottleDialog} lastKnownMinThrottle={minThrottle} onClose={() => this.showThrottleDialog = false} />\n\n            {this.props.throttledTopics.length > 0 &&\n                <Button type='link' size='small' style={{ fontSize: 'smaller', padding: '0px 8px' }}\n                    onClick={this.props.onRemoveThrottleFromTopics}\n                >\n                    <span>There are <b>{this.props.throttledTopics.length}</b> throttled topics - click here to fix</span>\n                </Button>\n            }\n        </>\n    }\n\n    @computed get throttleSettings(): ({ followerThrottle: number | undefined, leaderThrottle: number | undefined }) {\n        const leaderThrottle = [...api.brokerConfigs.values()]\n            .filter(c => typeof c != 'string')\n            .flatMap(c => c as ConfigEntry[])\n            .first(e => e.name == 'leader.replication.throttled.rate');\n        const followerThrottle = [...api.brokerConfigs.values()]\n            .filter(c => typeof c != 'string')\n            .flatMap(c => c as ConfigEntry[])\n            .first(e => e.name == 'follower.replication.throttled.rate');\n\n        const result = {\n            leaderThrottle: leaderThrottle ? Number(leaderThrottle.value) : undefined,\n            followerThrottle: followerThrottle ? Number(followerThrottle.value) : undefined\n        };\n\n        return result;\n    }\n\n    @computed get minThrottle(): number | undefined {\n        const t = this.throttleSettings;\n        if (t.followerThrottle !== undefined || t.leaderThrottle !== undefined)\n            return Math.min(\n                t.followerThrottle ?? Number.POSITIVE_INFINITY,\n                t.leaderThrottle ?? Number.POSITIVE_INFINITY\n            );\n\n        return undefined;\n    }\n}\n\n\n@observer\nexport class ThrottleDialog extends Component<{ visible: boolean, lastKnownMinThrottle: number | undefined, onClose: () => void }> {\n    @observable newThrottleValue: number | null = null;\n\n    constructor(p: any) {\n        super(p);\n        this.newThrottleValue = this.props.lastKnownMinThrottle ?? null;\n        makeObservable(this);\n    }\n\n    render() {\n        const throttleValue = this.newThrottleValue ?? 0;\n        const noChange = (this.newThrottleValue === this.props.lastKnownMinThrottle)\n            || (this.newThrottleValue == null);\n\n        // console.log('nochange:', { noChange, newVal: this.newThrottleValue, lastKnown: this.props.lastKnownMinThrottle })\n\n        return <Modal\n            title=\"Throttle Settings\"\n            visible={this.props.visible} maskClosable={true} closeIcon={<></>}\n            width=\"700px\"\n\n            onCancel={this.props.onClose}\n\n            footer={<div style={{ display: 'flex' }}>\n                <Button\n                    danger\n                    onClick={() => {\n                        this.newThrottleValue = null;\n                        this.applyBandwidthThrottle();\n                    }}\n                >Remove throttle</Button>\n\n                <Button\n                    style={{ marginLeft: 'auto' }}\n                    onClick={this.props.onClose}\n                >Close</Button>\n\n                <Button\n                    disabled={noChange}\n                    type='primary'\n                    onClick={() => this.applyBandwidthThrottle()}\n                >Apply</Button>\n            </div>}\n        >\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '1em', }}>\n                <div style={{ margin: '0 1em' }}>\n                    <p style={{ margin: 0 }}>Using throttling you can limit the network traffic for reassignments.</p>\n                    <ul style={{ marginTop: '0.5em', padding: '0 1.5em' }}>\n                        <li>Throttling applies to all replication traffic, not just to active reassignments.</li>\n                        <li>Once the reassignment completes you'll have to remove the throttling configuration. <br />\n                            Kowl will show a warning below the \"Current Reassignments\" table when there are throttled topics that are no longer being reassigned.\n                        </li>\n                    </ul>\n                </div>\n\n                <BandwidthSlider value={throttleValue} onChange={x => this.newThrottleValue = x} />\n            </div>\n\n        </Modal>\n    }\n\n    async applyBandwidthThrottle() {\n\n        const msg = new Message(\"Setting throttle rate...\");\n        try {\n            const allBrokers = api.clusterInfo?.brokers.map(b => b.brokerId);\n            if (!allBrokers) {\n                message.error('Error: Cluster info not available');\n                return;\n            }\n\n            if (this.newThrottleValue && this.newThrottleValue > 0) {\n                await api.setReplicationThrottleRate(allBrokers, this.newThrottleValue);\n            }\n            else {\n                await api.resetReplicationThrottleRate(allBrokers);\n            }\n\n            setImmediate(() => {\n                // need to update actual value after changing\n                api.refreshCluster(true);\n            });\n\n            msg.setSuccess(\"Setting throttle rate... done\");\n\n        }\n        catch (err) {\n            console.error(\"error in applyBandwidthThrottle: \" + err);\n            msg.setError();\n        }\n\n        this.props.onClose();\n    }\n}\n\n\n@observer\nexport class ReassignmentDetailsDialog extends Component<{ state: ReassignmentState | null, onClose: () => void }> {\n    lastState: ReassignmentState | null;\n    @observable shouldThrottle = false;\n    wasVisible = false;\n\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n\n    render() {\n        if (this.props.state == null) return null;\n\n        const state = this.props.state;\n        if (this.lastState != state)\n            this.lastState = state;\n\n        const visible = this.props.state != null;\n        if (this.wasVisible != visible) {\n            // became visible or invisible\n            // force update of topic config, so isThrottle has up to date information\n            setImmediate(async () => {\n                api.topicConfig.delete(state.topicName);\n                await api.refreshTopicConfig(state.topicName, true);\n                this.shouldThrottle = this.isThrottled();\n            });\n        }\n        this.wasVisible = visible;\n\n        const topicConfig = api.topicConfig.get(state.topicName);\n        if (!topicConfig) setImmediate(() => { api.refreshTopicConfig(state.topicName); });\n\n        const replicas = state.partitions.flatMap(p => p.replicas).distinct();\n        const addingReplicas = state.partitions.flatMap(p => p.addingReplicas).distinct();\n        const removingReplicas = state.partitions.flatMap(p => p.removingReplicas).distinct();\n\n\n        const modalContent = Boolean(topicConfig) ? (\n            <div style={{ display: 'flex', flexDirection: 'column', gap: '3em', }}>\n\n                {/* Info */}\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '1em', }}>\n                    <div>\n                        {QuickTable([\n                            [\"Replicas\", replicas],\n                            [\"Adding\", addingReplicas],\n                            [\"Removing\", removingReplicas],\n                        ])}\n                    </div>\n                </div>\n\n                {/* Throttle */}\n                <div style={{ display: 'flex', gap: '1em' }}>\n                    <Checkbox checked={this.shouldThrottle} onChange={e => this.shouldThrottle = e.target.checked}>\n                        <span>\n                            <span>Throttle Reassignment</span><br />\n                            <span style={{ fontSize: 'smaller', opacity: '0.6', marginLeft: '2em' }}>Using global throttle limit for all replication traffic</span>\n                        </span>\n                    </Checkbox>\n                </div>\n\n                {/* Cancel */}\n                <Popconfirm title=\"Are you sure you want to stop the reassignment?\" okText=\"Yes\" cancelText=\"No\"\n                    onConfirm={() => this.cancelReassignment()}\n                >\n                    <Button type='dashed' danger>Cancel Reassignment</Button>\n                </Popconfirm>\n            </div>\n        ) : <Skeleton loading={true} active={true} paragraph={{ rows: 5 }} />;\n\n        return <Modal\n            title={\"Reassignment: \" + state.topicName}\n            visible={visible}\n\n            okText=\"Apply &amp; Close\"\n            onOk={() => {\n                this.applyBandwidthThrottle();\n                this.props.onClose();\n            }}\n\n            cancelText=\"Close\"\n            onCancel={this.props.onClose}\n            maskClosable={true}\n        >\n            {modalContent}\n        </Modal>\n    }\n\n    isThrottled(): boolean {\n        // Reassignment is throttled when the topic contains any partition/broker pair that is currently being reassigned\n        if (!this.lastState) {\n            return false;\n        }\n        const config = api.topicConfig.get(this.lastState.topicName);\n        if (!config) {\n            return false;\n        }\n\n        // partitionId:brokerId, ...\n        const leaderThrottleValue = config.configEntries.first(e => e.name == 'leader.replication.throttled.replicas');\n        const leaderThrottleEntries = leaderThrottleValue?.value?.split(',').map(e => {\n            const ar = e.split(':');\n            if (ar.length != 2) return null;\n            return { partitionId: Number(ar[0]), brokerId: Number(ar[1]) };\n        }).filterNull();\n\n        if (leaderThrottleEntries) {\n            // Go through all partitions that are being reassigned\n            for (const p of this.lastState.partitions) {\n                const sourceBrokers = p.replicas;\n\n                // ...and check if this broker-partition combo is being throttled\n                const hasThrottle = leaderThrottleEntries.any(e =>\n                    e.partitionId == p.partitionId && sourceBrokers.includes(e.brokerId)\n                );\n\n                if (hasThrottle) return true;\n            }\n        }\n\n        // partitionId:brokerId, ...\n        const followerThrottleValue = config.configEntries.first(e => e.name == 'follower.replication.throttled.replicas');\n        const followerThrottleEntries = followerThrottleValue?.value?.split(',').map(e => {\n            const ar = e.split(':');\n            if (ar.length != 2) return null;\n            return { partitionId: Number(ar[0]), brokerId: Number(ar[1]) };\n        }).filterNull();\n\n        if (followerThrottleEntries) {\n            // Go through all partitions that are being reassigned\n            for (const p of this.lastState.partitions) {\n                const targetBrokers = p.addingReplicas;\n\n                // ...and check if this broker-partition combo is being throttled\n                const hasThrottle = followerThrottleEntries.any(e =>\n                    e.partitionId == p.partitionId && targetBrokers.includes(e.brokerId)\n                );\n\n                if (hasThrottle) return true;\n            }\n        }\n\n        return false;\n    }\n\n    applyBandwidthThrottle() {\n        const state = this.props.state;\n        if (state == null) {\n            console.error(\"apply bandwidth throttle: this.props.state is null\");\n            return;\n        }\n\n        if (this.shouldThrottle) {\n            const leaderReplicas: { partitionId: number, brokerId: number }[] = [];\n            const followerReplicas: { partitionId: number, brokerId: number }[] = [];\n            for (const p of state.partitions) {\n                const partitionId = p.partitionId;\n                const brokersOld = p.replicas;\n                const brokersNew = p.addingReplicas;\n\n                if (brokersOld == null || brokersNew == null) {\n                    console.warn(\"active reassignments, traffic limit: skipping partition because old or new brokers can't be found\", { state: state });\n                    continue;\n                }\n\n                // leader throttling is applied to all sources (all brokers that have a replica of this partition)\n                for (const sourceBroker of brokersOld)\n                    leaderReplicas.push({ partitionId: partitionId, brokerId: sourceBroker });\n\n                // follower throttling is applied only to target brokers that do not yet have a copy\n                const newBrokers = brokersNew.except(brokersOld);\n                for (const targetBroker of newBrokers)\n                    followerReplicas.push({ partitionId: partitionId, brokerId: targetBroker });\n            }\n\n            api.setThrottledReplicas([{\n                topicName: state.topicName,\n                leaderReplicas: leaderReplicas,\n                followerReplicas: followerReplicas,\n            }]);\n        }\n        else {\n            api.resetThrottledReplicas([state.topicName]);\n        }\n\n    }\n\n    async cancelReassignment() {\n        const state = this.props.state;\n        if (state == null) {\n            console.error(\"cancel reassignment: this.props.state is null\");\n            return;\n        }\n\n        const partitions = state.partitions.map(p => p.partitionId);\n\n        const msg = new Message(`Cancelling reassignment of '${state.topicName}'...`);\n        try {\n            const cancelRequest = {\n                topics: [\n                    {\n                        topicName: state.topicName,\n                        partitions: partitions.map(p => ({\n                            partitionId: p,\n                            replicas: null, // cancel\n                        })),\n                    }\n                ]\n            };\n            const response = await api.startPartitionReassignment(cancelRequest);\n\n            console.log('cancel reassignment result', { request: cancelRequest, response: response });\n\n            msg.setSuccess();\n            this.props.onClose();\n        }\n        catch (err) {\n            console.error(\"cancel reassignment: \" + String(err));\n            msg.setError();\n        }\n    }\n}\n\n@observer\nexport class TopicNameCol extends Component<{ state: ReassignmentState }> {\n    render() {\n        const { state } = this.props;\n        return <span style={{ paddingRight: '2em' }}>{state.topicName}</span>;\n        // return <><span className='partitionReassignmentSpinner' style={{ marginRight: '6px' }} />{state.topicName}</>;\n    }\n}\n\n\n@observer\nexport class ProgressCol extends Component<{ state: ReassignmentState }> {\n    render() {\n        const { state } = this.props;\n\n        if (state.remaining == null) return \"...\";\n        const transferred = state.totalTransferSize - state.remaining.value;\n\n        let progressBar: JSX.Element;\n\n        if (state.progressPercent === null) {\n            // Starting\n            progressBar = <ProgressBar percent={0} state='active'\n                left='Starting...'\n                right={prettyBytesOrNA(state.totalTransferSize)} />\n\n        } else if (state.progressPercent < 100) {\n            // Progressing\n            progressBar = <ProgressBar percent={state.progressPercent} state='active'\n                left={<span>{state.progressPercent.toFixed(1) + '%'}</span>}\n                right={<>\n                    {state.estimateSpeed != null &&\n                        <span style={{ paddingRight: '1em', opacity: '0.6' }}>({prettyBytesOrNA(state.estimateSpeed)}/s)</span>\n                    }\n                    <span>\n                        {prettyBytesOrNA(transferred)} / {prettyBytesOrNA(state.totalTransferSize)}\n                    </span>\n                </>} />\n        } else {\n            // Completed\n            progressBar = <ProgressBar percent={100} state='success'\n                left='Complete'\n                right={prettyBytesOrNA(state.totalTransferSize)} />\n        }\n\n\n        return <div style={{ marginBottom: '-6px' }}>\n            {progressBar}\n        </div>\n\n    }\n}\n\n\n@observer\nexport class ETACol extends Component<{ state: ReassignmentState }> {\n    render() {\n        const { state } = this.props;\n\n\n        if (state.estimateSpeed == null || state.estimateCompletionTime == null) return \"...\";\n\n        const remainingMs = (state.estimateCompletionTime.getTime() - new Date().getTime()).clamp(0, undefined);\n\n        return <span >\n            {prettyMilliseconds(remainingMs, { secondsDecimalDigits: 0, unitCount: 2 })}\n        </span>\n\n    }\n}\n\n\n@observer\nexport class BrokersCol extends Component<{ state: ReassignmentState }> {\n    render() {\n        const { state } = this.props;\n\n        const allBrokerIds = state.partitions.map(p => [p.addingReplicas, p.removingReplicas, p.replicas]).flat(2).distinct();\n\n        return <BrokerList brokerIds={allBrokerIds} />\n    }\n}\n\n\nconst ProgressBar = function (p: { percent: number, state: 'active' | 'success', left?: React.ReactNode, right?: React.ReactNode }) {\n    const { percent, state, left, right } = p;\n    return <>\n        <Progress percent={percent} status={state} size='small' showInfo={false} style={{ lineHeight: 0.1, display: 'block' }} />\n        <div style={{\n            display: 'flex', marginTop: '1px',\n            fontFamily: '\"Open Sans\", sans-serif', fontWeight: 600, fontSize: '75%'\n        }}>\n            {left && <div>{left}</div>}\n            {right && <div style={{ marginLeft: 'auto' }}>{right}</div>}\n        </div>\n    </>\n}","\n// Helper class\n// - manages timers for refreshing current reassignments\n// - tracks progress history for each reassignment to estimate speed and ETA\n\nimport { autorun, IReactionDisposer, observable, transaction, untracked } from \"mobx\";\nimport { api } from \"../../../../state/backendApi\";\nimport { PartitionReassignments } from \"../../../../state/restInterfaces\";\nimport { IsDev } from \"../../../../utils/env\";\nimport { clone, toJson } from \"../../../../utils/jsonUtils\";\n\nconst refreshIntervals = {\n    cluster: 6000,\n    reassignments: 3000,\n    // partitions = automatic, same as reassignment\n} as const;\n\n\nexport interface ReassignmentState {\n    id: string; // used to match instances of 'ReassignmentState' and 'PartitionReassignments'\n\n    topicName: string;\n    partitions: {\n        partitionId: number;\n        replicas: number[];\n        addingReplicas: number[];\n        removingReplicas: number[];\n\n        // computed\n        maxReplicaSize: number; // max size of one replica\n        currentSize: { brokerId: number, replicaSize: number; }[]; // size as reported by each *new* broker\n    }[];\n\n\n    // computed\n\n    // sum of total network traffic:\n    // meaning that partitions that are being added to multiple new brokers,\n    // will also be counted multiple times.\n    // This value can actually increase while the reassignment is in progress (because data is being written to the leader),\n    // which in turn can cause the progress to actually go backwards!\n    totalTransferSize: number;\n\n    // total remaining bytes that have to be transferred\n    // we use this to calculate estimated speed and ETA since it also includes the (potentially changing) totalTransferSize\n    remainingPrev: { value: number; timestamp: Date } | null;\n    remaining: { value: number; timestamp: Date } | null;\n\n    // 1 - (remaining / totalTransferSize)\n    progressPercent: number | null;\n\n    estimateSpeed: number | null; // in bytes per second\n    estimateCompletionTime: Date | null;\n\n    // set when a reassignment has completed\n    actualTimeCompleted: Date | null;\n}\n\n\nexport class ReassignmentTracker {\n    clusterTimer: NodeJS.Timer | null = null;\n    reassignTimer: NodeJS.Timer | null = null;\n\n    @observable trackingReassignments: ReassignmentState[] = [];\n\n\n    constructor() {\n        this.refreshReassignments = this.refreshReassignments.bind(this);\n        this.createReassignmentState = this.createReassignmentState.bind(this);\n        this.updateReassignmentState = this.updateReassignmentState.bind(this);\n        this.computeId = this.computeId.bind(this);\n        this.stop = this.stop.bind(this);\n        this.start = this.start.bind(this);\n    }\n\n    start() {\n        const alreadyStarted = this.reassignTimer != null;\n        if (alreadyStarted) return;\n\n        // Active reassignments\n        this.reassignTimer = setInterval(() => this.refreshReassignments(), refreshIntervals.reassignments);\n\n        // Broker status\n        this.clusterTimer = setInterval(() => api.refreshCluster(true), refreshIntervals.cluster);\n\n        // Immediately refresh as well\n        setImmediate(() => {\n            this.refreshReassignments();\n            api.refreshCluster(true);\n        });\n    }\n\n    async refreshReassignments() { // timer\n\n        // Save current state, refresh, save new state\n        await api.refreshPartitionReassignments(true);\n        const liveReassignments = (clone(api.partitionReassignments) ?? [])\n            .map(r => ({ id: this.computeId(r), ...r }));\n\n        // Update relevant topic-partitions\n        const topics = liveReassignments.map(r => r.topicName);\n        if (topics.length > 0) await api.refreshPartitions(topics, true);\n\n        transaction(() => {\n            // Add new reassignments\n            for (const r of liveReassignments) {\n                const existingState = this.trackingReassignments.first(x => x.id == r.id);\n                if (existingState == null) {\n                    // console.log('adding new state', { id: r.id, reassignment: r });\n                    const state = this.createReassignmentState(r);\n                    this.trackingReassignments.push(state);\n                    if (IsDev) console.log(\"tracking reassignment\", r.topicName);\n                }\n            }\n\n            // Mark removed reassignments as completed\n            for (const r of this.trackingReassignments) {\n                if (r.actualTimeCompleted != null) continue; // no need to the ones already marked as completed\n\n                const live = liveReassignments.first(x => x.id == r.id);\n                if (!live) {\n                    // this tracked reassignment does not exist in the live assignments anymore\n                    r.actualTimeCompleted = new Date();\n                    r.progressPercent = 100;\n                    r.remaining = { value: 0, timestamp: new Date() };\n                    if (IsDev) console.log(\"completed reassignment\", r.topicName);\n                }\n            }\n\n            // Update running reassignments\n            for (const r of this.trackingReassignments.slice()) {\n                this.updateReassignmentState(r);\n            }\n\n            // Remove reassignments that are in completed state for some time\n            const expiredTrackers = this.trackingReassignments.filter(x => {\n                if (x.actualTimeCompleted == null) return false; // not yet complete\n                const age = (new Date().getTime() - x.actualTimeCompleted.getTime()) / 1000;\n                if (age > 8) {\n                    if (IsDev) console.log(\"removing reassignment\", x.topicName);\n                    return true;\n                }\n                return false;\n            });\n            this.trackingReassignments.removeAll(x => expiredTrackers.includes(x));\n\n        });\n    }\n\n    createReassignmentState(r: PartitionReassignments): ReassignmentState {\n        return observable({\n            id: this.computeId(r),\n\n            topicName: r.topicName,\n            partitions: r.partitions.map(p => ({\n                partitionId: p.partitionId,\n                replicas: p.replicas,\n                addingReplicas: p.addingReplicas,\n                removingReplicas: p.removingReplicas,\n\n                maxReplicaSize: -1,\n                currentSize: [],\n            })),\n\n            totalTransferSize: -1,\n            remaining: null,\n            remainingPrev: null,\n            progressPercent: null,\n\n            estimateSpeed: null,\n            estimateCompletionTime: null,\n            actualTimeCompleted: null,\n        });\n    }\n\n    updateReassignmentState(state: ReassignmentState) {\n\n        // partition stats\n        const topicPartitions = api.topicPartitions.get(state.topicName);\n        for (const p of state.partitions) {\n            const logDirs = topicPartitions?.first(e => e.id == p.partitionId)?.partitionLogDirs.filter(l => !l.error);\n            if (!logDirs || logDirs.length == 0) continue;\n\n            // current size (on new brokers)\n            const newSizeOnBrokers: { brokerId: number; replicaSize: number; }[] = [];\n            for (const b of p.addingReplicas) {\n                const logDir = logDirs.first(l => l.brokerId == b);\n                if (logDir && !logDir.error)\n                    newSizeOnBrokers.push({ brokerId: b, replicaSize: logDir.size });\n                else\n                    newSizeOnBrokers.push({ brokerId: b, replicaSize: 0 });\n            }\n            p.currentSize = newSizeOnBrokers;\n\n            // max size (on any broker)\n            p.maxReplicaSize = logDirs.max(e => e.size);\n        }\n\n        // total transfer size (size of each partition multiplied by how many brokers need to receive that partition)\n        state.totalTransferSize = state.partitions.sum(p => p.maxReplicaSize * p.addingReplicas.length);\n\n        const newTransferred = state.partitions.sum(p => p.currentSize.sum(x => x.replicaSize));\n        const newRemaining = state.totalTransferSize - newTransferred;\n\n        if (state.remainingPrev == null || state.remainingPrev.value != newRemaining) {\n            // only set a new transferred statistic when the new value is different from the previous one\n            // otherwise we'd end up with the same value for prev and cur with different timestamps\n            state.remainingPrev = state.remaining;\n            state.remaining = { value: newRemaining, timestamp: new Date(), };\n            state.progressPercent = (1 - (state.remaining.value / state.totalTransferSize)) * 100;\n        }\n\n        // estimate speed (only if we have cur and prev)\n        if (state.remaining && state.remainingPrev && state.remaining.value != state.remainingPrev.value) {\n            const intervalSec = (state.remaining.timestamp.getTime() - state.remainingPrev.timestamp.getTime()) / 1000;\n            const deltaRemaining = state.remaining.value - state.remainingPrev.value;\n            state.estimateSpeed = (deltaRemaining * -1) / intervalSec;\n        }\n\n        // estimate completion time\n        if (state.estimateSpeed !== null && state.remaining !== null) {\n            const remainingTimeSec = state.remaining.value / state.estimateSpeed;\n            state.estimateCompletionTime = new Date(new Date().getTime() + (remainingTimeSec * 1000));\n        }\n\n        return state;\n    }\n\n    // compute a stable ID for a PartitionReassignment\n    computeId(r: PartitionReassignments): string {\n        const id: any[] = [];\n        id.push(r.topicName);\n\n        // for (const p of r.partitions)\n        //     id.push(p.partitionId);\n\n        return toJson(id);\n    }\n\n    stop() {\n        if (this.clusterTimer !== null) {\n            clearInterval(this.clusterTimer);\n            this.clusterTimer = null;\n        }\n\n        if (this.reassignTimer !== null) {\n            clearInterval(this.reassignTimer);\n            this.reassignTimer = null;\n        }\n    }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"radioCardGroup\":\"HiddenRadioList_radioCardGroup__1qLVW\"};","import React from 'react';\nimport { TrashIcon } from '@heroicons/react/outline';\nimport { Alert, Button, Checkbox, Col, Modal, notification, Popover, Row, Statistic, Table, Tooltip } from 'antd';\nimport { motion } from 'framer-motion';\nimport { autorun, computed, IReactionDisposer, makeObservable, observable } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { api } from '../../../state/backendApi';\nimport { Topic, TopicAction, TopicActions } from '../../../state/restInterfaces';\nimport { uiSettings } from '../../../state/ui';\nimport { animProps } from '../../../utils/animationProps';\nimport { editQuery } from '../../../utils/queryHelper';\nimport { DefaultSkeleton, findPopupContainer, QuickTable } from '../../../utils/tsxUtils';\nimport Card from '../../misc/Card';\nimport { makePaginationConfig, renderLogDirSummary, sortField } from '../../misc/common';\nimport { KowlTable } from '../../misc/KowlTable';\nimport SearchBar from '../../misc/SearchBar';\nimport { PageComponent, PageInitHelper } from '../Page';\nimport { useState } from 'react';\nimport { CheckIcon, CircleSlashIcon, EyeClosedIcon } from '@primer/octicons-react';\n\n@observer\nclass TopicList extends PageComponent {\n    pageConfig = makePaginationConfig(uiSettings.topicList.pageSize);\n    quickSearchReaction: IReactionDisposer;\n    @observable topicToDelete: null | string = null;\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'Topics';\n        p.addBreadcrumb('Topics', '/topics');\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    componentDidMount() {\n        // 1. use 'q' parameter for quick search (if it exists)\n        editQuery((query) => {\n            if (query['q']) uiSettings.topicList.quickSearch = String(query['q']);\n        });\n\n        // 2. whenever the quick search box changes, update the url\n        this.quickSearchReaction = autorun(() => {\n            editQuery((query) => {\n                const q = String(uiSettings.topicList.quickSearch);\n                if (q) query['q'] = q;\n            });\n        });\n    }\n    componentWillUnmount() {\n        if (this.quickSearchReaction) this.quickSearchReaction();\n    }\n\n    refreshData(force: boolean) {\n        api.refreshTopics(force);\n    }\n\n    isFilterMatch(filter: string, item: Topic): boolean {\n        if (item.topicName.toLowerCase().includes(filter.toLowerCase())) return true;\n        return false;\n    }\n\n    render() {\n        if (!api.topics) return DefaultSkeleton;\n\n        const topics = api.topics;\n\n        const partitionCountReal = topics.sum((x) => x.partitionCount);\n        const partitionCountOnlyReplicated = topics.sum((x) => x.partitionCount * (x.replicationFactor - 1));\n\n        const partitionDetails = QuickTable(\n            [\n                { key: 'Primary:', value: partitionCountReal },\n                { key: 'Replicated:', value: partitionCountOnlyReplicated },\n                { key: 'All:', value: partitionCountReal + partitionCountOnlyReplicated },\n            ],\n            {\n                keyAlign: 'right', keyStyle: { fontWeight: 500 },\n                gapWidth: 4,\n                valueAlign: 'right'\n            }\n        );\n\n        return (\n            <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n                <Card>\n                    <Row>\n                        <Statistic title=\"Total Topics\" value={topics.length} />\n                        <Popover title=\"Partition Details\" content={partitionDetails} placement=\"right\" mouseEnterDelay={0} trigger=\"hover\">\n                            <div className=\"hoverLink\" style={{ display: 'flex', verticalAlign: 'middle', cursor: 'default' }}>\n                                <Statistic title=\"Total Partitions\" value={partitionCountReal + partitionCountOnlyReplicated} />\n                            </div>\n                        </Popover>\n                    </Row>\n                </Card>\n\n                <Card>\n                    <KowlTable\n                        dataSource={topics}\n                        rowKey={(x) => x.topicName}\n                        columns={[\n                            { title: 'Name', dataIndex: 'topicName', render: (t, r) => renderName(r), sorter: sortField('topicName'), className: 'whiteSpaceDefault', defaultSortOrder: 'ascend' },\n                            { title: 'Partitions', dataIndex: 'partitions', render: (t, r) => r.partitionCount, sorter: (a, b) => a.partitionCount - b.partitionCount, width: 1 },\n                            { title: 'Replication', dataIndex: 'replicationFactor', sorter: sortField('replicationFactor'), width: 1 },\n                            {\n                                title: 'CleanupPolicy', dataIndex: 'cleanupPolicy', width: 1,\n                                filterType: {\n                                    type: 'enum',\n                                    optionClassName: 'capitalize'\n                                },\n                                sorter: sortField('cleanupPolicy'),\n                            },\n                            {\n                                title: 'Size', render: (t, r) => renderLogDirSummary(r.logDirSummary), sorter: (a, b) => a.logDirSummary.totalSizeBytes - b.logDirSummary.totalSizeBytes, width: '140px',\n                            },\n                            {\n                                width: 1,\n                                title: ' ',\n                                key: 'action',\n                                className: 'msgTableActionColumn',\n                                render: (text, record) => (\n                                    <div style={{ display: 'flex', gap: '4px' }}>\n                                        <DeleteDisabledTooltip topic={record}>\n                                            <Button\n                                                type=\"text\"\n                                                className=\"iconButton\"\n                                                onClick={(event) => {\n                                                    event.stopPropagation();\n                                                    this.topicToDelete = record.topicName;\n                                                }}\n                                                danger\n                                            >\n                                                <TrashIcon />\n                                            </Button>\n                                        </DeleteDisabledTooltip>\n                                    </div>\n                                ),\n                            },\n                        ]}\n\n                        search={{\n                            searchColumnIndex: 0,\n                            isRowMatch: (row, regex) => {\n                                if (regex.test(row.topicName)) return true;\n                                if (regex.test(row.cleanupPolicy)) return true;\n                                return false;\n                            },\n\n                        }}\n\n                        observableSettings={uiSettings.topicList}\n                        onRow={(record) => ({\n                            onClick: () => appGlobal.history.push('/topics/' + record.topicName),\n                        })}\n                        rowClassName=\"hoverLink\"\n                    />\n                </Card>\n                <ConfirmDeletionModal\n                    topicToDelete={this.topicToDelete}\n                    onCancel={() => (this.topicToDelete = null)}\n                    onFinish={() => {\n                        this.topicToDelete = null;\n                        this.refreshData(true);\n                    }}\n                />\n            </motion.div>\n        );\n    }\n}\n\nconst iconAllowed = (\n    <span style={{ color: 'green' }}>\n        <CheckIcon size={16} />\n    </span>\n);\nconst iconForbidden = (\n    <span style={{ color: '#ca000a' }}>\n        <CircleSlashIcon size={15} />\n    </span>\n);\nconst iconClosedEye = (\n    <span style={{ color: '#0008', paddingLeft: '4px', transform: 'translateY(-1px)', display: 'inline-block' }}>\n        <EyeClosedIcon size={14} verticalAlign=\"middle\" />\n    </span>\n);\n\nconst renderName = (topic: Topic) => {\n    const actions = topic.allowedActions;\n\n    if (!actions || actions[0] == 'all') return topic.topicName; // happens in non-business version\n\n    let missing = 0;\n    for (const a of TopicActions) if (!actions.includes(a)) missing++;\n\n    if (missing == 0) return topic.topicName; // everything is allowed\n\n    // There's at least one action the user can't do\n    // Show a table of what they can't do\n    const popoverContent = (\n        <div>\n            <div style={{ marginBottom: '1em' }}>\n                You're missing permissions to view\n                <br />\n                one more aspects of this topic.\n            </div>\n            {QuickTable(\n                TopicActions.map((a) => ({\n                    key: a,\n                    value: actions.includes(a) ? iconAllowed : iconForbidden,\n                })),\n                {\n                    gapWidth: '6px',\n                    gapHeight: '2px',\n                    keyAlign: 'right',\n                    keyStyle: { fontSize: '86%', fontWeight: 700, textTransform: 'capitalize' },\n                    tableStyle: { margin: 'auto' },\n                }\n            )}\n        </div>\n    );\n\n    return (\n        <Popover content={popoverContent} placement=\"right\" mouseEnterDelay={0.1} mouseLeaveDelay={0.1}>\n            <span>\n                {topic.topicName}\n                {iconClosedEye}\n            </span>\n        </Popover>\n    );\n};\n\nfunction ConfirmDeletionModal({ topicToDelete, onFinish, onCancel }: { topicToDelete: string | null; onFinish: () => void; onCancel: () => void }) {\n    const [deletionPending, setDeletionPending] = useState(false);\n    const [error, setError] = useState<string | Error | null>(null);\n\n    const cleanup = () => {\n        setDeletionPending(false);\n        setError(null);\n    };\n\n    const finish = () => {\n        onFinish();\n        cleanup();\n        notification['success']({\n            message: `Topic \\`${topicToDelete}\\` deleted successfully`,\n        });\n    };\n\n    const cancel = () => {\n        onCancel();\n        cleanup();\n    };\n\n    return (\n        <Modal\n            className=\"topicDeleteModal\"\n            visible={topicToDelete != null}\n            centered\n            closable={false}\n            maskClosable={!deletionPending}\n            keyboard={!deletionPending}\n            okText={error ? 'Retry' : 'Yes'}\n            confirmLoading={deletionPending}\n            okType=\"danger\"\n            cancelText=\"No\"\n            cancelButtonProps={{ disabled: deletionPending }}\n            onCancel={cancel}\n            onOk={() => {\n                setDeletionPending(true);\n                api.deleteTopic(topicToDelete!) // modal is not shown when topic is null\n                    .then(finish)\n                    .catch(setError)\n                    .finally(() => { setDeletionPending(false) });\n            }}\n        >\n            <>\n                {error && <Alert type=\"error\" message={`An error occurred: ${typeof error === 'string' ? error : error.message}`} />}\n                <p>\n                    Are you sure you want to delete topic <strong>{topicToDelete}</strong>? This action is irrevocable.\n                </p>\n            </>\n        </Modal>\n    );\n}\n\nfunction DeleteDisabledTooltip(props: { topic: Topic; children: JSX.Element }): JSX.Element {\n    const { topic } = props;\n    const deleteButton = props.children;\n\n    const wrap = (button: JSX.Element, message: string) => (\n        <Tooltip placement=\"top\" trigger=\"hover\" mouseLeaveDelay={0} getPopupContainer={findPopupContainer} overlay={message}>\n            {React.cloneElement(button, {\n                disabled: true,\n                className: (button.props.className ?? '') + ' disabled',\n                onClick: undefined,\n            })}\n        </Tooltip>\n    );\n\n    return <>{hasDeletePrivilege(topic.allowedActions) ? deleteButton : wrap(deleteButton, \"You don't have 'deleteTopic' permission for this topic.\")}</>;\n}\n\nfunction hasDeletePrivilege(allowedActions?: Array<TopicAction>) {\n    return Boolean(allowedActions?.includes('all') || allowedActions?.includes('deleteTopic'));\n}\n\nexport default TopicList;\n","import React, { ReactNode, Component, CSSProperties } from \"react\";\nimport { numberToThousandsString } from \"../../utils/tsxUtils\";\n\nexport function ShortNum(p: { value: number, tooltip?: boolean, className?: string, style?: CSSProperties }) {\n    let { value, tooltip, className } = p;\n    const style = p.style\n    if (value == null) return \"\";\n\n    if (tooltip == null) tooltip = false;\n    const originalValue = value;\n\n    const million = 1000 * 1000;\n\n\n    let decimals: number;\n    let unit = \"\";\n    if (value >= million) {\n        // 1000000\n        unit = \"M\";\n        value /= million;\n        decimals = 2;\n    }\n    else if (value >= 1000) {\n        // 1000\n        unit = \"k\";\n        value /= 1000;\n        decimals = 1;\n    }\n    else {\n        // 0-999\n        decimals = 1;\n    }\n\n    // If, after down-scaling the number, it is still >=1k we need to add thousands separators\n    // const needsThoudandsSeparators = value >= 1000;\n\n\n    // Convert to fixed decimal string for rounding,\n    // then drop trailing zeroes by converting to number and back to string\n    const valString = Number(value.toFixed(decimals)).toLocaleString();\n    const str = unit\n        ? valString + unit\n        : valString;\n\n    if (tooltip) {\n        if (!className) className = 'tooltip';\n        else className += \" tooltip\";\n\n        return <div className={className} style={style}>\n            {str}\n            <span className=\"tooltiptext\">{numberToThousandsString(originalValue)}</span>\n        </div>\n    }\n    else {\n        return <span className={className} style={style}>\n            {str}\n        </span>\n    }\n}\n\n","import React, { Component, CSSProperties } from \"react\";\nimport { Table, Row, Statistic, Skeleton, Tag, Badge, Typography, Tree, Button, List, Collapse, Col, Checkbox, Card as AntCard, Input, Space, Tooltip, Popover, Empty, Modal, Select } from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport { api } from \"../../../state/backendApi\";\nimport { PageComponent, PageInitHelper } from \"../Page\";\nimport { makePaginationConfig, sortField } from \"../../misc/common\";\nimport { MotionDiv } from \"../../../utils/animationProps\";\nimport { GroupDescription, } from \"../../../state/restInterfaces\";\nimport { action, computed, makeObservable, observable, transaction } from \"mobx\";\nimport { appGlobal } from \"../../../state/appGlobal\";\nimport Card from \"../../misc/Card\";\nimport { WarningTwoTone, HourglassTwoTone, FireTwoTone, CheckCircleTwoTone, QuestionCircleOutlined } from '@ant-design/icons';\nimport { TablePaginationConfig } from \"antd/lib/table\";\nimport { OptionGroup, QuickTable, DefaultSkeleton, findPopupContainer, numberToThousandsString, InfoText } from \"../../../utils/tsxUtils\";\nimport { uiSettings } from \"../../../state/ui\";\nimport { HideStatisticsBarButton } from \"../../misc/HideStatisticsBarButton\";\nimport { PencilIcon, TrashIcon, XCircleIcon } from '@heroicons/react/solid';\nimport { TrashIcon as TrashIconOutline, PencilIcon as PencilIconOutline } from '@heroicons/react/outline';\nimport { EditOffsetsModal, GroupOffset, DeleteOffsetsModal, GroupDeletingMode } from \"./Modals\";\nimport { AnimatePresence, AnimateSharedLayout, motion } from \"framer-motion\";\nimport ReactCSSTransitionReplace from 'react-css-transition-replace';\nimport { ShortNum } from \"../../misc/ShortNum\";\nimport Tabs from \"../../misc/tabs/Tabs\";\nimport AclList from \"../topics/Tab.Acl/AclList\";\nimport { SkipIcon } from \"@primer/octicons-react\";\n\n\n@observer\nclass GroupDetails extends PageComponent<{ groupId: string }> {\n    @observable viewMode: 'topic' | 'member' = 'topic';\n    @observable onlyShowPartitionsWithLag: boolean = false;\n\n    @observable edittingOffsets: GroupOffset[] | null = null;\n\n    @observable deletingMode: GroupDeletingMode = 'group';\n    @observable deletingOffsets: GroupOffset[] | null = null;\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        const group = this.props.groupId;\n\n        p.title = this.props.groupId;\n        p.addBreadcrumb('Consumer Groups', '/groups');\n        if (group) p.addBreadcrumb(group, '/' + group);\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    refreshData(force: boolean) {\n        api.refreshConsumerGroup(this.props.groupId, force);\n        api.refreshConsumerGroupAcls(this.props.groupId, force);\n    }\n\n    renderPartitions(group: GroupDescription) {\n        return (\n            <>\n                <div style={{ display: 'flex', marginLeft: '.5em', marginBottom: '2em', gap: '1em', alignItems: 'flex-end' }}>\n                    <OptionGroup\n                        label=\"View\"\n                        options={{\n                            Members: 'member',\n                            Topics: 'topic',\n                        }}\n                        value={this.viewMode}\n                        onChange={(s) => (this.viewMode = s)}\n                    />\n\n                    <OptionGroup\n                        label=\"Filter\"\n                        options={{\n                            'Show All': false,\n                            'With Lag': true,\n                        }}\n                        value={this.onlyShowPartitionsWithLag}\n                        onChange={(s) => (this.onlyShowPartitionsWithLag = s)}\n                    />\n\n                    <span style={{ marginLeft: 'auto' }} />\n\n                    <EditDisabledTooltip group={group}>\n                        <Button onClick={() => this.editGroup()}>Edit Group</Button>\n                        <Button danger onClick={() => this.deleteGroup()}>\n                            Delete Group\n                        </Button>\n                    </EditDisabledTooltip>\n                </div>\n\n                {/* Main Content */}\n                {this.viewMode == 'member' ? (\n                    <GroupByMembers group={group} onlyShowPartitionsWithLag={this.onlyShowPartitionsWithLag} />\n                ) : (\n                    <GroupByTopics\n                        group={group}\n                        onlyShowPartitionsWithLag={this.onlyShowPartitionsWithLag}\n                        onEditOffsets={(g) => (this.edittingOffsets = g)}\n                        onDeleteOffsets={(offsets, mode) => {\n                            this.deletingMode = mode;\n                            this.deletingOffsets = offsets;\n                        }}\n                    />\n                )}\n            </>\n        );\n    }\n\n    render() {\n        // Get info about the group\n        if (api.consumerGroups.size == 0) return DefaultSkeleton;\n        const group = this.group;\n        if (!group) return DefaultSkeleton;\n\n        // Get info about each topic\n        const requiredTopics = group.members.flatMap((m) => m.assignments.map((a) => a.topicName)).distinct();\n        const totalPartitions = group.members.flatMap((m) => m.assignments).sum((a) => a.partitionIds.length);\n\n        return (\n            <MotionDiv style={{ margin: '0 1rem' }} className=\"groupDetails\">\n                {/* Statistics Card */}\n                {uiSettings.consumerGroupDetails.showStatisticsBar && (\n                    <Card className=\"statisticsBar\">\n                        <Row>\n                            <HideStatisticsBarButton onClick={() => (uiSettings.consumerGroupDetails.showStatisticsBar = false)} />\n                            <Statistic title=\"State\" valueRender={() => <GroupState group={group} />} />\n                            <ProtocolType group={group} />\n                            <Statistic title=\"Members\" value={group.members.length} />\n                            <Statistic title=\"Assigned Topics\" value={requiredTopics.length} />\n                            <Statistic title=\"Assigned Partitions\" value={totalPartitions} />\n                            <Statistic title=\"Protocol Type\" value={group.protocolType} />\n                            <Statistic title=\"Protocol\" value={group.protocol} />\n                            <Statistic title=\"Coordinator ID\" value={group.coordinatorId} />\n                            <Statistic title=\"Total Lag\" value={group.lagSum} />\n                        </Row>\n                    </Card>\n                )}\n\n                {/* Main Card */}\n                <Card>\n                    {/* View Buttons */}\n                    <Tabs\n                        tabs={[{\n                            key: \"partitions\",\n                            title: \"Partitions\",\n                            content: this.renderPartitions(group)\n                        }, {\n                            key: \"acl\",\n                            title: \"ACL\",\n                            content: <AclList acl={api.consumerGroupAcls.get(group.groupId)} />\n                        }]}\n                    />\n                </Card>\n\n                {/* Modals */}\n                <>\n                    <EditOffsetsModal group={group} offsets={this.edittingOffsets} onClose={() => (this.edittingOffsets = null)} />\n\n                    <DeleteOffsetsModal group={group} mode={this.deletingMode} offsets={this.deletingOffsets} onClose={() => (this.deletingOffsets = null)} />\n                </>\n            </MotionDiv>\n        );\n    }\n\n    @computed get group() {\n        return api.consumerGroups.get(this.props.groupId);\n    }\n\n    @action editGroup() {\n        const groupOffsets = this.group?.topicOffsets.flatMap((x) => {\n            return x.partitionOffsets.map((p) => {\n                return { topicName: x.topic, partitionId: p.partitionId, offset: p.groupOffset } as GroupOffset;\n            });\n        });\n\n        if (!groupOffsets) return;\n\n        this.edittingOffsets = groupOffsets;\n    }\n\n    @action deleteGroup() {\n        const groupOffsets = this.group?.topicOffsets.flatMap((x) => {\n            return x.partitionOffsets.map((p) => {\n                return { topicName: x.topic, partitionId: p.partitionId, offset: p.groupOffset } as GroupOffset;\n            });\n        });\n\n        if (!groupOffsets) return;\n\n        this.deletingOffsets = groupOffsets;\n        this.deletingMode = 'group';\n    }\n}\n\n@observer\nclass GroupByTopics extends Component<{\n    group: GroupDescription,\n    onlyShowPartitionsWithLag: boolean,\n    onEditOffsets: (offsets: GroupOffset[]) => void,\n    onDeleteOffsets: (offsets: GroupOffset[], mode: GroupDeletingMode) => void,\n}>{\n\n    pageConfig: TablePaginationConfig;\n\n    constructor(props: any) {\n        super(props);\n        this.pageConfig = makePaginationConfig(30);\n        this.pageConfig.hideOnSinglePage = true;\n        this.pageConfig.showSizeChanger = false;\n    }\n\n    render() {\n        const topicLags = this.props.group.topicOffsets;\n        const p = this.props;\n        const allAssignments = p.group.members\n            .flatMap(m => m.assignments\n                .map(as => ({ member: m, topicName: as.topicName, partitions: as.partitionIds })));\n\n        const lagsFlat = topicLags.flatMap(topicLag =>\n            topicLag.partitionOffsets.map(partLag => {\n\n                const assignedMember = allAssignments.find(e =>\n                    e.topicName == topicLag.topic\n                    && e.partitions.includes(partLag.partitionId));\n\n                return {\n                    topicName: topicLag.topic,\n                    partitionId: partLag.partitionId,\n                    groupOffset: partLag.groupOffset,\n                    highWaterMark: partLag.highWaterMark,\n                    lag: partLag.lag,\n\n                    assignedMember: assignedMember?.member,\n                    id: assignedMember?.member.id,\n                    clientId: assignedMember?.member.clientId,\n                    host: assignedMember?.member.clientHost\n                }\n            })\n        );\n\n        const lagGroupsByTopic = lagsFlat.groupInto(e => e.topicName).sort((a, b) => a.key.localeCompare(b.key))\n            .map(x => ({ topicName: x.key, partitions: x.items }));\n\n        const topicEntries = lagGroupsByTopic.map(g => {\n            const totalLagAll = g.partitions.sum(c => c.lag ?? 0);\n            const partitionsAssigned = g.partitions.filter(c => c.assignedMember).length;\n\n            if (p.onlyShowPartitionsWithLag)\n                g.partitions.removeAll(e => e.lag === 0);\n\n            if (g.partitions.length == 0)\n                return null;\n\n            return <Collapse.Panel key={g.topicName}\n                header={\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\n                        {/* Title */}\n                        <span style={{ fontWeight: 600, fontSize: '1.1em' }}>{g.topicName}</span>\n\n                        {/* EditButtons */}\n                        <div style={{ width: '2px' }} />\n                        <EditDisabledTooltip group={p.group}>\n                            <div className=\"iconButton\" onClick={e => { p.onEditOffsets(g.partitions); e.stopPropagation(); }} ><PencilIcon /></div>\n                            <div className=\"iconButton\" onClick={e => { p.onDeleteOffsets(g.partitions, 'topic'); e.stopPropagation(); }} ><TrashIcon /></div>\n                        </EditDisabledTooltip>\n\n                        {/* InfoTags */}\n                        <Tooltip placement='top' title='Summed lag of all partitions of the topic' mouseEnterDelay={0}\n                            getPopupContainer={findPopupContainer} >\n                            <Tag style={{ margin: '0', marginLeft: '8px' }} color='blue'>lag: {numberToThousandsString(totalLagAll)}</Tag>\n                        </Tooltip>\n                        <Tooltip placement='top' title='Number of assigned partitions' mouseEnterDelay={0}\n                            getPopupContainer={findPopupContainer}>\n                            <Tag color='blue'>assigned partitions: {partitionsAssigned}</Tag>\n                        </Tooltip>\n                        <Button\n                            size='small'\n                            style={{ marginLeft: 'auto' }}\n                            onClick={() => appGlobal.history.push('/topics/' + g.topicName)}\n                        >View Topic</Button>\n                    </div>\n                }>\n\n                <Table\n                    size='middle'\n                    showSorterTooltip={false}\n                    pagination={this.pageConfig}\n                    onChange={(pagination) => {\n                        if (pagination.pageSize) uiSettings.consumerGroupDetails.pageSize = pagination.pageSize;\n                        this.pageConfig.current = pagination.current;\n                        this.pageConfig.pageSize = pagination.pageSize;\n                    }}\n                    dataSource={g.partitions}\n                    rowKey={r => r.partitionId}\n                    rowClassName={(r) => (r.assignedMember) ? '' : 'consumerGroupNoMemberAssigned'}\n                    columns={[\n                        { width: 100, title: 'Partition', dataIndex: 'partitionId', sorter: sortField('partitionId'), defaultSortOrder: 'ascend' },\n                        {\n                            width: 'auto', title: 'Assigned Member', dataIndex: 'id', sorter: sortField('id'),\n                            render: (t, r) => (r.assignedMember ?\n                                renderMergedID(r.id, r.clientId) :\n                                <span style={{ opacity: 0.66, margin: '0 3px' }}><SkipIcon /> No assigned member</span>)\n                        },\n                        {\n                            width: 'auto', title: 'Host', dataIndex: 'host', sorter: sortField('host'),\n                            render: (t, r) => (r.host ??\n                                <span style={{ opacity: 0.66, margin: '0 3px' }}><SkipIcon /></span>)\n                        },\n                        { width: 120, title: 'Log End Offset', dataIndex: 'highWaterMark', render: v => numberToThousandsString(v), sorter: sortField('highWaterMark') },\n                        { width: 120, title: 'Group Offset', dataIndex: 'groupOffset', render: v => numberToThousandsString(v), sorter: sortField('groupOffset') },\n                        { width: 80, title: 'Lag', dataIndex: 'lag', render: v => ShortNum({ value: v, tooltip: true }), sorter: sortField('lag') },\n                        {\n                            width: 1, title: ' ', key: 'action', className: 'msgTableActionColumn',\n                            // filters: [],\n                            // filterDropdownVisible: false,\n                            // onFilterDropdownVisibleChange: (_) => this.showColumnSettings = true,\n                            // filterIcon: (_) => {\n                            //     return <Tooltip title='Column Settings' mouseEnterDelay={0.1}>\n                            //         <SettingFilled style={IsColumnSettingsEnabled ? { color: '#1890ff' } : { color: '#a092a0' }} />\n                            //     </Tooltip>\n                            // },\n                            render: (text, record) => <div style={{ paddingRight: '.5em', display: 'flex', gap: '4px' }}>\n                                <EditDisabledTooltip group={p.group}>\n                                    <span className=\"iconButton\" onClick={() => p.onEditOffsets([record])} ><PencilIcon /></span>\n                                    <span className=\"iconButton\" onClick={() => p.onDeleteOffsets([record], 'partition')} ><TrashIcon /></span>\n                                </EditDisabledTooltip>\n                            </div>,\n                        },\n                    ]}\n                />\n\n            </Collapse.Panel>\n        });\n\n        const defaultExpand = lagGroupsByTopic.length == 1\n            ? lagGroupsByTopic[0].topicName // only one -> expand\n            : undefined; // more than one -> collapse\n\n        const nullEntries = topicEntries.filter(e => e == null).length;\n        if (topicEntries.length == 0 || topicEntries.length == nullEntries)\n            return <Empty style={{\n                background: 'radial-gradient(hsl(0deg 0% 100%) 40%, hsl(0deg 0% 97%) 90%)',\n                borderRadius: '5px',\n                padding: '1.5em'\n            }}>\n                {p.onlyShowPartitionsWithLag\n                    ? <span>All {topicEntries.length} topics have been filtered (no lag on any partition).</span>\n                    : null}\n            </Empty>\n\n        return <Collapse bordered={false} defaultActiveKey={defaultExpand}>{topicEntries}</Collapse>;\n    }\n\n\n}\n\n@observer\nclass GroupByMembers extends Component<{ group: GroupDescription, onlyShowPartitionsWithLag: boolean }>{\n\n    pageConfig: TablePaginationConfig;\n\n    constructor(props: any) {\n        super(props);\n        this.pageConfig = makePaginationConfig(30);\n        this.pageConfig.hideOnSinglePage = true;\n        this.pageConfig.showSizeChanger = false;\n    }\n\n    render() {\n        const topicLags = this.props.group.topicOffsets;\n        const p = this.props;\n\n        const memberEntries = p.group.members\n            // sorting actually not necessary\n            // .sort((a, b) => a.id.localeCompare(b.id))\n            .map((m, i) => {\n                const assignments = m.assignments;\n\n                const assignmentsFlat = assignments\n                    .map(a => a.partitionIds.map(id => {\n                        const topicLag = topicLags.find(t => t.topic == a.topicName);\n                        const partLag = topicLag?.partitionOffsets.find(p => p.partitionId == id)?.lag;\n                        return {\n                            topicName: a.topicName,\n                            partitionId: id,\n                            partitionLag: partLag ?? 0,\n                        }\n                    })).flat();\n\n                const totalLag = assignmentsFlat.sum(t => t.partitionLag ?? 0);\n                const totalPartitions = assignmentsFlat.length;\n\n                if (p.onlyShowPartitionsWithLag)\n                    assignmentsFlat.removeAll(e => e.partitionLag === 0);\n\n                if (assignmentsFlat.length == 0)\n                    return null;\n\n                return <Collapse.Panel key={m.id} forceRender={false}\n                    header={\n                        <div>\n                            <span style={{ fontWeight: 600, fontSize: '1.1em' }}>{renderMergedID(m.id, m.clientId)}</span>\n                            <Tooltip placement='top' title='Host of the member' mouseEnterDelay={0} getPopupContainer={findPopupContainer}>\n                                <Tag style={{ marginLeft: '1em' }} color='blue'>host: {m.clientHost}</Tag>\n                            </Tooltip>\n                            <Tooltip placement='top' title='Number of assigned partitions' mouseEnterDelay={0} getPopupContainer={findPopupContainer}>\n                                <Tag color='blue'>partitions: {totalPartitions}</Tag>\n                            </Tooltip>\n                            <Tooltip placement='top' title='Summed lag over all assigned partitions of all topics' mouseEnterDelay={0} getPopupContainer={findPopupContainer}>\n                                <Tag color='blue'>lag: {totalLag}</Tag>\n                            </Tooltip>\n                        </div>\n                    }>\n\n                    <Table\n                        size='small'\n                        pagination={this.pageConfig}\n                        dataSource={assignmentsFlat}\n                        rowKey={r => r.topicName + r.partitionId}\n                        columns={[\n                            {\n                                width: 130, title: 'Topic', dataIndex: 'topicName', sorter: sortField('topicName'),\n                                render: (_, record) => <div\n                                    className='hoverLink'\n                                    onClick={() => appGlobal.history.push('/topics/' + record.topicName)}>\n                                    {record.topicName}\n                                </div>\n                            },\n                            { title: 'Partition', dataIndex: 'partitionId', sorter: sortField('partitionId') },\n                            { title: 'Lag', dataIndex: 'partitionLag', render: v => numberToThousandsString(v), sorter: sortField('partitionLag'), defaultSortOrder: 'descend' },\n                        ]}\n                    />\n                </Collapse.Panel>\n            });\n\n        const defaultExpand = p.group.members.length == 1\n            ? p.group.members[0].id // if only one entry, expand it\n            : undefined; // more than one -> collapse\n\n        const nullEntries = memberEntries.filter(e => e == null).length;\n        if (memberEntries.length == 0 || memberEntries.length == nullEntries)\n            return <Empty style={{\n                background: 'radial-gradient(hsl(0deg 0% 100%) 40%, hsl(0deg 0% 97%) 90%)',\n                borderRadius: '5px',\n                padding: '1.5em'\n            }}>\n                {p.onlyShowPartitionsWithLag\n                    ? <span>All {memberEntries.length} members have been filtered (no lag on any partition).</span>\n                    : null}\n            </Empty>\n\n        return <Collapse bordered={false} defaultActiveKey={defaultExpand}>{memberEntries}</Collapse>;\n    }\n}\n\n\nconst renderMergedID = (id?: string, clientId?: string) => {\n    if (clientId && id?.startsWith(clientId)) { // should always be true...\n        const suffix = id.substring(clientId.length);\n\n        return <span className='consumerGroupCompleteID'>\n            <span className='consumerGroupName'>{clientId}</span>\n            <span className='consumerGroupSuffix'>{suffix}</span>\n        </span>\n    }\n    // A client might be connected but it hasn't any assignments yet because it just joined the group\n    else if (clientId) {\n        return <span className='consumerGroupCompleteID'>{clientId ?? id ?? ''}</span>\n    }\n\n    return null\n};\n\n\n\nconst stateIcons = new Map<string, JSX.Element>([\n    ['stable', <CheckCircleTwoTone twoToneColor='#52c41a' />],\n    ['completingrebalance', <HourglassTwoTone twoToneColor='#52c41a' />],\n    ['preparingrebalance', <HourglassTwoTone twoToneColor='orange' />],\n    ['empty', <WarningTwoTone twoToneColor='orange' />],\n    ['dead', <FireTwoTone twoToneColor='orangered' />],\n    ['unknown', <QuestionCircleOutlined />],\n]);\nconst makeStateEntry = (iconName: string, displayName: string, description: string): [any, any] => [\n    <span>{stateIcons.get(iconName)} <span style={{ fontSize: '85%', fontWeight: 600 }}>{displayName}</span></span>,\n    <div style={{ maxWidth: '350px' }}>{description}</div>\n]\n\nconst consumerGroupStateTable = QuickTable([\n    makeStateEntry('stable', \"Stable\", \"Consumer group has members which have been assigned partitions\"),\n    makeStateEntry('completingrebalance', \"Completing Rebalance\", \"Kafka is assigning partitions to group members\"),\n    makeStateEntry('preparingrebalance', \"Preparing Rebalance\", \"A reassignment of partitions is required, members have been asked to stop consuming\"),\n    makeStateEntry('empty', \"Empty\", \"Consumer group exists, but does not have any members\"),\n    makeStateEntry('dead', \"Dead\", \"Consumer group does not have any members and it's metadata has been removed\"),\n    makeStateEntry('unknown', \"Unknown\", \"Group state is not known\"),\n], {\n    gapHeight: '.5em',\n    gapWidth: '.5em',\n    keyStyle: { verticalAlign: 'top' },\n});\n\nexport const GroupState = (p: { group: GroupDescription }) => {\n    const state = p.group.state.toLowerCase();\n    const icon = stateIcons.get(state);\n\n    return <Popover content={consumerGroupStateTable} placement='right'>\n        <span>\n            {icon}\n            <span> {p.group.state}</span>\n        </span>\n    </Popover>\n}\nconst ProtocolType = (p: { group: GroupDescription }) => {\n    const protocol = p.group.protocolType;\n    if (protocol == 'consumer') return null;\n\n    return <Statistic title='Protocol' value={protocol} />\n}\n\nconst EditDisabledTooltip = (p: { group: GroupDescription, children: [editButton: JSX.Element, deleteButton: JSX.Element] }): JSX.Element => {\n    const { group } = p;\n    const [editButton, deleteButton] = p.children;\n\n    const wrap = (button: JSX.Element, message: string) =>\n        <Tooltip\n            placement=\"top\" trigger=\"hover\" mouseLeaveDelay={0}\n            getPopupContainer={findPopupContainer}\n            overlay={message}\n        >\n            {React.cloneElement(button, {\n                disabled: true,\n                className: (button.props.className ?? '') + ' disabled',\n                onClick: undefined,\n            })}\n        </Tooltip>\n\n    // Wrap each button if the user doesn't have the corresponding permission\n    let editButtonMessage = null as string | null;\n    let deleteButtonMessage = null as string | null;\n\n    if (group.noEditPerms) editButtonMessage = \"You don't have 'editConsumerGroup' permissions for this group\";\n    if (group.noDeletePerms) deleteButtonMessage = \"You don't have 'deleteConsumerGroup' permissions for this group\";\n\n    if (group.isInUse) {\n        if (editButtonMessage == null) editButtonMessage = \"Consumer groups with active members cannot be edited\";\n        if (deleteButtonMessage == null) deleteButtonMessage = \"Consumer groups with active members cannot be deleted\";\n    }\n\n    if (group.noEditSupport)\n        if (editButtonMessage == null)\n            editButtonMessage = \"This cluster does not support editting group offsets\";\n\n    if (group.noDeleteSupport)\n        if (deleteButtonMessage == null)\n            deleteButtonMessage = \"This cluster does not support deleting group offsets\";\n\n    return <>\n        {editButtonMessage != null ? wrap(editButton, editButtonMessage) : editButton}\n        {deleteButtonMessage != null ? wrap(deleteButton, deleteButtonMessage) : deleteButton}\n    </>\n}\n\n\nexport default GroupDetails;\n\n","import React from \"react\";\nimport { Table, Empty, Skeleton, Row, Statistic, Tag, Input, Divider, Checkbox } from \"antd\";\nimport { observer } from \"mobx-react\";\n\nimport { api } from \"../../../state/backendApi\";\nimport { PageComponent, PageInitHelper } from \"../Page\";\nimport { GroupMemberDescription, GroupDescription } from \"../../../state/restInterfaces\";\nimport { motion } from \"framer-motion\";\nimport { animProps } from \"../../../utils/animationProps\";\nimport { makePaginationConfig, sortField } from \"../../misc/common\";\nimport { uiSettings } from \"../../../state/ui\";\nimport { appGlobal } from \"../../../state/appGlobal\";\nimport { GroupState } from \"./Group.Details\";\nimport { observable, autorun, IReactionDisposer } from \"mobx\";\nimport { containsIgnoreCase } from \"../../../utils/utils\";\nimport Card from \"../../misc/Card\";\nimport { editQuery } from \"../../../utils/queryHelper\";\nimport { uiState } from \"../../../state/uiState\";\nimport { DefaultSkeleton, Label, OptionGroup } from \"../../../utils/tsxUtils\";\nimport { BrokerList } from \"../reassign-partitions/components/BrokerList\";\nimport { ShortNum } from \"../../misc/ShortNum\";\nimport { KowlTable } from \"../../misc/KowlTable\";\n\n\n@observer\nclass GroupList extends PageComponent {\n\n    pageConfig = makePaginationConfig(uiSettings.consumerGroupList.pageSize);\n    quickSearchReaction: IReactionDisposer;\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'Consumer Groups';\n        p.addBreadcrumb('Consumer Groups', '/groups');\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    componentDidMount() {\n        // 1. use 'q' parameter for quick search (if it exists)\n        editQuery(query => {\n            if (query[\"q\"])\n                uiSettings.consumerGroupList.quickSearch = String(query[\"q\"]);\n        });\n\n        // 2. whenever the quick search box changes, update the url\n        this.quickSearchReaction = autorun(() => {\n            editQuery(query => {\n                const q = String(uiSettings.consumerGroupList.quickSearch);\n                if (q) query[\"q\"] = q;\n            });\n        });\n    }\n    componentWillUnmount() {\n        if (this.quickSearchReaction) this.quickSearchReaction();\n    }\n\n    refreshData(force: boolean) {\n        api.refreshConsumerGroups(force);\n    }\n\n    render() {\n        if (!api.consumerGroups) return DefaultSkeleton;\n\n        const groups = Array.from(api.consumerGroups.values());\n        const stateGroups = groups.groupInto(g => g.state);\n        const tableSettings = uiSettings.consumerGroupList ?? {};\n\n        return <>\n            <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n                <Card>\n                    <Row>\n                        <Statistic title='Total Groups' value={groups.length} />\n                        <div style={{ width: '1px', background: '#8883', margin: '0 1.5rem', marginLeft: 0 }} />\n                        {stateGroups.map(g =>\n                            <Statistic style={{ marginRight: '1.5rem' }} key={g.key} title={g.key} value={g.items.length} />\n                        )}\n                    </Row>\n                </Card>\n\n                <Card>\n                    {/* Searchbar */} {/* Filters */}\n                    <div style={{ marginBottom: '.5rem', padding: '0', whiteSpace: 'nowrap', display: 'flex', alignItems: 'center', gap: '2em' }}>\n                        <this.SearchBar />\n                        {/*\n                        <Checkbox\n                            value={uiSettings.consumerGroupList.hideEmpty}\n                            onChange={c => uiSettings.consumerGroupList.hideEmpty = c.target.checked}\n                        >\n                            Hide Empty\n                        </Checkbox>\n                        */}\n                    </div>\n\n                    {/* Content */}\n                    <KowlTable\n                        dataSource={groups}\n                        columns={[\n                            {\n                                title: 'State', dataIndex: 'state', width: '130px', sorter: sortField('state'), render: (t, r) => <GroupState group={r} />,\n                                filterType: { type: 'enum', }\n                            },\n                            {\n                                title: 'ID', dataIndex: 'groupId',\n                                sorter: sortField('groupId'),\n                                filteredValue: [tableSettings.quickSearch],\n                                onFilter: (filterValue, record: GroupDescription) => (!filterValue) || containsIgnoreCase(record.groupId, String(filterValue)),\n                                render: (t, r) => <this.GroupId group={r} />, className: 'whiteSpaceDefault'\n                            },\n                            { title: 'Coordinator', dataIndex: 'coordinatorId', width: 1, render: (x: number) => <BrokerList brokerIds={[x]} /> },\n                            { title: 'Protocol', dataIndex: 'protocol', width: 1 },\n                            { title: 'Members', dataIndex: 'members', width: 1, render: (t: GroupMemberDescription[]) => t.length, sorter: (a, b) => a.members.length - b.members.length, defaultSortOrder: 'descend' },\n                            { title: 'Lag (Sum)', dataIndex: 'lagSum', render: v => ShortNum({ value: v }), sorter: (a, b) => a.lagSum - b.lagSum },\n                        ]}\n\n                        observableSettings={tableSettings}\n\n                        rowKey={x => x.groupId}\n                        rowClassName=\"hoverLink\"\n                        onRow={(record) =>\n                        ({\n                            onClick: () => appGlobal.history.push('/groups/' + record.groupId),\n                        })}\n                    />\n                </Card>\n            </motion.div>\n        </>;\n    }\n\n    SearchBar = observer(() => {\n        return <Input allowClear={true} placeholder='Quick Search' size='large' style={{ width: '350px' }}\n            onChange={e => uiSettings.consumerGroupList.quickSearch = e.target.value}\n            value={uiSettings.consumerGroupList.quickSearch}\n        />\n    })\n\n    GroupId = (p: { group: GroupDescription }) => {\n        const protocol = p.group.protocolType;\n\n        if (protocol == 'consumer') return <>{p.group.groupId}</>;\n\n        return <>\n            <Tag>Protocol: {protocol}</Tag>\n            <span> {p.group.groupId}</span>\n        </>;\n    }\n}\n\nexport default GroupList;\n","import React, { Component } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Empty, Table, Statistic, Row, Tooltip, Space } from \"antd\";\nimport { ColumnProps } from \"antd/lib/table\";\nimport { PageComponent, PageInitHelper } from \"../Page\";\nimport { api } from \"../../../state/backendApi\";\nimport { uiSettings } from \"../../../state/ui\";\nimport { makePaginationConfig, sortField } from \"../../misc/common\";\nimport { Broker, ConfigEntry } from \"../../../state/restInterfaces\";\nimport { motion } from \"framer-motion\";\nimport { animProps } from \"../../../utils/animationProps\";\nimport { observable, computed, makeObservable } from \"mobx\";\nimport { prettyBytesOrNA } from \"../../../utils/utils\";\nimport { appGlobal } from \"../../../state/appGlobal\";\nimport Card from \"../../misc/Card\";\nimport { CrownOutlined } from '@ant-design/icons';\nimport { DefaultSkeleton, findPopupContainer, OptionGroup } from \"../../../utils/tsxUtils\";\nimport { ConfigList } from \"../../misc/ConfigList\";\nimport { KowlTable } from \"../../misc/KowlTable\";\n\n\n\n@observer\nclass BrokerList extends PageComponent {\n\n    pageConfig = makePaginationConfig(100, true);\n\n    @observable filteredBrokers: Broker[];\n    @computed get hasRack() { return api.clusterInfo?.brokers?.sum(b => b.rack ? 1 : 0) }\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'Brokers';\n        p.addBreadcrumb('Brokers', '/brokers');\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n\n        this.isMatch = this.isMatch.bind(this);\n        this.setResult = this.setResult.bind(this);\n    }\n\n    refreshData(force: boolean) {\n        api.refreshCluster(force);\n    }\n\n    render() {\n        if (!api.clusterInfo) return DefaultSkeleton;\n        if (api.clusterInfo.brokers.length == 0) return <Empty />\n\n        const info = api.clusterInfo;\n        const brokers = info.brokers;\n\n        const renderIdColumn = (text: string, record: Broker) => {\n            if (record.brokerId != info.controllerId) return text;\n            return <>{text}\n                <Tooltip mouseEnterDelay={0} overlay={'This broker is the current controller of the cluster'} getPopupContainer={findPopupContainer} placement='right'>\n                    <CrownOutlined style={{ padding: '2px', fontSize: '16px', color: '#0008', float: 'right' }} />\n                </Tooltip>\n            </>\n        };\n\n        const columns: ColumnProps<Broker>[] = [\n            { width: '80px', title: 'ID', dataIndex: 'brokerId', render: renderIdColumn, sorter: sortField('brokerId'), defaultSortOrder: 'ascend' },\n            { width: 'auto', title: 'Address', dataIndex: 'address', sorter: sortField('address') },\n            { width: '120px', title: 'Size', dataIndex: 'logDirSize', render: (t: number) => prettyBytesOrNA(t), sorter: sortField('logDirSize') }\n        ]\n\n        if (this.hasRack)\n            columns.push({ width: '100px', title: 'Rack', dataIndex: 'rack', sorter: sortField('rack') });\n\n        return <>\n            <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n                <Card>\n                    <Row> {/* type=\"flex\" */}\n                        <Statistic title='ControllerID' value={info.controllerId} />\n                        <Statistic title='Broker Count' value={brokers.length} />\n                        <Statistic title='Kafka Version' value={info.kafkaVersion} />\n                    </Row>\n                </Card>\n\n                <Card>\n                    <KowlTable\n                        dataSource={brokers}\n                        columns={columns}\n\n                        observableSettings={uiSettings.brokerList}\n\n                        rowKey={x => x.brokerId.toString()}\n                        rowClassName={() => 'pureDisplayRow'}\n                        expandable={{\n                            expandIconColumnIndex: 1,\n                            expandedRowRender: record => <BrokerDetails brokerId={record.brokerId} />\n                        }}\n                    />\n                </Card>\n            </motion.div>\n        </>\n    }\n\n    isMatch(filter: string, item: Broker) {\n        if (item.address.includes(filter)) return true;\n\n        if (item.rack)\n            if (item.rack.toLowerCase().includes(filter.toLowerCase())) return true;\n\n        return false;\n    }\n\n    setResult(filteredData: Broker[]) {\n        this.filteredBrokers = filteredData;\n    }\n}\n\nexport default BrokerList;\n\nconst BrokerDetails = observer(({ brokerId }: { brokerId: number }): JSX.Element => {\n    const id = brokerId;\n\n    const brokerConfigs = api.brokerConfigs.get(id);\n    if (brokerConfigs === undefined || brokerConfigs.length == 0) {\n        api.refreshBrokerConfig(id);\n        return DefaultSkeleton;\n    }\n\n    // Handle error while getting config\n    if (typeof brokerConfigs == 'string') return (\n        <div className=\"error\">\n            <h3>Error</h3>\n            <div>\n                <p>{brokerConfigs}</p>\n            </div>\n        </div>\n    );\n\n    // Normal Display\n    return <BrokerConfigView entries={brokerConfigs} />;\n});\n\n@observer\nclass BrokerConfigView extends Component<{ entries: ConfigEntry[] }> {\n    render() {\n        const entries = this.props.entries\n            .slice()\n            .sort((a, b) => {\n                switch (uiSettings.brokerList.propsOrder) {\n                    case 'default':\n                        return 0;\n                    case 'alphabetical':\n                        return a.name.localeCompare(b.name);\n                    case 'changedFirst':\n                        if (uiSettings.brokerList.propsOrder != 'changedFirst') return 0;\n                        const v1 = a.isExplicitlySet ? 1 : 0;\n                        const v2 = b.isExplicitlySet ? 1 : 0;\n                        return v2 - v1;\n                    default: return 0;\n                }\n            });\n\n        return (\n            <div className=\"brokerConfigView\">\n                <DetailsDisplaySettings />\n                <ConfigList configEntries={entries} valueDisplay={uiSettings.brokerList.valueDisplay} />\n            </div>\n        );\n    }\n}\n\n\nconst DetailsDisplaySettings = observer(() =>\n    <div style={{ marginLeft: '1px', marginBottom: '1em' }} className='brokerConfigViewSettings'>\n        <Row>\n            <Space size='middle'>\n\n                <OptionGroup label='Formatting'\n                    options={{\n                        \"Friendly\": 'friendly',\n                        \"Raw\": 'raw'\n                    }}\n                    value={uiSettings.brokerList.valueDisplay}\n                    onChange={s => uiSettings.brokerList.valueDisplay = s}\n                />\n\n                <OptionGroup label='Sort'\n                    options={{\n                        \"Changed First\": 'changedFirst',\n                        \"Alphabetical\": 'alphabetical',\n                        \"None\": 'default',\n                    }}\n                    value={uiSettings.brokerList.propsOrder}\n                    onChange={s => uiSettings.brokerList.propsOrder = s}\n                />\n            </Space>\n        </Row>\n    </div>);","import { Component, ReactNode } from \"react\";\nimport React from \"react\";\nimport { RoleBinding, Subject } from \"../../../state/restInterfaces\";\nimport { Collapse } from \"antd\";\nimport '../../../utils/arrayExtensions';\nimport { QuickTable, ObjToKv } from \"../../../utils/tsxUtils\";\n\nexport class RoleBindingComponent extends Component<{ binding: RoleBinding }>{\n    render() {\n        const binding = this.props.binding;\n\n        const rows: [any, any][] = [\n            [<span className='resourceLabel'>Binding</span>, <span className='roleBindingId'>{binding.ephemeralId}</span>],\n            [<span className=\"resourceLabelSub\">Metadata</span>, QuickTable(ObjToKv(binding.metadata), { tableStyle: { width: 'auto', fontFamily: 'monospace', fontSize: '80%' }, gapWidth: '6px' })],\n            [<span className=\"resourceLabelSub\">Subjects</span>, <Expander title='click to expand' className='subjectListExpander'>{binding.subjects.map(s => <SubjectComponent key={s.name + s.providerName} subject={s} />)}</Expander>]\n        ];\n\n        const t = QuickTable(rows, {\n            tableClassName: 'permissionTable',\n            tableStyle: { width: 'auto' },\n            gapWidth: '8px',\n            gapHeight: '4px',\n            keyStyle: { fontSize: '80%', whiteSpace: 'nowrap', width: '1%', verticalAlign: 'top', padding: '1px 0px' },\n            keyAlign: 'right',\n        });\n\n        return t;\n    }\n}\n\nexport class Expander extends Component<{ title: ReactNode, className?: string }> {\n    render() {\n        return <Collapse bordered={false} className={'expander ' + this.props.className}>\n            <Collapse.Panel key={0} header={this.props.title}>{this.props.children}</Collapse.Panel>\n        </Collapse>\n    }\n}\n\nexport class SubjectComponent extends Component<{ subject: Subject }>{\n    render() {\n        const s = this.props.subject;\n        // todo: this is a placeholder, to be completely replaced...\n\n        return <>\n            <div>\n                <span>{s.providerName}</span>\n                {'-'}\n                <span style={{ textTransform: 'capitalize' }}>{s.subjectKindName}</span>\n                {': '}\n                <span>{s.name}</span>\n                <span>{s.organization && ` (Org: ${s.organization})`}</span>\n            </div>\n        </>\n    }\n}","import { Component, ReactNode } from \"react\";\nimport React from \"react\";\nimport { Role, RoleBinding, Permission } from \"../../../state/restInterfaces\";\nimport { Table, Select, Input, Typography } from \"antd\";\nimport { observer } from \"mobx-react\";\nimport { api, } from \"../../../state/backendApi\";\nimport { sortField } from \"../../misc/common\";\nimport { MotionAlways } from \"../../../utils/animationProps\";\nimport '../../../utils/arrayExtensions';\nimport { QuickTable, DefaultSkeleton } from \"../../../utils/tsxUtils\";\nimport { RoleBindingComponent } from \"./Admin.RoleBindings\";\n\n\n\n\n\n@observer\nexport class AdminRoles extends Component<{}> {\n\n    render() {\n        if (!api.adminInfo) return DefaultSkeleton;\n        const roles = api.adminInfo.roles;\n\n        const table = <Table\n            size={'middle'} style={{ margin: '0', padding: '0', whiteSpace: 'nowrap' }} bordered={false}\n            showSorterTooltip={false}\n            dataSource={roles}\n            rowClassName={() => 'hoverLink'}\n            rowKey={x => x.name}\n            columns={[\n                { width: 1, title: 'Role Name', dataIndex: 'name', sorter: sortField('name') },\n                { title: '', render: r => (<span></span>) },\n            ]}\n            // expandIconAsCell={false} broken after upgrade to antd4\n            expandable={{\n                expandIconColumnIndex: 0,\n                expandRowByClick: true,\n                expandedRowRender: (r: Role) => <RoleComponent key={r.name} role={r} />\n            }}\n        />\n\n        return <MotionAlways>\n            {table}\n        </MotionAlways>\n    }\n}\n\nexport class RoleComponent extends Component<{ role: Role, grantedBy?: RoleBinding[] }>{\n    render() {\n        const { role, grantedBy } = this.props;\n\n        return <div style={{ display: 'grid', gridTemplateColumns: '50% 1px 50%', gridColumnGap: '4px' }}>\n\n            <div>\n                <div className='roleTitle'>Role Permissions</div>\n                <div style={{ paddingLeft: '.5rem', display: 'grid', gridAutoFlow: 'row', gridGap: '20px' }}>\n                    {role.permissions.map((p, index) => <PermissionComponent key={index} permission={p} />)}\n                </div>\n            </div>\n\n            {grantedBy && <>\n                <div style={{ background: '#dcdcdc' }} /> {/* seperator */}\n                <div style={{ paddingLeft: '1em' }}>\n                    <div className='roleTitle'>Granted By</div>\n                    <div style={{ paddingLeft: '.5rem', display: 'grid', gridAutoFlow: 'row', gridGap: '20px' }}>\n                        {this.props.grantedBy?.map(x => <RoleBindingComponent key={x.ephemeralId} binding={x} />)}\n                    </div>\n                </div>\n            </>}\n        </div>\n    }\n}\n\nconst joinerOr = <span className='joinerOr'>or</span>;\n\nexport class PermissionComponent extends Component<{ permission: Permission }>{\n    render() {\n        const p = this.props.permission;\n        const rows: [any, any][] = [\n            [<span className='resourceLabel'>Resource</span>, <span className='codeBox resourceName'>{p.resourceName}</span>],\n        ];\n        if (p.allowedActions.length > 0)\n            rows.push([<span className=\"resourceLabelSub\">Actions</span>, stringsToBoxes(p.allowedActions, null, 'permissionsList')]);\n        if (p.includes.length > 0 && !(p.includes[0] == \"*\") && !(p.includes[0] == \"^*$\") && !(p.includes[0] == \"^.*$\"))\n            rows.push([<span className=\"resourceLabelSub\">Includes</span>, stringsToBoxes(p.includes, joinerOr, 'permissionRegex')]);\n        if (p.excludes.length > 0)\n            rows.push([<span className=\"resourceLabelSub\">Excludes</span>, stringsToBoxes(p.excludes, joinerOr, 'permissionRegex')]);\n\n        const t = QuickTable(rows, {\n            tableClassName: 'permissionTable',\n            tableStyle: { width: 'auto' },\n            gapWidth: '8px',\n            keyStyle: { fontSize: '80%', whiteSpace: 'nowrap', width: '1%' },\n            keyAlign: 'right',\n        });\n\n        return t;\n    }\n}\n\n\nfunction stringsToBoxes(ar: string[], joiner?: ReactNode, wrapperClass?: string): ReactNode {\n    let r = ar.map<ReactNode>((str, index) => <span key={index} className='codeBox'>{str}</span>);\n    if (joiner) r = r.genericJoin(() => joiner);\n\n    return <div className={wrapperClass}>{r}</div>;\n}\n","import { Component } from \"react\";\nimport React from \"react\";\nimport { UserDetails } from \"../../../state/restInterfaces\";\nimport { Table, Skeleton, Select, Input, Typography, Collapse, Tooltip } from \"antd\";\nimport { observer } from \"mobx-react\";\nimport { api, } from \"../../../state/backendApi\";\nimport { sortField } from \"../../misc/common\";\nimport { motion } from \"framer-motion\";\nimport { animProps, MotionAlways, MotionDiv } from \"../../../utils/animationProps\";\nimport '../../../utils/arrayExtensions';\nimport { RoleComponent } from \"./Admin.Roles\";\nimport { UserOutlined } from \"@ant-design/icons\";\nimport { makeObservable, observable } from \"mobx\";\nimport { DefaultSkeleton } from \"../../../utils/tsxUtils\";\n\nconst { Text } = Typography;\nconst { Option } = Select;\nconst InputGroup = Input.Group;\n\n@observer\nexport class AdminUsers extends Component<{}> {\n\n    @observable quickSearch = '';\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n\n    render() {\n        if (!api.adminInfo) return DefaultSkeleton;\n        const users = this.quickSearch.length > 0\n            ? api.adminInfo.users.filter(u => u.internalIdentifier.includes(this.quickSearch) || u.oauthUserId.includes(this.quickSearch))\n            : api.adminInfo.users;\n\n\n        const table = <Table\n            size={'middle'} style={{ margin: '0', padding: '0', whiteSpace: 'nowrap' }} bordered={false}\n            showSorterTooltip={false}\n\n            dataSource={users}\n            rowKey={x => x.internalIdentifier + x.oauthUserId + x.loginProvider}\n            rowClassName={user => 'hoverLink' + (user.internalIdentifier == api.userData?.user.internalIdentifier ? ' tableRowHighlightSpecial' : null)}\n            columns={[\n                {\n                    width: 1, title: 'Identifier', dataIndex: 'internalIdentifier', sorter: sortField('internalIdentifier'), render: (t, r) => {\n                        if (r.internalIdentifier == api.userData?.user.internalIdentifier)\n                            return <span><Tooltip title=\"You are currently logged in as this user\"><UserOutlined style={{ fontSize: '16px', padding: '2px', color: '#ff9e3a' }} /></Tooltip>{' '}{t}</span>\n                        return t;\n                    }\n                },\n                { width: 1, title: 'OAuthUserID', dataIndex: 'oauthUserId', sorter: sortField('oauthUserId') },\n                { width: 1, title: 'Roles', dataIndex: 'roles', render: (text, user) => user.grantedRoles.map(r => r.role.name).join(', ') }, // can't sort\n                { width: 1, title: 'Login', dataIndex: 'loginProvider', sorter: sortField('loginProvider') },\n                { title: '', render: r => (<span></span>) },\n            ]}\n            // expandIconAsCell={false}\n            // expandIconColumnIndex={0}\n            expandRowByClick={true}\n            expandedRowRender={(user: UserDetails) =>\n                <Collapse defaultActiveKey={user.grantedRoles.length > 0 ? user.grantedRoles[0].role.name : undefined}>\n                    {user.grantedRoles.map(r =>\n                        <Collapse.Panel key={r.role.name} header={r.role.name}>\n                            <RoleComponent role={r.role} grantedBy={r.grantedBy} />\n                        </Collapse.Panel>\n                    )}\n                </Collapse>\n            }\n        />\n\n        return <MotionDiv>\n            <div style={{ display: 'flex', justifyContent: 'flex-start', marginBottom: '12px' }}>\n                <Input placeholder='Quick Search' allowClear={true} size='middle'\n                    style={{ width: '300px', padding: '2px 8px', whiteSpace: 'nowrap' }}\n                    value={this.quickSearch}\n                    onChange={e => this.quickSearch = e.target.value}\n                    addonAfter={null}\n                />\n            </div>\n\n            {table}\n        </MotionDiv>\n    }\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Alert, Tabs } from \"antd\";\nimport { PageComponent, PageInitHelper } from \"../Page\";\nimport { api } from \"../../../state/backendApi\";\nimport { motion } from \"framer-motion\";\nimport { animProps } from \"../../../utils/animationProps\";\nimport { toJson } from \"../../../utils/jsonUtils\";\nimport { appGlobal } from \"../../../state/appGlobal\";\nimport Card from \"../../misc/Card\";\nimport { AdminUsers } from \"./Admin.Users\";\nimport { AdminRoles } from \"./Admin.Roles\";\nimport { DefaultSkeleton } from \"../../../utils/tsxUtils\";\n\n\n@observer\nexport default class AdminPage extends PageComponent {\n\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'Admin';\n        p.addBreadcrumb('Admin', '/admin');\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n\n    }\n\n    refreshData(force: boolean) {\n        api.refreshAdminInfo(force);\n    }\n\n    render() {\n        if (api.adminInfo === undefined) return DefaultSkeleton;\n        const hasAdminPermissions = api.adminInfo !== null;\n\n        return <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n            <Card>\n                {hasAdminPermissions ?\n                    <Tabs style={{ overflow: 'visible' }} animated={false} >\n\n                        <Tabs.TabPane key=\"users\" tab=\"Users\">\n                            <AdminUsers />\n                        </Tabs.TabPane>\n\n                        <Tabs.TabPane key=\"roles\" tab=\"Roles\">\n                            <AdminRoles />\n                        </Tabs.TabPane>\n\n                        {/* <Tabs.TabPane key=\"bindings\" tab=\"Bindings\">\n                        <AdminRoleBindings />\n                    </Tabs.TabPane> */}\n\n                        <Tabs.TabPane key=\"debug\" tab=\"Debug\">\n                            <code><pre>{toJson(api.adminInfo, 4)}</pre></code>\n                        </Tabs.TabPane>\n\n                    </Tabs>\n                    : <div>\n                        <Alert type=\"error\" showIcon\n                            message=\"Permission denied\"\n                            description=\"You do not have the neccesary permissions to view this page.\"\n                        />\n                    </div>\n                }\n            </Card>\n        </motion.div>\n\n    }\n}\n","import React, { RefObject } from 'react';\nimport { observer } from 'mobx-react';\nimport { PageComponent, PageInitHelper } from '../Page';\nimport { api } from '../../../state/backendApi';\nimport { Alert, Button, Empty, Row, Statistic, Table } from 'antd';\nimport Card from '../../misc/Card';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { motion } from 'framer-motion';\nimport { animProps } from '../../../utils/animationProps';\nimport { makePaginationConfig, sortField } from '../../misc/common';\nimport { DefaultSkeleton } from '../../../utils/tsxUtils';\nimport { SchemaOverviewRequestError } from '../../../state/restInterfaces';\nimport { uiSettings } from '../../../state/ui';\n\nimport './Schema.List.scss';\nimport SearchBar from '../../misc/SearchBar';\nimport { makeObservable, observable } from 'mobx';\nimport { KowlTable } from '../../misc/KowlTable';\n\nfunction renderRequestErrors(requestErrors?: SchemaOverviewRequestError[]) {\n    if (!requestErrors || requestErrors.length === 0) {\n        return null;\n    }\n\n    return (\n        <Card className=\"SchemaList__error-card\">\n            {requestErrors.map(({ errorMessage, requestDescription }) => (\n                <Alert type=\"error\" message={errorMessage} description={requestDescription} closable className=\"SchemaList__alert\" />\n            ))}\n        </Card>\n    );\n}\n\nfunction renderNotConfigured() {\n    return (\n        <motion.div {...animProps} key={'b'} style={{ margin: '0 1rem' }}>\n            <Card style={{ padding: '2rem 2rem', paddingBottom: '3rem' }}>\n                <Empty description={null}>\n                    <div style={{ marginBottom: '1.5rem' }}>\n                        <h2>Not Configured</h2>\n\n                        <p>\n                            Schema Registry is not configured in Kowl.\n                            <br />\n                            To view all registered schemas, their documentation and their versioned history simply provide the connection credentials in the Kowl config.\n                        </p>\n                    </div>\n\n                    {/* todo: fix link once we have a better guide */}\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/cloudhut/kowl/blob/master/docs/config/kowl.yaml\">\n                        <Button type=\"primary\">Kowl Config Documentation</Button>\n                    </a>\n                </Empty>\n            </Card>\n        </motion.div>\n    );\n}\n\n@observer\nclass SchemaList extends PageComponent<{}> {\n    @observable searchBar: RefObject<SearchBar<any>> = React.createRef();\n    @observable filteredSchemaSubjects: { name: string }[];\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'Schema Registry';\n        p.addBreadcrumb('Schema Registry', '/schema-registry');\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    refreshData(force?: boolean) {\n        api.refreshSchemaOverview(force);\n    }\n\n    isFilterMatch(filterString: string, subject: { name: string }) {\n        return subject.name.toLowerCase().includes(filterString.toLowerCase());\n    }\n\n    render() {\n        if (api.schemaOverview === undefined) return DefaultSkeleton; // request in progress\n        if (api.schemaOverview === null || api.schemaOverviewIsConfigured === false) return renderNotConfigured(); // actually no data to display after successful request\n\n        const { mode, compatibilityLevel, requestErrors } = { ...api.schemaOverview };\n\n        return (\n            <motion.div {...animProps} key={'b'} style={{ margin: '0 1rem' }}>\n                <Card>\n                    <Row>\n                        <Statistic title=\"Mode\" value={mode}></Statistic>\n                        <Statistic title=\"Compatibility Level\" value={compatibilityLevel}></Statistic>\n                    </Row>\n                </Card>\n                {renderRequestErrors(requestErrors)}\n                <Card>\n                    <SearchBar<{ name: string }>\n                        dataSource={() => (api.schemaOverview?.subjects || []).map(str => ({ name: str }))}\n                        isFilterMatch={this.isFilterMatch}\n                        filterText={uiSettings.schemaList.quickSearch}\n                        onQueryChanged={(filterText) => (uiSettings.schemaList.quickSearch = filterText)}\n                        onFilteredDataChanged={data => this.filteredSchemaSubjects = data}\n                    />\n\n                    <KowlTable\n                        dataSource={this.filteredSchemaSubjects ?? []}\n                        columns={[\n                            { title: 'Name', dataIndex: 'name', sorter: sortField('name'), defaultSortOrder: 'ascend' },\n                            // { title: 'Compatibility Level', dataIndex: 'compatibilityLevel', sorter: sortField('compatibilityLevel'), width: 150 },\n                            // { title: 'Versions', dataIndex: 'versionsCount', sorter: sortField('versionsCount'), width: 80 },\n                            // { title: 'Latest Version', dataIndex: 'latestVersion', sorter: sortField('versionsCount'), width: 80 },\n                        ]}\n\n                        observableSettings={uiSettings.schemaList}\n\n                        rowClassName={() => 'hoverLink'}\n                        rowKey=\"name\"\n                        onRow={({ name }) => ({\n                            onClick: () => appGlobal.history.push(`/schema-registry/${name}`),\n                        })}\n                    />\n                </Card>\n            </motion.div>\n        );\n    }\n}\n\nexport default SchemaList;\n","import { Button, Col, Descriptions, Dropdown, message, Row, Select, Statistic, Table, Tag, Tooltip } from 'antd';\nimport Card from '../../misc/Card';\nimport { observer } from 'mobx-react';\nimport React from 'react';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { api } from '../../../state/backendApi';\nimport { PageComponent, PageInitHelper } from '../Page';\nimport { DefaultSkeleton, Label, OptionGroup, QuickTable, toSafeString } from '../../../utils/tsxUtils';\nimport { motion } from 'framer-motion';\nimport { animProps } from '../../../utils/animationProps';\nimport { KowlJsonView } from '../../misc/KowlJsonView';\nimport { sortField } from '../../misc/common';\nimport { JsonField, JsonFieldType, JsonSchema, Schema, SchemaField, SchemaType } from '../../../state/restInterfaces';\nimport { uiSettings } from '../../../state/ui';\nimport { title } from 'process';\nimport { ClipboardCopyIcon } from '@heroicons/react/outline';\nimport { NoClipboardPopover } from '../../misc/NoClipboardPopover';\nimport { isClipboardAvailable } from '../../../utils/featureDetection';\n\nexport interface SchemaDetailsProps {\n    subjectName: string;\n    query: {\n        version: number;\n    };\n}\n\nfunction renderSchemaType(value: any, record: SchemaField, index: number) {\n    return toSafeString(value);\n}\n\nfunction convertJsonField(name: string, field: JsonField): SchemaField {\n\n    switch (field.type) {\n        case JsonFieldType.ARRAY: {\n            let items = undefined;\n            if (field.items) {\n                const jsonField = convertJsonField(name, field.items);\n                items = jsonField.type;\n            }\n\n            return {\n                name,\n                type: {\n                    type: field.type,\n                    items,\n                }\n            };\n        }\n        case JsonFieldType.OBJECT: {\n            let fields: Record<string, unknown> | undefined = undefined;\n            if (field.properties) {\n                fields = {};\n                for (const name in field.properties) {\n                    const jsonField = convertJsonField(name, field.properties[name]);\n                    fields[name] = jsonField.type;\n                }\n            }\n            return {\n                name,\n                type: {\n                    type: field.type,\n                    properties: field.properties\n                }\n            };\n        }\n        case undefined: {\n            if (field.properties) {\n                return convertJsonField(name, { ...field, type: JsonFieldType.OBJECT });\n            }\n            if (field.items) {\n                return convertJsonField(name, { ...field, type: JsonFieldType.ARRAY });\n            }\n            break;\n        }\n        default: {\n            break;\n        }\n    }\n    return {\n        name,\n        type: field.type,\n    };\n}\n\n@observer\nclass SchemaDetailsView extends PageComponent<SchemaDetailsProps> {\n    initPage(p: PageInitHelper): void {\n        const subjectName = this.props.subjectName;\n        const version = this.props.query.version;\n\n        p.title = subjectName;\n        p.addBreadcrumb('Schema Registry', '/schema-registry');\n        p.addBreadcrumb(subjectName, `/schema-registry/${subjectName}?version=${version}`);\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    refreshData(force?: boolean) {\n        const version: number | 'latest' = this.props.query.version ?? 'latest';\n        api.refreshSchemaDetails(this.props.subjectName, version, force);\n    }\n\n    componentDidUpdate({ query: { version } }: SchemaDetailsProps) {\n        if (this.props.query.version !== version) {\n            this.refreshData(true);\n        }\n    }\n\n    render() {\n        const schemaDetails = api.schemaDetails;\n        if (!schemaDetails) return DefaultSkeleton;\n\n        const {\n            schemaId,\n            version,\n            compatibility,\n            type: schemaType,\n            schema,\n            rawSchema\n        } = schemaDetails;\n\n        let { type, name, namespace, doc, fields } = schema as Schema;\n        if (schemaType === SchemaType.JSON) {\n            const jsonSchema = schema as JsonSchema;\n            ({ type, title: name, description: doc, $id: namespace } = jsonSchema);\n            fields = [];\n            if (jsonSchema.properties) {\n                for (const p in jsonSchema.properties) {\n                    const property = jsonSchema.properties[p];\n                    fields.push(convertJsonField(p, property));\n                }\n            }\n        }\n\n        // Create the object that will be shown in the JSON Viewer\n        // From this new \"display object\" we can remove the 'rawSchema' that we added\n        const jsonViewObject = Object.assign({}, schemaDetails);\n        delete (jsonViewObject as any)['rawSchema'];\n\n        const versions = schemaDetails.registeredVersions ?? [];\n        const defaultVersion = this.props.query.version ?? (versions.length > 0 ? versions[versions.length - 1] : 'latest');\n\n        return (\n            <motion.div {...animProps} key={'b'} style={{ margin: '0 1rem' }}>\n                <Card>\n                    <Row>\n                        <Statistic title=\"Subject\" value={this.props.subjectName}></Statistic>\n                        <Statistic title=\"Schema ID\" value={schemaId}></Statistic>\n                        <Statistic title=\"Version\" value={version}></Statistic>\n                        <Statistic title=\"Compatibility\" value={compatibility}></Statistic>\n                    </Row>\n                </Card>\n                <Card>\n                    <div style={{ display: 'flex', alignItems: 'flex-start', columnGap: '1.5em', marginBottom: '1em' }}>\n                        <Label text=\"Version\">\n                            <Select style={{ minWidth: '200px' }}\n                                defaultValue={defaultVersion}\n                                onChange={(version) => appGlobal.history.push(`/schema-registry/${this.props.subjectName}?version=${version}`)}\n                                disabled={versions.length == 0}\n                            >\n                                {versions.map(v => <Select.Option value={v} key={v}>Version {v} {v == versions[versions.length - 1] ? '(latest)' : null}</Select.Option>)}\n                            </Select>\n                        </Label>\n\n                        <Label text='Details' style={{ alignSelf: 'stretch' }}>\n                            <div style={{ display: 'inline-flex', flexWrap: 'wrap', minHeight: '32px', alignItems: 'center', rowGap: '.3em' }}>\n                                {Object.entries({\n                                    \"Type\": type,\n                                    \"Name\": name,\n                                    \"Namespace\": namespace,\n                                }).map(([k, v]) => {\n                                    if (!k || v === undefined || v === null) return null;\n                                    return <Tag color='blue' key={k}><span style={{ color: '#2d5b86' }}>{k}:</span> {toSafeString(v)}</Tag>\n                                })}\n                                {!!doc && <a href={doc}>\n                                    <Tag color='blue' style={{ cursor: 'pointer' }}><span style={{ color: '#2d5b86' }}>Documentation:</span> <a style={{ textDecoration: 'underline' }} href={doc}>{doc}</a></Tag>\n                                </a>}\n                            </div>\n\n                        </Label>\n                    </div>\n\n                    <div style={{ marginBottom: '1.5em', display: 'flex', gap: '1em' }}>\n                        <OptionGroup label=''\n                            options={{\n                                \"Show Fields\": 'fields',\n                                \"Show JSON\": 'json',\n                            }}\n                            value={uiSettings.schemaDetails.viewMode}\n                            onChange={s => uiSettings.schemaDetails.viewMode = s}\n                        />\n\n                        <NoClipboardPopover placement='top'>\n                            <div> {/* the additional div is necessary because popovers do not trigger on disabled elements, even on hover */}\n                                <Tooltip overlay='Copy raw JSON to clipboard'>\n                                    <Button\n                                        disabled={!isClipboardAvailable}\n                                        icon={<ClipboardCopyIcon style={{ width: '18px', color: '#555' }} />}\n                                        onClick={() => {\n                                            navigator.clipboard.writeText(rawSchema);\n                                            message.success(\"Schema copied to clipboard\", 1.2);\n                                        }}\n                                    />\n                                </Tooltip>\n                            </div>\n                        </NoClipboardPopover>\n\n                    </div>\n\n                    <div>\n                        {uiSettings.schemaDetails.viewMode == 'json' &&\n                            <KowlJsonView\n                                shouldCollapse={false}\n                                collapsed={false}\n                                src={jsonViewObject}\n                                style={{\n                                    border: 'solid thin lightgray',\n                                    borderRadius: '.25em',\n                                    padding: '1em 1em 1em 2em',\n                                    marginBottom: '1.5rem',\n                                }}\n                            />\n                        }\n\n                        {uiSettings.schemaDetails.viewMode == 'fields' &&\n                            <Table\n                                size=\"small\"\n                                columns={[\n                                    { title: 'Name', dataIndex: 'name', className: 'whiteSpaceDefault', }, // sorter: sortField('name')\n                                    { title: 'Type', dataIndex: 'type', className: 'whiteSpaceDefault', render: renderSchemaType }, //  sorter: sortField('type'),\n                                    { title: 'Default', dataIndex: 'default', className: 'whiteSpaceDefault' },\n                                    { title: 'Documentation', dataIndex: 'doc', className: 'whiteSpaceDefault' },\n                                ]}\n                                rowKey=\"name\"\n                                dataSource={fields}\n                                pagination={false}\n                                style={{\n                                    maxWidth: '100%',\n                                    marginTop: '1.5rem',\n                                    marginBottom: '1.5rem',\n                                }}\n                            />\n                        }\n\n                    </div>\n                </Card>\n            </motion.div>\n        );\n    }\n}\n\nexport default SchemaDetailsView;\n\n","import React, { } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Empty, Table, Select, Input, Button, Alert } from \"antd\";\nimport { ColumnProps } from \"antd/lib/table\";\nimport { PageComponent, PageInitHelper } from \"../Page\";\nimport { api } from \"../../../state/backendApi\";\nimport { uiSettings } from \"../../../state/ui\";\nimport { makePaginationConfig, sortField } from \"../../misc/common\";\nimport { AclRequestDefault, AclResource, AclRule, Broker } from \"../../../state/restInterfaces\";\nimport { motion } from \"framer-motion\";\nimport { animProps } from \"../../../utils/animationProps\";\nimport { comparer, computed, makeObservable, observable } from \"mobx\";\nimport { containsIgnoreCase } from \"../../../utils/utils\";\nimport { appGlobal } from \"../../../state/appGlobal\";\nimport Card from \"../../misc/Card\";\nimport { DefaultSkeleton, Label } from \"../../../utils/tsxUtils\";\nimport { toJson } from \"../../../utils/jsonUtils\";\nimport { KowlTable } from \"../../misc/KowlTable\";\nimport { LockIcon } from \"@primer/octicons-react\";\n\n\ntype AclRuleFlat = AclResource & AclRule\n\n// todo:\n// - remove debug code\n// - add filter controls\n// - make each \"resource\" row expandable to show all the AclRules that apply\n\n@observer\nclass AclList extends PageComponent {\n\n    @observable filteredBrokers: Broker[];\n    @observable resourceTypeFilter: string = \"\";\n    @observable filterText = \"\";\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'ACLs';\n        p.addBreadcrumb('ACLs', '/acls');\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    refreshData(force: boolean) {\n        if (api.userData != null && !api.userData.canListAcls) return;\n        api.refreshAcls(AclRequestDefault, force);\n    }\n\n    render() {\n        if (api.userData != null && !api.userData.canListAcls) return PermissionDenied;\n        if (api.ACLs?.aclResources === undefined) return DefaultSkeleton;\n\n        const warning = api.ACLs === null\n            ? <Alert type=\"warning\" message=\"You do not have the necessary permissions to view ACLs\" showIcon style={{ marginBottom: '1em' }} />\n            : null;\n\n        const noAclAuthorizer = !api.ACLs?.isAuthorizerEnabled\n            ? <Alert type=\"warning\" message=\"There's no authorizer configured in your Kafka cluster\" showIcon style={{ marginBottom: '1em' }} />\n            : null;\n\n        const resources = this.filteredResources;\n\n        const columns: ColumnProps<typeof resources[0]>[] = [\n            { width: '120px', title: 'Resource', dataIndex: 'resourceType', sorter: sortField('resourceType'), defaultSortOrder: 'ascend' },\n            { width: '120px', title: 'Permission', dataIndex: 'permissionType', sorter: sortField('permissionType') },\n            { width: 'auto', title: 'Principal', dataIndex: 'principal', sorter: sortField('principal') },\n            { width: '160px', title: 'Operation', dataIndex: 'operation', sorter: sortField('operation') },\n            { width: 'auto', title: 'PatternType', dataIndex: 'resourcePatternType', sorter: sortField('resourcePatternType') },\n            { width: 'auto', title: 'Name', dataIndex: 'resourceName', sorter: sortField('resourceName') },\n            { width: '120px', title: 'Host', dataIndex: 'host', sorter: sortField('host') },\n        ];\n\n        return <>\n            <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n\n                <Card>\n                    <this.SearchControls />\n\n                    {warning}\n                    {noAclAuthorizer}\n\n                    <KowlTable\n                        dataSource={resources}\n                        columns={columns}\n\n                        observableSettings={uiSettings.brokerList.configTable}\n\n                        rowKey={x => x.eqKey}\n                        rowClassName={() => 'pureDisplayRow'}\n                    />\n                </Card>\n            </motion.div>\n        </>\n    }\n\n    @computed.struct get availableResourceTypes(): { value: string, label: string }[] {\n        const acls = api.ACLs;\n        if (acls?.aclResources == null) return [];\n        // issue: we can't easily filter by 'resourceType' (because it is a string, and we have to use an enum for requests...)\n        // so we have to cheat by building our own list of what types are available\n        const ar = acls.aclResources.map(res => res.resourceType).distinct().map(str => ({ value: str, label: capitalize(str.toLowerCase()) }));\n        ar.unshift({ label: 'Any', value: '' });\n        return ar;\n    }\n\n    @computed({ equals: comparer.structural }) get filteredResources() {\n\n        const filtered = this.flatResourceList\n            // filter by category\n            .filter(res => (this.resourceTypeFilter == \"\") || (this.resourceTypeFilter == res.resourceType))\n            // filter by name\n            .filter(this.isFilterMatch)\n            .sort((a, b) => a.resourceName.localeCompare(b.resourceName))\n            .sort((a, b) => a.operation.localeCompare(b.operation))\n            .sort((a, b) => a.principal.localeCompare(b.principal));\n        return filtered;\n    }\n\n    @computed get flatResourceList() {\n        const acls = api.ACLs;\n        if (acls?.aclResources == null) return [];\n        const flatResources = acls.aclResources\n            .map(res => res.acls.map(rule => ({ ...res, ...rule })))\n            .flat()\n            .map(x => ({ ...x, eqKey: toJson(x) }));\n        return flatResources;\n    }\n\n    isFilterMatch = (item: AclRuleFlat) => {\n        const text = this.filterText;\n        if (containsIgnoreCase(item.host, text)) return true;\n        if (containsIgnoreCase(item.operation, text)) return true;\n        if (containsIgnoreCase(item.permissionType, text)) return true;\n        if (containsIgnoreCase(item.principal, text)) return true;\n        if (containsIgnoreCase(item.resourceName, text)) return true;\n        if (containsIgnoreCase(String(item.resourcePatternType), text)) return true;\n        if (containsIgnoreCase(item.resourceType, text)) return true;\n\n        return false;\n    };\n\n    SearchControls = observer(() => {\n\n        return (\n            <div style={{ margin: '0 1px', marginBottom: '12px', display: 'flex', gap: '12px', flexWrap: 'wrap', alignItems: 'flex-end' }}>\n                <Label text='Resource Type'>\n                    <Select\n                        options={this.availableResourceTypes}\n                        value={this.resourceTypeFilter}\n                        onChange={(val) => {\n                            this.resourceTypeFilter = val;\n                        }}\n                        style={{ width: '11em' }}\n                        size='middle' />\n                </Label>\n\n                <Input allowClear={true} placeholder='Quick Search' style={{ width: '250px', marginLeft: 'auto' }}\n                    onChange={x => this.filterText = x.target.value}\n                    value={this.filterText}\n                />\n            </div>\n        );\n    })\n}\n\ntype FlatResource = AclList[\"flatResourceList\"][0];\n\nexport default AclList;\n\nfunction capitalize(str: string): string {\n    if (!str) return str;\n    return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\n//console.log('enum entries are:', resourceTypes.map(e => ({ name: e.name.replace(/([A-Z]+)/g, \" $1\"), value: e.value })));\n// console.log('enum entries are:', OptionValues);\n\nconst PermissionDenied = <>\n    <motion.div {...animProps} key={'aclNoPerms'} style={{ margin: '0 1rem' }}>\n        <Card style={{ padding: '2rem 2rem', paddingBottom: '3rem' }}>\n            <Empty description={null}>\n                <div style={{ marginBottom: '1.5rem' }}>\n                    <h2><span><LockIcon verticalAlign='middle' size={20} /></span> Permission Denied</h2>\n                    <p>\n                        You are not allowed to view this page.\n                        <br />\n                        Contact the administrator if you think this is an error.\n                    </p>\n                </div>\n\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/cloudhut/kowl/blob/master/docs/authorization/roles.md\">\n                    <Button type=\"primary\">Kowl documentation for roles and permissions</Button>\n                </a>\n            </Empty>\n        </Card>\n    </motion.div>\n</>\n","export default __webpack_public_path__ + \"static/media/elastic.a9e1a9d5.svg\";","export default __webpack_public_path__ + \"static/media/mssql.2168306c.png\";","export default __webpack_public_path__ + \"static/media/mysql.42caebd0.svg\";","export default __webpack_public_path__ + \"static/media/debezium.8e40ddd7.png\";","export default __webpack_public_path__ + \"static/media/confluent.69200f1d.png\";","export default __webpack_public_path__ + \"static/media/apache.37d39b2c.svg\";","export default __webpack_public_path__ + \"static/media/hdfs.230ccc85.png\";","export default __webpack_public_path__ + \"static/media/jdbc.195658f4.png\";","export default __webpack_public_path__ + \"static/media/amazon-s3.174ed583.png\";","export default __webpack_public_path__ + \"static/media/postgres.52d31cc1.png\";","export default __webpack_public_path__ + \"static/media/salesforce.34f2c743.png\";","export default __webpack_public_path__ + \"static/media/google-bigquery.720c1317.svg\";","export default __webpack_public_path__ + \"static/media/google-pub-sub.a3571be2.svg\";","export default __webpack_public_path__ + \"static/media/snowflake.28954151.png\";","export default __webpack_public_path__ + \"static/media/cassandra.e0e05ba3.png\";","export default __webpack_public_path__ + \"static/media/db2.e585fe19.png\";","export default __webpack_public_path__ + \"static/media/twitter.172471ff.svg\";","export default __webpack_public_path__ + \"static/media/neo4j.39504871.svg\";","\n\nimport { Alert, Button, Empty, message, Modal, Popover, Statistic } from 'antd';\nimport { motion } from 'framer-motion';\nimport { observer } from 'mobx-react';\nimport React, { Component, CSSProperties, useState } from 'react';\n\nimport { api } from '../../../state/backendApi';\nimport { ApiError, ClusterConnectorInfo, ClusterConnectors, ClusterConnectorTaskInfo, ConnectorState } from '../../../state/restInterfaces';\nimport { animProps } from '../../../utils/animationProps';\nimport { findPopupContainer, LayoutBypass } from '../../../utils/tsxUtils';\nimport Card from '../../misc/Card';\n\nimport ElasticLogo from '../../../assets/connectors/elastic.svg';\nimport MsSqlLogo from '../../../assets/connectors/mssql.png';\nimport MySqlLogo from '../../../assets/connectors/mysql.svg';\nimport MongoDBLogo from '../../../assets/connectors/mongodb.png';\nimport DebeziumLogo from '../../../assets/connectors/debezium.png';\nimport ConfluentLogo from '../../../assets/connectors/confluent.png';\nimport ApacheLogo from '../../../assets/connectors/apache.svg';\nimport HdfsLogo from '../../../assets/connectors/hdfs.png';\nimport JdbcLogo from '../../../assets/connectors/jdbc.png';\nimport AmazonS3 from '../../../assets/connectors/amazon-s3.png';\nimport PostgresqlLogo from '../../../assets/connectors/postgres.png';\nimport SalesforceLogo from '../../../assets/connectors/salesforce.png';\nimport ServicenowLogo from '../../../assets/connectors/servicenow.png';\nimport BigQueryLogo from '../../../assets/connectors/google-bigquery.svg';\nimport PubSubLogo from '../../../assets/connectors/google-pub-sub.svg';\nimport SnowflakeLogo from '../../../assets/connectors/snowflake.png';\nimport CassandraLogo from '../../../assets/connectors/cassandra.png';\nimport DB2Logo from '../../../assets/connectors/db2.png';\nimport TwitterLogo from '../../../assets/connectors/twitter.svg';\nimport Neo4jLogo from '../../../assets/connectors/neo4j.svg';\nimport { action, makeObservable, observable, runInAction } from 'mobx';\nimport { CheckCircleTwoTone, ExclamationCircleTwoTone, HourglassTwoTone, PauseCircleOutlined, WarningTwoTone } from '@ant-design/icons';\nimport { QuestionMarkCircleIcon } from '@heroicons/react/solid';\n\ninterface ConnectorMetadata {\n    readonly className?: string;         // match by exact match\n    readonly classNamePrefix?: string;   // match by prefix\n\n    readonly logo?: JSX.Element,         // img element for the connector\n    readonly friendlyName?: string;      // override display name (instead of just 'className without namespace')\n    readonly author?: string;\n}\n\nconst fallbackConnector: ConnectorMetadata = { logo: <QuestionMarkCircleIcon className='connectorLogo' style={{ transform: 'translateY(2px) scale(1.15)' }} color='#a9a9a9' /> };\n\n// Order of entries matters:\n// - first step is checking if there is any exact match for 'className'\n// - second step is going through the list and taking the first entry where 'classNamePrefix' matches\nconst connectorMetadata: ConnectorMetadata[] = [\n    // Confluent Connectors\n    {\n        classNamePrefix: \"io.confluent.connect.hdfs.\",\n        logo: <img src={HdfsLogo} alt='HDFS logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.connect.s3.\",\n        logo: <img src={AmazonS3} alt='Amazon S3 logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.connect.jms.\",\n        logo: <img src={JdbcLogo} alt='JMS logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.connect.jdbc.\",\n        logo: <img src={JdbcLogo} alt='JDBC logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.connect.salesforce.\",\n        logo: <img src={SalesforceLogo} alt='Salesforce logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.connect.servicenow.\",\n        logo: <img src={ServicenowLogo} alt='Servicenow logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.connect.elasticsearch.\",\n        logo: <img src={ElasticLogo} alt='Elastic logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.connect.gcp.pubsub.\",\n        logo: <img src={PubSubLogo} alt='Google PubSub logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.connect.cassandra.\",\n        logo: <img src={CassandraLogo} alt='Cassandra logo' className='connectorLogo' />,\n        author: \"Confluent\"\n    } as const,\n\n    // Debezium Connectors\n    {\n        classNamePrefix: \"io.debezium.connector.sqlserver.\",\n        logo: <img src={MsSqlLogo} alt='MSSQL logo' className='connectorLogo' />,\n        author: \"Debezium\"\n    } as const,\n    {\n        classNamePrefix: \"io.debezium.connector.mysql.\",\n        logo: <img src={MySqlLogo} alt='MySQL logo' className='connectorLogo' />,\n        author: \"Debezium\"\n    } as const,\n    {\n        classNamePrefix: \"io.debezium.connector.mongodb.\",\n        logo: <img src={MongoDBLogo} alt='MongoDB logo' className='connectorLogo' />,\n        author: \"Debezium\"\n    } as const,\n    {\n        classNamePrefix: \"io.debezium.connector.postgresql.\",\n        logo: <img src={PostgresqlLogo} alt='PostgreSQL logo' className='connectorLogo' />,\n        author: \"Debezium\"\n    } as const,\n    {\n        classNamePrefix: \"io.debezium.connector.cassandra.\",\n        logo: <img src={CassandraLogo} alt='Cassandra logo' className='connectorLogo' />,\n        author: \"Debezium\"\n    } as const,\n    {\n        classNamePrefix: \"io.debezium.connector.db2.\",\n        logo: <img src={DB2Logo} alt='IBM DB2 logo' className='connectorLogo' />,\n        author: \"Debezium\"\n    } as const,\n\n    // Stream Reactor / Lenses\n    {\n        classNamePrefix: \"com.datamountaineer.streamreactor.connect.cassandra.\",\n        logo: <img src={CassandraLogo} alt='Cassandra logo' className='connectorLogo' />,\n        author: \"Lenses\"\n    } as const,\n\n    // WePay Connectors\n    {\n        classNamePrefix: \"com.wepay.kafka.connect.bigquery.\",\n        logo: <img src={BigQueryLogo} alt='Google BigQuery logo' className='connectorLogo' />,\n        author: \"WePay\"\n    } as const,\n\n    // Snowflake Connectors\n    {\n        classNamePrefix: \"com.snowflake.kafka.connector\",\n        logo: <img src={SnowflakeLogo} alt='Snowflake logo' className='connectorLogo' />,\n        author: \"Snowflake\"\n    } as const,\n\n    // Community Connector\n    {\n        classNamePrefix: \"com.github.jcustenborder.kafka.connect.twitter\",\n        logo: <img src={TwitterLogo} alt='Twitter logo' className='connectorLogo' />,\n        author: \"Jcustenborder\"\n    } as const,\n    {\n        classNamePrefix: \"streams.kafka.connect.sink.Neo4jSinkConnector\",\n        logo: <img src={Neo4jLogo} alt='Neo4j logo' className='connectorLogo' />,\n        author: \"Neo4j Streams\"\n    } as const,\n\n    // Fallbacks with a very generous classname prefix (usually just the maintainers' logo)\n    {\n        classNamePrefix: \"io.debezium.\",\n        logo: <img src={DebeziumLogo} alt='Debezium logo' className='connectorLogo' />,\n        author: \"Debezium\",\n    } as const,\n    {\n        classNamePrefix: \"io.confluent.\",\n        logo: <img src={ConfluentLogo} alt='Confluent logo' className='connectorLogo' />,\n        author: \"Confluent\",\n    } as const,\n    {\n        classNamePrefix: \"org.apache.kafka.\",\n        logo: <img src={ApacheLogo} alt='Apache Software Foundation logo' className='connectorLogo' />,\n        author: \"Apache Software Foundation\"\n    } as const,\n];\n\nconst connectorMetadataMatchCache: {\n    [className: string]: ConnectorMetadata\n} = {};\n\nexport function findConnectorMetadata(className: string): ConnectorMetadata | null {\n    const c = className;\n\n    // Quick and dirty cache\n    // If cache has too many entries, remove some\n    const cacheKeys = Object.keys(connectorMetadataMatchCache);\n    if (cacheKeys.length > 200)\n        for (const k of cacheKeys.slice(0, 5))\n            delete connectorMetadataMatchCache[k];\n\n    // try find in cache\n    let meta = connectorMetadataMatchCache[c];\n    if (meta) return meta;\n\n    // look for exact match\n    for (const e of connectorMetadata)\n        if (e.className)\n            if (e.className == c) {\n                meta = e;\n                break;\n            }\n\n    // look for prefix match\n    if (!meta)\n        for (const e of connectorMetadata)\n            if (e.classNamePrefix)\n                if (c.startsWith(e.classNamePrefix)) {\n                    meta = e;\n                    break;\n                }\n\n    // use fallback icon\n    if (!meta) {\n        meta = fallbackConnector;\n    }\n\n    // store entry in cache\n    connectorMetadataMatchCache[c] = meta;\n    return meta;\n}\n\n\n\nexport const ConnectorClass = observer((props: { observable: { class: string; } }) => {\n    const c = props.observable.class;\n    const meta = findConnectorMetadata(c);\n    const displayName = meta?.friendlyName ?? removeNamespace(c);\n\n    return <div style={{ height: '1px', overflow: 'visible', display: 'flex', alignItems: 'center' }}>\n        {meta && meta.logo &&\n            <span style={{ verticalAlign: 'inherit', marginRight: '5px' }}>\n                <LayoutBypass width='22px' transform='translateY(-1px)' >\n                    <div style={{ width: '22px', height: '22px' }}>\n                        {meta.logo}\n                    </div>\n                </LayoutBypass>\n            </span>\n        }\n\n        <Popover placement='right' overlayClassName='popoverSmall'\n            getPopupContainer={findPopupContainer}\n            content={<div style={{ maxWidth: '500px', whiteSpace: 'pre-wrap' }}>\n                {c}\n            </div>}\n        >\n            {displayName}\n        </Popover>\n    </div>\n});\n\nexport function removeNamespace(className: string): string {\n    if (!className) return className;\n\n    const lastDot = className.lastIndexOf('.');\n    if (lastDot >= 0)\n        return className.substr(lastDot + 1, undefined);\n\n    return className;\n}\n\nexport const OverviewStatisticsCard = observer(() => {\n    const totalClusters = api.connectConnectors?.clusters?.length ?? '...';\n    const totalConnectors = api.connectConnectors?.clusters?.sum(c => c.totalConnectors) ?? '...';\n\n    return <Card>\n        <div style={{ display: 'flex', gap: '1em' }}>\n            <Statistic title=\"Connect Clusters\" value={totalClusters} />\n            <Statistic title=\"Total Connectors\" value={totalConnectors} />\n        </div>\n    </Card>\n});\n\nexport const ClusterStatisticsCard = observer((p: { clusterName: string }) => {\n    const cluster = api.connectConnectors?.clusters?.first(x => x.clusterName == p.clusterName);\n\n    const runningConnectors = cluster?.runningConnectors ?? '...';\n    const totalConnectors = cluster?.totalConnectors ?? '...';\n\n    const addr = cluster?.clusterAddress ?? '...';\n    const version = cluster?.clusterInfo.version ?? '...';\n\n    return <Card>\n        <div style={{ display: 'flex', gap: '1em' }}>\n            <Statistic title=\"Cluster\" value={cluster?.clusterName} />\n\n            <Statistic title=\"Connectors\" value={`${runningConnectors} / ${totalConnectors}`} />\n            <Statistic title=\"Address\" value={addr} />\n            <Statistic title=\"Version\" value={version} />\n\n        </div>\n    </Card>\n});\n\nexport const ConnectorStatisticsCard = observer((p: { clusterName: string, connectorName: string }) => {\n    const cluster = api.connectConnectors?.clusters?.first(x => x.clusterName == p.clusterName);\n    const connector = cluster?.connectors.first(x => x.name == p.connectorName);\n\n    return <Card>\n        <div style={{ display: 'flex', gap: '1em' }}>\n            <Statistic title=\"Cluster\" value={cluster?.clusterName} />\n            <Statistic title=\"Connector\" value={connector?.name} />\n\n            <Statistic title=\"Tasks\" value={`${connector?.runningTasks} / ${connector?.totalTasks}`} />\n        </div>\n    </Card>\n});\n\n\n\n\nexport function NotConfigured() {\n    return (\n        <motion.div {...animProps} key={'b'} style={{ margin: '0 1rem' }}>\n            <Card style={{ padding: '2rem 2rem', paddingBottom: '3rem' }}>\n                <Empty description={null}>\n                    <div style={{ marginBottom: '1.5rem' }}>\n                        <h2>Not Configured</h2>\n\n                        <p>\n                            Kafka Connect is not configured in Kowl.\n                            <br />\n                            Setup the connection details to your Kafka Connect cluster in your Kowl config, to view and control all your connectors and tasks.\n                        </p>\n                    </div>\n\n                    <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/cloudhut/kowl/blob/master/docs/config/kowl.yaml\">\n                        <Button type=\"primary\">Kowl Config Documentation</Button>\n                    </a>\n                </Empty>\n            </Card>\n        </motion.div>\n    );\n}\n\n@observer\nexport class ConfirmModal<T> extends Component<{\n    target: () => T | null, // when set, dialog is shown\n    clearTarget: () => void, // called when the dialog is done\n\n    content: (target: T) => JSX.Element, // \"are you sure you want to ...\"\n    successMessage: (target: T) => JSX.Element, // \"x done successfully\"\n\n    onOk: (target: T) => Promise<void>,\n}> {\n    @observable isPending = false;\n    @observable error: string | Error | null = null;\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    @action.bound async onOk() {\n        this.isPending = true;\n        const target = this.props.target()!;\n        try {\n            await this.props.onOk(target);\n            this.success(target);\n        } catch (err) {\n            this.error = err as any;\n        } finally {\n            this.isPending = false;\n        }\n    }\n\n    @action.bound success(target: T) {\n        const messageContent = this.props.successMessage(target);\n        const msg = message.success({ content: messageContent, onClick: () => msg?.() });\n\n        this.cancel();\n    }\n\n    @action.bound cancel() {\n        runInAction(() => {\n            this.isPending = false;\n            this.error = null;\n            this.props.clearTarget();\n        })\n\n    }\n\n    render() {\n        const target = this.props.target();\n        const err = this.renderError();\n\n        const content = target && this.props.content(target);\n\n        return <Modal\n            className=\"confirmModal\"\n            visible={target != null}\n            centered closable={false} maskClosable={!this.isPending} keyboard={!this.isPending}\n            okText={this.error ? 'Retry' : 'Yes'}\n            confirmLoading={this.isPending}\n            okType=\"danger\"\n            cancelText=\"No\"\n            cancelButtonProps={{ disabled: this.isPending }}\n            onCancel={this.cancel}\n            onOk={this.onOk}\n        >\n            <>\n                <div>\n                    {content}\n                </div>\n                {err && <Alert\n                    type=\"error\" style={{ marginTop: '1em', padding: '10px 15px' }}\n                    message={err.title}\n                    description={err.content}\n                />}\n\n            </>\n        </Modal>\n    }\n\n    renderError(): { title: JSX.Element, content: JSX.Element } | undefined {\n        if (!this.error)\n            return undefined;\n\n        const txt = typeof this.error == 'string'\n            ? this.error\n            : this.error.message;\n\n        // try parsing as json\n        let apiErr: ApiError | undefined;\n        try {\n            apiErr = JSON.parse(txt) as ApiError;\n            if (!apiErr || !apiErr.message || !apiErr.statusCode)\n                apiErr = undefined;\n        } catch {\n            apiErr = undefined;\n        }\n\n        // return text only\n        if (!apiErr)\n            return {\n                title: <>Error</>,\n                content: <>{txt}</>\n            };\n\n        // render error object\n        return {\n            title: <div style={{ display: 'inline-flex', alignItems: 'center', gap: '0.3em' }}>\n                <span>Error</span>\n                <span style={{ fontSize: '75%', opacity: 0.7 }}>- {apiErr.statusCode}</span>\n            </div>,\n            content: <div className='codeBox' style={{ mixBlendMode: 'multiply' }}>{apiErr.message}</div>\n        };\n    }\n}\n\n// Takes an observable object that is either a single connector (runningTasks and totalTasks properties)\n// or an array of connectors (in which case it will show the sum)\n\nexport const TasksColumn = observer((props: { observable: ClusterConnectors | ClusterConnectorInfo }) => {\n    const obs = props.observable;\n\n    let running = 0;\n    let total = 0;\n\n    if ('error' in obs && obs.error != null)\n        return null;\n\n    if ('clusterName' in obs) {\n        // ClusterConnectors\n        if (obs.error) return null;\n        running = obs.connectors.sum(x => x.runningTasks);\n        total = obs.connectors.sum(x => x.totalTasks);\n    } else if ('name' in obs) {\n        // ClusterConnectorInfo\n        running = obs.runningTasks;\n        total = obs.totalTasks;\n    }\n\n    return <>\n        {running < total ? <span style={mr05}>{warnIcon}</span> : null}\n        <span>{running} / {total}</span>\n    </>\n});\n\ntype ConnectorInfo = { runningConnectors: number, totalConnectors: number, error?: string };\nexport const ConnectorsColumn = observer((props: { observable: ConnectorInfo | ConnectorInfo[] }) => {\n\n    let running = 0;\n    let total = 0;\n    let error: string | undefined = undefined;\n    if ('runningConnectors' in props.observable) {\n        running = props.observable.runningConnectors;\n        total = props.observable.totalConnectors;\n        error = props.observable.error;\n    } else {\n        if (props.observable.length == 0)\n            return null;\n        error = props.observable[0].error;\n        running = props.observable.sum(x => x.runningConnectors);\n        total = props.observable.sum(x => x.totalConnectors);\n    }\n\n    if (error)\n        return null;\n\n    return <>\n        {running < total ? <span style={mr05}>{warnIcon}</span> : null}\n        <span>{running} / {total}</span>\n    </>\n});\n\nexport const TaskState = observer((p: { observable: { state: ClusterConnectorTaskInfo['state'], trace?: string, taskId?: number } }) => {\n    const [err, showErr] = useState(undefined as string | undefined);\n\n    const task = p.observable;\n    const state = task.state;\n\n    const iconWrapper = (icon: JSX.Element) => <span style={{ display: 'inline-flex', fontSize: '17px', verticalAlign: 'middle' }}>\n        <LayoutBypass width='17px'>\n            {icon}\n        </LayoutBypass>\n    </span>\n\n    let icon: JSX.Element = <></>;\n    if (state == ConnectorState.Running) icon = iconWrapper(okIcon);\n    if (state == ConnectorState.Failed) icon = iconWrapper(errIcon);\n    if (state == ConnectorState.Paused) icon = iconWrapper(pauseIcon);\n    if (state == ConnectorState.Unassigned) icon = iconWrapper(waitIcon);\n\n    let stateContent = <span style={{ display: 'flex', alignItems: 'center', gap: '4px', height: 'auto' }} className='capitalize'>\n        {icon}\n        {String(state).toLowerCase()}\n    </span>;\n\n\n    let errBtn: JSX.Element | undefined = undefined;\n    let modal: JSX.Element | undefined = undefined;\n    if (task.taskId != null && task.trace) {\n        errBtn = <LayoutBypass height='12px' width='autos'>\n            <Button danger onClick={() => showErr(task.trace)} style={{ padding: '0px 12px', display: 'inline-flex', alignItems: 'center', height: '30px', gap: '5px' }}>\n                {stateContent}\n                <span>(Show Error)</span>\n            </Button>\n        </LayoutBypass>\n\n        const close = () => showErr(undefined);\n        modal = <Modal visible={err != null} onOk={close} onCancel={close} cancelButtonProps={{ style: { display: 'none' } }}\n            bodyStyle={{ paddingBottom: '8px', paddingTop: '14px' }}\n            centered\n            closable={false} maskClosable={true}\n            okText='Close' width='60%'\n        >\n            <>\n                <h3>{`Error trace of task ${task.taskId}`}</h3>\n                <div className='codeBox' style={{ whiteSpace: 'pre', overflow: 'scroll', width: '100%', padding: '10px 8px' }}>{err}</div>\n            </>\n        </Modal>;\n\n        stateContent = errBtn;\n    }\n\n    return <div>{stateContent}{modal}</div>\n});\n\n\nexport const okIcon = <CheckCircleTwoTone twoToneColor='#52c41a' />;\nexport const warnIcon = <WarningTwoTone twoToneColor='orange' />;\nexport const errIcon = <ExclamationCircleTwoTone twoToneColor='orangered' />;\nconst waitIcon = <HourglassTwoTone twoToneColor='#888' />;\nconst pauseIcon = <span style={{ color: '#555' }}><PauseCircleOutlined /></span>;\n\nexport const mr05: CSSProperties = { marginRight: '.5em' };\nexport const ml05: CSSProperties = { marginLeft: '.5em' };\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import { CheckCircleTwoTone, WarningTwoTone } from '@ant-design/icons';\nimport {Button, Checkbox, Col, Empty, Popover, Row, Statistic, Table, Tooltip} from 'antd';\nimport { motion } from 'framer-motion';\nimport { autorun, IReactionDisposer, makeObservable, observable } from 'mobx';\nimport { observer } from 'mobx-react';\nimport React, { Component, CSSProperties } from 'react';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { api } from '../../../state/backendApi';\nimport { TopicActions, Topic, ConnectClusterShard, ClusterConnectors, ClusterConnectorInfo } from '../../../state/restInterfaces';\nimport { uiSettings } from '../../../state/ui';\nimport { animProps } from '../../../utils/animationProps';\nimport { clone } from '../../../utils/jsonUtils';\nimport { editQuery } from '../../../utils/queryHelper';\nimport { Code, DefaultSkeleton, findPopupContainer, LayoutBypass, QuickTable } from '../../../utils/tsxUtils';\nimport { prettyBytesOrNA } from '../../../utils/utils';\nimport Card from '../../misc/Card';\nimport { makePaginationConfig, renderLogDirSummary, sortField } from '../../misc/common';\nimport { KowlTable } from '../../misc/KowlTable';\nimport SearchBar from '../../misc/SearchBar';\nimport Tabs, { Tab } from '../../misc/tabs/Tabs';\nimport { PageComponent, PageInitHelper } from '../Page';\nimport { ConnectorClass, ConnectorsColumn, errIcon, mr05, NotConfigured, OverviewStatisticsCard, TasksColumn, TaskState } from './helper';\nimport { Link } from 'react-router-dom';\n\n\n\n@observer\nclass KafkaConnectOverview extends PageComponent {\n    constructor(p: any) {\n        super(p);\n        // makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'Overview';\n        p.addBreadcrumb('Kafka Connect', '/kafka-connect');\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    refreshData(force: boolean) {\n        api.refreshConnectClusters(force);\n    }\n\n    render() {\n        if (!api.connectConnectors) return DefaultSkeleton;\n        if (api.connectConnectors.isConfigured == false) return <NotConfigured />;\n        const settings = uiSettings.kafkaConnect;\n\n        return (\n            <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n                <OverviewStatisticsCard />\n\n                <Card>\n                    <Tabs tabs={connectTabs}\n                        onChange={x => settings.selectedTab}\n                        selectedTabKey={settings.selectedTab}\n                    />\n                </Card>\n            </motion.div>\n        );\n    }\n}\n\nexport default KafkaConnectOverview;\n\n\n@observer\nclass TabClusters extends Component {\n\n    render() {\n        const clusters = api.connectConnectors?.clusters;\n        if (clusters == null) return null;\n\n        return (<>\n          <div style={{display: 'flex', marginBottom: \"15px\"}}><Link style={{marginLeft: 'auto'}} to={'/create-connector'}><Button type={'primary'}>Create Connector</Button></Link></div>\n\n          <KowlTable<ClusterConnectors>\n            dataSource={clusters}\n            columns={[\n                {\n                    title: 'Cluster', dataIndex: 'clusterName',\n                    render: (_, r) => {\n\n                        if (r.error) {\n                            return <Tooltip overlay={r.error} getPopupContainer={findPopupContainer}>\n                                <span style={mr05}>{errIcon}</span>\n                                {r.clusterName}\n                            </Tooltip>\n                        }\n\n                        return <span className='hoverLink' style={{ display: 'inline-block', width: '100%' }}\n                            onClick={() => appGlobal.history.push(`/kafka-connect/${r.clusterName}`)}>\n                            {r.clusterName}\n                        </span>\n                    },\n                    sorter: sortField('clusterName'), defaultSortOrder: 'ascend',\n                },\n                {\n                    dataIndex: 'clusterAddress',\n                    title: 'Version', render: (_, r) => r.clusterInfo.version, sorter: sortField('clusterAddress'),\n                    filterType: { type: 'enum' },\n                },\n                {\n                    dataIndex: 'connectors',\n                    width: 150,\n                    title: 'Connectors', render: (_, r) => <ConnectorsColumn observable={r} />\n                },\n                {\n                    dataIndex: 'connectors',\n                    width: 150,\n                    title: 'Tasks', render: (_, r) => <TasksColumn observable={r} />\n                },\n            ]}\n            search={{\n                searchColumnIndex: 0,\n                isRowMatch: (row, regex) => {\n                    const isMatch = regex.test(row.clusterName) || regex.test(row.clusterInfo.version);\n                    return isMatch;\n                },\n            }}\n            observableSettings={uiSettings.kafkaConnect.clusters}\n            pagination={{\n                defaultPageSize: 10,\n            }}\n            rowKey='clusterName'\n          />\n        </>)\n    }\n}\n\n@observer\nclass TabConnectors extends Component {\n    render() {\n        const clusters = api.connectConnectors!.clusters;\n        const allConnectors = clusters?.flatMap(cluster => cluster.connectors.map(c => ({ cluster, ...c })));\n\n        return <KowlTable\n            dataSource={allConnectors}\n            columns={[\n                {\n                    title: 'Connector', dataIndex: 'name',\n                    width: '35%',\n                    render: (_, r) => (\n                        <Tooltip placement=\"topLeft\" title={r.name} getPopupContainer={findPopupContainer}>\n                            <span className='hoverLink' style={{ display: 'inline-block', width: '100%' }}\n                                onClick={() => appGlobal.history.push(`/kafka-connect/${r.cluster.clusterName}/${r.name}`)}>\n                                {r.name}\n                            </span>\n                        </Tooltip>\n                    ),\n                    sorter: sortField('name'), defaultSortOrder: 'ascend'\n                },\n                {\n                    title: 'Class', dataIndex: 'class',\n                    render: (_, r) => <ConnectorClass observable={r} />,\n                    sorter: sortField('class')\n                },\n                {\n                    width: 100,\n                    title: 'Type', dataIndex: 'type',\n                    className: 'capitalize',\n                    sorter: sortField('type'),\n                    filterType: { type: 'enum', optionClassName: 'capitalize' },\n\n                },\n                {\n                    width: 120,\n                    title: 'State', dataIndex: 'state',\n                    render: (_, r) => <TaskState observable={r} />,\n                    sorter: sortField('state'),\n                    filterType: { type: 'enum', optionClassName: 'capitalize', toDisplay: x => x ? String(x).toLowerCase() : '' },\n                },\n                {\n                    width: 120,\n                    title: 'Tasks', render: (_, c) => <TasksColumn observable={c} />\n                },\n                {\n                    title: 'Cluster',\n                    render: (_, c) => <Code nowrap>{c.cluster.clusterName}</Code>,\n                    sorter: (a, b) => String(a.cluster.clusterName).localeCompare(String(b.cluster.clusterName))\n                },\n            ]}\n            search={{\n                searchColumnIndex: 0,\n                isRowMatch: (row, regex) => regex.test(row.name)\n                    || regex.test(row.class)\n                    || regex.test(row.type)\n                    || regex.test(row.state)\n                    || regex.test(row.cluster.clusterName),\n            }}\n            rowKey={r => r.cluster.clusterName + r.cluster.clusterAddress + r.name}\n\n            observableSettings={uiSettings.kafkaConnect.connectors}\n            pagination={{\n                defaultPageSize: 10,\n            }}\n            className='connectorsTable'\n        />\n    }\n}\n\n@observer\nclass TabTasks extends Component {\n    render() {\n        const clusters = api.connectConnectors!.clusters;\n        const allConnectors = clusters?.flatMap(cluster => cluster.connectors.map(c => ({ cluster, ...c })));\n        const allTasks = allConnectors?.flatMap(con => con.tasks.map(task => {\n            return {\n                ...task,\n                connector: con,\n                cluster: con.cluster,\n\n                connectorName: con.name,\n            };\n        }));\n\n        return <KowlTable\n            dataSource={allTasks}\n            columns={[\n                {\n                    title: 'Connector', dataIndex: 'name',\n                    width: '35%',\n                    sorter: sortField('connectorName'), defaultSortOrder: 'ascend',\n                    render: (_, r) => (\n                        <span className='hoverLink' onClick={() => appGlobal.history.push(`/kafka-connect/${r.cluster.clusterName}/${r.connectorName}`)}>\n                            {r.connectorName}\n                        </span>\n                    )\n                },\n                {\n                    title: 'Task ID', dataIndex: 'taskId', sorter: sortField('taskId'),\n                    width: 50,\n                },\n                {\n                    title: 'State', dataIndex: 'state',\n                    render: (_, r) => <TaskState observable={r} />,\n                    sorter: sortField('state'),\n                    filterType: { type: 'enum', optionClassName: 'capitalize', toDisplay: x => String(x).toLowerCase() },\n                },\n                {\n                    title: 'Worker', dataIndex: 'workerId', sorter: sortField('workerId'),\n                    filterType: { type: 'enum' },\n                },\n                {\n                    title: 'Cluster',\n                    render: (_, c) => <Code nowrap>{c.cluster.clusterName}</Code>\n                },\n            ]}\n            rowKey={r => r.cluster.clusterName + r.cluster.clusterAddress + r.connectorName + r.taskId}\n\n            search={{\n                searchColumnIndex: 0,\n                isRowMatch: (row, regex) => regex.test(row.connectorName)\n                    || regex.test(String(row.taskId))\n                    || regex.test(row.state)\n                    || regex.test(row.workerId)\n                    || regex.test(row.cluster.clusterName)\n            }}\n\n            observableSettings={uiSettings.kafkaConnect.tasks}\n            pagination={{\n                defaultPageSize: 10,\n            }}\n            className='tasksTable'\n        />\n    }\n}\n\nexport type ConnectTabKeys = 'clusters' | 'connectors' | 'tasks';\nconst connectTabs: Tab[] = [\n    { key: 'clusters', title: 'Clusters', content: <TabClusters /> },\n    { key: 'connectors', title: 'Connectors', content: <TabConnectors /> },\n    { key: 'tasks', title: 'Tasks', content: <TabTasks /> },\n];\n\n","/* eslint-disable no-useless-escape */\nimport { Button, message, Tooltip } from 'antd';\nimport { motion } from 'framer-motion';\nimport { autorun, IReactionDisposer, makeObservable, observable, untracked } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { Component, CSSProperties } from 'react';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { api } from '../../../state/backendApi';\nimport { ClusterConnectorInfo } from '../../../state/restInterfaces';\nimport { uiSettings } from '../../../state/ui';\nimport { animProps } from '../../../utils/animationProps';\nimport { Code, findPopupContainer } from '../../../utils/tsxUtils';\nimport Card from '../../misc/Card';\nimport { sortField } from '../../misc/common';\nimport { KowlTable } from '../../misc/KowlTable';\nimport { PageComponent, PageInitHelper } from '../Page';\n\n\nimport './helper';\n\n// React Editor\nimport Editor from \"@monaco-editor/react\";\n\n// Monaco Type\nimport * as monacoType from 'monaco-editor/esm/vs/editor/editor.api';\nimport { ConfirmModal, ConnectorStatisticsCard, NotConfigured, okIcon, TaskState, warnIcon } from './helper';\nexport type Monaco = typeof monacoType;\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\n// const monacoProtoLint = require('monaco-proto-lint');\n\n// const protoLangConf: monacoType.languages.LanguageConfiguration = {\n//     indentationRules: {\n//         // ^.*\\{[^}'']*$\n//         increaseIndentPattern: /^.*\\{[^}'']*$/,\n//         // ^(.*\\*/)?\\s*\\}.*$\n//         decreaseIndentPattern: /^(.*\\*\\/)?\\s*\\}.*$/,\n//     },\n//     wordPattern: /(-?\\d*\\.\\d\\w*)|([^`~!@#%^&*()\\-=+[{\\]}\\\\|;:'\",.<>/?\\s]+)(\\.proto){0,1}/g,\n//     comments: {\n//         lineComment: '//',\n//         blockComment: ['/*', '*/']\n//     },\n//     brackets: [\n//         ['{', '}'],\n//         ['[', ']'],\n//         ['(', ')'],\n//         ['<', '>'],\n//     ],\n//     folding: {\n//         markers: {\n//             start: new RegExp(\"^\\\\s*<!--\\\\s*#?region\\\\b.*-->\"),\n//             end: new RegExp(\"^\\\\s*<!--\\\\s*#?endregion\\\\b.*-->\")\n//         },\n//         offSide: true,\n//     }\n// }\n\n\nfunction onBeforeEditorMount(m: Monaco) {\n    // monacoProtoLint.default(m);\n    // m.languages.setLanguageConfiguration('protobuf', protoLangConf);\n\n    // m.editor.defineTheme('proto-custom', {\n    //     base: 'vs',\n    //     inherit: true,\n    //     rules: [\n    //         { token: 'comment', foreground: '#66747B' }\n    //     ],\n    //     colors: {\n    //         \"comment\": \"#66747B\",\n    //         \"editorLineNumber.foreground\": \"#aaa\",\n    //     }\n    // })\n}\n\nfunction onMountEditor(editor: any, monaco: any) {\n    // editor is actually type: monaco.editor.IStandaloneCodeEditor\n    // editor.setValue(logText);\n}\n\n\ntype UpdatingConnectorData = { clusterName: string; connector: ClusterConnectorInfo; newConfigObj: any };\ntype RestartingTaskData = { clusterName: string; connectorName: string; taskId: number; };\n\n@observer\nclass KafkaConnectorDetails extends PageComponent<{ clusterName: string, connector: string }> {\n\n    @observable placeholder = 5;\n    @observable currentConfig: string = \"\";\n\n    autoRunDisposer: IReactionDisposer | undefined;\n    showConfigUpdated = false;\n\n    @observable pausingConnector: ClusterConnectorInfo | null = null;\n    @observable restartingConnector: ClusterConnectorInfo | null = null;\n    @observable updatingConnector: UpdatingConnectorData | null = null;\n    @observable restartingTask: RestartingTaskData | null = null;\n    @observable deletingConnector: string | null = null;\n\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n\n        this.autoRunDisposer = autorun(() => {\n            // update config in editor\n            const clusterName = this.props.clusterName;\n            const connectorName = this.props.connector;\n\n            const cluster = api.connectConnectors?.clusters?.first(c => c.clusterName == clusterName);\n            const connector = cluster?.connectors.first(c => c.name == connectorName);\n\n            const currentConfig = untracked(() => this.currentConfig);\n            const isInitialUpdate = !currentConfig;\n            const newConfig = connector?.jsonConfig ?? '';\n            if (newConfig && newConfig != currentConfig) {\n                this.currentConfig = newConfig;\n                if (!isInitialUpdate) message.info('Shown config has been updated');\n            }\n        });\n    }\n\n    initPage(p: PageInitHelper): void {\n        const clusterName = this.props.clusterName;\n        const connector = this.props.connector;\n        p.title = connector;\n        p.addBreadcrumb(\"Kafka Connect\", `/kafka-connect`);\n        p.addBreadcrumb(clusterName, `/kafka-connect/${clusterName}`);\n        p.addBreadcrumb(connector, `/kafka-connect/${clusterName}/${connector}`);\n\n\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    async refreshData(force: boolean): Promise<void> {\n        await api.refreshConnectClusters(force);\n    }\n\n    componentWillUnmount() {\n        if (this.autoRunDisposer) {\n            this.autoRunDisposer();\n            this.autoRunDisposer = undefined;\n        }\n    }\n\n    render() {\n        const clusterName = this.props.clusterName;\n        const connectorName = this.props.connector;\n\n        if (api.connectConnectors?.isConfigured === false) return <NotConfigured />;\n\n        const settings = uiSettings.kafkaConnect;\n        const cluster = api.connectConnectors?.clusters?.first(c => c.clusterName == clusterName);\n        if (!cluster) return \"cluster not found\";\n        const connector = cluster?.connectors.first(c => c.name == connectorName);\n        if (!connector) return \"connector not found\";\n\n        const state = connector.state.toLowerCase();\n        const isRunning = state == 'running';\n\n        const tasks = connector.tasks;\n\n        const canEdit = cluster.canEditCluster;\n\n\n        return (\n            <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n                <ConnectorStatisticsCard clusterName={clusterName} connectorName={connectorName} />\n\n                {/* Main Card */}\n                <Card>\n                    {/* Title + Pause/Restart + Delete */}\n                    <div style={{ display: 'flex', alignItems: 'center', margin: '.5em 0', paddingLeft: '2px' }}>\n                        <span style={{ display: 'inline-flex', gap: '.5em', alignItems: 'center' }}>\n                            <span style={{ fontSize: '17px', display: 'inline-block' }}>{isRunning ? okIcon : warnIcon}</span>\n                            <span style={{ fontSize: 'medium', fontWeight: 600, lineHeight: '0px', marginBottom: '1px' }}>{connectorName}</span>\n                            <span style={{ fontSize: 'small', opacity: 0.5 }}>({state ?? '<empty>'})</span>\n                        </span>\n\n                        <span style={{ marginLeft: 'auto', display: 'inline-flex', gap: '.5em', fontSize: '12px' }}>\n                            <Tooltip\n                                placement=\"top\" trigger={!canEdit ? \"hover\" : \"none\"} mouseLeaveDelay={0}\n                                getPopupContainer={findPopupContainer}\n                                overlay={\"You don't have 'canEditConnectCluster' permissions for this connect cluster\"}\n                            >\n                                <Button disabled={!canEdit} onClick={() => this.pausingConnector = connector}>\n                                    {isRunning ? 'Pause' : 'Resume'}\n                                </Button>\n\n                            </Tooltip>\n                            <Tooltip\n                                placement=\"top\" trigger={!canEdit ? \"hover\" : \"none\"} mouseLeaveDelay={0}\n                                getPopupContainer={findPopupContainer}\n                                overlay={\"You don't have 'canEditConnectCluster' permissions for this connect cluster\"}\n                            >\n                                <Button disabled={!canEdit} onClick={() => this.restartingConnector = connector}>Restart</Button>\n                            </Tooltip>\n                            <Tooltip\n                                placement=\"top\" trigger={!canEdit ? \"hover\" : \"none\"} mouseLeaveDelay={0}\n                                getPopupContainer={findPopupContainer}\n                                overlay={\"You don't have 'canEditConnectCluster' permissions for this connect cluster\"}\n                            >\n                                <Button danger disabled={!canEdit} onClick={() => this.deletingConnector = connectorName}\n                                    style={{ marginLeft: '1em', minWidth: '8em' }}\n                                >Delete</Button>\n                            </Tooltip>\n                        </span>\n                    </div>\n\n                    {/* Editor */}\n                    <div style={{ marginTop: '1em' }}>\n                        <div style={{ border: '1px solid hsl(0deg, 0%, 90%)', borderRadius: '2px' }}>\n                            <Editor\n                                beforeMount={onBeforeEditorMount}\n                                onMount={onMountEditor}\n\n\n                                // theme=\"vs-dark\"\n                                // defaultLanguage=\"typescript\"\n\n                                // theme='myCoolTheme'\n                                // language='mySpecialLanguage'\n\n                                language='json'\n                                value={this.currentConfig}\n                                onChange={(v, e) => {\n                                    if (v) {\n                                        if (!this.currentConfig && !v)\n                                            return; // dont replace undefiend with empty (which would trigger our 'autorun')\n                                        this.currentConfig = v;\n                                    }\n                                }}\n\n                                // language='yaml'\n                                // defaultValue={yamlText}\n\n                                // language='protobuf'\n                                // defaultValue={protoText}\n                                // theme='proto-custom'\n\n                                options={{\n                                    readOnly: !canEdit,\n\n                                    minimap: {\n                                        enabled: false,\n                                    },\n                                    roundedSelection: false,\n                                    padding: {\n                                        top: 4,\n                                    },\n                                    showFoldingControls: 'always',\n                                    glyphMargin: false,\n                                    scrollBeyondLastLine: false,\n                                    lineNumbersMinChars: 4,\n                                    scrollbar: {\n                                        alwaysConsumeMouseWheel: false,\n                                    },\n                                    fontSize: 12,\n                                    occurrencesHighlight: false,\n                                    foldingHighlight: false,\n                                    selectionHighlight: false,\n                                }}\n\n                                height=\"300px\"\n                            />\n                        </div>\n\n                        <div style={{ display: 'flex', justifyContent: 'flex-end', margin: '1em 0', marginBottom: '1.5em' }}>\n                            <Tooltip\n                                placement=\"top\" trigger={!canEdit ? \"hover\" : \"none\"} mouseLeaveDelay={0}\n                                getPopupContainer={findPopupContainer}\n                                overlay={\"You don't have 'canEditConnectCluster' permissions for this connect cluster\"}\n                            >\n                                <Button type='primary' ghost style={{ width: '200px' }} disabled={(() => {\n                                    if (!canEdit) return true;\n\n                                    if (!this.currentConfig) return true;\n                                    try { JSON.parse(this.currentConfig); }\n                                    catch (ex: any) { return true; }\n                                    return false;\n                                })()} onClick={async () => {\n\n                                    let newConfigObj: object;\n                                    try {\n                                        newConfigObj = JSON.parse(this.currentConfig);\n                                    } catch (ex: any) {\n                                        message.error(\"Config is not valid json!\", 3);\n                                        return;\n                                    }\n\n                                    this.updatingConnector = { clusterName, connector, newConfigObj };\n                                }}>\n                                    Update Config\n                                </Button>\n                            </Tooltip>\n                        </div>\n                    </div>\n\n                    {/* Task List */}\n                    <div style={{ marginTop: '1em' }}>\n                        <KowlTable\n                            key=\"taskList\"\n\n                            dataSource={tasks}\n                            columns={[\n                                {\n                                    title: 'Task', dataIndex: 'taskId', width: 200,\n                                    sorter: sortField('taskId'), defaultSortOrder: 'ascend',\n                                    render: (v) => <Code nowrap>Task-{v}</Code>\n                                },\n                                {\n                                    title: 'Status', dataIndex: 'state', sorter: sortField('state'),\n                                    render: (_, r) => <TaskState observable={r} />,\n                                    filterType: { type: 'enum', optionClassName: 'capitalize', toDisplay: x => String(x).toLowerCase() },\n                                },\n                                {\n                                    title: 'Worker', dataIndex: 'workerId', sorter: sortField('workerId'),\n                                    render: (_, r) => <Code nowrap>{r.workerId}</Code>,\n                                    filterType: { type: 'enum' },\n                                },\n                                {\n                                    title: 'Actions', width: 150,\n                                    render: (_, r) => <TaskActionsColumn\n                                        clusterName={clusterName} connectorName={connectorName} taskId={r.taskId}\n                                        getRestartingTask={() => this.restartingTask}\n                                        setRestartingTask={t => this.restartingTask = t}\n                                    />\n                                },\n                            ]}\n                            rowKey='taskId'\n\n                            search={{\n                                searchColumnIndex: 0,\n                                isRowMatch: (row, regex) => regex.test(String(row.taskId))\n                                    || regex.test(row.state)\n                                    || regex.test(row.workerId)\n                            }}\n\n                            observableSettings={uiSettings.kafkaConnect.connectorDetails}\n                            pagination={{\n                                defaultPageSize: 10,\n                            }}\n                        />\n                    </div>\n                </Card>\n\n                {/* Pause/Resume */}\n                <ConfirmModal<ClusterConnectorInfo>\n                    target={() => this.pausingConnector}\n                    clearTarget={() => this.pausingConnector = null}\n\n                    content={(c) => <>{isRunning ? 'Pause' : 'Resume'} connector <strong>{c.name}</strong>?</>}\n                    successMessage={(c) => <> {isRunning ? 'Resumed' : 'Paused'} connector <strong>{c.name}</strong></>}\n\n                    onOk={async (c) => {\n                        if (isRunning)\n                            await api.pauseConnector(clusterName, c.name);\n                        else\n                            await api.resumeConnector(clusterName, c.name);\n                        await this.refreshData(true);\n                    }}\n                />\n\n                {/* Restart */}\n                <ConfirmModal<ClusterConnectorInfo>\n                    target={() => this.restartingConnector}\n                    clearTarget={() => this.restartingConnector = null}\n\n                    content={(c) => <>Restart connector <strong>{c.name}</strong>?</>}\n                    successMessage={(c) => <>Successfully restarted connector <strong>{c.name}</strong></>}\n\n                    onOk={async (c) => {\n                        await api.restartConnector(clusterName, c.name);\n                        await this.refreshData(true);\n                    }}\n                />\n\n                {/* Update Config */}\n                <ConfirmModal<UpdatingConnectorData>\n                    target={() => this.updatingConnector}\n                    clearTarget={() => this.updatingConnector = null}\n\n                    content={(c) => <>Update configuration of connector <strong>{c.connector.name}</strong>?</>}\n                    successMessage={(c) => <>Successfully updated config of <strong>{c.connector.name}</strong></>}\n\n                    onOk={async (c) => {\n                        await api.updateConnector(c.clusterName, c.connector.name, c.newConfigObj);\n                        await this.refreshData(true);\n                    }}\n                />\n\n                {/* Restart Task */}\n                <ConfirmModal<RestartingTaskData>\n                    target={() => this.restartingTask}\n                    clearTarget={() => this.restartingTask = null}\n\n                    content={(c) => <>Restart task <strong>{c.taskId}</strong> of <strong>{c.connectorName}</strong>?</>}\n                    successMessage={(c) => <>Successfully restarted <strong>{c.taskId}</strong> of <strong>{c.connectorName}</strong></>}\n\n                    onOk={async (c) => {\n                        await api.restartTask(c.clusterName, c.connectorName, c.taskId);\n                        await this.refreshData(true);\n                    }}\n                />\n\n                {/* Delete Connector */}\n                <ConfirmModal<string>\n                    target={() => this.deletingConnector}\n                    clearTarget={() => this.deletingConnector = null}\n\n                    content={(c) => <>Delete connector <strong>{c}</strong>?</>}\n                    successMessage={(c) => <>Deleted connector <strong>{c}</strong></>}\n\n                    onOk={async (c) => {\n                        await api.deleteConnector(clusterName, c);\n                        appGlobal.history.push(`/kafka-connect/${clusterName}`);\n                        await this.refreshData(true);\n                    }}\n                />\n\n            </motion.div>\n        );\n    }\n}\n\nexport default KafkaConnectorDetails;\n\n@observer\nclass TaskActionsColumn extends Component<{\n    clusterName: string,\n    connectorName: string,\n    taskId: number,\n\n    getRestartingTask: () => RestartingTaskData | null,\n    setRestartingTask: (x: RestartingTaskData) => void,\n}> {\n    render() {\n        const { clusterName, connectorName, taskId } = this.props;\n        const restartingTask = this.props.getRestartingTask();\n\n        const isRestarting = restartingTask\n            && restartingTask.clusterName == clusterName\n            && restartingTask.connectorName == connectorName\n            && restartingTask.taskId == taskId;\n\n        return <span style={{ display: 'inline-flex', gap: '.75em', alignItems: 'center' }}>\n            <span className={'linkBtn' + (isRestarting ? ' disabled' : '')} onClick={() => {\n                if (isRestarting) return;\n                this.props.setRestartingTask({\n                    clusterName,\n                    connectorName,\n                    taskId: taskId,\n                });\n            }}>\n                Restart\n            </span>\n        </span>\n\n    }\n}\n\n","/* eslint-disable no-useless-escape */\nimport { CheckCircleTwoTone, ExclamationCircleTwoTone, WarningTwoTone } from '@ant-design/icons';\nimport { Button, message, notification, Popover, Statistic } from 'antd';\nimport { motion } from 'framer-motion';\nimport { autorun, IReactionDisposer, makeObservable, observable, untracked } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { CSSProperties } from 'react';\nimport { appGlobal } from '../../../state/appGlobal';\nimport { api } from '../../../state/backendApi';\nimport { ApiError } from '../../../state/restInterfaces';\nimport { uiSettings } from '../../../state/ui';\nimport { animProps } from '../../../utils/animationProps';\nimport { Code, findPopupContainer } from '../../../utils/tsxUtils';\nimport Card from '../../misc/Card';\nimport { sortField } from '../../misc/common';\nimport { KowlTable } from '../../misc/KowlTable';\nimport { PageComponent, PageInitHelper } from '../Page';\nimport { ClusterStatisticsCard, ConnectorClass, NotConfigured, removeNamespace, TasksColumn, TaskState } from './helper';\n\n\n@observer\nclass KafkaClusterDetails extends PageComponent<{ clusterName: string }> {\n\n    @observable placeholder = 5;\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        const clusterName = this.props.clusterName;\n        p.title = clusterName;\n        p.addBreadcrumb(\"Kafka Connect\", `/kafka-connect`);\n        p.addBreadcrumb(clusterName, `/kafka-connect/${clusterName}`);\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    refreshData(force: boolean) {\n        api.refreshConnectClusters(force);\n        api.refreshClusterAdditionalInfo(this.props.clusterName, force);\n    }\n\n    render() {\n        const clusterName = this.props.clusterName;\n\n        if (api.connectConnectors?.isConfigured === false) return <NotConfigured />;\n\n        const cluster = api.connectConnectors?.clusters?.first(c => c.clusterName == clusterName);\n        const connectors = cluster?.connectors;\n\n        const additionalInfo = api.connectAdditionalClusterInfo.get(clusterName);\n\n        return (\n            <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n                <ClusterStatisticsCard clusterName={clusterName} />\n\n                {/* Main Card */}\n                <Card>\n                    {/* Connectors List */}\n                    <div>\n                        <h3 style={{ marginLeft: '0.25em', marginBottom: '0.6em' }}>\n                            Connectors\n                        </h3>\n                        <KowlTable\n                            key=\"connectorsList\"\n                            dataSource={connectors}\n                            columns={[\n                                {\n                                    title: 'Connector', dataIndex: 'name',\n                                    width: '35%',\n                                    render: (_, r) => (\n                                        <span className='hoverLink' style={{ display: 'inline-block', width: '100%' }}\n                                            onClick={() => appGlobal.history.push(`/kafka-connect/${clusterName}/${r.name}`)}>\n                                            {r.name}\n                                        </span>\n                                    ),\n                                    sorter: sortField('name'), defaultSortOrder: 'ascend'\n                                },\n                                {\n                                    title: 'Class', dataIndex: 'class',\n                                    render: (_, r) => <ConnectorClass observable={r} />,\n                                    sorter: sortField('class')\n                                },\n                                {\n                                    width: 100,\n                                    title: 'Type', dataIndex: 'type',\n                                    className: 'capitalize',\n                                    sorter: sortField('type'),\n                                    filterType: { type: 'enum', optionClassName: 'capitalize' },\n\n                                },\n                                {\n                                    width: 120,\n                                    title: 'State', dataIndex: 'state',\n                                    render: (_, r) => <TaskState observable={r} />,\n                                    sorter: sortField('state'),\n                                    filterType: { type: 'enum', optionClassName: 'capitalize', toDisplay: x => String(x).toLowerCase() },\n\n                                },\n                                {\n                                    width: 120,\n                                    title: 'Tasks', render: (_, c) => <TasksColumn observable={c} />\n                                }\n                            ]}\n                            search={{\n                                searchColumnIndex: 0,\n                                isRowMatch: (row, regex) => regex.test(row.name)\n                                    || regex.test(row.class)\n                                    || regex.test(row.type)\n                                    || regex.test(row.state)\n                            }}\n                            rowKey={r => r.name}\n\n                            observableSettings={uiSettings.kafkaConnect.clusterDetails}\n                            pagination={{\n                                defaultPageSize: 10,\n                            }}\n\n                            className='connectorsTable'\n                        />\n                    </div>\n\n                    {/* Plugin List */}\n                    <div style={{ marginTop: '2em' }}>\n                        <h3 style={{ marginLeft: '0.25em', marginBottom: '0.6em' }}>Plugins</h3>\n\n                        <KowlTable\n                            dataSource={additionalInfo?.plugins}\n                            columns={[\n                                {\n                                    title: 'Class', dataIndex: 'class',\n                                    sorter: sortField('class'),\n                                    render: (v, r) => <ConnectorClass observable={r} />\n                                },\n                                {\n                                    title: 'Version', dataIndex: 'version',\n                                    sorter: sortField('version'),\n                                    filterType: { type: 'enum' },\n                                },\n                                {\n                                    title: 'Type', dataIndex: 'type',\n                                    width: '150px',\n                                    className: 'capitalize',\n                                    sorter: sortField('type'),\n                                    filterType: { type: 'enum', optionClassName: 'capitalize', },\n                                },\n                            ]}\n                            search={{\n                                searchColumnIndex: 0,\n                                isRowMatch: (row, regex) => {\n                                    if (regex.test(row.class)) return true;\n                                    if (row.type && regex.test(row.type)) return true;\n                                    if (row.version && regex.test(row.version)) return true;\n                                    return false;\n                                }\n                            }}\n                            rowKey={r => r.class + r.type + r.version}\n\n                            observableSettings={uiSettings.kafkaConnect.clusterDetailsPlugins}\n                            pagination={{\n                                defaultPageSize: 10,\n                            }}\n\n                            className='pluginsTable'\n                        />\n\n                    </div>\n                </Card>\n            </motion.div>\n        );\n    }\n}\n\nexport default KafkaClusterDetails;\n\n\n","import styles from './Wizard.module.scss';\nimport { Button, Steps } from 'antd';\nimport React from 'react';\nimport { ChevronLeftIcon, ChevronRightIcon } from '@primer/octicons-react';\n\nconst { Step } = Steps;\n\nexport function Wizard<State extends WizardState>({ state }: { state: State }) {\n    const [currentStepKey, currentStep] = state.getCurrentStep();\n    return (<div className={styles.wizard}>\n        <Steps current={currentStepKey} size={'small'} className={styles.steps}>\n            {state.getSteps().map((step, i) => <Step\n                key={i}\n                title={step.title}\n                description={step.description}\n                icon={step.icon}\n                children={step.content}\n                className={styles.step}\n            />)}\n        </Steps>\n        <div className={styles.content}>{currentStep.content}</div>\n        <div className={styles.footer}>\n            {/* {!state.isFirst()\n          ? <Button\n              type={'default'}\n              onClick={state.previous}\n              className={styles.prevButton}>\n            <ChevronLeftIcon/>\n            {currentStep.prevButtonLabel ?? 'Previous Step'}\n          </Button>\n          : null} */}\n            <Button\n                type={'primary'}\n                onClick={state.next}\n                disabled={!state.canContinue()}\n                className={styles.nextButton}>\n                {currentStep.nextButtonLabel ?? state.isLast()\n                    ? 'Finish'\n                    : 'Next Step'}\n                <ChevronRightIcon />\n            </Button>\n        </div>\n    </div>);\n}\n\ninterface WizardState {\n    getCurrentStep(): [number, WizardStep];\n\n    getSteps(): Array<WizardStep>;\n\n    canContinue(): boolean;\n\n    next(): Promise<any>;\n\n    previous(): void;\n\n    isLast(): boolean;\n\n    isFirst(): boolean;\n}\n\nexport interface WizardStep {\n    title: React.ReactNode;\n    description?: React.ReactNode;\n    icon?: React.ReactNode;\n    content: React.ReactNode;\n    prevButtonLabel?: React.ReactNode;\n    nextButtonLabel?: React.ReactNode;\n\n    postConditionMet(): boolean;\n    transitionConditionMet?(): Promise<{ conditionMet: boolean }>\n}\n","import React from 'react';\nimport styles from './HiddenRadioList.module.scss';\n\nexport interface HiddenRadioOption<ValueType> {\n  checked?: boolean;\n  disabled?: boolean;\n  value: ValueType;\n  render: (option: HiddenRadioOption<ValueType>) => JSX.Element\n}\n\nexport interface HiddenRadioListProps<ValueType> {\n  options: Array<HiddenRadioOption<ValueType>>;\n  name: string;\n  onChange: (value: ValueType) => void;\n  value?: ValueType;\n  disabled?: boolean;\n}\n\nexport function HiddenRadioList<ValueType>({options, name, onChange, value, ...rest}: HiddenRadioListProps<ValueType>) {\n  const allDisabled = rest.disabled ?? false;\n\n  return (<ul className={styles.radioCardGroup}>\n    {options.map((option, i) => {\n      const checked = (option.value === value || option.checked) ?? false;\n      const disabled = (allDisabled || option.disabled) ?? false;\n      return (\n          <li key={i}>\n            <label>\n              <input\n                  type=\"radio\"\n                  name={name}\n                  onChange={() => onChange(option.value)}\n                  checked={checked}\n                  disabled={disabled}\n              />\n              {option.render({...option, checked, disabled})}\n            </label>\n          </li>\n      );\n    })}\n  </ul>);\n}\n","import React from 'react';\nimport styles from './BoxCard.module.scss';\n\nexport interface BoxCardProps {\n    id?: string;\n    borderStyle?: 'solid' | 'dashed';\n    borderWidth?: 'thin' | 'medium';\n    hoverable?: boolean;\n    active?: boolean;\n    children?: React.ReactNode;\n}\n\nexport default function BoxCard({ id = undefined, borderStyle = 'solid', borderWidth = 'thin', hoverable = true, active = false, children }: BoxCardProps) {\n    const classes = [styles.boxCard];\n\n    borderStyle === 'dashed' && classes.push(styles.dashed);\n    borderWidth === 'medium' && classes.push(styles.medium);\n    hoverable && classes.push(styles.hoverable)\n    active && classes.push(styles.active)\n\n    return <div className={classes.join(' ')} id={id}>\n        {children}\n    </div>;\n}\n","import { findConnectorMetadata, removeNamespace } from './helper';\nimport styles from './ConnectorBoxCard.module.scss';\nimport React from 'react';\nimport BoxCard, { BoxCardProps } from '../../misc/BoxCard';\nimport { HiddenRadioOption } from '../../misc/HiddenRadioList';\n\ninterface ConnectorBoxCardProps extends Omit<BoxCardProps, \"children\">, Omit<HiddenRadioOption<string>, \"render\" | \"value\"> {\n    connectorPlugin: ConnectorPlugin;\n    id?: string;\n}\n\nexport function ConnectorBoxCard(props: ConnectorBoxCardProps) {\n    const { id, checked, connectorPlugin, hoverable, active, borderWidth, borderStyle } = props;\n    return (<BoxCard active={checked || active} hoverable={hoverable} borderStyle={borderStyle} borderWidth={borderWidth} id={id}>\n        <ConnectorRadioCardContent connectorPlugin={connectorPlugin} />\n    </BoxCard>);\n}\n\nexport type ConnectorPlugin = { class: string; type?: string; version?: string };\n\nfunction ConnectorRadioCardContent({ connectorPlugin }: { connectorPlugin: ConnectorPlugin }) {\n    const { friendlyName, logo, author = 'unknown' } = findConnectorMetadata(connectorPlugin.class) ?? {};\n    const displayName = friendlyName ?? removeNamespace(connectorPlugin.class);\n    const type = connectorPlugin.type ?? 'unknown'\n    const version = connectorPlugin.version ?? 'unknown'\n\n    return <div className={styles.radioCardContent}>\n        <span className={styles.radioCardLogo}>{logo}</span>\n        <div className={styles.radioCardInfo}>\n            <strong>{displayName} {connectorPlugin.type != null\n                ? <span className={styles.pluginType}>({type})</span>\n                : null}</strong>\n            {connectorPlugin.version != null\n                ? <p className={styles.pluginMeta}>\n                    Version: {version} | Author: {author}\n                </p>\n                : null}\n        </div>\n    </div>;\n}\n","import React, { Component, useState } from \"react\";\nimport { DragDropContext, Draggable, Droppable, DropResult, ResponderProvided } from \"react-beautiful-dnd\";\nimport arrayMove from \"array-move\";\nimport { action, autorun, computed, IReactionDisposer, makeObservable, observable } from \"mobx\";\nimport { observer } from \"mobx-react\";\n\nimport { Button, Input, Tooltip, Typography } from \"antd\";\nimport { ThreeBarsIcon, XIcon } from \"@primer/octicons-react\";\n\n\n@observer\nexport class CommaSeparatedStringList extends Component<{\n    defaultValue: string,\n    // renderItem: (item: string, index: number, ar: string[]) => JSX.Element,\n    onChange: (list: string) => void,\n\n    locale?: {\n        addInputPlaceholder?: string,\n        addButtonText?: string\n    }\n}> {\n    @observable data: { id: string }[];\n    @observable newEntry: string | null = null;\n    @observable newEntryError: string | null = null;\n\n    reactionDisposer: IReactionDisposer | undefined;\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n\n        if (!this.data)\n            this.data = this.props.defaultValue\n                ? this.props.defaultValue.split(',').map(x => ({ id: x.trim() }))\n                : [];\n\n        this.reactionDisposer = autorun(() => {\n            const list = this.commaSeperatedList;\n            this.props.onChange(list);\n        });\n    }\n\n    componentWillUnmount() {\n        this.reactionDisposer?.();\n\n    }\n\n    @computed get commaSeperatedList(): string {\n        const str = this.data.map(x => x.id).join(',');\n        return str;\n    }\n\n    render() {\n        return <div className='stringList' style={{ maxWidth: '500px' }}>\n            <this.AddButton />\n            <List\n                observableAr={this.data}\n                renderItem={(item, index) => <this.Item item={item} index={index} />}\n            />\n        </div>\n    }\n\n    Item = observer((props: { item: { id: string }, index: number }): JSX.Element => {\n        const { item, index } = props;\n\n        const [hasFocus, setHasFocus] = useState(false);\n        const [valuePending, setValuePending] = useState(\"\");\n\n        return < >\n            {/* Input */}\n            <Tooltip overlay=\"[Enter] confirm, [ESC] cancel\" visible={hasFocus} placement='top' autoAdjustOverflow={false} overlayClassName='inputHintTooltip' align={{ offset: [0, 4] }} >\n\n                <Input\n                    className='ghostInput'\n                    size=\"small\"\n                    style={{ flexGrow: 1, flexBasis: '400px' }}\n\n                    onFocus={() => {\n                        setValuePending(item.id);\n                        setHasFocus(true);\n                    }}\n                    onBlur={() => {\n                        setHasFocus(false)\n                    }}\n\n                    onKeyDown={e => {\n                        if (e.key == 'Enter') {\n\n                            // can we rename that entry?\n                            if (this.data.any(x => x.id == valuePending)) {\n                                // no, already exists\n                                e.stopPropagation();\n                                return;\n                            }\n\n                            if (/^[a-z][a-z_\\d]*$/i.test(valuePending) == false) {\n                                // no, invalid characters\n                                e.stopPropagation();\n                                return;\n                            }\n\n                            item.id = valuePending;\n                            (e.target as HTMLElement).blur();\n                        }\n                        else if (e.key == 'Escape') {\n                            (e.target as HTMLElement).blur();\n                        }\n                    }}\n\n                    value={hasFocus ? valuePending : item.id}\n                    onChange={e => setValuePending(e.target.value)}\n\n                    spellCheck={false}\n                />\n            </Tooltip>\n\n            {/* Delete */}\n            <span className=\"deleteButton\" onClick={() => {\n                this.data.splice(index, 1);\n            }} ><XIcon /></span>\n        </>\n    })\n\n    AddButton = observer((props: {}) => {\n        return <div className='createEntryRow'>\n            <div className={'inputWrapper' + (this.newEntryError ? ' hasError' : '')} style={{ height: '100%' }}>\n                <Input\n                    style={{ flexGrow: 1, height: '100%', flexBasis: '260px' }}\n\n                    value={this.newEntry ?? ''}\n                    onChange={e => {\n                        this.newEntry = e.target.value;\n\n                        this.newEntryError = null;\n\n                        if (!this.newEntry)\n                            return;\n\n                        if (this.data.any(x => x.id == this.newEntry))\n                            this.newEntryError = \"Entry already exists\";\n\n                        if (/^[a-z][a-z_\\d]*$/i.test(this.newEntry) == false)\n                            this.newEntryError = \"Name is not valid (only letters, digits, underscore)\";\n                    }}\n\n                    placeholder={this.props.locale?.addInputPlaceholder ?? \"Enter a name...\"}\n\n                    spellCheck={false}\n                />\n\n                <div className='validationFeedback'>{this.newEntryError ?? null}</div>\n            </div>\n\n            <Button\n                style={{ padding: '0px 16px', height: '100%', minWidth: '120px' }}\n                type='primary'\n                disabled={this.newEntryError != null || !this.newEntry || this.newEntry.trim().length == 0}\n                onClick={() => {\n                    this.data.push({ id: this.newEntry! });\n                    this.newEntry = null;\n                }}\n            >Add</Button>\n        </div>\n    })\n}\n\n\n@observer\nexport class List<T extends { id: string }> extends Component<{\n    observableAr: T[],\n    renderItem: (item: T, index: number) => JSX.Element\n}> {\n\n    render() {\n        const { observableAr: list, renderItem } = this.props;\n\n        const onDragEnd = (result: DropResult, provided: ResponderProvided) => {\n            if (!result.destination)\n                return;\n            arrayMove.mutate(this.props.observableAr, result.source.index, result.destination.index);\n        }\n\n        return <div className=\"reorderableList\">\n            <DragDropContext onDragEnd={onDragEnd} >\n                <Droppable droppableId=\"droppable\" ignoreContainerClipping={false}>\n                    {(droppableProvided, droppableSnapshot) => (\n                        <div\n                            ref={droppableProvided.innerRef}\n                            style={{ display: 'flex', flexDirection: 'column' }}\n                        >\n                            {list.map((tag, index) => (\n                                <Draggable key={String(index)} draggableId={String(index)} index={index} >\n                                    {(draggableProvided, draggableSnapshot) => (\n                                        <div ref={draggableProvided.innerRef} {...draggableProvided.draggableProps}>\n                                            <div className='draggableItem'>\n                                                <div className='dragHandle' {...draggableProvided.dragHandleProps}><ThreeBarsIcon /></div>\n                                                {renderItem(tag, index)}\n                                            </div>\n                                        </div>\n                                    )}\n                                </Draggable>\n                            ))}\n                            {droppableProvided.placeholder}\n                        </div>\n                    )}\n                </Droppable>\n            </DragDropContext>\n        </div>\n    }\n\n\n}","/* eslint-disable no-useless-escape */\nimport { EyeInvisibleOutlined, EyeTwoTone } from '@ant-design/icons';\nimport { Input, InputNumber, Switch, Select, Tooltip, AutoComplete } from 'antd';\nimport { observer } from 'mobx-react';\nimport { DataType, PropertyWidth } from '../../../../state/restInterfaces';\nimport { findPopupContainer, InfoText } from '../../../../utils/tsxUtils';\nimport { Property } from './components';\nimport { CommaSeparatedStringList, List } from './List';\n\n\nexport const PropertyComponent = observer((props: { property: Property }) => {\n    const p = props.property;\n    const def = p.entry.definition;\n    if (p.isHidden) return null;\n    if (p.entry.value.visible === false) return null;\n\n    let inputComp = <div key={p.name}>\n        <div>\"{p.name}\" (unknown type \"{def.type}\")</div>\n        <div style={{ fontSize: 'smaller' }} className='codeBox'>{JSON.stringify(p.entry, undefined, 4)}</div>\n    </div>;\n\n    let v = p.value;\n    if (typeof p.value != 'string') {\n        if (typeof p.value == 'number' || typeof p.value == 'boolean')\n            v = String(v);\n        else\n            v = \"\";\n    }\n\n    switch (def.type) {\n        case \"STRING\":\n        case \"CLASS\":\n            const recValues = p.entry.value.recommended_values;\n            if (recValues && recValues.length) {\n                // Enum (recommended_values)\n                const options = recValues.map((x: string) => ({ label: x, value: x }));\n                inputComp = <Select\n                    value={p.value as any}\n                    onChange={e => p.value = e}\n                    options={options}\n                    getPopupContainer={findPopupContainer}\n                    {...{ spellCheck: false }}\n                />\n            }\n            else {\n                // String, Class\n                // Maybe we have some suggestions\n                if (p.suggestedValues && p.suggestedValues.length > 0) {\n                    // Input with suggestions\n                    inputComp = <AutoComplete\n                        value={String(v)}\n                        onChange={e => p.value = e}\n                        options={p.suggestedValues.map(x => ({ value: x }))}\n                        getPopupContainer={findPopupContainer}\n                        {...{ spellCheck: false }}\n                    />\n                }\n                else {\n                    // Input\n                    inputComp = <Input value={String(v)} onChange={e => p.value = e.target.value} defaultValue={def.default_value ?? undefined} spellCheck={false} />\n                }\n            }\n            break;\n\n        case \"PASSWORD\":\n            inputComp = <Input.Password value={String(p.value ?? '')} onChange={e => p.value = e.target.value} iconRender={visible => (visible ? <EyeTwoTone /> : <EyeInvisibleOutlined />)} />\n            break;\n\n        case \"INT\":\n        case \"LONG\":\n        case \"SHORT\":\n            inputComp = <InputNumber style={{ display: 'block' }} value={Number(p.value)} onChange={e => p.value = e} />\n            break;\n\n        case \"BOOLEAN\":\n            inputComp = <Switch checked={Boolean(p.value)} onChange={e => p.value = e} />\n            break;\n\n        case \"LIST\":\n            if (p.name == 'transforms') {\n                inputComp = <CommaSeparatedStringList defaultValue={String(v)} onChange={x => p.value = x} />\n            } else {\n                inputComp = <Input value={String(v)} onChange={e => p.value = e.target.value} defaultValue={def.default_value ?? undefined} />\n            }\n\n            break;\n    }\n\n    // if (def.type != DataType.Boolean) {\n    //     const errAr = p.errors;\n\n    //     const err = errAr.length > 0 && (p.value === p.lastErrorValue)\n    //         ? errAr.first(x => !x.includes('which has no default value')) ?? errAr[0]\n    //         : null;\n\n    //     inputComp = <div className={'inputWrapper ' + (err ? 'hasError' : '')}>\n    //         {inputComp}\n    //         <div className='validationFeedback'>\n    //             {errAr.length > 1 && <span className='errorCount'>{errAr.length} Errors</span>}\n    //             {err}\n    //         </div>\n    //     </div>;\n    // }\n    inputComp = <ErrorWrapper property={p} input={inputComp} />;\n\n\n    // Tooltip 'raw name'\n    const title = <Tooltip overlay={`${def.name} (${def.type})`} placement='top' trigger=\"click\" mouseLeaveDelay={0} getPopupContainer={findPopupContainer}>\n        <span style={{ fontWeight: 600, cursor: 'pointer', color: '#444', fontSize: '12px', paddingLeft: '1px' }}>{def.display_name}</span>\n    </Tooltip>;\n\n    // Tooltip 'documentation'\n    const docuIcon = def.documentation &&\n        <InfoText tooltip={def.documentation} iconSize='12px' transform='translateY(1px)' gap='6px' placement='right' maxWidth='450px' align='left' iconColor='#c7c7c7' />\n\n    // Wrap name and input element\n    return <div className={inputSizeToClass[def.width]}>\n        <div style={{ display: 'flex', alignItems: 'center', marginBottom: '2px' }}>\n            {def.required && requiredStar}\n            {title}\n            {docuIcon}\n            {/* <span className={'importanceTag ' + def.importance.toLowerCase()}>Importance: {def.importance.toLowerCase()}</span> */}\n        </div>\n        {inputComp}\n    </div>\n});\n\n\nconst requiredStar = <span style={{\n    lineHeight: '0px', color: 'red', fontSize: '1.5em', marginTop: '3px', maxHeight: '0px', transform: 'translateX(-11px)', width: 0\n}}>*</span>;\n\n\nconst inputSizeToClass = {\n    [PropertyWidth.None]: \"none\",\n    [PropertyWidth.Short]: \"short\",\n    [PropertyWidth.Medium]: \"medium\",\n    [PropertyWidth.Long]: \"long\",\n} as const;\n\n\nconst ErrorWrapper = observer(function (props: { property: Property, input: JSX.Element }) {\n    const { property, input } = props;\n    const showErrors = property.errors.length > 0;\n\n    const errors = showErrors\n        ? property.errors\n        : property.lastErrors;\n\n    const errorToShow = showErrors\n        ? errors[(property.currentErrorIndex % errors.length)]\n        : undefined;\n\n    const cycleError = showErrors\n        ? () => property.currentErrorIndex++\n        : undefined\n\n    return <div className={'inputWrapper ' + ((errorToShow) ? 'hasError' : '')}>\n        {input}\n        <div className='validationFeedback' onClick={cycleError}>\n            {errors.length > 1 && <span className='errorCount'>{errors.length} Errors</span>}\n            {errorToShow}\n        </div>\n    </div>\n})","/* eslint-disable no-useless-escape */\nimport { Collapse } from 'antd';\nimport { observer } from 'mobx-react';\nimport { PropertyGroup } from './components';\nimport { PropertyComponent } from './PropertyComponent';\n\nexport const PropertyGroupComponent = observer((props: { group: PropertyGroup, allGroups: PropertyGroup[] }) => {\n    const g = props.group;\n\n    if (g.groupName == \"Transforms\") {\n        // Transforms + its sub groups\n\n        const subGroups = props.allGroups\n            .filter(g => g.groupName.startsWith(\"Transforms: \"))\n            .sort((a, b) => props.allGroups.indexOf(a) - props.allGroups.indexOf(b));\n\n        return <div className='dynamicInputs'>\n            {g.properties.map(p => <PropertyComponent key={p.name} property={p} />)}\n\n            <div style={{ gridColumn: 'span 4', paddingLeft: '8px' }}>\n\n                <Collapse ghost bordered={false}>\n                    {subGroups.map(subGroup =>\n                        <Collapse.Panel\n                            className={(subGroup.propertiesWithErrors.length > 0) ? 'hasErrors' : ''}\n                            key={subGroup.groupName}\n                            header={<div style={{ display: 'flex', alignItems: 'center', gap: '1em' }}>\n                                <span style={{ fontSize: '1.1em', fontWeight: 600, fontFamily: 'Open Sans' }}>{subGroup.groupName}</span>\n                                <span className='issuesTag'>{subGroup.propertiesWithErrors.length} issues</span>\n                            </div>}\n                        >\n                            <PropertyGroupComponent group={subGroup} allGroups={props.allGroups} />\n                        </Collapse.Panel>\n                    )}\n                </Collapse>\n\n            </div>\n        </div>\n\n    }\n    else {\n        // Normal group\n        return <div className='dynamicInputs'>\n            {g.properties.map(p => <PropertyComponent key={p.name} property={p} />)}\n        </div>\n    }\n\n});\n","/* eslint-disable no-useless-escape */\nimport { Collapse, Skeleton } from 'antd';\nimport { action, autorun, comparer, IReactionDisposer, makeObservable, observable, reaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { Component } from 'react';\nimport { api } from '../../../../state/backendApi';\nimport { ConnectorProperty, DataType, PropertyWidth } from '../../../../state/restInterfaces';\nimport { IsDev } from '../../../../utils/env';\nimport { scrollTo } from \"../../../../utils/utils\";\nimport { removeNamespace } from '../helper';\nimport { DebugEditor } from './DebugEditor';\nimport { PropertyGroupComponent } from './PropertyGroup';\n\n\nexport interface ConfigPageProps {\n    clusterName: string;\n    pluginClassName: string;\n    onChange: (jsonText: string) => void\n}\n\n\n@observer\nexport class ConfigPage extends Component<ConfigPageProps> {\n\n    @observable allGroups: PropertyGroup[] = [];\n    propsByName = new Map<string, Property>();\n    @observable jsonText = \"\";\n    @observable error: string | undefined = undefined;\n\n    @observable initPending = true;\n    fallbackGroupName: string = \"\";\n    reactionDisposers: IReactionDisposer[] = [];\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n\n        this.fallbackGroupName = removeNamespace(this.props.pluginClassName);\n        this.initConfig();\n    }\n\n    componentWillUnmount() {\n        for (const r of this.reactionDisposers)\n            r();\n    }\n\n    @action.bound async initConfig() {\n        const { clusterName, pluginClassName } = this.props;\n\n        setTimeout(() => {\n            scrollTo('selectedConnector', 'start', -20);\n        }, 100);\n\n        try {\n            // Validate with empty object to get all properties initially\n            const validationResult = await api.validateConnectorConfig(clusterName, pluginClassName, {\n                \"connector.class\": pluginClassName,\n                \"name\": \"\",\n                \"topic\": \"topic\",\n                \"topics\": \"topics\",\n            });\n            const allProps = createCustomProperties(validationResult.configs, this.fallbackGroupName);\n\n            // Save props to map, so we can quickly find them to set their validation errors\n            for (const p of allProps)\n                this.propsByName.set(p.name, p);\n\n            // Set last error values, so we know when to show the validation error\n            for (const p of allProps)\n                if (p.errors.length > 0)\n                    p.lastErrorValue = p.value;\n\n            // Create groups\n            const groupNames = [this.fallbackGroupName, ...validationResult.groups];\n            this.allGroups = allProps\n                .groupInto(p => p.entry.definition.group)\n                .map(g => (observable({ groupName: g.key, properties: g.items, propertiesWithErrors: [] }) as PropertyGroup))\n                .sort((a, b) => groupNames.indexOf(a.groupName) - groupNames.indexOf(b.groupName));\n\n            // Let properties know about their parent group, so they can add/remove themselves in 'propertiesWithErrors'\n            for (const g of this.allGroups)\n                for (const p of g.properties)\n                    p.propertyGroup = g;\n\n            // Notify groups about errors in their children\n            for (const g of this.allGroups)\n                g.propertiesWithErrors.push(...g.properties.filter(p => p.showErrors));\n\n            // Update JSON\n            this.reactionDisposers.push(reaction(\n                () => {\n                    return this.getConfigObject();\n                },\n                (config) => {\n                    this.jsonText = JSON.stringify(config, undefined, 4);\n                    this.props.onChange(this.jsonText);\n                },\n                { delay: 100, fireImmediately: true, equals: comparer.structural }\n            ));\n\n            // Validate on changes\n            this.reactionDisposers.push(reaction(\n                () => {\n                    return this.getConfigObject();\n                },\n                (config) => {\n                    this.validate(config);\n                },\n                { delay: 300, fireImmediately: true, equals: comparer.structural }\n            ));\n\n        } catch (err: any) {\n            this.error = typeof err == 'object'\n                ? (err.message ?? JSON.stringify(err, undefined, 4))\n                : JSON.stringify(err, undefined, 4);\n        }\n\n        this.initPending = false;\n    }\n\n    getConfigObject(): object {\n        const config = {} as any;\n\n        for (const g of this.allGroups)\n            for (const p of g.properties) {\n\n                // Skip default values\n                if (p.entry.definition.required == false) {\n                    if (p.value == p.entry.definition.default_value)\n                        continue;\n                    if (p.value === false && !p.entry.definition.default_value)\n                        continue; // skip boolean values that default to false\n                }\n\n                // Skip null/undefined\n                if (p.value === null || p.value === undefined)\n                    continue;\n\n                // Skip empty values for strings\n                if (StringLikeTypes.includes(p.entry.definition.type))\n                    if (p.value == null || p.value == \"\")\n                        continue;\n\n                // Include the value\n                config[p.name] = p.value;\n            }\n\n        return config;\n    }\n\n    // todo:\n    // The code that handles validation/updating/adding/removing properties really shouldn't be part of this page-component\n    // It's too much code in here, it should be split out into some seperate class or something when we have time...\n    validate = action(async (config: object) => {\n\n\n        const { clusterName, pluginClassName } = this.props;\n        try {\n            // Validate the current config\n            const validationResult = await api.validateConnectorConfig(clusterName, pluginClassName, config);\n            const srcProps = createCustomProperties(validationResult.configs, this.fallbackGroupName);\n\n            // Remove properties that don't exist anymore\n            const srcNames = new Set(srcProps.map(x => x.name));\n            const removedProps = [...this.propsByName.keys()].filter(key => !srcNames.has(key));\n            for (const key of removedProps) {\n                // group names might not be accurate so we check all groups\n                for (const g of this.allGroups)\n                    g.properties.removeAll(x => x.name == key);\n\n                // remove from lookup\n                this.propsByName.delete(key);\n            }\n\n            // Remove empty groups\n            this.allGroups.removeAll(x => x.properties.length == 0);\n\n            // Handle new properties, transfer reported errors and suggested values\n            for (const source of srcProps) {\n                const target = this.propsByName.get(source.name);\n\n                // Add new property\n                if (!target) {\n                    this.propsByName.set(source.name, source);\n                    let group = this.allGroups.first(g => g.groupName == source.entry.definition.group);\n                    if (!group) {\n                        // Create new group\n                        group = observable({\n                            groupName: source.entry.definition.group,\n                            properties: [],\n                            propertiesWithErrors: [],\n                        } as PropertyGroup);\n\n                        this.allGroups.push(group);\n\n                        // Sort groups\n                        const groupNames = [this.fallbackGroupName, ...validationResult.groups];\n                        this.allGroups.sort((a, b) => groupNames.indexOf(a.groupName) - groupNames.indexOf(b.groupName));\n                    }\n\n                    group.properties.push(source);\n                    source.propertyGroup = group;\n\n                    // Sort properties within group\n                    group.properties.sort((a, b) => a.entry.definition.order - b.entry.definition.order);\n\n                    continue;\n                }\n\n                // Update: recommended values\n                const suggestedSrc = source.entry.value.recommended_values;\n                const suggestedTar = target.entry.value.recommended_values;\n                if (!suggestedSrc.isEqual(suggestedTar))\n                    suggestedTar.updateWith(suggestedSrc);\n\n                // Update: errors\n                if (!target.errors.isEqual(source.errors)) {\n\n                    if (source.errors.length > 0)\n                        target.lastErrors = [...source.errors]; // create copy, so 'updateWith' won't modify this array as well\n\n                    // Update\n                    target.errors.updateWith(source.errors);\n\n                    target.showErrors = target.errors.length > 0;\n\n                    // Show first error\n                    target.currentErrorIndex = 0;\n                    if (target.errors.length > 1) {\n                        // Skip over simple / unhelpful messages\n                        const betterStartValue = target.errors.findIndex(x => !x.includes('which has no default value'));\n                        if (betterStartValue > -1)\n                            target.currentErrorIndex = betterStartValue;\n                    }\n\n                    // Add or remove from parent group\n                    const hasErrors = target.errors.length > 0;\n                    if (hasErrors)\n                        target.propertyGroup.propertiesWithErrors.pushDistinct(target);\n                    else\n                        target.propertyGroup.propertiesWithErrors.remove(target);\n                }\n            }\n\n            // Set last error values, so we know when to show the validation error\n            for (const g of this.allGroups)\n                for (const p of g.properties)\n                    p.lastErrorValue = p.value;\n\n        } catch (err: any) {\n            console.error('error validating config', err);\n        }\n    })\n\n\n    render() {\n        if (this.error)\n            return <div>\n                <h3>Error</h3>\n                <div className='codeBox'>{this.error}</div>\n            </div>\n\n        if (this.initPending)\n            return <div><Skeleton loading={true} active={true} paragraph={{ rows: 20, width: '100%' }} /></div>\n\n        if (this.allGroups.length == 0)\n            return <div>debug: no groups</div>\n\n        const defaultExpanded = this.allGroups[0].groupName;\n\n        return <>\n            <Collapse defaultActiveKey={defaultExpanded} ghost bordered={false}>\n                {this.allGroups.filter(g => !g.groupName.startsWith('Transforms: ')).map(g =>\n                    <Collapse.Panel\n                        className={(g.propertiesWithErrors.length > 0) ? 'hasErrors' : ''}\n                        key={g.groupName}\n                        header={<div style={{ display: 'flex', alignItems: 'center', gap: '1em' }}>\n                            <span style={{ fontSize: 'larger', fontWeight: 600, fontFamily: 'Open Sans' }}>{g.groupName}</span>\n                            <span className='issuesTag'>{g.propertiesWithErrors.length} issues</span>\n                        </div>}\n                    >\n                        <PropertyGroupComponent group={g} allGroups={this.allGroups} />\n                    </Collapse.Panel>\n                )}\n            </Collapse>\n\n            {/* {IsDev && <DebugEditor observable={this} />} */}\n        </>;\n    }\n}\n\nconst hiddenProperties = [\n    \"connector.class\" // user choses that in the first page of the wizard\n];\n\nconst converters = [\n    \"io.confluent.connect.avro.AvroConverter\",\n    \"io.confluent.connect.protobuf.ProtobufConverter\",\n    \"org.apache.kafka.connect.storage.StringConverter\",\n    \"org.apache.kafka.connect.json.JsonConverter\",\n    \"io.confluent.connect.json.JsonSchemaConverter\",\n    \"org.apache.kafka.connect.converters.ByteArrayConverter\",\n];\nconst suggestedValues: { [key: string]: string[] } = {\n    \"key.converter\": converters,\n    \"value.converter\": converters,\n    \"header.converter\": converters,\n    \"config.action.reload\": [\n        \"restart\",\n        \"none\"\n    ]\n};\n\n// Creates our Property objects, while fixing some issues with the source data\n// like: missing value, propertyWidth, group, ...\nfunction createCustomProperties(properties: ConnectorProperty[], fallbackGroupName: string): Property[] {\n\n    // Fix missing properties\n    for (const p of properties) {\n        const def = p.definition;\n\n        if (!def.width || def.width == PropertyWidth.None)\n            def.width = PropertyWidth.Medium;\n\n        if (!def.group)\n            def.group = fallbackGroupName;\n\n        if (def.order < 0)\n            def.order = Number.POSITIVE_INFINITY;\n    }\n\n    // Create our own properties\n    const allProps = properties\n        .map(p => {\n            const name = p.definition.name;\n\n            // Fix type of default values\n            let defaultValue: any = p.definition.default_value;\n            let initialValue: any = p.value.value;\n            if (p.definition.type == DataType.Boolean) {\n                // Boolean\n                // convert 'false' | 'true' to actual boolean values\n                if (typeof defaultValue == 'string')\n                    if (defaultValue.toLowerCase() == 'false')\n                        defaultValue = p.definition.default_value = false as any;\n                    else if (defaultValue.toLowerCase() == 'true')\n                        defaultValue = p.definition.default_value = true as any;\n\n                if (typeof initialValue == 'string')\n                    if (initialValue.toLowerCase() == 'false')\n                        initialValue = p.value.value = false as any;\n                    else if (initialValue.toLowerCase() == 'true')\n                        initialValue = p.value.value = true as any;\n            }\n            if (p.definition.type == DataType.Int || p.definition.type == DataType.Long || p.definition.type == DataType.Short) {\n                // Number\n                const n = Number.parseFloat(defaultValue);\n                if (Number.isFinite(n))\n                    defaultValue = p.definition.default_value = n as any;\n            }\n\n            let value: any = initialValue ?? defaultValue;\n            if (p.definition.type == DataType.Boolean && value == null)\n                value = false; // use 'false' as default for boolean\n\n            return observable({\n                name: name,\n                entry: p,\n                value: value,\n                isHidden: hiddenProperties.includes(name),\n                suggestedValues: suggestedValues[name],\n                errors: p.value.errors ?? [],\n\n                lastErrors: [],\n                showErrors: p.value.errors.length > 0,\n                currentErrorIndex: 0,\n                lastErrorValue: undefined as any,\n                propertyGroup: undefined as any,\n            } as Property);\n        })\n        .sort((a, b) => a.entry.definition.order - b.entry.definition.order);\n\n    return allProps;\n}\n\n\nexport interface PropertyGroup {\n    groupName: string;\n    properties: Property[];\n\n    propertiesWithErrors: Property[];\n}\n\nexport interface Property {\n    name: string;\n    entry: ConnectorProperty;\n    value: null | string | number | boolean | string[];\n\n    isHidden: boolean; // currently only used for \"connector.class\"\n    suggestedValues: undefined | string[]; // values that are not listed in entry.value.recommended_values\n\n\n    errors: string[];  // current errors\n\n    showErrors: boolean; // true = property has errors currently\n    lastErrors: string[];// previous errors, used so we can fade/animate them out when they get fixed\n    currentErrorIndex: number; // since we can only display one error at a time, we use this to cycle through\n    lastErrorValue: any; // the 'value' the property had at the last validation check (used so we can immediately hide the reported error once the user changes the value)\n\n    propertyGroup: PropertyGroup;\n}\n\n\nconst StringLikeTypes = [\n    DataType.String,\n    DataType.Class,\n    DataType.List,\n    DataType.Password\n];\n","import React from 'react';\nimport Editor, {EditorProps} from '@monaco-editor/react';\nimport {editor} from 'monaco-editor';\nimport merge from 'deepmerge';\n\nexport default function KowlEditor(props: EditorProps) {\n  const {options, ...rest} = props\n\n  const defaultOptions: editor.IStandaloneEditorConstructionOptions = {\n    readOnly: false,\n\n    minimap: {\n      enabled: false,\n    },\n    roundedSelection: false,\n    padding: {\n      top: 4,\n    },\n    showFoldingControls: 'always',\n    glyphMargin: false,\n    scrollBeyondLastLine: false,\n    lineNumbersMinChars: 4,\n    scrollbar: {\n      alwaysConsumeMouseWheel: false,\n    },\n    fontSize: 12,\n    occurrencesHighlight: false,\n    foldingHighlight: false,\n    selectionHighlight: false,\n  };\n\n  return (<div style={{ border: '1px solid hsl(0deg, 0%, 90%)', borderRadius: '2px' }}>\n    <Editor\n        options={merge(defaultOptions, options ?? {})}\n        {...rest}\n    />\n  </div>)\n}\n","import React, { useState } from 'react';\nimport { PageComponent, PageInitHelper } from '../Page';\nimport { animProps } from '../../../utils/animationProps';\nimport { motion } from 'framer-motion';\nimport {\n    ApiOutlined,\n    DatabaseOutlined,\n    SearchOutlined,\n} from '@ant-design/icons';\nimport { Wizard, WizardStep } from '../../misc/Wizard';\nimport Card from '../../misc/Card';\nimport { observer } from 'mobx-react';\nimport { api } from '../../../state/backendApi';\nimport { appGlobal } from '../../../state/appGlobal';\nimport {\n    ClusterConnectors,\n    ConnectorValidationResult,\n} from '../../../state/restInterfaces';\nimport { Alert, Select, Table } from 'antd';\nimport { HiddenRadioList } from '../../misc/HiddenRadioList';\nimport { ConnectorBoxCard, ConnectorPlugin } from './ConnectorBoxCard';\nimport { ConfigPage } from './dynamic-ui/components';\nimport KowlEditor from '../../misc/KowlEditor';\nimport { useHistory } from 'react-router-dom';\n\nimport styles from './CreateConnector.module.scss';\n\nconst { Option } = Select;\n\ninterface ConnectorTypeProps {\n    connectClusters: Array<ClusterConnectors>;\n    activeCluster: string | null;\n    onActiveClusterChange: (clusterName: string | null) => void;\n    selectedPlugin: ConnectorPlugin | null;\n    onPluginSelectionChange: (plugin: ConnectorPlugin | null) => void;\n}\n\nconst ConnectorType = observer(({\n    connectClusters,\n    activeCluster,\n    onActiveClusterChange,\n    selectedPlugin,\n    onPluginSelectionChange,\n}: ConnectorTypeProps) => {\n    return (<>\n        <h2>Installation Target</h2>\n        <Select<string> style={{ minWidth: '300px' }}\n            placeholder=\"Choose Connect Cluster\"\n            onChange={(clusterName) => {\n                api.refreshClusterAdditionalInfo(clusterName, true);\n                onActiveClusterChange(clusterName);\n            }}\n            value={activeCluster ?? undefined}\n        >\n            {connectClusters.map(({ clusterName }) => <Option key={clusterName} value={clusterName}>{clusterName}</Option>)}\n        </Select>\n\n        {activeCluster && <>\n            <h2>Connector Type</h2>\n\n            <HiddenRadioList<ConnectorPlugin>\n                name={'connector-type'}\n                onChange={onPluginSelectionChange}\n                value={selectedPlugin ?? undefined}\n                options={api.connectAdditionalClusterInfo.get(activeCluster)?.plugins.map(plugin => ({\n                    value: plugin,\n                    render: (card) => <ConnectorBoxCard {...card} connectorPlugin={plugin} />,\n                })) || []} />\n        </>}\n    </>);\n});\n\n@observer\nclass CreateConnector extends PageComponent {\n    initPage(p: PageInitHelper) {\n        p.title = 'Create Connector';\n        p.addBreadcrumb('Create Connector', '/create-connector');\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    refreshData(force: boolean) {\n        api.refreshConnectClusters(force);\n    }\n\n    render() {\n        const clusters = api.connectConnectors?.clusters;\n        if (clusters == null) return null;\n\n        return (\n            <motion.div {...animProps} className={styles.motionContainer}>\n                <Card className={styles.wizardView}>\n                    <ConnectorWizard connectClusters={clusters} />\n                </Card>\n            </motion.div>\n        );\n    }\n}\n\ninterface ConnectorWizardProps {\n    connectClusters: Array<ClusterConnectors>;\n}\n\nfunction ConnectorWizard({ connectClusters }: ConnectorWizardProps) {\n    const history = useHistory();\n\n    const [currentStep, setCurrentStep] = useState(0);\n    const [activeCluster, setActiveCluster] = useState<string | null>(null);\n    const [selectedPlugin, setSelectedPlugin] = useState<ConnectorPlugin | null>(\n        null);\n    const [properties, setProperties] = useState('');\n    const [invalidValidationResult, setInvalidValidationResult] = useState<ConnectorValidationResult | null>(\n        null);\n    const [validationFailure, setValidationFailure] = useState<unknown>(null);\n    const [creationFailure, setCreationFailure] = useState<unknown>(null);\n    const [genericFailure, setGenericFailure] = useState<Error | null>(null);\n\n    const clearErrors = () => {\n        setCreationFailure(null);\n        setValidationFailure(null);\n        setInvalidValidationResult(null);\n        setGenericFailure(null);\n    };\n\n    const steps: Array<WizardStep> = [\n        {\n            title: 'Connector Type',\n            description: 'Choose type of connector.',\n            icon: <DatabaseOutlined />,\n            content: <ConnectorType\n                connectClusters={connectClusters}\n                activeCluster={activeCluster}\n                onActiveClusterChange={setActiveCluster}\n                selectedPlugin={selectedPlugin}\n                onPluginSelectionChange={setSelectedPlugin}\n            />,\n            postConditionMet: () => activeCluster != null && selectedPlugin != null,\n        }, {\n            title: 'Properties',\n            description: 'Configure basic connection properties.',\n            icon: <ApiOutlined />,\n            content: <>\n                {selectedPlugin != null\n                    ? <div className={styles.connectorBoxCard}>\n                        <ConnectorBoxCard\n                            id=\"selectedConnector\"\n                            connectorPlugin={selectedPlugin}\n                            borderStyle={'dashed'}\n                            borderWidth={'medium'}\n                            hoverable={false} />\n                    </div>\n                    : null}\n                {(activeCluster && selectedPlugin)\n                    ? <ConfigPage clusterName={activeCluster!}\n                        pluginClassName={selectedPlugin!.class}\n                        onChange={setProperties} />\n                    : <div>no cluster or plugin selected</div>\n                }\n            </>,\n            postConditionMet: () => true,\n        },\n        // {\n        //   title: 'Additional Properties',\n        //   description: 'Add advanced connector configs, SMTs, etc.',\n        //   icon: <SettingOutlined/>,\n        //   content: 'More config options...',\n        //   postConditionMet: () => true,\n        // },\n        {\n            title: 'Review',\n            description: 'Review and optionally patch the created connector config.',\n            icon: <SearchOutlined />,\n            content: <Review\n                connectorPlugin={selectedPlugin}\n                properties={properties}\n                onChange={editorContent => setProperties(String(editorContent))}\n                invalidValidationResult={invalidValidationResult}\n                validationFailure={validationFailure}\n                creationFailure={creationFailure}\n                genericFailure={genericFailure}\n            />,\n            postConditionMet: () => true,\n            async transitionConditionMet(): Promise<{ conditionMet: boolean }> {\n                clearErrors();\n                try {\n                    const propertiesObject = JSON.parse(properties);\n\n                    try {\n                        const validationResult = await api.validateConnectorConfig(\n                            activeCluster!, selectedPlugin!.class,\n                            JSON.parse(properties));\n\n                        if (validationResult.error_count > 0) {\n                            setInvalidValidationResult(validationResult);\n                            return { conditionMet: false };\n                        }\n                    } catch (e) {\n                        setValidationFailure(e);\n                        return { conditionMet: false };\n                    }\n\n                    try {\n                        await api.createConnector(activeCluster!, propertiesObject.name,\n                            selectedPlugin!.class, propertiesObject);\n                    } catch (e) {\n                        setCreationFailure(e);\n                        return { conditionMet: false };\n                    }\n                } catch (e: any) {\n                    setGenericFailure(e);\n                    return { conditionMet: false };\n                }\n\n                return { conditionMet: true };\n            },\n        }];\n\n    const isLast = () => currentStep === steps.length - 1;\n\n    return <Wizard state={{\n        canContinue: () => steps[currentStep].postConditionMet(),\n        next: async () => {\n            const transitionConditionMet = steps[currentStep].transitionConditionMet;\n            if (transitionConditionMet) {\n                const { conditionMet } = await transitionConditionMet();\n                if (!conditionMet) return;\n            }\n\n            if (isLast()) {\n                return history.push(`/kafka-connect/${activeCluster}`);\n            }\n\n            return currentStep < steps.length - 1\n                ? setCurrentStep(n => n + 1)\n                : undefined;\n        },\n        previous: () => currentStep > 0 ? setCurrentStep(n => n - 1) : undefined,\n        isLast,\n        isFirst: () => currentStep === 0,\n        getCurrentStep: () => [currentStep, steps[currentStep]],\n        getSteps: () => steps\n    }} />;\n}\n\ninterface ReviewProps {\n    connectorPlugin: ConnectorPlugin | null;\n    properties?: string;\n    onChange: (editorContent: string | undefined) => void;\n    invalidValidationResult: ConnectorValidationResult | null;\n    validationFailure: unknown;\n    creationFailure: unknown;\n    genericFailure: Error | null;\n}\n\nfunction Review({\n    connectorPlugin,\n    properties,\n    onChange,\n    invalidValidationResult,\n    validationFailure,\n    creationFailure,\n    genericFailure,\n}: ReviewProps) {\n\n    return <>\n        {connectorPlugin != null\n            ? <>\n                <h2>Connector Plugin</h2>\n                <ConnectorBoxCard\n                    connectorPlugin={connectorPlugin}\n                    borderStyle=\"dashed\"\n                    borderWidth=\"medium\"\n                    hoverable={false} />\n            </>\n            : null\n        }\n\n        {invalidValidationResult != null\n            ? <ValidationDisplay validationResult={invalidValidationResult} />\n            : null\n        }\n\n        {validationFailure\n            ? <Alert style={{ marginTop: '2rem' }} type=\"error\" message={<>\n                <strong>Validation attempt failed</strong>\n                <p>{String(validationFailure)}</p>\n            </>} />\n            : null\n        }\n\n        {creationFailure\n            ? <Alert style={{ marginTop: '2rem' }} type=\"error\" message={<>\n                <strong>Creation attempt failed</strong>\n                <p>{String(creationFailure)}</p>\n            </>} />\n            : null}\n\n        {genericFailure\n            ? <Alert style={{ marginTop: '2rem' }} type=\"error\" message={<>\n                <strong>An error occurred</strong>\n                <p>{String(creationFailure)}</p>\n            </>} />\n            : null}\n\n        <h2>Connector Properties</h2>\n        <div style={{ margin: '0 auto 1.5rem' }}>\n            <KowlEditor\n                language=\"json\"\n                value={properties}\n                onChange={onChange}\n                height=\"600px\"\n            />\n        </div>\n    </>;\n}\n\nfunction getDataSource(validationResult: ConnectorValidationResult) {\n    return validationResult.configs.filter(connectorProperty => connectorProperty.value.errors.length > 0)\n        .map(cp => cp.value);\n}\n\nfunction ValidationDisplay({ validationResult }: { validationResult: ConnectorValidationResult }) {\n    return <Alert style={{ marginTop: '2rem' }} type=\"warning\" message={<>\n        <h3>Submitted configuration is invalid</h3>\n\n        <Table pagination={false} size={'small'} dataSource={getDataSource(validationResult)} columns={[\n            {\n                title: 'Property Name',\n                dataIndex: 'name',\n                key: 'name',\n            }, {\n                title: 'Current Value',\n                dataIndex: 'value',\n                key: 'value',\n            }, {\n                title: 'Validation Errors',\n                dataIndex: 'errors',\n                key: 'errors',\n            },\n        ]} rowKey={record => record.name} />\n    </>} />;\n}\n\nexport default CreateConnector;\n","import { observer } from \"mobx-react\";\nimport { Empty, Button, Alert } from \"antd\";\nimport { ColumnProps } from \"antd/lib/table\";\nimport { PageComponent, PageInitHelper } from \"../Page\";\nimport { api } from \"../../../state/backendApi\";\nimport { uiSettings } from \"../../../state/ui\";\nimport { sortField } from \"../../misc/common\";\nimport { motion } from \"framer-motion\";\nimport { animProps } from \"../../../utils/animationProps\";\nimport { computed, makeObservable } from \"mobx\";\nimport { appGlobal } from \"../../../state/appGlobal\";\nimport Card from \"../../misc/Card\";\nimport { DefaultSkeleton } from \"../../../utils/tsxUtils\";\nimport { KowlTable } from \"../../misc/KowlTable\";\nimport { LockIcon, SkipIcon } from \"@primer/octicons-react\";\nimport { toJson } from \"../../../utils/jsonUtils\";\nimport { prettyBytes, prettyNumber } from \"../../../utils/utils\";\nimport { QuotaType } from \"../../../state/restInterfaces\";\n\n@observer\nclass QuotasList extends PageComponent {\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    initPage(p: PageInitHelper): void {\n        p.title = 'Quotas';\n        p.addBreadcrumb('Quotas', '/quotas');\n\n        this.refreshData(false);\n        appGlobal.onRefresh = () => this.refreshData(true);\n    }\n\n    refreshData(force: boolean) {\n        if (api.userData != null && !api.userData.canListQuotas) return;\n        api.refreshQuotas(force);\n    }\n\n    render() {\n        if (api.userData != null && !api.userData.canListQuotas) return PermissionDenied;\n        if (api.Quotas === undefined) return DefaultSkeleton;\n\n        const warning = api.Quotas === null\n            ? <Alert type=\"warning\" message=\"You do not have the necessary permissions to view Quotas\" showIcon style={{ marginBottom: '1em' }} />\n            : null;\n\n        const resources = this.quotasList;\n        const formatBytes = (x: undefined | number) => x ? prettyBytes(x) : <span style={{ opacity: 0.30 }}><SkipIcon /></span>\n        const formatRate = (x: undefined | number) => x ? prettyNumber(x) : <span style={{ opacity: 0.30 }}><SkipIcon /></span>\n        const formatPercentage = (x: undefined | number) => x ? `${x}%` : <span style={{ opacity: 0.30 }}><SkipIcon /></span>\n\n        const columns: ColumnProps<typeof resources[0]>[] = [\n            { width: '100px', title: 'Type', dataIndex: 'entityType', sorter: sortField('entityType'), defaultSortOrder: 'ascend' },\n            { width: 'auto', title: 'Name', dataIndex: 'entityName', sorter: sortField('entityName') },\n            { width: '100px', title: 'Producer Rate', render: (_, e) => formatBytes(e.settings.first(k => k.key == QuotaType.PRODUCER_BYTE_RATE)?.value) },\n            { width: '100px', title: 'Consumer Rate', render: (_, e) => formatBytes(e.settings.first(k => k.key == QuotaType.CONSUMER_BYTE_RATE)?.value) },\n            { width: '100px', title: 'Connection Creation Rate', render: (_, e) => formatRate(e.settings.first(k => k.key == QuotaType.CONNECTION_CREATION_RATE)?.value) },\n            { width: '100px', title: 'Request Handler', render: (_, e) => formatPercentage(e.settings.first(k => k.key == QuotaType.REQUEST_PERCENTAGE)?.value) },\n        ];\n\n        return <>\n            <motion.div {...animProps} style={{ margin: '0 1rem' }}>\n\n                <Card>\n                    {warning}\n\n                    <KowlTable\n                        dataSource={resources}\n                        columns={columns}\n\n                        observableSettings={uiSettings.quotasList}\n\n                        rowKey={x => x.eqKey}\n                        rowClassName={() => 'pureDisplayRow'}\n                    />\n                </Card>\n            </motion.div>\n        </>\n    }\n\n    @computed get quotasList() {\n        const quotaResponse = api.Quotas;\n        if (!quotaResponse || quotaResponse.error) return [];\n        \n        return quotaResponse.items.map(x => ({ ...x, eqKey: toJson(x) }));\n    }\n}\n\nconst PermissionDenied = <>\n    <motion.div {...animProps} key={'quotasNoPerms'} style={{ margin: '0 1rem' }}>\n        <Card style={{ padding: '2rem 2rem', paddingBottom: '3rem' }}>\n            <Empty description={null}>\n                <div style={{ marginBottom: '1.5rem' }}>\n                    <h2><span><LockIcon verticalAlign='middle' size={20} /></span> Permission Denied</h2>\n                    <p>\n                        You are not allowed to view this page.\n                        <br />\n                        Contact the administrator if you think this is an error.\n                    </p>\n                </div>\n\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/cloudhut/kowl/blob/master/docs/authorization/roles.md\">\n                    <Button type=\"primary\">Kowl documentation for roles and permissions</Button>\n                </a>\n            </Empty>\n        </Card>\n    </motion.div>\n</>\n\nexport default QuotasList;\n","import { Menu, Tooltip } from \"antd\";\nimport { Link, Switch } from \"react-router-dom\";\nimport React from \"react\";\nimport { Section } from \"./misc/common\";\nimport { Route, Redirect } from \"react-router\";\nimport { queryToObj } from \"../utils/queryHelper\";\nimport { PageComponentType, PageProps } from \"./pages/Page\";\nimport TopicList from \"./pages/topics/Topic.List\";\nimport TopicDetails from \"./pages/topics/Topic.Details\";\nimport { observer } from \"mobx-react\";\nimport GroupList from \"./pages/consumers/Group.List\";\nimport GroupDetails from \"./pages/consumers/Group.Details\";\nimport BrokerList from \"./pages/brokers/Broker.List\";\nimport { AnimatePresence } from \"framer-motion\";\nimport { uiState } from \"../state/uiState\";\nimport AdminPage from \"./pages/admin/AdminPage\";\nimport { api } from \"../state/backendApi\";\nimport SchemaList from \"./pages/schemas/Schema.List\";\nimport SchemaDetailsView, { SchemaDetailsProps } from \"./pages/schemas/Schema.Details\";\nimport AclList from \"./pages/acls/Acl.List\";\nimport { ChipIcon, CogIcon, CollectionIcon, CubeTransparentIcon, FilterIcon, ShieldCheckIcon, BeakerIcon, LinkIcon, ScaleIcon } from '@heroicons/react/outline'\nimport ReassignPartitions from \"./pages/reassign-partitions/ReassignPartitions\";\nimport { Feature, FeatureEntry, isSupported } from \"../state/supportedFeatures\";\nimport { UserPermissions } from \"../state/restInterfaces\";\nimport KafkaConnectOverview from \"./pages/connect/Overview\";\nimport KafkaConnectorDetails from \"./pages/connect/Connector.Details\";\nimport KafkaClusterDetails from \"./pages/connect/Cluster.Details\";\nimport CreateConnector from \"./pages/connect/CreateConnector\";\nimport QuotasList from \"./pages/quotas/Quotas.List\";\n\n\n//\n//\tRoute Types\n//\nexport type IRouteEntry = PageDefinition<any> | PageGroup | SeparatorEntry;\n\nexport interface PageGroup {\n    title: string\n    children: IRouteEntry[]\n}\n\nexport interface PageDefinition<TRouteParams = {}> {\n    title: string\n    path: string\n    pageType: PageComponentType<TRouteParams>\n    routeJsx: JSX.Element\n    icon?: JSX.Element\n    menuItemKey?: string, // set by 'CreateRouteMenuItems'\n    visibilityCheck?: () => MenuItemState,\n}\nexport interface SeparatorEntry { isSeparator: boolean; }\n\nexport function isPageDefinition(x: IRouteEntry): x is PageDefinition<any> { return (x as PageDefinition<any>).path !== undefined; }\nexport function isSeparator(x: IRouteEntry): x is SeparatorEntry { return (x as SeparatorEntry).isSeparator !== undefined; }\n\n\nexport const RouteMenu = observer(() =>\n    <Menu mode=\"inline\"\n        theme='dark'\n        selectedKeys={uiState.selectedMenuKeys}\n        style={{ border: 0, background: 'none' }}\n    >\n        {CreateRouteMenuItems(APP_ROUTES)}\n    </Menu>\n)\n\n// Generate content for <Menu> from all routes\nexport function CreateRouteMenuItems(entries: IRouteEntry[]): React.ReactNodeArray {\n    return entries.map((entry, index) => {\n\n        if (isPageDefinition(entry)) {\n            // Menu entry for Page\n            if (entry.path.includes(':'))\n                return null; // only root-routes (no param) can be in menu\n\n            let isEnabled = true;\n            let disabledText: JSX.Element = <></>;\n            if (entry.visibilityCheck) {\n                const visibility = entry.visibilityCheck();\n                if (!visibility.visible) return null;\n\n                isEnabled = visibility.disabledReasons.length == 0;\n                if (!isEnabled)\n                    disabledText = disabledReasonText[visibility.disabledReasons[0]];\n            }\n            const isDisabled = !isEnabled;\n\n            // {/*  */}\n            return <Menu.Item key={entry.path} disabled={isDisabled}>\n                <Tooltip\n                    overlayClassName='menu-permission-tooltip'\n                    overlay={disabledText}\n                    align={{ points: ['cc', 'cc'], offset: [0, 0] }}\n                    trigger={isDisabled ? 'hover' : 'none'}\n                    mouseEnterDelay={0.05}\n                >\n                    <div style={{ display: isDisabled ? 'block' : 'contents', width: '100%' }}>\n                        <Link to={entry.path} style={{ pointerEvents: isEnabled ? 'all' : 'none' }}>\n                            {entry.icon}\n                            <span>{entry.title}</span>\n                        </Link>\n                    </div>\n                </Tooltip>\n            </Menu.Item>\n        }\n        else if (isSeparator(entry)) {\n            return <div key={index} className='menu-divider' />\n        }\n        else {\n            // Group\n            return (\n                <Menu.ItemGroup key={entry.title} title={entry.title}>\n                    {CreateRouteMenuItems(entry.children)}\n                </Menu.ItemGroup>\n            );\n        }\n    }).filter(x => x != null && x != undefined);\n}\n\n// Convert routes to <Route/> JSX declarations\nfunction EmitRouteViews(entries: IRouteEntry[]): JSX.Element[] {\n\n    const elements: JSX.Element[] = [];\n\n    for (const entry of entries) {\n        if (isPageDefinition(entry)) {\n            elements.push(entry.routeJsx);\n        } else if (isSeparator(entry)) {\n            // seperators are not routes\n        } else {\n            const childJsxElements = EmitRouteViews(entry.children);\n            elements.push(...childJsxElements);\n        }\n    }\n    return elements;\n}\n\n\nexport const RouteView = (() =>\n    <AnimatePresence exitBeforeEnter>\n        <Switch>\n            {/* Index */}\n            {/* <Route exact path='/' component={IndexPage} /> */}\n            <Route exact path='/' render={() => <Redirect to='/topics' />} />\n\n            {/* Emit all <Route/> elements */}\n            {EmitRouteViews(APP_ROUTES)}\n\n            <Route render={rp => {\n                uiState.pageTitle = '404';\n                return (\n                    <Section title='404'>\n                        <div><h4>Path:</h4> <span>{rp.location.pathname}</span></div>\n                        <div><h4>Query:</h4> <pre>{JSON.stringify(rp.location.search, null, 4)}</pre></div>\n                    </Section>\n                )\n            }} />\n\n        </Switch>\n    </AnimatePresence>\n)\n\nenum DisabledReasons {\n    \"notSupported\", // kafka cluster version too low\n    \"noPermission\", // user doesn't have permissions to use the feature\n}\n\nconst disabledReasonText: { [key in DisabledReasons]: JSX.Element } = {\n    [DisabledReasons.noPermission]:\n        <span>You don't have premissions<br />to view this page.</span>,\n    [DisabledReasons.notSupported]:\n        <span>The Kafka cluster does not<br />support this feature.</span>,\n} as const;\n\ninterface MenuItemState {\n    visible: boolean;\n    disabledReasons: DisabledReasons[];\n}\n\nfunction MakeRoute<TRouteParams>(path: string, page: PageComponentType<TRouteParams>, title: string, icon?: JSX.Element, exact: boolean = true, showCallback?: () => MenuItemState): PageDefinition<TRouteParams> {\n\n    const route: PageDefinition<TRouteParams> = {\n        title,\n        path,\n        pageType: page,\n        routeJsx: (null as unknown as JSX.Element), // will be set below\n        icon,\n        visibilityCheck: showCallback,\n    }\n\n    // todo: verify that path and route params match\n    route.routeJsx = <Route path={route.path} key={route.title} exact={exact ? true : undefined} render={rp => {\n        const matchedPath = rp.match.url;\n        const query = queryToObj(rp.location.search);\n        const { ...params } = rp.match.params;\n\n        if (uiState.currentRoute && uiState.currentRoute.path != route.path) {\n            //console.log('switching route: ' + routeStr(ui.currentRoute) + \" -> \" + routeStr(route));\n        }\n\n        const pageProps: PageProps<TRouteParams> = {\n            matchedPath,\n            query,\n            ...params,\n        } as PageProps<TRouteParams>;\n\n        uiState.currentRoute = route;\n        return <route.pageType {...pageProps} />\n    }} />;\n\n    return route;\n}\n\nfunction routeVisibility(\n    visible: boolean | (() => boolean),\n    requiredFeatures?: FeatureEntry[],\n    requiredPermissions?: UserPermissions[]): () => MenuItemState {\n    return () => {\n        const v = typeof visible === 'boolean'\n            ? visible\n            : visible();\n\n        const disabledReasons: DisabledReasons[] = [];\n        if (requiredFeatures)\n            for (const f of requiredFeatures) {\n                if (!isSupported(f)) {\n                    disabledReasons.push(DisabledReasons.notSupported);\n                    break;\n                }\n            }\n\n        if (requiredPermissions && api.userData)\n            for (const p of requiredPermissions) {\n                const hasPermission = api.userData[p];\n                if (!hasPermission) {\n                    disabledReasons.push(DisabledReasons.noPermission);\n                    break;\n                }\n            }\n\n        return {\n            visible: v,\n            disabledReasons: disabledReasons\n        }\n    }\n}\n\n//\n// Route Definitions\n// If a route has one or more parameters it will not be shown in the main menu (obviously, since the parameter would have to be known!)\n//\nexport const APP_ROUTES: IRouteEntry[] = [\n\n    MakeRoute<{}>('/brokers', BrokerList, 'Brokers', <span className='menuIcon anticon'><ChipIcon /></span>),\n\n    MakeRoute<{}>('/topics', TopicList, 'Topics', <span className='menuIcon anticon'><CollectionIcon /></span>),\n    MakeRoute<{ topicName: string }>('/topics/:topicName', TopicDetails, 'Topics'),\n\n    MakeRoute<{}>('/schema-registry', SchemaList, 'Schema Registry', <span className='menuIcon anticon'><CubeTransparentIcon /></span>),\n    MakeRoute<SchemaDetailsProps>('/schema-registry/:subjectName', SchemaDetailsView, 'Schema Registry'),\n\n    MakeRoute<{}>('/groups', GroupList, 'Consumer Groups', <span className='menuIcon anticon'><FilterIcon /></span>, undefined,\n        routeVisibility(true, [Feature.ConsumerGroups])\n    ),\n    MakeRoute<{ groupId: string }>('/groups/:groupId/', GroupDetails, 'Consumer Groups'),\n\n    MakeRoute<{}>('/acls', AclList, 'Access Control List', <span className='menuIcon anticon'><ShieldCheckIcon /></span>, true,\n        routeVisibility(true, [], ['canListAcls'])\n    ),\n\n    MakeRoute<{}>('/quotas', QuotasList, 'Quotas', <span className='menuIcon anticon'><ScaleIcon /></span>, true,\n        routeVisibility(true, [Feature.GetQuotas], ['canListQuotas'])\n    ),\n\n    MakeRoute<{}>('/kafka-connect', KafkaConnectOverview, 'Kafka Connect', <span className='menuIcon anticon'><LinkIcon /></span>, true),\n    MakeRoute<{ clusterName: string }>('/kafka-connect/:clusterName', KafkaClusterDetails, 'Connect Cluster'),\n    MakeRoute<{ clusterName: string, connector: string }>('/kafka-connect/:clusterName/:connector', KafkaConnectorDetails, 'Connector Details'),\n    MakeRoute<{}>('/create-connector', CreateConnector, 'Create Connector', undefined, undefined, routeVisibility(false)),\n\n    MakeRoute<{}>('/reassign-partitions', ReassignPartitions, 'Reassign Partitions', <span className='menuIcon anticon'><BeakerIcon /></span>, false,\n        routeVisibility(true,\n            [Feature.GetReassignments, Feature.PatchReassignments],\n            ['canPatchConfigs', 'canReassignPartitions']\n        )\n    ),\n\n    MakeRoute<{}>('/admin', AdminPage, 'Admin', <span className='menuIcon anticon'><CogIcon /></span>, false,\n        routeVisibility(() => api.userData?.canManageKowl ?? false)\n    ),\n\n\n].filterNull();\n","import React from 'react';\nimport { observer } from \"mobx-react\";\nimport { Result } from 'antd';\nimport { Button } from 'antd';\nimport { api } from '../../state/backendApi';\nimport { CloseCircleOutlined } from '@ant-design/icons'\nimport { toJson } from \"../../utils/jsonUtils\";\nimport { makeObservable } from 'mobx';\n\n\n@observer\nexport class ErrorDisplay extends React.Component {\n\n    render() {\n        if (api.errors.length === 0)\n            return this.props.children;\n\n        return <>\n            <Result style={{ margin: 0, padding: 0 }} status={500} title=\"Backend API Error\" subTitle=\"Something went wrong while pulling data from the backend server\" />\n            <div style={{ margin: '2em 2em', display: 'flex', flexDirection: 'column' }}>\n                <Button type=\"primary\" size=\"large\" style={{ width: '12em', alignSelf: 'center' }} onClick={clearErrors}>Retry</Button>\n\n                <div className=\"error-list\">\n                    {api.errors.map((e, i) => <div key={i}>\n                        <CloseCircleOutlined style={{ color: 'red' }} /> {formatError(e)}\n                    </div>)}\n                </div>\n            </div>\n        </>;\n    }\n}\n\nfunction formatError(err: any): string {\n    if (err instanceof Error && err.message) {\n        return err.message;\n    }\n    return String(err);\n}\n\nfunction clearErrors() {\n    api.errors = [];\n}\n","export default \"data:image/png;base64,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\"","import React, { CSSProperties } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { makeObservable, observable } from \"mobx\";\nimport { toJson } from \"../../utils/jsonUtils\";\nimport { Button, Layout, message, Space, Skeleton } from \"antd\";\nimport { CopyOutlined, CloseOutlined } from \"@ant-design/icons\";\nimport { envVarDebugAr } from \"../../utils/env\";\nimport { NoClipboardPopover } from \"./NoClipboardPopover\";\nimport { isClipboardAvailable } from \"../../utils/featureDetection\";\nimport { DefaultSkeleton, ObjToKv } from \"../../utils/tsxUtils\";\nimport StackTrace from \"stacktrace-js\";\n\nconst { Content } = Layout;\n\n// background       rgb(35, 35, 35)\n// div              rgba(206, 17, 38, 0.1)\n// title            rgb(232, 59, 70)\n// foreground\n//    - main        rgb(252, 207, 207)\n//    - highligh    rgb(204, 102, 102)\n//    - secondary   rgb(135, 142, 145)\n\nconst valueStyle: CSSProperties = {\n    whiteSpace: 'pre-wrap',\n    lineBreak: 'anywhere',\n\n    fontSize: '12px',\n    background: 'rgba(20,20,20,0.05)',\n    borderRadius: '2px',\n    padding: '1rem',\n}\n\ninterface InfoItem {\n    name: string;\n    value: string | (() => any);\n}\n\n@observer\nexport class ErrorBoundary extends React.Component {\n    @observable hasError = false;\n    error: Error | null = null;\n    errorInfo: object | null = null;\n    @observable decodingDone: boolean = false;\n\n    @observable infoItems: InfoItem[] = [];\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    componentDidCatch(error: Error | null, errorInfo: object) {\n        this.error = error;\n        this.errorInfo = errorInfo;\n        this.decodingDone = false;\n\n        this.infoItems = [];\n\n        // Type\n        if (this.error?.name && this.error.name.toLowerCase() != 'error')\n            this.infoItems.push({ name: \"Type\", value: this.error.name });\n\n        // Message\n        if (this.error?.message)\n            this.infoItems.push({ name: \"Message\", value: this.error.message });\n        else\n            this.infoItems.push({ name: \"Message\", value: \"(no message)\" });\n\n        // Call Stack\n        if (this.error?.stack) {\n            const dataHolder = observable({\n                value: null as null | any,\n            });\n\n            this.infoItems.push({\n                name: 'Stack (Decoded)', value: () => {\n                    if (dataHolder.value == null) return <>\n                        <div style={{ fontSize: '2rem' }}>Decoding stack trace, please wait...</div>\n                    </>;\n                    return dataHolder.value;\n                }\n            });\n\n            StackTrace.fromError(this.error).then(frames => {\n                // Decode Success\n                dataHolder.value = frames.join('\\n');\n                this.decodingDone = true;\n            }).catch(err => {\n                // Decode Error\n                dataHolder.value = \"Unable to decode stacktrace\\n\" + String(err);\n                this.decodingDone = true;\n            });\n\n\n            // Normal stack trace\n            let s = this.error.stack;\n            if (s.toLowerCase().startsWith(\"error:\")) s = s.substr(6).trim(); // todo removePrefix()\n            if (this.error.message && s.startsWith(this.error.message))\n                s = s.substr(this.error.message.length).trimStart();\n            this.infoItems.push({ name: \"Stack (Raw)\", value: s });\n        }\n\n        // Component Stack\n        if (this.errorInfo && (this.errorInfo as any).componentStack)\n            this.infoItems.push({ name: \"Components\", value: (this.errorInfo as any).componentStack });\n        else\n            this.infoItems.push({\n                name: \"Components\", value: this.errorInfo\n                    ? \"(componentStack not set) errorInfo as Json: \\n\" + toJson(this.errorInfo)\n                    : \"(errorInfo was not set)\"\n            });\n\n\n        // EnvVars\n        try {\n            const padLength = envVarDebugAr.max(e => e.name.length);\n            this.infoItems.push({\n                name: \"Environment\",\n                value: envVarDebugAr.map(e => e.name.padEnd(padLength) + ': ' + e.value).join(\"\\n\")\n            })\n        } catch (ex) {\n            this.infoItems.push({ name: \"Environment\", value: \"(error retreiving env list)\" });\n        }\n\n        // Location\n        try {\n            const locationItems = ObjToKv({\n                \"Protocol\": window?.location?.protocol ?? '<null>',\n                \"Path\": window?.location?.pathname ?? '<null>',\n                \"Search\": window?.location?.search ?? '<null>',\n                \"Hash\": window?.location?.hash ?? '<null>',\n            });\n            const padLength = locationItems.max(e => e.key.length);\n            this.infoItems.push({\n                name: \"Location\",\n                value: locationItems.map(e => e.key.padEnd(padLength) + ': ' + e.value).join(\"\\n\")\n            })\n        } catch (ex) {\n            this.infoItems.push({ name: \"Location\", value: \"(error printing location, please include the url in your bug report)\" });\n        }\n\n        this.hasError = true;\n    }\n\n    copyError() {\n        let data = \"\";\n\n        for (const e of this.infoItems) {\n            const str = getStringFromInfo(e);\n            data += `${e.name}:\\n${str}\\n\\n`;\n        }\n\n        navigator.clipboard.writeText(data);\n        message.success('All info copied to clipboard!', 5);\n    }\n\n    dismiss() {\n        this.error = null;\n        this.errorInfo = null;\n        this.hasError = false;\n        this.decodingDone = false;\n    }\n\n    render() {\n        if (!this.hasError) return this.props.children;\n\n        return <Layout style={{ minHeight: '100vh', overflow: 'visible', padding: '2rem 4rem' }}>\n            <div>\n                <h1>Rendering Error!</h1>\n                <p>Please report this at <a style={{ textDecoration: 'underline', fontWeight: 'bold' }} href=\"https://github.com/cloudhut/kowl/issues\">our GitHub Repo</a></p>\n                <Space size={'large'} style={{ marginTop: '0', marginBottom: '2rem' }}>\n                    <Button icon={<CloseOutlined />} type='primary' size='large' style={{ width: '16rem' }} onClick={() => this.dismiss()}>\n                        Dismiss\n                    </Button>\n                    <NoClipboardPopover>\n                        <Button type='primary' size='large' ghost icon={<CopyOutlined />}\n                            disabled={!isClipboardAvailable || !this.decodingDone}\n                            loading={!this.decodingDone}\n                            onClick={() => this.copyError()}>\n                            Copy Info\n                        </Button>\n                    </NoClipboardPopover>\n                </Space>\n            </div>\n            <Content>\n                <Space direction='vertical' size={30} style={{ width: '100%' }}>\n                    {this.infoItems.map(e => <InfoItemDisplay key={e.name} data={e} />)}\n                </Space>\n            </Content>\n        </Layout>\n    }\n}\n\nfunction getStringFromInfo(info: InfoItem) {\n    if (!info) return \"\";\n\n    if (typeof info.value === 'string') return info.value;\n    try {\n        const r = info.value();\n        return String(r);\n    } catch (err) {\n        return \"Error calling infoItem func: \" + err;\n    }\n}\n\n@observer\nexport class InfoItemDisplay extends React.Component<{ data: InfoItem }> {\n\n    render() {\n        const title = this.props.data.name;\n        const value = this.props.data.value;\n        let content: any;\n        if (typeof value === 'string') {\n            content = value;\n        }\n        else {\n            try {\n                content = value();\n            } catch (err) {\n                content = \"error rendering: \" + String(err);\n            }\n        }\n\n        if (typeof content === 'string') {\n            content = content.replace(/\\n\\s*/g, \"\\n\").trim();\n        }\n\n        return (\n            <div>\n                <h2>{title}</h2>\n                <pre style={valueStyle}>{content}</pre>\n            </div>\n        )\n    }\n}","import React, { Component, ReactNode } from 'react';\nimport { observer } from \"mobx-react\";\nimport { Menu, Select, Avatar, Popconfirm, Dropdown, Button, Modal, Input, message, Checkbox, InputNumber } from 'antd';\nimport { uiSettings } from '../../state/ui';\nimport { RenderTrap, Spacer } from './common';\nimport { api } from '../../state/backendApi';\nimport Icon, { UserOutlined } from '@ant-design/icons';\nimport { IsBusiness } from '../../utils/env';\nimport { Label } from '../../utils/tsxUtils';\nimport { makeObservable, observable } from 'mobx';\nimport { ToolsIcon } from '@primer/octicons-react';\n\nconst { Option } = Select;\ntype Action = () => void;\n\nconst settingsTabs: { name: string, component: () => ReactNode }[] = [\n    { name: \"Statistics Bar\", component: () => <StatsBarTab /> },\n    { name: \"Json Viewer\", component: () => <JsonViewerTab /> },\n\n    // pagination position\n    // { name: \"Message Search\", component: () => <MessageSearchTab /> },\n    // { name: \"Import/Export\", component: () => <ImportExportTab /> },\n];\n\n\n@observer\nexport class UserPreferencesButton extends Component {\n    @observable isOpen = false;\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    render() {\n\n        return <>\n            <UserPreferencesDialog visible={this.isOpen} onClose={() => this.isOpen = false} />\n            <Button shape='circle' icon={<ToolsIcon size={17} />} className='hoverButton userPreferencesButton'\n                onClick={() => this.isOpen = true}\n            />\n        </>;\n    }\n}\n\n@observer\nexport class UserPreferencesDialog extends Component<{ visible: boolean, onClose: Action }> {\n    @observable selectedTab: string = settingsTabs[0].name;\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n    render() {\n        const { visible, onClose } = this.props;\n        const tab = settingsTabs.first(t => t.name == this.selectedTab);\n\n        return 1 &&\n            <Modal centered visible={visible}\n                closable={false}\n                title={null}\n                onOk={onClose}\n                onCancel={onClose}\n\n                destroyOnClose={true}\n\n                cancelButtonProps={{ style: { display: 'none' } }}\n                maskClosable={true}\n                footer={<div style={{ display: 'flex', gap: '16px', alignItems: 'center', justifyContent: 'flex-end' }}>\n                    <div style={{ fontFamily: '\"Open Sans\", sans-serif', fontSize: '10.5px', color: '#828282' }}>\n                        Changes are saved automatically\n                    </div>\n                    <Button type='primary' onClick={onClose} >Close</Button>\n                </div>}\n                className='preferencesDialog'\n                bodyStyle={{ padding: '0', display: 'flex', flexDirection: 'column' }}\n            >\n                {/* Title */}\n                <div className='h3' style={{ display: 'flex', alignItems: 'center', padding: '16px 20px', borderBottom: '1px solid hsl(0 0% 90% / 1)' }}>\n                    User Preferences\n                </div>\n\n                {/* Body */}\n                <div style={{ display: 'flex', flexGrow: 1 }}>\n                    {/* Menu */}\n                    <Menu mode='vertical' style={{ width: '160px', height: '100%' }} selectedKeys={[this.selectedTab]} onClick={p => this.selectedTab = p.key.toString()}>\n                        {settingsTabs.map(t => <Menu.Item key={t.name} >{t.name}</Menu.Item>)}\n                    </Menu>\n\n                    {/* Content */}\n                    <div style={{\n                        display: 'flex', flexGrow: 1, gap: '16px', flexDirection: 'column',\n                        padding: '0 20px', paddingBottom: '40px',\n                    }}>\n                        <div className='h3' style={{ marginTop: '16px', marginBottom: '8px' }}>{tab?.name}</div>\n                        {tab?.component()}\n                    </div>\n                </div>\n            </Modal>;\n    }\n}\n\n\n\n@observer\nclass StatsBarTab extends Component {\n    render() {\n        return <div>\n            <p>Controls on what pages kowl shows the statistics bar</p>\n            <div style={{ display: 'inline-grid', gridAutoFlow: 'row', gridRowGap: '24px', gridColumnGap: '32px', marginRight: 'auto' }}>\n                <Label text='Topic Details' >\n                    <Checkbox children='Enabled' checked={uiSettings.topicDetailsShowStatisticsBar} onChange={e => uiSettings.topicDetailsShowStatisticsBar = e.target.checked} />\n                </Label>\n                <Label text='Consumer Group Details' >\n                    <Checkbox children='Enabled' checked={uiSettings.consumerGroupDetails.showStatisticsBar} onChange={e => uiSettings.consumerGroupDetails.showStatisticsBar = e.target.checked} />\n                </Label>\n            </div>\n        </div>;\n    }\n}\n\n@observer\nclass JsonViewerTab extends Component {\n    render() {\n        const settings = uiSettings.jsonViewer;\n\n        return <div>\n            <p>Settings for the JsonViewer</p>\n\n            <div style={{ display: 'inline-grid', gridAutoFlow: 'row', gridRowGap: '24px', gridColumnGap: '32px', marginRight: 'auto' }}>\n                <Label text='Font Size'>\n                    <Input value={settings.fontSize} onChange={e => settings.fontSize = e.target.value} style={{ maxWidth: '150px' }} />\n                </Label>\n                <Label text='Line Height'>\n                    <Input value={settings.lineHeight} onChange={e => settings.lineHeight = e.target.value} style={{ maxWidth: '150px' }} />\n                </Label>\n                <Label text='Maximum string length before collapsing'>\n                    <InputNumber value={settings.maxStringLength} onChange={e => settings.maxStringLength = e} min={0} max={10000} style={{ maxWidth: '150px' }} />\n                </Label>\n            </div>\n        </div>;\n    }\n}\n\n@observer\nclass ImportExportTab extends Component {\n    @observable importCode = '';\n    @observable resetConfirm = '';\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    render() {\n        return <>\n            <Label text='Import'>\n                <Input\n                    style={{ padding: '2px 8px' }}\n                    placeholder='paste exported preferences string here'\n                    value={this.importCode}\n                    onChange={e => {\n                        // todo\n                    }}\n                    onPaste={p => console.log('onPaste event', p)}\n                    onPasteCapture={p => console.log('onPasteCapture event', p)}\n                    size='small' />\n            </Label>\n\n            <Label text='Export'>\n                <Button onClick={() => { message.success('Preferences copied to clipboard!'); }}>\n                    Export User Preferences\n                </Button>\n            </Label>\n\n            <Label text='Reset'>\n                <div>\n                    <div>\n                        <Input style={{ maxWidth: '360px', marginRight: '8px' }}\n                            placeholder='type \"reset\" here to confirm and enable the button'\n                            value={this.resetConfirm}\n                            onChange={str => this.resetConfirm = str.target.value} />\n                        <Button onClick={() => { message.success('Preferences copied to clipboard!'); }} danger disabled={this.resetConfirm != 'reset'}>Reset</Button>\n                    </div>\n                    <span className='smallText'>Clear all your user settings, resetting them to the default values</span>\n                </div>\n            </Label>\n        </>;\n    }\n}","import { Component } from 'react';\nimport { observer } from \"mobx-react\"\nimport { Select, Avatar, Dropdown } from 'antd';\nimport { api } from '../../state/backendApi';\nimport { UserOutlined } from '@ant-design/icons';\nimport { IsBusiness } from '../../utils/env';\nimport { makeObservable, observable } from 'mobx';\nimport { UserPreferencesDialog } from './UserPreferences';\n\n@observer\nexport class UserProfile extends Component {\n    @observable menuOpen = false;\n    @observable preferencesOpen = false;\n\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n    render() {\n        if (!IsBusiness) return null;\n        if (!api.userData || !api.userData.user || !api.userData.user.meta.name) return null;\n        const user = api.userData.user;\n\n        // rc-dropdown supports this property, but the antd wrapper doesn't specify it.\n        // luckily antd passes many props to rc-dropdown using the spread operator\n        const noExpand = { minOverlayWidthMatchTrigger: false };\n\n        return <>\n            <Dropdown overlayClassName=\"avatarDropdown\"\n                overlay={() => <UserMenu onOpenPreferences={() => {\n                    this.preferencesOpen = true;\n                    this.menuOpen = false;\n                }} />}\n                trigger={['click']}\n                arrow={false}\n                placement=\"topCenter\"\n                visible={this.menuOpen}\n                onVisibleChange={e => this.menuOpen = e}\n                {...noExpand}\n            >\n                <div className=\"profile\">\n                    <div className=\"avatar\">\n                        <Avatar src={user.meta.avatarUrl} alt={user.meta.name} >\n                            <UserOutlined />\n                        </Avatar>\n                    </div>\n                    <div className=\"text\">\n                        <div className=\"userName\">{user.meta.name}</div>\n                        <div className=\"prefText\">Preferences</div>\n                    </div>\n                </div>\n            </Dropdown>\n\n            <UserPreferencesDialog visible={this.preferencesOpen} onClose={() => this.preferencesOpen = false} />\n        </>\n    }\n}\n\n@observer\nexport class UserMenu extends Component<{ onOpenPreferences: () => void }> {\n    render() {\n        const userName = api.userData?.user?.meta?.name ?? 'null';\n\n        return (\n            <div className='userMenu'>\n                <div className='menuItem header'>\n                    Signed in as<br />\n                    <span style={{ fontWeight: 'bold' }}>{userName}</span>\n                </div>\n\n                <div className='divider' />\n\n                <div className='menuItem' onClick={() => this.props.onOpenPreferences()}>\n                    Preferences\n                </div>\n\n                <div className='menuItem' onClick={() => { api.logout(); window.location.reload(); }}>\n                    Logout\n                </div>\n            </div>\n        )\n    }\n}\n\n","export default __webpack_public_path__ + \"static/media/login_wave.bab7d309.svg\";","import React from \"react\";\n\n\nexport default <svg viewBox=\"0 0 260 260\" focusable={false}>\n\n    <g transform=\"translate(0,260) scale(0.100000,-0.100000)\" fill='currentColor' stroke=\"none\">\n        <path d=\"M311 2393 c-13 -3 -45 -26 -71 -52 -68 -68 -71 -86 -72 -480 0 -402\n-1 -404 -106 -508 l-65 -65 49 -43 c27 -23 65 -69 84 -101 l35 -58 2 -351 c1\n-215 7 -368 13 -397 7 -26 26 -63 46 -86 48 -56 99 -74 204 -70 l84 3 2 43 c0\n23 -4 46 -9 49 -6 4 -41 8 -78 9 -76 3 -101 13 -126 51 -15 23 -17 66 -18 402\n-2 371 -2 377 -25 424 -13 27 -38 65 -57 84 -18 20 -33 39 -33 43 0 4 16 24\n35 45 19 21 44 59 56 84 22 45 22 56 24 421 1 275 4 381 13 398 21 38 55 52\n129 56 38 1 74 5 80 9 6 4 10 26 9 49 l-2 43 -90 1 c-49 1 -100 0 -113 -3z\"/>\n        <path d=\"M2087 2393 c-3 -7 -2 -45 2 -86 1 -9 23 -13 76 -14 80 -1 114 -15\n137 -55 9 -17 12 -121 13 -388 1 -413 4 -431 75 -509 22 -24 40 -47 40 -51 0\n-4 -15 -23 -33 -43 -34 -35 -63 -88 -74 -130 -3 -12 -6 -187 -7 -388 -1 -332\n-3 -368 -19 -393 -23 -34 -56 -47 -132 -51 -33 -1 -65 -3 -71 -4 -5 0 -10 -22\n-9 -49 l1 -47 94 -2 c110 -1 149 13 198 73 49 59 54 102 54 467 0 396 0 398\n104 503 l65 65 -59 57 c-109 105 -106 92 -109 497 -2 225 -7 368 -14 399 -15\n61 -86 139 -138 149 -46 9 -189 9 -194 0z\"/>\n        <path d=\"M1240 2029 c-184 -16 -344 -91 -468 -218 -137 -140 -213 -324 -213\n-521 -2 -418 333 -747 753 -739 289 5 525 155 657 416 136 271 80 619 -134\n837 -73 75 -131 115 -230 162 -116 54 -233 74 -365 63z m164 -386 c230 -67\n336 -344 209 -547 -136 -217 -452 -232 -604 -29 -214 284 54 674 395 576z\"/>\n    </g>\n</svg>","import React, { Component } from 'react';\nimport { Spin, Modal } from 'antd';\nimport { observer } from 'mobx-react';\nimport { makeObservable, observable } from 'mobx';\n\nimport SvgLoginWave from '../../assets/login_wave.svg';\nimport PngLogo from '../../assets/logo2.png';\nimport { uiState } from '../../state/uiState';\nimport Icon, { GoogleOutlined, GithubOutlined } from '@ant-design/icons';\nimport OktaLogo from '../../utils/svg/OktaLogo';\n\n\nconst iconMap = new Map([\n    [\"google\", <GoogleOutlined style={{ marginBottom: '6px' }} />],\n    [\"github\", <GithubOutlined style={{ marginBottom: '6px' }} />],\n    [\"okta\", <span style={{ display: 'inline-block', color: 'inherit', marginBottom: '6px', width: '20px', height: '20px', }}>{OktaLogo}</span>],\n]);\n\ninterface Provider {\n    displayName: string,\n    url: string\n}\ninterface ProvidersResponse {\n    providers: Provider[]\n    loginTitle: string\n}\n\nasync function getProviders() {\n    const response = await fetch('./auth/providers', {\n        method: 'GET',\n        cache: 'no-cache',\n        mode: 'no-cors'\n    });\n\n    if (!response.ok) {\n        throw new Error(await response.text());\n    }\n\n    return (await response.json() as ProvidersResponse);\n}\n\n\n@observer\nclass Login extends Component {\n    constructor(p: any) {\n        super(p);\n        makeObservable(this);\n    }\n\n\n    @observable providersResponse: ProvidersResponse | null = null;\n    @observable providersError: string | null = null;\n\n    async componentDidMount() {\n        try {\n            this.providersResponse = await getProviders();\n        } catch (err) {\n            this.providersResponse = null;\n            this.providersError = err.toString();\n        }\n    }\n\n    render() {\n        let ar = this.providersResponse ? this.providersResponse.providers : null;\n        if (ar)\n            ar = ar.slice().sort((a, b) => a.displayName.localeCompare(b.displayName));\n\n        return <div className='login'>\n\n            <Modal\n                title=\"Access Denied\"\n                visible={uiState.loginError != null}\n                cancelButtonProps={{ style: { display: 'none' } }}\n                closable={false}\n                maskClosable={false}\n                onOk={() => { uiState.loginError = null; }}\n            >\n                <p style={{ whiteSpace: 'pre-wrap' }}>{uiState.loginError}</p>\n            </Modal>\n\n            <div className='loginContainer'>\n\n                <div className='loginLeft'>\n                    <div className='loginLogo' style={{ height: '60px', marginBottom: 'auto', marginTop: '2rem' }}>\n                        <img src={PngLogo} style={{ height: '100%', filter: 'brightness(0.45) sepia(1) saturate(1.5) hue-rotate(165deg)' }} alt=\"\" />\n                        <span style={{ textTransform: 'uppercase', color: '#498FC2', letterSpacing: 12, fontSize: '1.75rem', paddingLeft: '20px' }}>Kowl</span>\n                    </div>\n\n                    <div style={{ justifySelf: 'center', marginBottom: 'auto' }}>\n                        <p style={{ fontWeight: 'bold', textTransform: 'uppercase' }}>{this.providersResponse?.loginTitle ?? \"Howdy!\"}</p>\n                        <p style={{ width: '230px' }}>Login with an OAuth provider to continue</p>\n                    </div>\n                </div>\n\n                <div className='loginRight'>\n                    <div style={{ float: 'left', height: '100%', width: '120px', overflow: 'hidden' }}>\n                        <img src={SvgLoginWave} style={{ width: 'auto', height: 'calc(100% + 1px)', transform: 'translateX(-1px)' }} alt=\"\" />\n                        {/* <embed style={{ height:'100%'}} type=\"image/svg+xml\" src={SvgLoginWave} /> */}\n                    </div>\n                    <div className=\"loginContainerRight\">\n\n                        <img src={PngLogo} style={{\n                            position: 'absolute',\n                            alignSelf: 'center',\n                            zIndex: -5,\n                            marginTop: '60px', height: '165px',\n                            filter: 'brightness(0.1) sepia(1) saturate(6) hue-rotate(180deg)',\n                            opacity: 0.7\n                        }} alt=\"\" />\n\n                        <div style={{ marginTop: 'auto' }}>\n                            <div style={{ fontSize: '22px', fontWeight: 600, textTransform: 'uppercase' }}>\n                                <span>Sign in</span><br />\n                                <span style={{ fontSize: '0.66em' }}>to access KOWL</span>\n                            </div>\n                            <div className='loginButtonList'>\n                                {ar?.map(p => (\n                                    <div key={p.displayName} className='loginButton2' onClick={() => window.location.replace(p.url)}>\n                                        {iconMap.get(p.displayName.toLowerCase())}\n                                        <span>\n                                            {p.displayName}\n                                        </span>\n                                    </div>\n                                ))\n                                    || (this.providersError && <div style={{\n                                        fontSize: '15px',\n                                        color: 'rgb(202, 0, 0)',\n                                        width: '66%',\n                                        margin: 'auto',\n                                        fontWeight: 'bold',\n                                        fontFamily: 'sans-serif',\n                                        background: 'rgba(0,0,0, 0.33)',\n                                        borderRadius: '3px',\n                                        padding: '1em',\n                                    }}>\n                                        <div>Unable to fetch providers</div>\n                                        <div style={{ fontSize: '0.9em' }}>{this.providersError}</div>\n                                    </div>)\n                                    || <div style={{ fontSize: '14px', marginTop: '32px', color: '#ddd' }}><Spin size='large' /><br />Retreiving login method from backend...</div>}\n                            </div>\n                        </div>\n\n                        <div style={{ marginTop: 'auto', fontWeight: 'normal' }}>Copyright  2020-{new Date().getFullYear()} CloudHut. All rights reserved.</div>\n                    </div>\n                </div>\n\n            </div>\n        </div>;\n    }\n}\nexport default Login;\n\n","import { Component } from \"react\";\nimport { observer } from \"mobx-react\";\nimport React from \"react\";\nimport { Layout, Spin } from \"antd\";\nimport { api, rest } from \"../../state/backendApi\";\nimport { ApiError, UserData } from \"../../state/restInterfaces\";\nimport { appGlobal } from \"../../state/appGlobal\";\nimport fetchWithTimeout from \"../../utils/fetchWithTimeout\";\nimport { uiState } from \"../../state/uiState\";\nimport { basePathS } from \"../../utils/env\";\nimport { match } from \"react-router-dom\";\nimport { queryToObj } from \"../../utils/queryHelper\";\n\nclass LoginCompletePage extends Component<{ provider: string, match: match<any> }> {\n\n    componentDidMount() {\n        this.completeLogin(this.props.provider, window.location);\n    }\n\n    async completeLogin(provider: string, location: Location) {\n        const query = location.search;\n\n        const queryObj = queryToObj(query);\n        if (queryObj.error || queryObj.error_description) {\n            let errorString = '';\n            if (queryObj.error) errorString += `Error: ${queryObj.error}\\n`;\n            if (queryObj.error_description) errorString += `Description: ${queryObj.error_description}\\n`;\n            uiState.loginError = errorString.trim();\n            appGlobal.history.push(basePathS + '/login');\n            return;\n        }\n\n        const url = \"./auth/callbacks/\" + provider + query;\n\n        try {\n            const response = await fetchWithTimeout(url, 10 * 1000, { method: 'GET', cache: 'no-cache', mode: 'no-cors' });\n            const text = await response.text();\n            const obj = JSON.parse(text);\n            console.log(\"complete login response: \" + text);\n            if (response.ok) {\n                api.userData = obj as UserData;\n            } else {\n                // try to read as error object\n                const err = obj as ApiError;\n                throw err.message;\n            }\n        } catch (err) {\n            uiState.loginError = String(err);\n            appGlobal.history.push(basePathS + '/login');\n            return;\n        }\n\n        console.log('login complete, user: ' + JSON.stringify(api.userData));\n\n        // const targetUrl = store.urlBeforeLogin;\n        // store.urlBeforeLogin = null;\n        // if(targetUrl){\n        //     navigate(targetUrl);\n        // } else{\n        //     navigate('/');\n        // }\n        window.location.assign(basePathS || '/');\n    }\n\n    render() {\n        return <div style={{ height: '100vh', display: 'flex', placeContent: 'center', background: '#f3f3f3' }}>\n            <div style={{ display: 'flex', placeContent: 'center', placeItems: 'center', flexFlow: 'column' }}>\n                <span style={{ fontSize: '1.5em', color: 'rgba(0,0,0,0.75)' }}>Completing login...</span><br />\n                <Spin />\n            </div>\n        </div>\n    }\n}\n\nexport default LoginCompletePage;","import React, { Component, ReactNode } from 'react';\nimport { observer } from \"mobx-react\";\nimport { Layout, Menu, PageHeader, Button, Tooltip, Popover, Dropdown } from 'antd';\nimport { uiSettings } from '../state/ui';\nimport { CreateRouteMenuItems, RouteView, RouteMenu, } from './routes';\nimport { RenderTrap, DebugDisplay, UpdatePopup } from './misc/common';\nimport { DebugTimerStore, prettyMilliseconds } from '../utils/utils';\nimport { toJson } from \"../utils/jsonUtils\";\nimport { api, REST_CACHE_DURATION_SEC } from '../state/backendApi';\nimport { NavLink, Switch, Route } from 'react-router-dom';\nimport { Route as AntBreadcrumbRoute } from 'antd/lib/breadcrumb/Breadcrumb';\nimport { MotionDiv } from '../utils/animationProps';\nimport { ErrorDisplay } from './misc/ErrorDisplay';\nimport { uiState } from '../state/uiState';\nimport { appGlobal } from '../state/appGlobal';\n\nimport logo2 from '../assets/logo2.png';\nimport { ErrorBoundary } from './misc/ErrorBoundary';\nimport { IsDev, AppName, IsBusiness, basePathS } from '../utils/env';\nimport { UserProfile } from './misc/UserButton';\nimport fetchWithTimeout from '../utils/fetchWithTimeout';\nimport { UserData } from '../state/restInterfaces';\nimport Login from './misc/login';\nimport LoginCompletePage from './misc/login-complete';\nimport env, { getBuildDate } from '../utils/env';\nimport { MenuFoldOutlined, MenuUnfoldOutlined, ReloadOutlined, GithubFilled, UserOutlined, TwitterOutlined, LinkedinFilled } from '@ant-design/icons';\nimport { makeObservable, observable } from 'mobx';\nimport { LayoutBypass, RadioOptionGroup, toSafeString } from '../utils/tsxUtils';\nimport { UserPreferencesButton } from './misc/UserPreferences';\nimport { featureErrors } from '../state/supportedFeatures';\nimport { renderErrorModals } from './misc/ErrorModal';\nimport { SyncIcon, ChevronRightIcon } from '@primer/octicons-react';\n\nconst { Content, Footer, Sider } = Layout;\n\n\nconst siderCollapsedWidth = 80;\n\n\nconst DebugUserInfoBar = () => (\n    <div style={{ background: '#FFCD22', padding: '2rem', fontSize: '120%', fontWeight: 'bold', textAlign: 'center', display: 'flex', placeContent: 'center' }}>\n        This frontend has been compiled for usage with Kowl-Business, but the backend server is the free version of Kowl. <br />\n        You have been logged in as a locally created fake user to help debugging.\n    </div>\n);\n\nconst VersionInfo = () => {\n    // Local Development Mode\n    //   Kowl - DEV\n    if (IsDev) return <>\n        <div className='versionTitle'>{AppName} DEV</div>\n        <div className='versionDate'>Built {new Date().toLocaleDateString('en-US', { month: 'long', day: '2-digit', year: 'numeric' })}</div>\n        <div className='versionGitData'>{\"abcdef0\"}/{\"0fedcba\"}</div>\n    </>;\n\n    // Continuous Delivery Mode\n    //   Kowl Business - CI\n    //   b27c2a3f f3acf4b7\n    if (env.REACT_APP_BUILT_FROM_PUSH) return <>\n        <div className='versionTitle'>{AppName} CI</div>\n        <div>\n            <span>{env.REACT_APP_KOWL_GIT_REF != 'master' && env.REACT_APP_KOWL_GIT_REF + \"-\"}</span>\n            <span>{env.REACT_APP_KOWL_GIT_SHA.slice(0, 7)}</span>\n        </div>\n\n        <div className='versionDate'>\n            (built {getBuildDate()?.toLocaleDateString('en-US', { month: 'long', day: '2-digit', year: 'numeric' })})\n        </div>\n\n        {IsBusiness && <div className='versionGitData'>\n            <span>{env.REACT_APP_KOWL_BUSINESS_GIT_REF != 'master' &&\n                env.REACT_APP_KOWL_BUSINESS_GIT_REF + \"-\"}</span>\n            <span>{env.REACT_APP_KOWL_BUSINESS_GIT_SHA.slice(0, 7)}</span>\n        </div>}\n    </>;\n\n    // Release\n    //   Kowl Business v1.2.3\n    //   b27c2a3f f3acf4b7\n    return <>\n        <div className='versionTitle'>{AppName} - {IsBusiness ? env.REACT_APP_KOWL_BUSINESS_GIT_REF : env.REACT_APP_KOWL_GIT_REF}</div>\n        <div className='versionDate'>\n            (built {getBuildDate()?.toDateString()})\n        </div>\n        <div className='versionGitData'>{env.REACT_APP_KOWL_GIT_SHA.slice(0, 7)}</div>\n        {IsBusiness && <div className='versionGitData'>{env.REACT_APP_KOWL_BUSINESS_GIT_SHA.slice(0, 7)}</div>}\n    </>;\n\n};\nconst SideBar = observer(() =>\n    <Layout style={{\n        display: 'flex', flex: 1, flexDirection: 'column',\n        height: '100vh',\n        background: 'hsl(217deg, 27%, 20%)'\n    }}>\n        <RenderTrap name='SideBarContent' />\n\n        {/* Logo */}\n        <div style={{ background: 'rgba(0,0,0, 0)', padding: '1px' }}>\n\n            <div style={{ position: 'relative' }}>\n\n                {/* Logo Image */}\n                <img src={logo2} alt=\"logo\" style={{\n                    height: uiSettings.sideBarOpen ? '130px' : '65px',\n                    transition: 'all 200ms',\n                    width: 'auto', display: 'block', margin: 'auto', cursor: 'pointer',\n                    opacity: 0.8, mixBlendMode: 'overlay',\n                    marginTop: uiSettings.sideBarOpen ? '3em' : '.5em'\n                }}\n                    onClick={() => { appGlobal.history.push('/'); }}\n                />\n\n                {/* Title Text */}\n                <div style={{\n                    position: 'absolute',\n                    transition: 'all 200ms',\n                    width: '100%',\n                    top: uiSettings.sideBarOpen ? '-40px' : '-80px',\n                    opacity: uiSettings.sideBarOpen ? 1 : 0,\n\n                    fontFamily: \"'Quicksand', sans-serif\",\n                    fontWeight: 700,\n                    textTransform: 'uppercase',\n                    letterSpacing: '6px',\n                    transform: 'translateX(4px)',\n                    fontSize: '1.8rem',\n                    textAlign: 'center',\n                    color: 'hsl(217deg, 26%, 38%)',\n                }}>\n                    Kowl\n                </div>\n\n                {/* Separator Line */}\n                <div style={{ position: 'relative', borderTop: '0px solid hsla(0deg, 0%, 100%, 0.13)', margin: '.5em 1em', marginTop: '1em' }} />\n            </div>\n        </div>\n\n        {/* Menu */}\n        <Content className=\"scroll-on-hover-y\">\n            <RouteMenu />\n        </Content>\n\n        {/* Profile */}\n        <UserProfile />\n\n        {/* Toggle */}\n        <Footer className='sideBarToggle' onClick={() => { uiSettings.sideBarOpen = !uiSettings.sideBarOpen; }}>\n            {uiSettings.sideBarOpen\n                ? <MenuFoldOutlined className='icon' />\n                : <MenuUnfoldOutlined className='icon' />}\n        </Footer>\n    </Layout>\n);\n\nconst sideBarWidthDefault = '230px';\nconst AppSide = observer(() => (\n    <Sider collapsible collapsed={!uiSettings.sideBarOpen} collapsedWidth={siderCollapsedWidth}\n        trigger={null}\n        width={sideBarWidthDefault}\n        style={{ background: 'white', cursor: 'default' }}\n    >\n        <SideBar />\n    </Sider>\n));\n\n\nlet lastRequestCount = 0;\nconst DataRefreshButton = observer(() => {\n\n    const spinnerSize = '16px';\n    const refreshTextFunc = (): ReactNode => {\n        return <div style={{ maxWidth: '350px' }}>\n            Click to force a refresh of the data shown in the current page.\n            When switching pages, any data older than <span className='codeBox'>{prettyMilliseconds(REST_CACHE_DURATION_SEC * 1000)}</span> will be refreshed automatically.\n        </div>;\n        // TODO: small table that shows what cached data we have and how old it is\n    };\n\n    // Track how many requests we've sent in total\n    if (api.activeRequests.length == 0) lastRequestCount = 0;\n    else lastRequestCount = Math.max(lastRequestCount, api.activeRequests.length);\n\n    const countStr = lastRequestCount > 1\n        ? `${lastRequestCount - api.activeRequests.length} / ${lastRequestCount}`\n        : \"\";\n\n    // maybe we need to use the same 'no vertical expansion' trick:\n    return <div style={{\n        height: '32px',\n        display: 'inline-flex',\n        marginLeft: '10px',\n\n        background: 'hsl(216, 66%, 92%)',\n        color: 'hsl(205, 100%, 50%)',\n\n        borderRadius: '30px',\n        placeContent: 'center',\n        placeItems: 'center',\n        whiteSpace: 'nowrap',\n    }}>\n        {\n            api.activeRequests.length == 0\n                ?\n                <>\n                    <Popover title='Force Refresh' content={refreshTextFunc} placement='rightTop' overlayClassName='popoverSmall' >\n                        <Button icon={< SyncIcon size={16} />} shape='circle' className='hoverButton' style={{ color: 'hsl(205, 100%, 50%)', background: 'transparent' }} onClick={() => appGlobal.onRefresh()} />\n                    </Popover>\n                    {/* <span style={{ paddingLeft: '.2em', fontSize: '80%' }}>fetched <b>1 min</b> ago</span> */}\n                </>\n                :\n                <>\n                    <span className='spinner' style={{ marginLeft: '8px', width: spinnerSize, height: spinnerSize }} />\n                    <span className='pulsating' style={{ padding: '0 10px', fontSize: '80%', userSelect: 'none' }}>Fetching data... {countStr}</span>\n                </>\n        }\n    </div>;\n});\n\nconst AppPageHeader = observer(() => {\n\n    const breadcrumbs = uiState.pageBreadcrumbs.map(v => ({ path: v.linkTo, breadcrumbName: v.title }));\n\n    const selectedClusterName = uiState.selectedClusterName;\n    if (selectedClusterName) {\n        //const rootBreadcrumb: AntBreadcrumbRoute = { path: '', breadcrumbName: selectedClusterName };\n        const rootBreadcrumb: AntBreadcrumbRoute = { path: '', breadcrumbName: 'Cluster' };\n        breadcrumbs.unshift(rootBreadcrumb);\n    }\n\n    const breadcrumbRender = (r: AntBreadcrumbRoute, params: any) => (r.breadcrumbName === params.breadcrumbName && r.path === params.path)\n        ? <span>\n            <div className='breadcrumbLast'>{r.breadcrumbName}</div>\n            <LayoutBypass justifyContent='start'>\n                <DataRefreshButton />\n            </LayoutBypass>\n        </span>\n        : <NavLink to={r.path}>{r.breadcrumbName}</NavLink>;\n\n    return <MotionDiv identityKey={uiState.pageTitle} className='pageTitle' style={{ display: 'flex', paddingRight: '16px', alignItems: 'center', marginBottom: '10px' }}>\n        <PageHeader\n            breadcrumb={{\n                routes: breadcrumbs,\n                separator: <LayoutBypass width='10px'><ChevronRightIcon size={14} verticalAlign='unset' /></LayoutBypass>,\n                params: breadcrumbs.last(),\n                itemRender: breadcrumbRender\n            }}\n            title={null}\n        />\n\n        <div style={{ marginLeft: 'auto', display: 'flex', alignItems: 'center', gap: '12px' }}>\n            <UserPreferencesButton />\n        </div>\n    </MotionDiv>;\n});\n\nconst AppFooter = () => {\n    const discordIcon = <svg viewBox=\"0 0 245 240\" height=\"1em\" fill=\"currentColor\"><path d=\"M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z\" /><path d=\"M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z\" /></svg>;\n\n    return <Footer className=\"footer\">\n        {/* Social Media Links */}\n        <div className=\"links\">\n            <a href=\"https://github.com/cloudhut/kowl\" title=\"Visit Kowl's GitHub repository\" target='_blank' rel='noopener'>\n                <GithubFilled />\n            </a>\n            <a href=\"https://discord.gg/KQj7P6v\" target='_blank' rel='noopener'>\n                <span role='img' className='anticon' style={{ fontSize: '120%' }}>\n                    {discordIcon}\n                </span>\n            </a>\n            <a href=\"https://twitter.com/cloudhut_kowl\" target='_blank' rel='noopener'>\n                <TwitterOutlined />\n            </a>\n            <a href=\"https://www.linkedin.com/company/kowl\" target='_blank' rel='noopener'>\n                <LinkedinFilled />\n            </a>\n        </div>\n\n        {/* Version Info */}\n        <div className='versionText'>\n            <VersionInfo />\n        </div>\n    </Footer>;\n};\n\nconst AppContent = observer(() =>\n    <Layout className='overflowYOverlay' style={{ borderLeft: '1px solid #ddd' }} id=\"mainLayout\">\n\n        <RenderTrap name='AppContentLayout' />\n\n        {/* Debug User */}\n        {uiState.isUsingDebugUserLogin && <DebugUserInfoBar />}\n\n        {/* Page */}\n        <Content style={{ display: 'flex', flexDirection: 'column', padding: '8px 6px 0px 4px', zIndex: 1 }}>\n            <AppPageHeader />\n\n            <ErrorDisplay>\n                <RouteView />\n            </ErrorDisplay>\n\n            <AppFooter />\n        </Content>\n\n        <UpdatePopup />\n        {renderErrorModals()}\n\n    </Layout>\n);\n\n@observer\nexport default class App extends Component {\n    render(): JSX.Element {\n        const r = this.loginHandling(); // Complete login, or fetch user if needed\n        if (r) return r;\n\n        return (\n            <ErrorBoundary>\n                {/* {IsDev && <DebugDisplay />} */}\n                <Switch>\n                    {/* Login (and callbacks) */}\n                    <Route exact path='/login' component={Login} />\n                    <Route path='/login/callbacks/:provider' render={p => <LoginCompletePage provider={p.match.params.provider} match={p.match} />}></Route>\n\n                    {/* Default View */}\n                    <Route path=\"*\">\n                        <Layout style={{ height: '100vh', background: 'transparent', overflow: 'hidden' }}>\n                            <AppSide />\n                            <AppContent />\n                        </Layout>\n                    </Route>\n                </Switch>\n                <FeatureErrorCheck />\n            </ErrorBoundary>\n        );\n    }\n\n    loginHandling(): JSX.Element | null {\n        if (!IsBusiness)\n            return null; // free version has no login handling\n\n        const preLogin = <div style={{ background: 'rgb(233, 233, 233)', height: '100vh' }} />;\n        const path = window.location.pathname.removePrefix(basePathS ?? '');\n        const devPrint = function (str: string) { if (IsDev) console.log(`loginHandling (${path}): ` + str); };\n\n        if (path.startsWith('/login'))\n            return null; // already in login process, don't interrupt!\n\n        if (api.userData === null && !path.startsWith('/login')) {\n            devPrint('known not logged in, hard redirect');\n            window.location.pathname = basePathS + '/login'; // definitely not logged in, and in wrong url: hard redirect!\n            return preLogin;\n        }\n\n        if (api.userData === undefined) {\n            devPrint('user is undefined (probably a fresh page load)');\n\n            fetchWithTimeout('./api/users/me', 10 * 1000).then(async r => {\n                if (r.ok) {\n                    devPrint('user fetched');\n                    api.userData = await r.json() as UserData;\n                } else if (r.status == 401) { // unauthorized / not logged in\n                    devPrint('not logged in');\n                    api.userData = null;\n                } else if (r.status == 404) { // not found: server must be non-business version\n                    devPrint('frontend is configured as business-version, but backend is non-business-version -> will create a local fake user for debugging');\n                    uiState.isUsingDebugUserLogin = true;\n                    api.userData = {\n                        canManageKowl: false,\n                        canListAcls: true,\n                        canListQuotas: true,\n                        canPatchConfigs: true,\n                        canReassignPartitions: true,\n                        seat: null as any,\n                        user: { providerID: -1, providerName: 'debug provider', id: 'debug', internalIdentifier: 'debug', meta: { avatarUrl: '', email: '', name: 'local fake user for debugging' } }\n                    };\n                }\n            });\n\n            return preLogin;\n        } else {\n            if (!uiState.isUsingDebugUserLogin)\n                devPrint('user is set: ' + JSON.stringify(api.userData));\n            return null;\n        }\n    }\n}\n\n\n@observer\nclass FeatureErrorCheck extends Component {\n\n    render() {\n        if (featureErrors.length > 0) {\n            const allErrors = featureErrors.join(\" \");\n            throw new Error(allErrors);\n        }\n        return null;\n    }\n}","import React, { Component } from \"react\";\nimport { observer } from \"mobx-react\";\n\n\n@observer\nexport class IndeterminateCheckbox extends Component<{ originalCheckbox: React.ReactNode; getCheckState: () => { checked: boolean; indeterminate: boolean; }; }> {\n\n    render() {\n        const state = this.props.getCheckState();\n\n        // console.log(`checkbox${index} props: ${(originNode as any).props?.indeterminate}`)\n        const clone = React.cloneElement(this.props.originalCheckbox as any, {\n            checked: state.checked,\n            indeterminate: state.indeterminate,\n        });\n        return clone;\n    }\n}\n","import React, { Component, useRef } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { ConfigProvider, Empty, Input, Popover, Table, Tooltip } from \"antd\";\nimport { makePaginationConfig, renderLogDirSummary, sortField, WarningToolip } from \"../../misc/common\";\nimport { Partition, PartitionReassignmentsPartition, Topic } from \"../../../state/restInterfaces\";\nimport { BrokerList } from \"./components/BrokerList\";\nimport { IndeterminateCheckbox } from \"./components/IndeterminateCheckbox\";\nimport { SelectionInfoBar } from \"./components/StatisticsBars\";\nimport { DebugTimerStore, prettyBytesOrNA } from \"../../../utils/utils\";\nimport { ColumnProps } from \"antd/lib/table/Column\";\nimport { DefaultSkeleton, findPopupContainer, LayoutBypass, OptionGroup, InfoText } from \"../../../utils/tsxUtils\";\nimport { api } from \"../../../state/backendApi\";\nimport { computed, IReactionDisposer, makeObservable, observable, transaction } from \"mobx\";\nimport { PartitionSelection } from \"./ReassignPartitions\";\nimport Highlighter from 'react-highlight-words';\nimport { uiSettings } from \"../../../state/ui\";\nimport { ColumnFilterItem, ColumnsType, ExpandableConfig, FilterDropdownProps, TableRowSelection } from \"antd/lib/table/interface\";\nimport { SearchOutlined, WarningTwoTone } from \"@ant-design/icons\";\nimport { SearchTitle } from \"../../misc/KowlTable\";\n\nexport type TopicWithPartitions = Topic & { partitions: Partition[], activeReassignments: PartitionReassignmentsPartition[] };\n\n@observer\nexport class StepSelectPartitions extends Component<{ partitionSelection: PartitionSelection, throttledTopics: string[] }> {\n    pageConfig = makePaginationConfig(uiSettings.reassignment.pageSizeSelect ?? 10);\n    autorunHandle: IReactionDisposer | undefined = undefined;\n    @observable filterOpen = false; // topic name searchbar\n\n    @observable selectedBrokerFilters: (string | number)[] | null = null;\n    expandableConfig: ExpandableConfig<TopicWithPartitions>;\n\n    constructor(props: any) {\n        super(props);\n        this.setSelection = this.setSelection.bind(this);\n        this.setTopicSelection = this.setTopicSelection.bind(this);\n        this.isSelected = this.isSelected.bind(this);\n        this.getSelectedPartitions = this.getSelectedPartitions.bind(this);\n        this.getTopicCheckState = this.getTopicCheckState.bind(this);\n        this.getRowKey = this.getRowKey.bind(this);\n\n        this.expandableConfig = {\n            // expandedRowKeys: this.expandedTopics.slice(),\n            // onExpandedRowsChange: keys => {\n            //     // console.log('replacing expanded row keys', { current: this.expandedTopics, new: keys })\n            //     this.expandedTopics = keys as string[];\n            // },\n            // expandIconColumnIndex: 1,\n            expandedRowRender: topic => topic.partitions\n                ? <SelectPartitionTable\n                    topic={topic}\n                    topicPartitions={topic.partitions}\n                    isSelected={this.isSelected}\n                    setSelection={this.setSelection}\n                    getSelectedPartitions={() => this.getSelectedPartitions(topic.topicName)}\n                />\n                : <>Error loading partitions</>,\n        };\n\n        makeObservable(this);\n    }\n\n    componentWillUnmount() {\n        if (this.autorunHandle) {\n            this.autorunHandle();\n            this.autorunHandle = undefined;\n        }\n    }\n\n    render() {\n        if (!api.topics) return DefaultSkeleton;\n\n        const query = uiSettings.reassignment.quickSearch ?? \"\";\n        const filterActive = query.length > 1;\n\n        let searchRegex: RegExp | undefined = undefined;\n        if (filterActive) try { searchRegex = new RegExp(uiSettings.reassignment.quickSearch, 'i') } catch { return null; }\n\n        const rackToBrokers = this.rackToBrokers;\n\n        const columns: ColumnProps<TopicWithPartitions>[] = [\n            {\n                title: <SearchTitle title='Topic' observableFilterOpen={this} observableSettings={uiSettings.reassignment} />,\n                dataIndex: 'topicName',\n                render: (v, record) => {\n                    const content = filterActive\n                        ? <Highlighter searchWords={[query]} textToHighlight={record.topicName} />\n                        : record.topicName;\n\n                    if (this.props.throttledTopics.includes(record.topicName))\n                        return <div>\n                            <span>{content}</span>\n                            <WarningToolip content=\"Topic replication is throttled\" position=\"top\" />\n                        </div>\n\n                    return content;\n                },\n\n                sorter: sortField('topicName'), defaultSortOrder: 'ascend',\n\n                // to support both filters at the same time (topic and brokers), both filters *must* be in controlled mode\n                filteredValue: filterActive ? [query] : undefined,\n                onFilter: (value, record) => searchRegex?.test(record.topicName) ?? false,\n\n                filterIcon: filterIcon(filterActive),\n                filterDropdown: <></>,\n                filterDropdownVisible: this.filterOpen,\n                onFilterDropdownVisibleChange: visible => {\n                    // only accept requests to open the filter\n                    if (visible) this.filterOpen = visible;\n                },\n            },\n            {\n                title: 'Partitions', width: 140,\n                render: (_, t) => {\n                    const errors = t.partitions.count(p => p.hasErrors);\n                    if (errors == 0) return t.partitionCount;\n\n                    return <span>\n                        <span>{t.partitionCount - errors} / {t.partitionCount}</span>\n                        {' '}\n                        {renderPartitionErrorsForTopic(errors)}\n                    </span>\n                },\n                sorter: sortField('partitionCount')\n            },\n            {\n                title: 'Replication Factor', width: 160, render: (t, r) => {\n                    if (r.activeReassignments.length == 0) return r.replicationFactor;\n                    return <InfoText tooltip=\"While reassignment is active, replication factor is temporarily doubled.\" maxWidth=\"180px\">\n                        {r.replicationFactor}\n                    </InfoText>\n                },\n                sorter: sortField('replicationFactor')\n            },\n            {\n                title: 'Brokers', width: 160, dataIndex: 'partitions',\n                render: (value, record) => record.partitions?.map(p => p.leader).distinct().length ?? 'N/A',\n\n                // to support both filters at the same time (topic and brokers), both filters *must* be in controlled mode\n                filteredValue: this.selectedBrokerFilters,\n                filters: this.brokerFilters,\n                onFilter: (v, r) => {\n                    if (typeof v === 'number') {\n                        // Broker ID\n                        return r.partitions.any(p => p.replicas.includes(v));\n                    }\n                    if (typeof v === 'string') {\n                        // Rack\n                        const brokers = rackToBrokers.get(v);\n                        if (!brokers) return false;\n                        return r.partitions.any(p => p.replicas.intersection(brokers).length > 0);\n                    }\n                    return false;\n                },\n                filterMultiple: true,\n            },\n            {\n                title: 'Size', width: 110,\n                render: (v, r) => renderLogDirSummary(r.logDirSummary),\n                sorter: (a, b) => a.logDirSummary.totalSizeBytes - b.logDirSummary.totalSizeBytes\n            },\n        ];\n\n\n        return <>\n            <div style={{ margin: '1em 1em 2em 1em' }}>\n\n                {/* Current Selection */}\n                <SelectionInfoBar partitionSelection={this.props.partitionSelection} margin=\"2em 0em 1em 0.3em\" />\n\n                {/* Topic / Partitions */}\n                <ConfigProvider getPopupContainer={t => {\n                    let c = t as HTMLElement | null | undefined;\n                    while (c && c.tagName != 'TH' && c.tagName != 'TD')\n                        c = c.parentElement;\n                    return c ?? t;\n                }}>\n\n                    <Table\n                        style={{ margin: '0', }} size={'middle'}\n                        pagination={this.pageConfig}\n                        onChange={(p, filters, sorters) => {\n                            if (p.pageSize) uiSettings.reassignment.pageSizeSelect = p.pageSize;\n                            this.pageConfig.current = p.current;\n                            this.pageConfig.pageSize = p.pageSize;\n\n                            const brokerFilters = filters['partitions']?.filterNull() ?? null;\n                            brokerFilters?.removeAll(x => typeof x === 'boolean');\n\n                            this.selectedBrokerFilters = brokerFilters as ((string | number)[] | null);\n                        }}\n\n                        dataSource={this.topicPartitions}\n                        columns={columns}\n                        showSorterTooltip={false}\n\n                        rowKey={this.getRowKey}\n                        rowClassName={'pureDisplayRow'}\n                        onRow={r => ({\n                            onClick: () => this.setTopicSelection(r, !this.getTopicCheckState(r.topicName).checked),\n                            // onDoubleClick: () => this.expandedTopics.includes(record.topicName)\n                            //     ? this.expandedTopics.remove(record.topicName)\n                            //     : this.expandedTopics.push(record.topicName),\n                        })}\n\n                        rowSelection={{\n                            type: 'checkbox',\n                            columnTitle: <div style={{ display: 'flex' }} >\n                                <InfoText tooltip={<>\n                                    If you want to select multiple adjacent items, you can use the SHIFT key.<br />\n                                    Shift-Click selects the first item, last item and all items in between.\n                                </>} iconSize='16px' placement='right' />\n                            </div>,\n                            renderCell: (value: boolean, record, index, originNode: React.ReactNode) => {\n                                return <IndeterminateCheckbox\n                                    originalCheckbox={originNode}\n                                    getCheckState={() => this.getTopicCheckState(record.topicName)}\n                                />\n                            },\n                            onSelect: (record, selected: boolean, selectedRows) => {\n                                if (!record.partitions) return;\n                                this.setTopicSelection(record, selected);\n                            },\n                            onSelectMultiple: (selected, selectedRows, changeRows) => {\n                                transaction(() => {\n                                    for (const r of changeRows)\n                                        for (const p of r.partitions)\n                                            this.setSelection(r.topicName, p.id, selected && !p.hasErrors);\n                                });\n                            },\n                        }}\n\n                        expandable={this.expandableConfig}\n                    />\n                </ConfigProvider>\n            </div>\n        </>\n    }\n\n    getRowKey(r: TopicWithPartitions) {\n        return r.topicName;\n    }\n\n\n    setTopicSelection(topic: TopicWithPartitions, isSelected: boolean) {\n        transaction(() => {\n            for (const p of topic.partitions) {\n                const selected = isSelected && !p.hasErrors;\n                this.setSelection(topic.topicName, p.id, selected);\n            }\n        });\n    }\n\n    setSelection(topic: string, partition: number, isSelected: boolean) {\n        const partitions = this.props.partitionSelection[topic] ?? [];\n\n        if (isSelected) {\n            partitions.pushDistinct(partition);\n        } else {\n            partitions.remove(partition);\n        }\n\n        if (partitions.length == 0)\n            delete this.props.partitionSelection[topic];\n        else\n            this.props.partitionSelection[topic] = partitions;\n    }\n\n    getSelectedPartitions(topic: string) {\n        const partitions = this.props.partitionSelection[topic];\n        if (!partitions) return [];\n        return partitions;\n    }\n\n    isSelected(topic: string, partition: number) {\n        const partitions = this.props.partitionSelection[topic];\n        if (!partitions) return false;\n        return partitions.includes(partition);\n    }\n\n    getTopicCheckState(topicName: string): { checked: boolean, indeterminate: boolean } {\n        const tp = this.topicPartitions.first(t => t.topicName == topicName);\n        if (!tp) return { checked: false, indeterminate: false };\n\n        const selected = this.props.partitionSelection[topicName];\n        if (!selected) return { checked: false, indeterminate: false };\n\n        if (selected.length == 0)\n            return { checked: false, indeterminate: false };\n\n        const validPartitions = tp.partitions.count(x => !x.hasErrors);\n        if (validPartitions > 0 && selected.length == validPartitions)\n            return { checked: true, indeterminate: false };\n\n        return { checked: false, indeterminate: true };\n    }\n\n    @computed get topicPartitions(): TopicWithPartitions[] {\n        if (api.topics == null) return [];\n        return api.topics.map(topic => {\n            return {\n                ...topic,\n                partitions: api.topicPartitions.get(topic.topicName)!,\n                activeReassignments: this.inProgress.get(topic.topicName) ?? [],\n            }\n        }).filter(t => t.activeReassignments.length == 0);\n    }\n\n    @computed get inProgress() {\n        const current = api.partitionReassignments ?? [];\n        return current.toMap(x => x.topicName, x => x.partitions);\n    }\n\n    @computed get allBrokers() {\n        const brokerIdsOfTopicPartitions = this.topicPartitions.flatMap(t => t.partitions).flatMap(p => p.replicas).distinct();\n        const allBrokers = api.clusterInfo?.brokers;\n        if (!allBrokers || brokerIdsOfTopicPartitions.length == 0) return [];\n\n        return allBrokers.filter(b => brokerIdsOfTopicPartitions.includes(b.brokerId));\n    }\n\n    @computed get rackToBrokers(): Map<string, number[]> {\n        const brokers = this.allBrokers;\n        const racks = brokers.map(b => b.rack).filterFalsy().distinct();\n\n        // rack name => brokerIds\n        return racks.toMap(\n            r => r,\n            r => brokers.filter(b => b.rack === r).map(b => b.brokerId).distinct())\n    }\n\n    @computed get brokerFilters(): ColumnFilterItem[] | undefined {\n        const brokers = this.allBrokers;\n        const racks = brokers.map(b => b.rack).filterFalsy().distinct();\n\n        const brokerFilters: ColumnFilterItem[] = [];\n\n        // Individual Brokers\n        const brokerItems = brokers.map(b => ({ text: b.address, value: b.brokerId }));\n        if (brokerItems.length > 0)\n            brokerFilters.push({\n                text: \"Brokers\", value: \"Brokers\",\n                children: brokerItems,\n            });\n\n        // Racks\n        if (racks.length > 0)\n            brokerFilters.push({\n                text: \"Racks\", value: \"Racks\",\n                children: racks.map(r => ({ text: r, value: r })),\n            });\n\n        return brokerFilters;\n    }\n}\n\n@observer\nexport class SelectPartitionTable extends Component<{\n    topic: Topic;\n    topicPartitions: Partition[];\n    setSelection: (topic: string, partition: number, isSelected: boolean) => void;\n    isSelected: (topic: string, partition: number) => boolean;\n    getSelectedPartitions: () => number[];\n}> {\n    partitionsPageConfig = makePaginationConfig(100, true);\n    scroll = { y: '300px' };\n    rowClassName = (p: Partition) => p.hasErrors ? 'errorPartition' : '';\n\n    columns: ColumnsType<Partition> = [\n        { width: 100, title: 'Partition', dataIndex: 'id', sortOrder: 'ascend', sorter: (a, b) => a.id - b.id },\n        {\n            width: undefined, title: 'Brokers', render: (_, p) =>\n                Boolean(p.replicas)\n                    ? <BrokerList brokerIds={p.replicas} leaderId={p.leader} />\n                    : renderPartitionError(p)\n        },\n        {\n            width: 100, title: 'Size', render: (v, p) => prettyBytesOrNA(p.replicaSize),\n            sortOrder: 'ascend', sorter: (a, b) => a.replicaSize - b.replicaSize\n        },\n    ];\n\n    render() {\n        return <div style={{ paddingTop: '4px', paddingBottom: '8px', width: 0, minWidth: '100%' }}>\n            <Table size='small' className='nestedTable'\n                dataSource={this.props.topicPartitions}\n                pagination={this.partitionsPageConfig}\n                scroll={this.scroll}\n                rowClassName={this.rowClassName}\n                rowKey={this.getRowKey}\n                rowSelection={this.rowSelection}\n                columns={this.columns} />\n        </div>;\n    }\n\n    getRowKey(p: Partition) {\n        return p.id;\n    }\n\n    @computed get rowSelection(): TableRowSelection<Partition> {\n        return {\n            type: 'checkbox',\n            columnWidth: '43px',\n            columnTitle: <></>,\n            selectedRowKeys: this.props.getSelectedPartitions().slice(),\n            getCheckboxProps: this.getCheckboxProps,\n            onSelect: (p, selected) => this.props.setSelection(this.props.topic.topicName, p.id, selected && !p.hasErrors),\n        }\n    }\n\n    getCheckboxProps(p: Partition) {\n        return { disabled: p.hasErrors };\n    }\n}\n\nfunction filterIcon(filterActive: boolean) {\n    return <div style={{\n        background: filterActive ? 'hsl(208deg, 100%, 93%)' : undefined,\n        position: 'absolute',\n        left: 0, top: 0, right: 0, bottom: 0\n    }}>\n        <SearchOutlined style={{ color: filterActive ? '#1890ff' : 'hsl(0deg, 0%, 67%)', fontSize: '14px' }} />\n    </div>\n}\n\nfunction renderPartitionError(partition: Partition) {\n    const txt = [partition.partitionError, partition.waterMarksError].join('\\n\\n');\n\n    return <Popover\n        title='Partition Error'\n        placement='rightTop' overlayClassName='popoverSmall'\n        getPopupContainer={findPopupContainer}\n        content={<div style={{ maxWidth: '500px', whiteSpace: 'pre-wrap' }}>\n            {txt}\n        </div>\n        }\n    >\n        <span>\n            <LayoutBypass justifyContent='center' alignItems='center' width='20px' height='18px'>\n                <span style={{ fontSize: '19px' }}>\n                    <WarningTwoTone twoToneColor='orange' />\n                </span>\n            </LayoutBypass>\n        </span>\n    </Popover>\n}\n\nfunction renderPartitionErrorsForTopic(partitionsWithErrors: number) {\n    return <Popover\n        title='Partition Error'\n        placement='rightTop' overlayClassName='popoverSmall'\n        getPopupContainer={findPopupContainer}\n        content={<div style={{ maxWidth: '500px', whiteSpace: 'pre-wrap' }}>\n            Some partitions could not be retreived.<br />\n            Expand the topic to see which partitions are affected.\n        </div>\n        }\n    >\n        <span>\n            <LayoutBypass justifyContent='center' alignItems='center' width='20px' height='18px'>\n                <span style={{ fontSize: '19px' }}>\n                    <WarningTwoTone twoToneColor='orange' />\n                </span>\n            </LayoutBypass>\n        </span>\n    </Popover>\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter,\n    withRouter,\n    RouteComponentProps\n} from \"react-router-dom\";\nimport { configure, when } from \"mobx\";\n\nimport \"antd/dist/antd.css\";\nimport \"./index.scss\";\n\nimport App from \"./components/App\";\nimport { appGlobal } from \"./state/appGlobal\";\nimport { basePathS, IsBusiness } from \"./utils/env\";\nimport { api } from \"./state/backendApi\";\n\nimport './assets/fonts/open-sans.css';\nimport './assets/fonts/poppins.css';\nimport './assets/fonts/quicksand.css';\n\nconst HistorySetter = withRouter((p: RouteComponentProps) => {\n    appGlobal.history = p.history;\n    return <></>;\n});\n\n// Configure MobX\nconfigure({\n    enforceActions: 'never',\n    safeDescriptors: true,\n});\n\n// Get supported endpoints / kafka cluster version\n// In the business version, that endpoint (like any other api endpoint) is\n// protected, so we need to delay the call until the user is logged in.\nif (!IsBusiness) {\n    api.refreshSupportedEndpoints(true);\n} else {\n    when(() => Boolean(api.userData), () => {\n        setImmediate(() => {\n            api.refreshSupportedEndpoints(true);\n        });\n    });\n}\n\nReactDOM.render(\n    <BrowserRouter basename={basePathS}>\n        <HistorySetter />\n        <App />\n    </BrowserRouter>,\n    document.getElementById(\"root\")\n);\n","import React from \"react\";\nimport { ParsedQuery } from \"query-string\";\nimport { uiState } from \"../../state/uiState\";\n\n\n//\n// Page Types\n//\nexport type PageProps<TRouteParams = Record<string, unknown>> = TRouteParams & { matchedPath: string; query: ParsedQuery; }\n\nexport class PageInitHelper {\n    set title(title: string) { uiState.pageTitle = title; }\n    addBreadcrumb(title: string, to: string) { uiState.pageBreadcrumbs.push({ title: title, linkTo: to }) }\n}\nexport abstract class PageComponent<TRouteParams = Record<string, unknown>> extends React.Component<PageProps<TRouteParams>> {\n\n    constructor(props: Readonly<PageProps<TRouteParams>>) {\n        super(props);\n\n        uiState.pageBreadcrumbs = [];\n\n        this.initPage(new PageInitHelper());\n    }\n\n    abstract initPage(p: PageInitHelper): void;\n}\nexport type PageComponentType<TRouteParams = Record<string, unknown>> = (new (props: PageProps<TRouteParams>) => PageComponent<PageProps<TRouteParams>>);\n\n\n","\n\nexport class LazyMap<K, V> extends Map<K, V> {\n    constructor(private defaultCreate: (key: K) => V) {\n        super();\n    }\n\n    /**\n     * @description Returns the value corrosponding to key\n     * @param key Key of the value\n     * @param create An optional `create` method to use instead of `defaultCreate` to create missing values\n     */\n    get(key: K, create?: (key: K) => V): V {\n        let v = super.get(key);\n        if (v !== undefined) {\n            return v;\n        }\n\n        v = this.handleMiss(key, create);\n        this.set(key, v);\n        return v;\n    }\n\n    private handleMiss(key: K, create?: ((key: K) => V)): V {\n        if (create) {\n            return create(key);\n        }\n        return this.defaultCreate(key);\n    }\n}\n","/*eslint block-scoped-var: \"error\"*/\n\nimport {\n    GetTopicsResponse, Topic, GetConsumerGroupsResponse, GroupDescription, UserData,\n    ClusterInfo, TopicMessage, TopicConfigResponse,\n    ClusterInfoResponse, GetPartitionsResponse, Partition, GetTopicConsumersResponse, TopicConsumer, AdminInfo, TopicPermissions,\n    TopicDocumentationResponse, AclRequest, AclResponse, SchemaOverview, SchemaOverviewResponse, SchemaDetailsResponse, SchemaDetails,\n    SchemaType, TopicDocumentation, TopicDescription, ApiError, PartitionReassignmentsResponse, PartitionReassignments,\n    PartitionReassignmentRequest, AlterPartitionReassignmentsResponse, Broker, GetAllPartitionsResponse,\n    AclRequestDefault, AclResourceType, PatchConfigsResponse, EndpointCompatibilityResponse, EndpointCompatibility, ConfigResourceType,\n    AlterConfigOperation, ResourceConfig, PartialTopicConfigsResponse, GetConsumerGroupResponse, EditConsumerGroupOffsetsRequest,\n    EditConsumerGroupOffsetsTopic, EditConsumerGroupOffsetsResponse, EditConsumerGroupOffsetsResponseTopic, DeleteConsumerGroupOffsetsTopic,\n    DeleteConsumerGroupOffsetsResponseTopic, DeleteConsumerGroupOffsetsRequest, DeleteConsumerGroupOffsetsResponse, TopicOffset,\n    KafkaConnectors, ConnectClusters,\n    GetTopicOffsetsByTimestampResponse, BrokerConfigResponse, ConfigEntry, PatchConfigsRequest, DeleteRecordsResponseData, ClusterAdditionalInfo, ClusterConnectors, ClusterConnectorInfo, WrappedError, isApiError, AlterPartitionReassignmentsPartitionResponse, ConnectorValidationResult, QuotaResponse\n} from \"./restInterfaces\";\nimport { comparer, computed, observable, runInAction, transaction } from \"mobx\";\nimport fetchWithTimeout from \"../utils/fetchWithTimeout\";\nimport { decodeBase64, TimeSince } from \"../utils/utils\";\nimport { LazyMap } from \"../utils/LazyMap\";\nimport { clone, toJson } from \"../utils/jsonUtils\";\nimport { IsDev, IsBusiness, basePathS } from \"../utils/env\";\nimport { appGlobal } from \"./appGlobal\";\nimport { ServerVersionInfo, uiState } from \"./uiState\";\nimport { notification } from \"antd\";\nimport { ObjToKv } from \"../utils/tsxUtils\";\nimport { Features } from \"./supportedFeatures\";\n\nconst REST_TIMEOUT_SEC = 25;\nexport const REST_CACHE_DURATION_SEC = 20;\nconst REST_DEBUG_BASE_URL = null// || \"http://localhost:9090\"; // only uncommented using \"npm run build && serve -s build\"\n\nexport async function rest<T>(url: string, timeoutSec: number = REST_TIMEOUT_SEC, requestInit?: RequestInit): Promise<T | null> {\n\n    if (REST_DEBUG_BASE_URL) {\n        url = REST_DEBUG_BASE_URL + url;\n        if (!requestInit) requestInit = {};\n        requestInit.mode = \"no-cors\";\n        requestInit.cache = \"no-cache\";\n    }\n\n    const res = await fetchWithTimeout(url, timeoutSec * 1000, requestInit);\n\n    if (res.status == 401) { // Unauthorized\n        await handle401(res);\n    }\n    if (res.status == 403) { // Forbidden\n        return null;\n    }\n\n    processVersionInfo(res);\n\n    return tryParseOrUnwrapError<T>(res);\n}\n\nasync function handle401(res: Response) {\n    // Logout\n    //   Clear our 'User' data if we have any\n    //   Any old/invalid JWT will be cleared by the server\n    api.userData = null;\n\n    try {\n        const text = await res.text();\n        const obj = JSON.parse(text);\n        console.log(\"unauthorized message: \" + text);\n\n        const err = obj as ApiError;\n        uiState.loginError = String(err.message);\n    } catch (err) {\n        uiState.loginError = String(err);\n    }\n\n    // Save current location url\n    // store.urlBeforeLogin = window.location.href;\n\n    // Redirect to login\n    appGlobal.history.push('/login');\n}\n\nfunction processVersionInfo(res: Response) {\n    try {\n        for (const [k, v] of res.headers) {\n            if (k.toLowerCase() == 'app-version') {\n                const serverVersion = JSON.parse(v) as ServerVersionInfo;\n                if (typeof serverVersion === 'object')\n                    if (uiState.serverVersion == null || (serverVersion.ts != uiState.serverVersion.ts))\n                        uiState.serverVersion = serverVersion;\n                break;\n            }\n        }\n    } catch { } // Catch malformed json (old versions where info is not sent as json yet)\n}\n\nconst cache = new LazyMap<string, CacheEntry>(u => new CacheEntry(u));\nclass CacheEntry {\n    url: string;\n\n    private timeSinceLastResult = new TimeSince(); // set automatically\n    /** How long ago (in seconds) the data was last updated */\n    get resultAge() { return this.timeSinceLastResult.value / 1000; }\n\n    private promise: Promise<any>;\n    get lastPromise() { return this.promise; }\n    setPromise<T>(promise: Promise<T>) {\n        this.timeSinceRequestStarted.reset();\n\n        this.isPending = true;\n        this.promise = promise;\n\n        promise.then(result => {\n            this.timeSinceLastResult.reset();\n            this.lastResult = result;\n        }).finally(() => {\n            this.lastRequestTime = this.timeSinceRequestStarted.value;\n            const index = api.activeRequests.indexOf(this);\n            if (index > -1) {\n                api.activeRequests.splice(index, 1);\n            }\n            this.isPending = false;\n        });\n\n        api.activeRequests.push(this);\n    }\n\n    lastResult: any | undefined; // set automatically\n    isPending: boolean; // set automatically\n\n    private timeSinceRequestStarted = new TimeSince(); // set automatically\n    private lastRequestTime: number; // set automatically\n    /** How long (in seconds) the last request took (or is currently taking so far) */\n    get requestTime() {\n        if (this.isPending) {\n            return this.timeSinceRequestStarted.value / 1000;\n        }\n        return this.lastRequestTime / 1000;\n    }\n\n    constructor(url: string) {\n        this.url = url;\n        const sec = 1000;\n        const min = 60 * sec;\n        const h = 60 * min;\n        this.timeSinceLastResult.reset(100 * h);\n    }\n}\n\nfunction cachedApiRequest<T>(url: string, force: boolean = false): Promise<T> {\n    const entry = cache.get(url);\n\n    if (entry.isPending) {\n        // return already running request\n        return entry.lastPromise;\n    }\n\n    if (entry.resultAge > REST_CACHE_DURATION_SEC || force) {\n        // expired or force refresh\n        const promise = rest<T>(url);\n        entry.setPromise(promise);\n    }\n\n    // Return last result (can be still pending, or completed but not yet expired)\n    return entry.lastPromise;\n}\n\n\nlet currentWS: WebSocket | null = null;\n\n//\n// BackendAPI\n//\nconst apiStore = {\n\n    // Data\n    endpointCompatibility: null as (EndpointCompatibility | null),\n\n    clusters: ['A', 'B', 'C'],\n    clusterInfo: null as (ClusterInfo | null),\n\n    brokerConfigs: new Map<number, ConfigEntry[] | string>(), // config entries, or error string\n\n    adminInfo: undefined as (AdminInfo | undefined | null),\n\n    schemaOverview: undefined as (SchemaOverview | null | undefined), // undefined = request not yet complete; null = server responded with 'there is no data'\n    schemaOverviewIsConfigured: undefined as boolean | undefined,\n    schemaDetails: null as (SchemaDetails | null),\n\n    topics: null as (Topic[] | null),\n    topicConfig: new Map<string, TopicDescription | null>(), // null = not allowed to view config of this topic\n    topicDocumentation: new Map<string, TopicDocumentation>(),\n    topicPermissions: new Map<string, TopicPermissions | null>(),\n    topicPartitions: new Map<string, Partition[] | null>(), // null = not allowed to view partitions of this config\n    topicPartitionErrors: new Map<string, Array<{ id: number, partitionError: string }>>(),\n    topicWatermarksErrors: new Map<string, Array<{ id: number, waterMarksError: string }>>(),\n    topicConsumers: new Map<string, TopicConsumer[]>(),\n    topicAcls: new Map<string, AclResponse | null>(),\n\n    ACLs: undefined as AclResponse | undefined | null,\n\n    Quotas: undefined as QuotaResponse | undefined | null,\n\n    consumerGroups: new Map<string, GroupDescription>(),\n    consumerGroupAcls: new Map<string, AclResponse | null>(),\n\n    partitionReassignments: undefined as (PartitionReassignments[] | null | undefined),\n\n    connectConnectors: undefined as (KafkaConnectors | undefined),\n    connectAdditionalClusterInfo: new Map<string, ClusterAdditionalInfo>(), // clusterName => additional info (plugins)\n\n    // undefined = we haven't checked yet\n    // null = call completed, and we're not logged in\n    userData: undefined as (UserData | null | undefined),\n    async logout() {\n        await fetch('./logout');\n        this.userData = null;\n    },\n\n    // Make currently running requests observable\n    activeRequests: [] as CacheEntry[],\n\n    // Fetch errors\n    errors: [] as any[],\n\n    messageSearchPhase: null as string | null,\n    messagesFor: '', // for what topic?\n    messages: [] as TopicMessage[],\n    messagesElapsedMs: null as null | number,\n    messagesBytesConsumed: 0,\n    messagesTotalConsumed: 0,\n\n\n    async startMessageSearch(searchRequest: MessageSearchRequest): Promise<void> {\n\n        const isHttps = window.location.protocol.startsWith('https');\n        const protocol = isHttps ? 'wss://' : 'ws://';\n        const host = IsDev ? 'localhost:9090' : window.location.host;\n        const url = protocol + host + basePathS + '/api/topics/' + searchRequest.topicName + '/messages';\n\n        console.debug(\"connecting to \\\"\" + url + \"\\\"\");\n\n        // Abort previous connection\n        if (currentWS != null)\n            if (currentWS.readyState == WebSocket.OPEN || currentWS.readyState == WebSocket.CONNECTING)\n                currentWS.close();\n\n        currentWS = new WebSocket(url);\n        const ws = currentWS;\n        this.messageSearchPhase = \"Connecting\";\n        this.messagesBytesConsumed = 0;\n        this.messagesTotalConsumed = 0;\n\n        currentWS.onopen = ev => {\n            if (ws !== currentWS) return; // newer request has taken over\n            // reset state for new request\n            this.messagesFor = searchRequest.topicName;\n            this.messages = [];\n            this.messagesElapsedMs = null;\n            // send new request\n            currentWS.send(JSON.stringify(searchRequest));\n        }\n        currentWS.onclose = ev => {\n            if (ws !== currentWS) return;\n            api.stopMessageSearch();\n            // double assignment makes sense: when the phase changes to null, some observing components will play a \"fade out\" animation, using the last (non-null) value\n            console.debug(`ws closed: code=${ev.code} wasClean=${ev.wasClean}` + (ev.reason ? ` reason=${ev.reason}` : ''))\n        }\n\n        const onMessageHandler = (msgEvent: MessageEvent) => {\n            if (ws !== currentWS) return;\n            const msg = JSON.parse(msgEvent.data)\n\n            switch (msg.type) {\n                case 'phase':\n                    this.messageSearchPhase = msg.phase;\n                    break;\n\n                case 'progressUpdate':\n                    this.messagesBytesConsumed = msg.bytesConsumed;\n                    this.messagesTotalConsumed = msg.messagesConsumed;\n                    break;\n\n                case 'done':\n                    this.messagesElapsedMs = msg.elapsedMs;\n                    this.messagesBytesConsumed = msg.bytesConsumed;\n                    // this.MessageSearchCancelled = msg.isCancelled;\n                    this.messageSearchPhase = \"Done\";\n                    this.messageSearchPhase = null;\n                    break;\n\n                case 'error':\n                    // error doesn't neccesarily mean the whole request is done\n                    console.info(\"ws backend error: \" + msg.message);\n                    const notificationKey = `errorNotification-${Date.now()}`;\n                    notification['error']({\n                        key: notificationKey,\n                        message: \"Backend Error\",\n                        description: msg.message,\n                        duration: 5,\n                    })\n                    break;\n\n                case 'message':\n                    const m = msg.message as TopicMessage;\n\n                    const keyData = m.key.payload;\n                    if (keyData != null && keyData != undefined && keyData != \"\" && m.key.encoding == 'binary') {\n                        try {\n                            m.key.payload = decodeBase64(m.key.payload); // unpack base64 encoded key\n                        } catch (error) {\n                            // Empty\n                            // Only unpack if the key is base64 based\n                        }\n                    }\n\n                    m.keyJson = JSON.stringify(m.key.payload);\n                    m.valueJson = JSON.stringify(m.value.payload);\n\n                    if (m.value.encoding == 'binary') {\n                        m.value.payload = atob(m.value.payload);\n\n                        const str = m.value.payload as string;\n                        let hex = '';\n                        for (let i = 0; i < str.length && i < 50; i++) {\n                            let n = str.charCodeAt(i).toString(16);\n                            if (n.length == 1) n = '0' + n;\n                            hex += n + ' ';\n                        }\n                        m.valueBinHexPreview = hex;\n                    }\n\n\n                    //m = observable.object(m, undefined, { deep: false });\n\n                    this.messages.push(m);\n                    break;\n            }\n        };\n        //currentWS.onmessage = m => transaction(() => onMessageHandler(m));\n        currentWS.onmessage = onMessageHandler;\n    },\n\n    stopMessageSearch() {\n        if (currentWS) {\n            currentWS.close();\n            currentWS = null;\n        }\n\n        if (this.messageSearchPhase != null) {\n            this.messageSearchPhase = \"Done\";\n            this.messagesBytesConsumed = 0;\n            this.messagesTotalConsumed = 0;\n            this.messageSearchPhase = null;\n        }\n    },\n\n    refreshTopics(force?: boolean) {\n        cachedApiRequest<GetTopicsResponse>('./api/topics', force)\n            .then(v => {\n                for (const t of v.topics) {\n                    if (!t.allowedActions) continue;\n\n                    // DEBUG: randomly remove some allowedActions\n                    /*\n                    const numToRemove = Math.round(Math.random() * t.allowedActions.length);\n                    for (let i = 0; i < numToRemove; i++) {\n                        const randomIndex = Math.round(Math.random() * (t.allowedActions.length - 1));\n                        t.allowedActions.splice(randomIndex, 1);\n                    }\n                    */\n                }\n                this.topics = v.topics;\n            }, addError);\n    },\n\n    async refreshTopicConfig(topicName: string, force?: boolean): Promise<void> {\n        const promise = cachedApiRequest<TopicConfigResponse | null>(`./api/topics/${topicName}/configuration`, force)\n            .then(v => {\n                if (!v) {\n                    this.topicConfig.delete(topicName);\n                    return;\n                }\n\n                if (v.topicDescription.error) {\n                    this.topicConfig.set(topicName, v.topicDescription);\n                    return;\n                }\n\n                // add 'type' to each synonym\n                // in the raw data, only the root entries have 'type', but the nested synonyms do not\n                // we need 'type' on synonyms as well for filtering\n                const topicDescription = v.topicDescription;\n                prepareSynonyms(topicDescription.configEntries);\n                this.topicConfig.set(topicName, topicDescription);\n\n            }, addError); // 403 -> null\n        return promise as Promise<void>;\n    },\n\n    async getTopicOffsetsByTimestamp(topicNames: string[], timestampUnixMs: number): Promise<TopicOffset[]> {\n        const query = `topicNames=${encodeURIComponent(topicNames.join(','))}&timestamp=${timestampUnixMs}`;\n        const response = await fetch('./api/topics-offsets?' + query, {\n            method: 'GET',\n            headers: [\n                ['Content-Type', 'application/json']\n            ]\n        });\n\n        const r = await tryParseOrUnwrapError<GetTopicOffsetsByTimestampResponse>(response);\n        return r.topicOffsets;\n    },\n\n    refreshTopicDocumentation(topicName: string, force?: boolean) {\n        cachedApiRequest<TopicDocumentationResponse>(`./api/topics/${topicName}/documentation`, force)\n            .then(v => {\n                const text = v.documentation.markdown == null ? null : decodeBase64(v.documentation.markdown);\n                v.documentation.text = text;\n                this.topicDocumentation.set(topicName, v.documentation);\n            }, addError);\n    },\n\n    refreshTopicPermissions(topicName: string, force?: boolean) {\n        if (!IsBusiness) return; // permissions endpoint only exists in kowl-business\n        if (this.userData?.user?.providerID == -1) return; // debug user\n        cachedApiRequest<TopicPermissions | null>(`./api/permissions/topics/${topicName}`, force)\n            .then(x => this.topicPermissions.set(topicName, x), addError);\n    },\n\n    async deleteTopic(topicName: string) {\n        return rest(`./api/topics/${encodeURIComponent(topicName)}`, REST_TIMEOUT_SEC, { method: 'DELETE' }).catch(addError);\n    },\n\n    async deleteTopicRecords(topicName: string, offset: number, partitionId?: number) {\n        const partitions = (partitionId != undefined) ? [{ partitionId, offset }] : this.topicPartitions?.get(topicName)?.map(partition => ({ partitionId: partition.id, offset }));\n\n        if (!partitions || partitions.length === 0) {\n            addError(new Error(`Topic ${topicName} doesn't have partitions.`))\n            return;\n        }\n\n        return this.deleteTopicRecordsFromMultiplePartitionOffsetPairs(topicName, partitions);\n    },\n\n    async deleteTopicRecordsFromAllPartitionsHighWatermark(topicName: string) {\n        const partitions = this.topicPartitions?.get(topicName)?.map(({ waterMarkHigh, id }) => ({\n            partitionId: id,\n            offset: waterMarkHigh\n        }));\n\n        if (!partitions || partitions.length === 0) {\n            addError(new Error(`Topic ${topicName} doesn't have partitions.`));\n            return;\n        }\n\n        return this.deleteTopicRecordsFromMultiplePartitionOffsetPairs(topicName, partitions);\n    },\n\n    async deleteTopicRecordsFromMultiplePartitionOffsetPairs(topicName: string, pairs: Array<{ partitionId: number, offset: number }>) {\n        return rest<DeleteRecordsResponseData>(`./api/topics/${topicName}/records`, REST_TIMEOUT_SEC, {\n            method: \"DELETE\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ partitions: pairs })\n        }).catch(addError);\n    },\n\n    refreshPartitions(topics: 'all' | string[] = 'all', force?: boolean): Promise<void> {\n        if (Array.isArray(topics))\n            // sort in order to maximize cache hits (todo: track/cache each topic individually instead)\n            topics = topics.sort().map(t => encodeURIComponent(t));\n\n        const url = topics == 'all'\n            ? `./api/operations/topic-details`\n            : `./api/operations/topic-details?topicNames=${topics.joinStr(\",\")}`;\n\n        return cachedApiRequest<GetAllPartitionsResponse | null>(url, force)\n            .then(response => {\n                if (!response?.topics) return;\n                transaction(() => {\n\n                    const errors: {\n                        topicName: string,\n                        partitionErrors: { partitionId: number, error: string }[],\n                        waterMarkErrors: { partitionId: number, error: string }[],\n                    }[] = [];\n\n                    for (const t of response.topics) {\n                        if (t.error != null) {\n                            // console.error(`refreshAllTopicPartitions: error for topic ${t.topicName}: ${t.error}`);\n                            continue;\n                        }\n\n                        // If any partition has any errors, don't set the result for that topic\n                        const partitionErrors = [];\n                        const waterMarkErrors = [];\n                        for (const p of t.partitions) {\n                            // topicName\n                            p.topicName = t.topicName;\n\n                            let partitionHasError = false;\n                            if (p.partitionError) {\n                                partitionErrors.push({ partitionId: p.id, error: p.partitionError });\n                                partitionHasError = true;\n                            } if (p.waterMarksError) {\n                                waterMarkErrors.push({ partitionId: p.id, error: p.waterMarksError });\n                                partitionHasError = true;\n                            }\n                            if (partitionHasError) {\n                                p.hasErrors = true;\n                                continue;\n                            }\n\n                            // Add some local/cached properties to make working with the data easier\n                            const validLogDirs = p.partitionLogDirs.filter(e => !e.error && e.size >= 0);\n                            const replicaSize = validLogDirs.length > 0 ? validLogDirs.max(e => e.size) : 0;\n                            p.replicaSize = replicaSize >= 0 ? replicaSize : 0;\n                        }\n\n                        // Set partition\n                        this.topicPartitions.set(t.topicName, t.partitions);\n\n                        if (partitionErrors.length == 0 && waterMarkErrors.length == 0) {\n\n                        } else {\n                            errors.push({\n                                topicName: t.topicName,\n                                partitionErrors: partitionErrors,\n                                waterMarkErrors: waterMarkErrors,\n                            })\n                        }\n                    }\n\n                    // if (errors.length > 0)\n                    //     console.error('refreshAllTopicPartitions: response had errors', errors);\n                });\n            }, addError);\n    },\n\n    refreshPartitionsForTopic(topicName: string, force?: boolean) {\n        cachedApiRequest<GetPartitionsResponse | null>(`./api/topics/${topicName}/partitions`, force)\n            .then(response => {\n                if (response?.partitions) {\n                    const partitionErrors: Array<{ id: number, partitionError: string }> = [], waterMarksErrors: Array<{ id: number, waterMarksError: string }> = [];\n\n\n                    // Add some local/cached properties to make working with the data easier\n                    for (const p of response.partitions) {\n                        // topicName\n                        p.topicName = topicName;\n\n                        if (p.partitionError) partitionErrors.push({ id: p.id, partitionError: p.partitionError });\n                        if (p.waterMarksError) waterMarksErrors.push({ id: p.id, waterMarksError: p.waterMarksError });\n                        if (partitionErrors.length || waterMarksErrors.length) continue;\n\n                        // replicaSize\n                        const validLogDirs = p.partitionLogDirs.filter(e => (e.error == null || e.error == \"\") && e.size >= 0);\n                        const replicaSize = validLogDirs.length > 0 ? validLogDirs.max(e => e.size) : 0;\n                        p.replicaSize = replicaSize >= 0 ? replicaSize : 0;\n                    }\n\n                    if (partitionErrors.length == 0 && waterMarksErrors.length == 0) {\n                        // Set partitions\n                        this.topicPartitionErrors.delete(topicName)\n                        this.topicWatermarksErrors.delete(topicName)\n                        this.topicPartitions.set(topicName, response.partitions);\n                    } else {\n                        this.topicPartitionErrors.set(topicName, partitionErrors)\n                        this.topicWatermarksErrors.set(topicName, waterMarksErrors)\n                        console.error(`refreshPartitionsForTopic: response has partition errors (t=${topicName} p=${partitionErrors.length}, w=${waterMarksErrors.length})`)\n                    }\n\n                } else {\n                    // Set null to indicate that we're not allowed to see the partitions\n                    this.topicPartitions.set(topicName, null);\n                    return;\n                }\n\n                let partitionErrors = 0, waterMarkErrors = 0;\n\n                // Add some local/cached properties to make working with the data easier\n                for (const p of response.partitions) {\n                    // topicName\n                    p.topicName = topicName;\n\n                    if (p.partitionError) partitionErrors++;\n                    if (p.waterMarksError) waterMarkErrors++;\n                    if (partitionErrors || waterMarkErrors) {\n                        p.hasErrors = true;\n                        continue;\n                    }\n\n                    // replicaSize\n                    const validLogDirs = p.partitionLogDirs.filter(e => (e.error == null || e.error == \"\") && e.size >= 0);\n                    const replicaSize = validLogDirs.length > 0 ? validLogDirs.max(e => e.size) : 0;\n                    p.replicaSize = replicaSize >= 0 ? replicaSize : 0;\n                }\n\n                // Set partitions\n                this.topicPartitions.set(topicName, response.partitions);\n\n                if (partitionErrors > 0 || waterMarkErrors > 0)\n                    console.warn(`refreshPartitionsForTopic: response has partition errors (topic=${topicName} partitionErrors=${partitionErrors}, waterMarkErrors=${waterMarkErrors})`);\n            }, addError);\n    },\n\n    refreshTopicAcls(topicName: string, force?: boolean) {\n        const query = aclRequestToQuery({ ...AclRequestDefault, resourceType: AclResourceType.AclResourceTopic, resourceName: topicName })\n        cachedApiRequest<AclResponse | null>(`./api/acls?${query}`, force)\n            .then(v => this.topicAcls.set(topicName, v))\n    },\n\n    refreshTopicConsumers(topicName: string, force?: boolean) {\n        cachedApiRequest<GetTopicConsumersResponse>(`./api/topics/${topicName}/consumers`, force)\n            .then(v => this.topicConsumers.set(topicName, v.topicConsumers), addError);\n    },\n\n    refreshAcls(request: AclRequest, force?: boolean) {\n        const query = aclRequestToQuery(request);\n        cachedApiRequest<AclResponse | null>(`./api/acls?${query}`, force)\n            .then(v => this.ACLs = v ?? null, addError);\n    },\n\n    refreshQuotas(force?: boolean) {\n        cachedApiRequest<QuotaResponse | null>(`./api/quotas`, force)\n            .then(v => this.Quotas = v ?? null, addError);\n    },\n\n    refreshSupportedEndpoints(force?: boolean) {\n        cachedApiRequest<EndpointCompatibilityResponse>(`./api/kowl/endpoints`, force)\n            .then(v => this.endpointCompatibility = v.endpointCompatibility, addError);\n    },\n\n    refreshCluster(force?: boolean) {\n        cachedApiRequest<ClusterInfoResponse | ApiError>(`./api/cluster`, force)\n            .then(v => {\n                transaction(() => {\n                    // root response can fail as well\n                    if ('message' in v) {\n                        return;\n                    }\n                    // add 'type' to each synonym entry\n                    for (const broker of v.clusterInfo.brokers)\n                        if (broker.config && !broker.config.error)\n                            prepareSynonyms(broker.config.configs)\n\n                    // don't assign if the value didn't change\n                    // we'd re-trigger all observers!\n                    if (!comparer.structural(this.clusterInfo, v.clusterInfo))\n                        this.clusterInfo = v.clusterInfo;\n\n                    for (const b of v.clusterInfo.brokers)\n                        if (b.config.error)\n                            this.brokerConfigs.set(b.brokerId, b.config.error)\n                        else\n                            this.brokerConfigs.set(b.brokerId, b.config.configs);\n                });\n            }, addError);\n    },\n\n    refreshBrokerConfig(brokerId: number, force?: boolean) {\n        cachedApiRequest<BrokerConfigResponse | ApiError>(`./api/brokers/${brokerId}/config`, force).then(v => {\n            if ('message' in v) {\n                // error\n                this.brokerConfigs.set(brokerId, v.message);\n            } else {\n                // success\n                prepareSynonyms(v.brokerConfigs);\n                this.brokerConfigs.set(brokerId, v.brokerConfigs);\n            }\n        }).catch(addError);\n    },\n\n    refreshConsumerGroup(groupId: string, force?: boolean) {\n        cachedApiRequest<GetConsumerGroupResponse>(`./api/consumer-groups/${groupId}`, force)\n            .then(v => {\n                addFrontendFieldsForConsumerGroup(v.consumerGroup);\n                this.consumerGroups.set(v.consumerGroup.groupId, v.consumerGroup);\n            }, addError);\n    },\n\n    refreshConsumerGroups(force?: boolean) {\n        cachedApiRequest<GetConsumerGroupsResponse>('./api/consumer-groups', force)\n            .then(v => {\n                for (const g of v.consumerGroups)\n                    addFrontendFieldsForConsumerGroup(g);\n\n                transaction(() => {\n                    this.consumerGroups.clear();\n                    for (const g of v.consumerGroups)\n                        this.consumerGroups.set(g.groupId, g);\n                });\n            }, addError);\n    },\n\n    refreshConsumerGroupAcls(groupName: string, force?: boolean) {\n        const query = aclRequestToQuery({ ...AclRequestDefault, resourceType: AclResourceType.AclResourceGroup, resourceName: groupName })\n        cachedApiRequest<AclResponse | null>(`./api/acls?${query}`, force)\n            .then(v => this.consumerGroupAcls.set(groupName, v))\n    },\n\n    async editConsumerGroupOffsets(groupId: string, topics: EditConsumerGroupOffsetsTopic[]):\n        Promise<EditConsumerGroupOffsetsResponseTopic[]> {\n        const request: EditConsumerGroupOffsetsRequest = {\n            groupId: groupId,\n            topics: topics\n        };\n\n        const response = await fetch('./api/consumer-groups/' + encodeURIComponent(groupId), {\n            method: 'PATCH',\n            headers: [\n                ['Content-Type', 'application/json']\n            ],\n            body: toJson(request),\n        });\n\n        const r = await tryParseOrUnwrapError<EditConsumerGroupOffsetsResponse>(response);\n        if (r.error) throw Error(r.error);\n        return r.topics;\n    },\n\n    async deleteConsumerGroupOffsets(groupId: string, topics: DeleteConsumerGroupOffsetsTopic[]):\n        Promise<DeleteConsumerGroupOffsetsResponseTopic[]> {\n        const request: DeleteConsumerGroupOffsetsRequest = {\n            groupId: groupId,\n            topics: topics\n        };\n\n        const response = await fetch('./api/consumer-groups/' + encodeURIComponent(groupId), {\n            method: 'DELETE',\n            headers: [\n                ['Content-Type', 'application/json']\n            ],\n            body: toJson(request),\n        });\n\n        const r = await tryParseOrUnwrapError<DeleteConsumerGroupOffsetsResponse>(response);\n        return r.topics;\n    },\n\n\n    refreshAdminInfo(force?: boolean) {\n        cachedApiRequest<AdminInfo | null>(`./api/admin`, force)\n            .then(info => {\n                if (info == null) {\n                    this.adminInfo = null;\n                    return;\n                }\n\n                // normalize responses (missing arrays, or arrays with an empty string)\n                // todo: not needed anymore, responses are always correct now\n                for (const role of info.roles)\n                    for (const permission of role.permissions)\n                        for (const k of ['allowedActions', 'includes', 'excludes']) {\n                            const ar: string[] = (permission as any)[k] ?? [];\n                            (permission as any)[k] = ar.filter(x => x.length > 0);\n                        }\n\n                // resolve role of each binding\n                for (const binding of info.roleBindings) {\n                    binding.resolvedRole = info.roles.first(r => r.name == binding.roleName)!;\n                    if (binding.resolvedRole == null) console.error(\"could not resolve roleBinding to role: \" + toJson(binding));\n                }\n\n                // resolve bindings, and roles of each user\n                for (const user of info.users) {\n                    user.bindings = user.bindingIds.map(id => info.roleBindings.first(rb => rb.ephemeralId == id)!);\n                    if (user.bindings.any(b => b == null)) console.error(\"one or more rolebindings could not be resolved for user: \" + toJson(user));\n\n                    user.grantedRoles = [];\n                    for (const roleName in user.audits)\n                        user.grantedRoles.push({\n                            role: info.roles.first(r => r.name == roleName)!,\n                            grantedBy: user.audits[roleName].map(bindingId => info.roleBindings.first(b => b.ephemeralId == bindingId)!),\n                        });\n                }\n\n                this.adminInfo = info;\n            }, addError);\n    },\n\n    refreshSchemaOverview(force?: boolean) {\n        const rq = cachedApiRequest('./api/schemas', force) as Promise<SchemaOverviewResponse>;\n        return rq\n            .then(({ schemaOverview, isConfigured }) => [this.schemaOverview, this.schemaOverviewIsConfigured] = [schemaOverview, isConfigured])\n            .catch(addError);\n    },\n\n    refreshSchemaDetails(subjectName: string, version: number | 'latest', force?: boolean) {\n        if (version == null) version = 'latest';\n\n        const rq = cachedApiRequest(`./api/schemas/subjects/${subjectName}/versions/${version}`, force) as Promise<SchemaDetailsResponse>;\n\n        return rq\n            .then(({ schemaDetails }) => {\n                if (schemaDetails && typeof schemaDetails.schema === \"string\" && schemaDetails.type != SchemaType.PROTOBUF) {\n                    schemaDetails.schema = JSON.parse(schemaDetails.schema);\n                }\n\n                if (schemaDetails && schemaDetails.schema) {\n                    if (typeof schemaDetails.schema === \"string\")\n                        schemaDetails.rawSchema = schemaDetails.schema;\n                    else\n                        schemaDetails.rawSchema = JSON.stringify(schemaDetails.schema);\n                }\n\n                this.schemaDetails = schemaDetails;\n            })\n            .catch(addError);\n    },\n\n    refreshPartitionReassignments(force?: boolean): Promise<void> {\n        return cachedApiRequest<PartitionReassignmentsResponse | null>('./api/operations/reassign-partitions', force)\n            .then(v => {\n                if (v === null)\n                    this.partitionReassignments = null;\n                else\n                    this.partitionReassignments = v.topics;\n            }, addError);\n    },\n\n    async startPartitionReassignment(request: PartitionReassignmentRequest): Promise<AlterPartitionReassignmentsResponse> {\n        const response = await fetch('./api/operations/reassign-partitions', {\n            method: 'PATCH',\n            headers: [\n                ['Content-Type', 'application/json']\n            ],\n            body: toJson(request),\n        });\n\n        return await tryParseOrUnwrapError<AlterPartitionReassignmentsResponse>(response);\n    },\n\n    async setReplicationThrottleRate(brokerIds: number[], maxBytesPerSecond: number): Promise<PatchConfigsResponse> {\n\n        maxBytesPerSecond = Math.ceil(maxBytesPerSecond);\n\n        const configRequest: PatchConfigsRequest = { resources: [] };\n\n        for (const b of brokerIds) {\n            configRequest.resources.push({\n                resourceType: ConfigResourceType.Broker,\n                resourceName: String(b),\n                configs: [\n                    { name: 'leader.replication.throttled.rate', op: AlterConfigOperation.Set, value: String(maxBytesPerSecond) },\n                    { name: 'follower.replication.throttled.rate', op: AlterConfigOperation.Set, value: String(maxBytesPerSecond) },\n                ]\n            });\n        }\n\n        return await this.changeConfig(configRequest);\n    },\n\n    async setThrottledReplicas(\n        topicReplicas: {\n            topicName: string,\n            leaderReplicas: { brokerId: number, partitionId: number }[],\n            followerReplicas: { brokerId: number, partitionId: number }[]\n        }[]): Promise<PatchConfigsResponse> {\n\n        const configRequest: PatchConfigsRequest = { resources: [] };\n\n        for (const t of topicReplicas) {\n            const res: ResourceConfig = { // Set which topics to throttle\n                resourceType: ConfigResourceType.Topic,\n                resourceName: t.topicName,\n                configs: [],\n            };\n\n            const leaderReplicas = t.leaderReplicas.map(e => `${e.partitionId}:${e.brokerId}`).join(\",\");\n            res.configs.push({ name: 'leader.replication.throttled.replicas', op: AlterConfigOperation.Set, value: leaderReplicas });\n            const followerReplicas = t.followerReplicas.map(e => `${e.partitionId}:${e.brokerId}`).join(\",\");\n            res.configs.push({ name: 'follower.replication.throttled.replicas', op: AlterConfigOperation.Set, value: followerReplicas });\n\n            // individual request for each topic\n            configRequest.resources.push(res);\n        }\n\n        return await this.changeConfig(configRequest);\n    },\n\n    async resetThrottledReplicas(topicNames: string[]): Promise<PatchConfigsResponse> {\n\n        const configRequest: PatchConfigsRequest = { resources: [] };\n\n        // reset throttled replicas for those topics\n        for (const t of topicNames) {\n            configRequest.resources.push({\n                resourceType: ConfigResourceType.Topic,\n                resourceName: t,\n                configs: [\n                    { name: 'leader.replication.throttled.replicas', op: AlterConfigOperation.Delete },\n                    { name: 'follower.replication.throttled.replicas', op: AlterConfigOperation.Delete }\n                ],\n            });\n        }\n\n        return await this.changeConfig(configRequest);\n    },\n\n    async resetReplicationThrottleRate(brokerIds: number[]): Promise<PatchConfigsResponse> {\n\n        const configRequest: PatchConfigsRequest = { resources: [] };\n\n        // We currently only set replication throttle on each broker, instead of cluster-wide (same effect, but different kind of 'ConfigSource')\n        // So we don't remove the cluster-wide setting, only the ones we've set (the per-broker) settings\n\n        // remove throttle configs from all brokers (DYNAMIC_DEFAULT_BROKER_CONFIG)\n        // configRequest.resources.push({\n        //     resourceType: ConfigResourceType.Broker,\n        //     resourceName: \"\", // empty = all brokers\n        //     configs: [\n        //         { name: 'leader.replication.throttled.rate', op: AlterConfigOperation.Delete },\n        //         { name: 'follower.replication.throttled.rate', op: AlterConfigOperation.Delete },\n        //     ]\n        // });\n\n        // remove throttle configs from each broker individually (DYNAMIC_BROKER_CONFIG)\n        for (const b of brokerIds) {\n            configRequest.resources.push({\n                resourceType: ConfigResourceType.Broker,\n                resourceName: String(b),\n                configs: [\n                    { name: 'leader.replication.throttled.rate', op: AlterConfigOperation.Delete },\n                    { name: 'follower.replication.throttled.rate', op: AlterConfigOperation.Delete },\n                ]\n            });\n        }\n\n        return await this.changeConfig(configRequest);\n    },\n\n    async changeConfig(request: PatchConfigsRequest): Promise<PatchConfigsResponse> {\n        const response = await fetch('./api/operations/configs', {\n            method: 'PATCH',\n            headers: [\n                ['Content-Type', 'application/json']\n            ],\n            body: toJson(request),\n        });\n\n        return await tryParseOrUnwrapError<PatchConfigsResponse>(response);\n    },\n\n\n    async refreshConnectClusters(force?: boolean): Promise<void> {\n        return cachedApiRequest<KafkaConnectors | null>('./api/kafka-connect/connectors', force)\n            .then(v => {\n                // backend error\n                if (!v) {\n                    this.connectConnectors = undefined;\n                    return;\n                }\n\n                // not configured\n                if (!v.clusters) {\n                    this.connectConnectors = v;\n                    return;\n                }\n\n                // prepare helper properties\n                for (const cluster of v.clusters)\n                    addFrontendFieldsForConnectCluster(cluster);\n\n                this.connectConnectors = v;\n            }, addError);\n    },\n\n    // AdditionalInfo = list of plugins\n    refreshClusterAdditionalInfo(clusterName: string, force?: boolean): void {\n        cachedApiRequest<ClusterAdditionalInfo | null>(`./api/kafka-connect/clusters/${clusterName}`, force)\n            .then(v => {\n                if (!v) {\n                    this.connectAdditionalClusterInfo.delete(clusterName);\n                }\n                else {\n                    this.connectAdditionalClusterInfo.set(clusterName, v);\n                }\n            }, addError);\n    },\n\n    /*\n    Commented out for now!\n    There are some issues with refreshing a single connector:\n        - We might not have the cluster/connector cached (can happen when a user visits the details page directly)\n        - Updating the inner details (e.g. running tasks) won't update the cached total/running tasks in the cluster object\n          which might make things pretty confusing for a user (pausing a connector, then going back to the overview page).\n          One solution would be to update all clusters/connectors, which defeats the purpose of refreshing only one.\n          The real solution would be to not have pre-computed fields.\n\n\n    // Details for one connector\n    async refreshConnectorDetails(clusterName: string, connectorName: string, force?: boolean): Promise<void> {\n\n        const existingCluster = this.connectConnectors?.clusters?.find(x => x.clusterName == clusterName);\n        if (!existingCluster)\n            // if we don't have any info yet, or we don't know about that cluster, we need a full refresh\n            return this.refreshConnectClusters(force);\n\n        return cachedApiRequest<ClusterConnectorInfo | null>(`./api/kafka-connect/clusters/${clusterName}/connectors/${connectorName}`, force)\n            .then(v => {\n                if (!v) return; // backend error\n\n                const cluster = this.connectConnectors?.clusters?.find(x => x.clusterName == clusterName);\n                if (!cluster) return; // did we forget about the cluster somehow?\n\n                const connector = cluster.connectors.\n\n                // update given clusters\n                runInAction(() => {\n                    const clusters = this.connectConnectors?.clusters;\n                    if (!v.clusters) return; // shouldn't happen: this method shouldn't get called if we don't already have info cached\n                    if (!clusters) return; // shouldn't happen: if we don't have clusters locally we'd have refreshed them\n\n                    for (const updatedCluster of v.clusters) {\n                        addFrontendFieldsForConnectCluster(updatedCluster);\n\n                        const index = clusters.findIndex(x => x.clusterName == updatedCluster.clusterName);\n                        if (index < 0) {\n                            // shouldn't happen, if we don't know the cluster, then how would we have requested new info for it?\n                            clusters.push(updatedCluster);\n                        } else {\n                            // overwrite existing cluster with new data\n                            clusters[index] = updatedCluster;\n                        }\n                    }\n                });\n\n            }, addError);\n    },\n*/\n    /*\n        // All, or for specific cluster\n        refreshConnectors(clusterName?: string, force?: boolean): Promise<void> {\n            const url = clusterName == null\n                ? './api/kafka-connect/connectors'\n                : `./api/kafka-connect/clusters/${clusterName}/connectors`;\n            return cachedApiRequest<KafkaConnectors | null>(url, force)\n                .then(v => {\n                    if (v == null) {\n\n                    }\n                }, addError);\n        },\n\n\n\n    */\n\n    async deleteConnector(clusterName: string, connector: string): Promise<null> {\n        // DELETE \"/kafka-connect/clusters/{clusterName}/connectors/{connector}\"\n        const response = await fetch(`./api/kafka-connect/clusters/${clusterName}/connectors/${connector}`, {\n            method: 'DELETE',\n            headers: [\n                ['Content-Type', 'application/json']\n            ]\n        });\n        return tryParseOrUnwrapError<null>(response);\n    },\n\n    async pauseConnector(clusterName: string, connector: string): Promise<null> {\n        // PUT  \"/kafka-connect/clusters/{clusterName}/connectors/{connector}/pause\"  (idempotent)\n        const response = await fetch(`./api/kafka-connect/clusters/${clusterName}/connectors/${connector}/pause`, {\n            method: 'PUT',\n            headers: [\n                ['Content-Type', 'application/json']\n            ]\n        });\n        return tryParseOrUnwrapError<null>(response);\n    },\n\n    async resumeConnector(clusterName: string, connector: string): Promise<null> {\n        // PUT  \"/kafka-connect/clusters/{clusterName}/connectors/{connector}/resume\" (idempotent)\n        const response = await fetch(`./api/kafka-connect/clusters/${clusterName}/connectors/${connector}/resume`, {\n            method: 'PUT',\n            headers: [\n                ['Content-Type', 'application/json']\n            ]\n        });\n        return tryParseOrUnwrapError<null>(response);\n    },\n\n    async restartConnector(clusterName: string, connector: string): Promise<null> {\n        // POST \"/kafka-connect/clusters/{clusterName}/connectors/{connector}/restart\"\n        const response = await fetch(`./api/kafka-connect/clusters/${clusterName}/connectors/${connector}/restart`, {\n            method: 'POST',\n            headers: [\n                ['Content-Type', 'application/json']\n            ]\n        });\n        return tryParseOrUnwrapError<null>(response);\n    },\n\n    async updateConnector(clusterName: string, connector: string, config: object): Promise<null> {\n        // PUT \"/kafka-connect/clusters/{clusterName}/connectors/{connector}\"\n        const response = await fetch(`./api/kafka-connect/clusters/${clusterName}/connectors/${connector}`, {\n            method: 'PUT',\n            headers: [\n                ['Content-Type', 'application/json']\n            ],\n            body: JSON.stringify({ config: config }),\n        });\n        return tryParseOrUnwrapError<null>(response);\n    },\n\n    async restartTask(clusterName: string, connector: string, taskID: number): Promise<null> {\n        // POST \"/kafka-connect/clusters/{clusterName}/connectors/{connector}/tasks/{taskID}/restart\"\n        const response = await fetch(`./api/kafka-connect/clusters/${clusterName}/connectors/${connector}/tasks/${String(taskID)}/restart`, {\n            method: 'POST',\n            headers: [\n                ['Content-Type', 'application/json']\n            ]\n        });\n\n        return tryParseOrUnwrapError<null>(response);\n    },\n\n    async validateConnectorConfig(clusterName: string, pluginClassName: string, config: object): Promise<ConnectorValidationResult> {\n        // PUT \"/kafka-connect/clusters/{clusterName}/connector-plugins/{pluginClassName}/config/validate\"\n        const response = await fetch(`./api/kafka-connect/clusters/${encodeURIComponent(clusterName)}/connector-plugins/${encodeURIComponent(pluginClassName)}/config/validate`, {\n            method: 'PUT',\n            headers: [\n                ['Content-Type', 'application/json']\n            ],\n            body: JSON.stringify(config),\n        });\n        return tryParseOrUnwrapError<ConnectorValidationResult>(response);\n    },\n\n    async createConnector(clusterName: string, connectorName: string, pluginClassName: string, config: object): Promise<null> {\n        // POST \"/kafka-connect/clusters/{clusterName}/connectors\"\n        const response = await fetch(`./api/kafka-connect/clusters/${clusterName}/connectors`, {\n            method: 'POST',\n            headers: [\n                ['Content-Type', 'application/json']\n            ],\n            body: JSON.stringify({\n                connectorName: connectorName,\n                config: config\n            }),\n        });\n        return tryParseOrUnwrapError<null>(response);\n    },\n\n}\n\nfunction addFrontendFieldsForConnectCluster(cluster: ClusterConnectors) {\n    const allowedActions = cluster.allowedActions ?? ['all'];\n    const allowAll = allowedActions.includes('all');\n\n    cluster.canViewCluster = allowAll || allowedActions.includes('canViewConnectCluster');\n    cluster.canEditCluster = allowAll || allowedActions.includes('canEditConnectCluster');\n    cluster.canDeleteCluster = allowAll || allowedActions.includes('canDeleteConnectCluster');\n\n    for (const connector of cluster.connectors)\n        if (connector.config)\n            connector.jsonConfig = JSON.stringify(connector.config, undefined, 4);\n        else\n            connector.jsonConfig = \"\";\n}\n\nfunction addFrontendFieldsForConsumerGroup(g: GroupDescription) {\n    g.lagSum = g.topicOffsets.sum(o => o.summedLag);\n\n    if (g.allowedActions) {\n        if (g.allowedActions.includes('all')) {\n            // All perms\n        } else {\n            // Not all perms, set helper props\n            g.noEditPerms = !g.allowedActions?.includes('editConsumerGroup');\n            g.noDeletePerms = !g.allowedActions?.includes('deleteConsumerGroup');\n        }\n    }\n    g.isInUse = g.state.toLowerCase() != 'empty';\n\n    if (!Features.patchGroup)\n        g.noEditSupport = true;\n    if (!Features.deleteGroup)\n        g.noDeleteSupport = true;\n}\n\nexport const brokerMap = computed(() => {\n    const brokers = api.clusterInfo?.brokers;\n    if (brokers == null) return null;\n\n    const map = new Map<number, Broker>();\n    for (const b of brokers)\n        map.set(b.brokerId, b);\n\n    return map;\n}, { name: 'brokerMap', equals: comparer.structural });\n\n\n// 1. add 'type' to each synonym, so when expanding a config entry (to view its synonyms), we can still see the type\n// 2. remove redundant synonym entries (those that have the same source as the root config entry)\nfunction prepareSynonyms(configEntries: ConfigEntry[]) {\n    if (!Array.isArray(configEntries)) return;\n\n    for (const e of configEntries) {\n        if (e.synonyms == undefined)\n            continue;\n\n        // remove redundant entry\n        if (e.synonyms.length > 0)\n            if (e.synonyms[0].source == e.source)\n                e.synonyms.splice(0, 1);\n\n        if (e.synonyms.length == 0) {\n            // delete empty arrays, otherwise Tables will show this entry as 'expandable' even though it has no children\n            delete e.synonyms;\n            continue;\n        }\n\n        // add 'type' from root object\n        for (const s of e.synonyms)\n            s.type = e.type;\n    }\n}\n\n\nexport function aclRequestToQuery(request: AclRequest): string {\n    const filters = ObjToKv(request).filter(kv => !!kv.value);\n    const query = filters.map(x => `${x.key}=${x.value}`).join('&');\n    return query;\n}\n\nexport async function partialTopicConfigs(configKeys: string[], topics?: string[]): Promise<PartialTopicConfigsResponse> {\n    const keys = configKeys.map(k => encodeURIComponent(k)).join(',');\n    const topicNames = topics?.map(t => encodeURIComponent(t)).join(',');\n    const query = topicNames\n        ? `topicNames=${topicNames}&configKeys=${keys}`\n        : `configKeys=${keys}`;\n\n    const response = await fetch('./api/topics-configs?' + query).catch(e => null);\n    if (response == null)\n        throw response;\n\n    return tryParseOrUnwrapError<PartialTopicConfigsResponse>(response);\n}\n\nexport interface MessageSearchRequest {\n    topicName: string,\n    startOffset: number,\n    partitionId: number,\n    maxResults: number, // should also support '-1' soon, so we can do live tailing\n    filterInterpreterCode: string, // js code, base64 encoded\n}\n\nasync function tryParseOrUnwrapError<T>(response: Response): Promise<T> {\n    // network error => .text() will throw\n    const text = await response.text();\n\n    // kowl error    => status won't be ok\n    if (!response.ok)\n        throw new Error(text);\n\n    // invalid JSON  => parse will throw\n    const obj = JSON.parse(text);\n\n    // backend error => content will be ApiError\n    if (isApiError(obj))\n        throw new WrappedError(response, obj);\n\n    return obj as T;\n}\n\nfunction addError(err: Error) {\n    api.errors.push(err);\n}\n\n\ntype apiStoreType = typeof apiStore;\nexport const api = observable(apiStore, { messages: observable.shallow }) as apiStoreType;\n\n/*\nautorun(r => {\n    console.log(toJson(api))\n    touch(api)\n}, { delay: 50, name: 'api observer' });\n*/\n","import React, { ReactNode, Component, CSSProperties } from \"react\";\nimport { Button, Checkbox, Input, Menu, Pagination, Table } from \"antd\";\nimport { ColumnType } from \"antd/lib/table\";\nimport styles from './KowlTable.module.scss';\nimport { ColumnFilterItem, ColumnTitleProps, ExpandableConfig, FilterDropdownProps, FilterValue, SorterResult, TableCurrentDataSource, TablePaginationConfig } from \"antd/lib/table/interface\";\nimport { uiState } from \"../../state/uiState\";\nimport { DEFAULT_TABLE_PAGE_SIZE } from \"./common\";\nimport { action, autorun, comparer, computed, IReactionDisposer, IReactionPublic, isObservable, makeObservable, observable, reaction, transaction, untracked } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { clone, toJson } from \"../../utils/jsonUtils\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport Highlighter from \"react-highlight-words\";\nimport { findPopupContainer } from \"../../utils/tsxUtils\";\n\ntype EnumFilter = {\n    type: 'enum',\n    filterEnumOptions?: {\n        value: any;\n        displayName?: string;\n    }[];\n    optionClassName?: string;\n    toDisplay?: (value: any) => string,\n};\n\ntype NumericFilter = {\n    type: 'numeric',\n};\n\n//type antdFilterProps = 'filters' | 'filterDropdown' | 'filterDropdownVisible' | 'filterIcon' | 'filterMultiple' | 'filtered' | 'filteredValue' | 'onFilter' | 'onFilterDropdownVisibleChange' | 'defaultFilteredValue';\ntype antdFilterProps = 'defaultFilteredValue';\n\nexport type KowlColumnType<T> = Omit<ColumnType<T>, antdFilterProps | 'render'> & {\n    filterType?: EnumFilter | NumericFilter;\n    render?: (value: any, record: T, index: number, highlight: (text: string) => JSX.Element) => React.ReactNode;\n    //dataIndex: keyof T | string[];\n};\n\ntype KowlColumnTypeInternal<T> = ColumnType<T> & {\n    filterType?: EnumFilter | NumericFilter;\n    render?: (value: any, record: T, index: number) => React.ReactNode;\n};\n\n@observer\nexport class KowlTable<T extends object = any> extends Component<{\n    dataSource: readonly T[] | undefined\n    columns: KowlColumnType<T>[],\n    search?: {\n        searchColumnIndex?: number;\n        isRowMatch: (row: T, regex: RegExp) => boolean,\n    }\n\n    observableSettings?: TableSettings,\n    pagination?: {\n        visible?: boolean,\n        defaultPageSize?: number,\n        pageSizeOptions?: string[],\n    },\n\n    rowKey?: string | ((record: T) => string | number),\n    onRow?: ((data: T, index?: number) => React.HTMLAttributes<HTMLElement>) | undefined,\n    rowClassName?: string | ((record: T, index: number) => string) | undefined,\n\n    expandable?: ExpandableConfig<T>,\n    className?: string,\n\n    emptyText?: React.ReactNode | (() => React.ReactNode),\n\n}> {\n\n    paginationVisible: boolean;\n    @observable observableSettings: TableSettings;\n    @observable pagination: TablePaginationConfig;\n    @observable filteredTotal: number = -1;\n    currentDataSource: readonly T[] = [];\n\n    @observable filterOpen = false; // search bar visible\n    filterActive = false; // search query present (independant of search bar visible)\n    searchQuery?: string;\n    searchRegex?: RegExp; // regex compiled from user search query\n\n    customColumns: KowlColumnTypeInternal<T>[] = [];\n    searchColumn?: KowlColumnTypeInternal<T>;\n\n    reactionDisposers: IReactionDisposer[] = [];\n\n    constructor(p: any) {\n        super(p);\n\n        this.onFilter = this.onFilter.bind(this);\n\n        const paginationDefaultPageSize = this.props.observableSettings?.pageSize ?? this.props.pagination?.defaultPageSize ?? DEFAULT_TABLE_PAGE_SIZE;\n        const paginationSizeOptions = this.props.pagination?.pageSizeOptions ?? ['10', '20', '50', '100'];\n\n        this.pagination = {\n            pageSize: paginationDefaultPageSize,\n            pageSizeOptions: paginationSizeOptions,\n            defaultCurrent: 1,\n            current: 1,\n            showSizeChanger: true,\n\n            // hacky: we can't just set position:[] because then antd will pass us the unfiltered data source!\n            position: ['topLeft'],\n            className: 'displayNone',\n\n            hideOnSinglePage: false,\n\n            showTotal: action((total, range) => {\n                this.filteredTotal = total;\n                return null;\n            }),\n        };\n\n        this.observableSettings = this.props.observableSettings ?? observable({\n            pageSize: paginationDefaultPageSize,\n            quickSearch: '',\n        });\n\n        this.paginationVisible = this.props.pagination?.visible !== undefined\n            ? this.props.pagination?.visible\n            : true;\n\n        makeObservable(this);\n\n        const disposers = this.reactionDisposers;\n        const ar = function <T>(data: () => T, effect: (prev: T, cur: T, count: number) => void, delay?: number) {\n            let count = 0;\n            const newEffect = (cur: any, prev: any, r: IReactionPublic) => {\n                effect(prev, cur, ++count);\n            };\n            const d = reaction(data, newEffect, {\n                equals: customComparerIsSame,\n                delay: delay,\n                fireImmediately: true,\n            });\n            disposers.push(d);\n\n            // effect(undefined as any as T, data(), 0);\n        }\n\n        // Ensure our custom columns are up to date\n        ar(() => this.props.columns, (prev, cur, count) => {\n            // console.log('columns changed ' + count, { prev, cur });\n            this.updateCustomColumns(cur);\n        });\n\n        // Keep our columns up to date (to learn about new values for filtering)\n        ar(() => ({ data: this.props.dataSource, oriCols: this.props.columns }), (prev, cur, count) => {\n            this.ensureFiltersAreUpdated(cur.data);\n        });\n\n        // Keep search column up to date ('active state' of the filter icon etc)\n        ar(() => ({ query: this.observableSettings.quickSearch, searchColumn: this.searchColumn, filterOpen: this.filterOpen, oriCols: this.props.columns }), (prev, cur, count) => {\n            const { searchColumn } = cur;\n\n            if (cur.query && cur.query.length > 0) {\n                this.filterActive = true;\n                let searchRegex: RegExp | undefined = undefined;\n                if (this.filterActive) try { searchRegex = new RegExp(cur.query, 'i') } catch { }\n\n                this.searchQuery = cur.query;\n                this.searchRegex = searchRegex;\n            }\n            else {\n                this.filterActive = false;\n                this.searchQuery = undefined;\n                this.searchRegex = undefined;\n            }\n\n            if (searchColumn) {\n                searchColumn.filterIcon = this.filterIcon;\n                searchColumn.filterDropdownVisible = false;\n            }\n        });\n\n        // update display data\n        ar(\n            () => ({\n                data: isObservable(this.props.dataSource) ? clone(this.props.dataSource) : this.props.dataSource,\n                dataLength: this.props.dataSource?.length ?? -1,\n                filterActive: this.filterActive,\n                query: this.observableSettings?.quickSearch\n            }),\n            (prev, cur, count) => {\n                const { data, filterActive, query, dataLength } = cur;\n                // Clone ensures re-render on every change; which (for now) is somewhat wasteful\n                // since many tables already use observer components.\n                // However, in order for us to (eventually) be able to fully eliminate those redundant updates,\n                // we'll also have to consider the effects of sorters and filters (a change in some nested property might end up changing the order of entries in the table...)\n                const a = clone(data);\n\n                if (data == null) {\n                    return;\n                }\n\n                if (filterActive) {\n                    this.displayData = data.filter(this.onFilter);\n                } else {\n                    this.displayData = data;\n                }\n            }, 300);\n    }\n\n    componentWillUnmount() {\n        for (const r of this.reactionDisposers)\n            r();\n    }\n\n    @action updateCustomColumns(cols: KowlColumnType<T>[]) {\n        // console.count('table update columns');\n        this.customColumns = cols.map(col => Object.assign({}, col)) as KowlColumnTypeInternal<T>[];\n\n        // for (const col of this.customColumns)\n        //     col.onHeaderCell = () => ({ style: { background: '#dbeeff' } });\n\n        this.searchColumn = undefined;\n        this.updateSearchColumn(this.customColumns);\n    }\n\n    @action updateSearchColumn(cols: KowlColumnType<T>[]) {\n        // console.count('table update search');\n\n        const props = this.props;\n        if (props.search?.searchColumnIndex == undefined) return;\n\n        // Lookup\n        this.searchColumn = cols[props.search.searchColumnIndex] as KowlColumnTypeInternal<T> | undefined;\n        if (!this.searchColumn) {\n            console.warn('search column index is invalid', { index: props.search.searchColumnIndex, columns: cols });\n            return;\n        }\n\n        // Title\n        const originalTitle = String(this.searchColumn.title);\n        this.searchColumn.title = (props: ColumnTitleProps<T>) => {\n            return <SearchTitle\n                title={originalTitle}\n                observableFilterOpen={this}\n                observableSettings={this.observableSettings}\n            />\n        };\n\n        // Content Render\n        const userRender = this.searchColumn.render as undefined | ((v: any, r: T, i: number, h: (text: string) => JSX.Element) => JSX.Element);\n        this.searchColumn.render = (cellValue: any, record: T, index: number) => {\n            const query = this.filterActive\n                ? this.observableSettings.quickSearch ?? ''\n                : undefined;\n\n            const highlight = query\n                ? (text: string) => <Highlighter searchWords={[query]} textToHighlight={text} autoEscape={true} />\n                : (text: string) => <>{text}</>;\n\n            if (userRender == undefined) {\n                // active search, but user leaves rendering to us\n                if (query && typeof cellValue == 'string')\n                    return highlight(cellValue);\n\n                // no search, no custom rendering\n                return cellValue;\n            }\n            else {\n                // let user handle it\n                return userRender(cellValue, record, index, highlight);\n            }\n        };\n\n        this.searchColumn.filterDropdown = (p) => null;\n        this.searchColumn.onFilterDropdownVisibleChange = visible => {\n            // only accept requests to open the filter\n            if (visible)\n                this.filterOpen = visible;\n            this.searchColumn!.filterDropdownVisible = false;\n        };\n    }\n\n    @action.bound ensureFiltersAreUpdated(data: readonly T[] | undefined) {\n        // Filter columns\n        for (const col of this.customColumns) {\n\n            if (col.filterType == undefined) continue;\n            if (col.filterType.type == 'enum') {\n\n                if (col.dataIndex == undefined)\n                    console.warn('columns with filterType also require dataIndex');\n\n                // Add user defined values\n                col.filters = col.filterType.filterEnumOptions?.map(e => ({\n                    text: e.displayName ?? e.value,\n                    value: e.value,\n                })) ?? [];\n\n                // Add missing values\n                if (typeof col.dataIndex == 'string' && data) {\n                    const givenValues = new Set(col.filterType.filterEnumOptions?.map(x => x.value) ?? []);\n\n                    for (const row of data) {\n                        const val = (row as any)[col.dataIndex];\n\n                        if (!val) continue; // no empty/null\n                        if (typeof val != 'string' && typeof val != 'number') continue; // only string/num\n                        if (givenValues.has(val)) continue; // no duplicates\n\n                        givenValues.add(val);\n                        const display = col.filterType.toDisplay?.(val) ?? String(val);\n                        col.filters.push({ value: val, text: display });\n                    }\n                }\n\n                // Enum filtering\n                // for now only string dataIndex is supported;\n                // number and array types might be added later\n                col.onFilter = (filterValue, rec: T) => {\n                    // is this row a match?\n                    if (typeof col.dataIndex == 'string') {\n                        const val = (rec as any)[col.dataIndex];\n                        return val == filterValue;\n                    }\n\n                    return true;\n                };\n\n                const optionClass = col.filterType.optionClassName ?? '';\n\n                col.filterDropdown = (p: FilterDropdownProps) => {\n\n                    return <>\n                        <div style={{ minWidth: '200px' }}>\n                            {p.filters?.map(f =>\n                                <li key={f.text + String(f.value)} className='ant-dropdown-menu-item' style={{ position: 'relative' }}>\n                                    <Checkbox\n                                        className={'filterCheckbox ' + optionClass}\n                                        checked={p.selectedKeys.includes(f.value as React.Key)}\n                                        onChange={e => {\n                                            const newKeys = e.target.checked\n                                                ? [...p.selectedKeys, f.value as React.Key]\n                                                : p.selectedKeys.filter(x => x != f.value);\n\n                                            p.setSelectedKeys(newKeys);\n                                            p.confirm({ closeDropdown: false });\n                                        }}\n                                    >\n                                        {f.text}\n                                    </Checkbox>\n                                </li>\n                            )}\n                        </div>\n                    </>\n                };\n            }\n        }\n    }\n\n    @observable displayData: readonly T[] = [];\n\n    renderCount = 0;\n    render() {\n        const p = this.props;\n        if (p.dataSource)\n            this.currentDataSource = p.dataSource;\n\n        const pagination = this.pagination;\n\n        // trigger mobx update\n        const unused1 = pagination.pageSize;\n        const unused2 = pagination.current;\n        const unused3 = this.currentDataSource?.length;\n        const unused4 = this.displayData?.length;\n\n        return <Table<T>\n            style={{ margin: '0', padding: '0' }}\n            size=\"middle\"\n            showSorterTooltip={false}\n            className={styles.kowlTable + \" \" + (p.className ?? '')}\n\n            dataSource={this.displayData}\n            columns={this.customColumns}\n\n            rowKey={p.rowKey}\n            rowClassName={p.rowClassName}\n            onRow={p.onRow}\n\n            pagination={pagination}\n\n            getPopupContainer={findPopupContainer}\n            expandable={p.expandable}\n            footer={this.renderFooter}\n            onChange={(pagination: TablePaginationConfig, filters: Record<string, FilterValue | null>, sorter: SorterResult<T> | SorterResult<T>[], extra: TableCurrentDataSource<T>) => {\n                //\n            }}\n\n            locale={p.emptyText ? { emptyText: p.emptyText } : undefined}\n        />\n    }\n\n    @computed get filterIcon() {\n        return filterIcon(this.filterActive);\n    }\n\n    onFilter = (record: T): boolean => {\n\n        let isMatch: boolean;\n        const regex = this.searchRegex;\n\n        if (!regex) {\n            // Query was set, but regex is not...\n            // We can't search.\n            // Maybe we should color the searchbar red?\n            isMatch = true;\n        }\n        else {\n            const filter = this.props.search?.isRowMatch;\n            if (!filter) {\n                // user did not provide a filter...\n                isMatch = true;\n            }\n            else {\n                isMatch = filter(record, regex);\n            }\n        }\n\n        return isMatch;\n    }\n\n    renderFooter = (currentView: readonly T[]): React.ReactNode => {\n        const pagination = this.pagination;\n\n        // antd bug: 'showTotal' won't be called when no entries match the filters\n        const filteredTotal = currentView.length == 0\n            ? 1\n            : this.filteredTotal;\n\n        // todo: additional footer elements\n        // console.log('footer', clone({\n        //     \"this.filteredTotal\": this.filteredTotal,\n        //     \"viewLen\": currentView.length,\n        //     \"usedFilteredTotal\": filteredTotal,\n        //     \"sourceLen\": this.currentDataSource.length,\n        //     pagination: {\n        //         pageSize: pagination.pageSize,\n        //         current: pagination.current,\n        //         defaultCurrent: pagination.defaultCurrent,\n        //     }\n        // }));\n        if (!this.paginationVisible) return null;\n\n        const source = this.currentDataSource;\n        const sourceTotal = source.length;\n        const usingFilters = filteredTotal < sourceTotal;\n\n        return <Pagination size=\"small\"\n            showSizeChanger\n            total={filteredTotal}\n            showTotal={() => {\n                let text: string;\n                if (sourceTotal == 0)\n                    text = \"\";\n                else if (usingFilters)\n                    if (currentView.length == 0)\n                        text = `No matches`;\n                    else\n                        text = `Showing ${filteredTotal} matches (out of ${sourceTotal} total)`;\n                else\n                    text = `Total ${sourceTotal} items`;\n\n                return <span className='paginationTotal'>{text}</span>\n            }}\n            pageSize={pagination.pageSize}\n            pageSizeOptions={pagination.pageSizeOptions}\n            current={pagination.current ?? pagination.defaultCurrent}\n            onChange={this.onPaginationChange}\n        />\n\n    }\n\n    @action.bound onPaginationChange(page: number, pageSize?: number | undefined) {\n        const settings = this.observableSettings;\n        const pagination = this.pagination;\n\n        console.log('Pagination.onPaginationChange', { page: page, pageSize: pageSize });\n        pagination.current = page;\n        if (pageSize != undefined) {\n            pagination.pageSize = pageSize;\n            settings.pageSize = pageSize;\n        }\n    }\n\n}\n\n// sorter:  SorterResult<T>|SorterResult<T>[]\n//\n// export interface SorterResult<RecordType> {\n//     column?: ColumnType<RecordType>;\n//     order?: SortOrder;\n//     field?: Key | readonly Key[];\n//     columnKey?: Key;\n// }\n//\n//\n// When defining sorter:\n//   sorter: { compare: (a, b) => a.chinese - b.chinese, multiple: 3, }\n// 'multiple' defines priority (sorters are evaluated in ascending order, so sorters with lower 'multiple' come first)\n\nexport type TableSettings = {\n    pageSize: number; // pagination.pageSize\n    quickSearch: string;\n\n    // sorters: {\n    //     columnName: string;\n    //     direction: 'ascending' | 'descending';\n    // }[];\n\n    // todo:\n    // - settings for which columns to search yet\n    // - settings for column width or visibility yet\n};\n\n\n@observer\nexport class SearchTitle extends Component<{\n    title: string,\n    observableFilterOpen: { filterOpen: boolean },\n    observableSettings: { quickSearch: string },\n}>\n{\n    inputRef = React.createRef<Input>(); // reference to input, used to focus it\n\n    constructor(p: any) {\n        super(p);\n        this.hideSearchBar = this.hideSearchBar.bind(this);\n        this.focusInput = this.focusInput.bind(this);\n        this.onKeyDown = this.onKeyDown.bind(this);\n    }\n\n    render() {\n        const props = this.props;\n\n        if (!props.observableFilterOpen.filterOpen)\n            return this.props.title;\n\n        // Render the actual search bar\n\n        // inputRef won't be set yet, so we delay by one frame\n        setImmediate(this.focusInput);\n\n        return <span>\n            <span >{this.props.title}</span>\n            <div className=\"tableInlineSearchBox\"\n                onClick={e => e.stopPropagation()}\n                onMouseDown={e => e.stopPropagation()}\n                onMouseUp={e => e.stopPropagation()}\n                style={{\n                    position: 'absolute', top: 0, right: '36px', bottom: 0, left: 0,\n                    display: 'flex', placeContent: 'center', placeItems: 'center',\n                    padding: '4px 6px',\n                }}\n            >\n                <Input\n                    ref={this.inputRef}\n                    onBlur={e => {\n                        const inputWrapper = e.target.parentElement;\n                        const focusInside = inputWrapper?.contains((e.relatedTarget as HTMLElement));\n\n                        if (focusInside) {\n                            // Most likely a click on the \"clear\" button\n                            props.observableSettings.quickSearch = \"\";\n                            this.hideSearchBar();\n                        } else {\n                            setTimeout(this.hideSearchBar);\n                        }\n                    }}\n                    onKeyDown={this.onKeyDown}\n                    allowClear={true}\n                    placeholder=\"Enter search term/regex\"\n                    value={props.observableSettings.quickSearch}\n\n                    onChange={e => {\n                        props.observableSettings.quickSearch = e.target.value;\n                    }}\n                    style={{ borderRadius: '3px' }}\n                    spellCheck={false}\n                />\n            </div>\n        </span>\n    }\n\n    focusInput() {\n        this.inputRef.current?.focus();\n    }\n\n    hideSearchBar() {\n        this.props.observableFilterOpen.filterOpen = false;\n    }\n\n    onKeyDown(e: React.KeyboardEvent<HTMLInputElement>) {\n        if (e.key == 'Enter' || e.key == 'Escape')\n            this.hideSearchBar();\n    }\n}\n\nfunction filterIcon(filterActive: boolean) {\n    return <div className={filterActive ? 'tableFilterIcon active' : 'tableFilterIcon'}>\n        <SearchOutlined />\n    </div>\n}\n\n// like structural comparer, but ignores functions\nfunction customComparerIsSame<T>(a: T, b: T, remainingDepth?: number): boolean {\n    if (remainingDepth === undefined)\n        remainingDepth = 5;\n\n\n    if (a === undefined && b === undefined) return true;\n    if (a === null && b === null) return true;\n    if (!a && b) return false;\n    if (a && !b) return false;\n    if (typeof a != typeof b) return false;\n\n    if (typeof a == 'function')\n        // consider functions always the same\n        return true;\n\n    if (typeof a != 'object')\n        // primitive\n        return a == b;\n\n    // its an object, but if we already compared too much, dont descend any deeper\n    if (remainingDepth != undefined && remainingDepth <= 0)\n        return a === b;\n\n    // react object?\n    const isReactObject = (a as any)['$$typeof'] == Symbol('react.element');\n    if (isReactObject)\n        return true;    // ignore changes to react components\n\n    // normal object\n    const aKeys = Object.keys(a);\n    const bKeys = Object.keys(b);\n\n    if (aKeys.length != bKeys.length) return false;\n\n    for (let i = 0; i < aKeys.length; i++) {\n        if (aKeys[i] != bKeys[i]) return false;\n\n        const aVal = (a as any)[aKeys[i]];\n        const bVal = (b as any)[bKeys[i]];\n\n        if (typeof aVal != typeof bVal)\n            return false;\n\n        if (!customComparerIsSame(aVal, bVal, remainingDepth - 1))\n            return false;\n    }\n\n    return true;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filterbar\":\"styles_filterbar__26ZPq\",\"filters\":\"styles_filters__2-96D\",\"filterName\":\"styles_filterName__2mpQd\",\"addFilter\":\"styles_addFilter__1Wi4x\",\"metaSection\":\"styles_metaSection__1Zxvp\",\"bytesIcon\":\"styles_bytesIcon__2ZiqJ\",\"time\":\"styles_time__13vWS\",\"timeIcon\":\"styles_timeIcon__1EWKW\",\"deleteButtonWrapper\":\"styles_deleteButtonWrapper__2ovsF\",\"quickSearch\":\"styles_quickSearch__1HEjL\",\"quickSearchWrapper\":\"styles_quickSearchWrapper__AfII3\",\"quickSearchInput\":\"styles_quickSearchInput__1R_pv\"};"],"sourceRoot":""}